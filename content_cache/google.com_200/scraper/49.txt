<!doctype html>
<html lang="en-AU" prefix="og: http://ogp.me/ns#">
 <head> 
  <!-- Document Settings --> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <style>
						.wrapper header nav ul {
							margin-right: 0 !important;
						}
					</style> 
  <title>Promise Based Scraper in Node.js</title> 
  <!-- This site is optimized with the Yoast SEO plugin v5.4.1 - https://yoast.com/wordpress/plugins/seo/ --> 
  <meta name="description" content="I used the Bluebird promise library in Node.js to scrape information from the Magento certified developers directory into MongoDB."> 
  <link rel="canonical" href="https://franciskim.co/promise-based-scraper-in-node-js/"> 
  <meta property="og:locale" content="en_US"> 
  <meta property="og:type" content="article"> 
  <meta property="og:title" content="Promise Based Scraper in Node.js"> 
  <meta property="og:description" content="I used the Bluebird promise library in Node.js to scrape information from the Magento certified developers directory into MongoDB."> 
  <meta property="og:url" content="https://franciskim.co/promise-based-scraper-in-node-js/"> 
  <meta property="og:site_name" content="Francis Kim"> 
  <meta property="article:publisher" content="https://www.facebook.com/franciskim.co/"> 
  <meta property="article:tag" content="automation"> 
  <meta property="article:tag" content="bluebird"> 
  <meta property="article:tag" content="data mining"> 
  <meta property="article:tag" content="javascript"> 
  <meta property="article:tag" content="magento"> 
  <meta property="article:tag" content="node.js"> 
  <meta property="article:tag" content="promises"> 
  <meta property="article:tag" content="scraping"> 
  <meta property="article:section" content="Random"> 
  <meta property="article:published_time" content="2015-11-28T17:24:39+00:00"> 
  <meta property="article:modified_time" content="2016-11-27T01:07:05+00:00"> 
  <meta property="og:updated_time" content="2016-11-27T01:07:05+00:00"> 
  <meta property="og:image" content="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/2015/11/img_565aa67b4a4a7.png?x38627"> 
  <meta property="og:image:secure_url" content="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/2015/11/img_565aa67b4a4a7.png?x38627"> 
  <meta name="twitter:card" content="summary_large_image"> 
  <meta name="twitter:description" content="I used the Bluebird promise library in Node.js to scrape information from the Magento certified developers directory into MongoDB."> 
  <meta name="twitter:title" content="Promise Based Scraper in Node.js"> 
  <meta name="twitter:site" content="@franciskim_co"> 
  <meta name="twitter:image" content="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/2015/11/img_565aa67b4a4a7.png?x38627"> 
  <meta name="twitter:creator" content="@franciskim_co"> 
  <script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"WebSite","@id":"#website","url":"https:\/\/franciskim.co\/","name":"Francis Kim","potentialAction":{"@type":"SearchAction","target":"https:\/\/franciskim.co\/?s={search_term_string}","query-input":"required name=search_term_string"}}</script> 
  <script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"Organization","url":"https:\/\/franciskim.co\/promise-based-scraper-in-node-js\/","sameAs":["https:\/\/www.facebook.com\/franciskim.co\/","https:\/\/www.instagram.com\/franciskim.co\/","https:\/\/au.linkedin.com\/in\/franciskim1","https:\/\/plus.google.com\/u\/0\/+FrancisKim_co","https:\/\/twitter.com\/franciskim_co"],"@id":"#organization","name":"FRANCISKIM.CO Digital Development","logo":"https:\/\/franciskim.co\/wp-content\/uploads\/2017\/06\/franciskim.co-logo.png"}</script> 
  <!-- / Yoast SEO plugin. --> 
  <link rel="dns-prefetch" href="//checkout.stripe.com"> 
  <link rel="dns-prefetch" href="//js.stripe.com"> 
  <link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com"> 
  <link rel="dns-prefetch" href="//s.w.org"> 
  <link rel="alternate" type="application/rss+xml" title="Francis Kim » Feed" href="https://franciskim.co/feed/"> 
  <link rel="alternate" type="application/rss+xml" title="Francis Kim » Comments Feed" href="https://franciskim.co/comments/feed/"> 
  <link rel="alternate" type="application/rss+xml" title="Francis Kim » Promise Based Scraper in Node.js Comments Feed" href="https://franciskim.co/promise-based-scraper-in-node-js/feed/"> 
  <link rel="stylesheet" id="openid-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/openid/f/openid.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="crayon-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="crayon-theme-iris-vfx-fk-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/crayon-syntax-highlighter/themes/iris-vfx-fk/iris-vfx-fk.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="crayon-font-monaco-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="contact-form-7-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/contact-form-7/includes/css/styles.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="sb_instagram_styles-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/instagram-feed/css/sb-instagram.min.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="sb-font-awesome-css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css" media="all"> 
  <link rel="stylesheet" id="dashicons-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-includes/css/dashicons.min.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="post-views-counter-frontend-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/post-views-counter/css/frontend.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="wp-style-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton-child/style.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="bootstrap-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton/assets/css/bootstrap.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="font-awesome-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton/assets/css/font-awesome.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="main-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton/assets/css/style.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="recent-posts-widget-with-thumbnails-public-style-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/recent-posts-widget-with-thumbnails/public.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="stripe-checkout-button-css" href="https://checkout.stripe.com/v3/checkout/button.css" type="text/css" media="all"> 
  <link rel="stylesheet" id="stripe-checkout-pro-pikaday-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/wp-simple-pay-pro-for-stripe/assets/css/vendor/pikaday.min.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="stripe-checkout-pro-public-lite-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/wp-simple-pay-pro-for-stripe/assets/css/shared-public-main.min.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="stripe-checkout-pro-public-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/wp-simple-pay-pro-for-stripe/assets/css/pro-public.min.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="parent-style-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton/style.css?x38627" type="text/css" media="all"> 
  <link rel="stylesheet" id="style-css" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton-child/style.css?x38627" type="text/css" media="all"> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-includes/js/jquery/jquery.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-includes/js/jquery/jquery-migrate.min.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/openid/f/openid.js?x38627"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/franciskim.co\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?x38627"></script> 
  <script type="text/javascript" src="https://js.stripe.com/v2/"></script> 
  <link rel="https://api.w.org/" href="https://franciskim.co/wp-json/"> 
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://franciskim.co/xmlrpc.php?rsd"> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-includes/wlwmanifest.xml"> 
  <meta name="generator" content="WordPress 4.8.2"> 
  <link rel="shortlink" href="https://franciskim.co/?p=371"> 
  <link rel="alternate" type="application/json+oembed" href="https://franciskim.co/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ffranciskim.co%2Fpromise-based-scraper-in-node-js%2F"> 
  <link rel="alternate" type="text/xml+oembed" href="https://franciskim.co/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ffranciskim.co%2Fpromise-based-scraper-in-node-js%2F&amp;format=xml"> 
  <!-- Plugin: Open external links a new window. Plugin by Kristian Risager Larsen, http://kristianrisagerlarsen.dk . Download it at http://wordpress.org/extend/plugins/open-external-links-in-a-new-window/ --> 
  <script type="text/javascript">//<![CDATA[
	function external_links_in_new_windows_loop() {
		if (!document.links) {
			document.links = document.getElementsByTagName('a');
		}
		var change_link = false;
		var force = '';
		var ignore = '';

		for (var t=0; t<document.links.length; t++) {
			var all_links = document.links[t];
			change_link = false;
			
			if(document.links[t].hasAttribute('onClick') == false) {
				// forced if the address starts with http (or also https), but does not link to the current domain
				if(all_links.href.search(/^http/) != -1 && all_links.href.search('franciskim.co') == -1) {
					// alert('Changeda '+all_links.href);
					change_link = true;
				}
					
				if(force != '' && all_links.href.search(force) != -1) {
					// forced
					// alert('force '+all_links.href);
					change_link = true;
				}
				
				if(ignore != '' && all_links.href.search(ignore) != -1) {
					// alert('ignore '+all_links.href);
					// ignored
					change_link = false;
				}

				if(change_link == true) {
					// alert('Changed '+all_links.href);
					document.links[t].setAttribute('onClick', 'javascript:window.open(\''+all_links.href+'\'); return false;');
					document.links[t].removeAttribute('target');
				}
			}
		}
	}
	
	// Load
	function external_links_in_new_windows_load(func)
	{	
		var oldonload = window.onload;
		if (typeof window.onload != 'function'){
			window.onload = func;
		} else {
			window.onload = function(){
				oldonload();
				func();
			}
		}
	}

	external_links_in_new_windows_load(external_links_in_new_windows_loop);
	//]]></script> 
  <!-- Tracking code generated with Simple Universal Google Analytics plugin v1.0.4 --> 
  <script>
                    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                    ga('create', 'UA-61373613-3', 'auto');
                    ga('send', 'pageview');

                    </script> 
  <!-- / Simple Universal Google Analytics plugin -->
  <script type="text/javascript">
(function(url){
	if(/(?:Chrome\/26\.0\.1410\.63 Safari\/537\.31|WordfenceTestMonBot)/.test(navigator.userAgent)){ return; }
	var addEvent = function(evt, handler) {
		if (window.addEventListener) {
			document.addEventListener(evt, handler, false);
		} else if (window.attachEvent) {
			document.attachEvent('on' + evt, handler);
		}
	};
	var removeEvent = function(evt, handler) {
		if (window.removeEventListener) {
			document.removeEventListener(evt, handler, false);
		} else if (window.detachEvent) {
			document.detachEvent('on' + evt, handler);
		}
	};
	var evts = 'contextmenu dblclick drag dragend dragenter dragleave dragover dragstart drop keydown keypress keyup mousedown mousemove mouseout mouseover mouseup mousewheel scroll'.split(' ');
	var logHuman = function() {
		var wfscr = document.createElement('script');
		wfscr.type = 'text/javascript';
		wfscr.async = true;
		wfscr.src = url + '&r=' + Math.random();
		(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(wfscr);
		for (var i = 0; i < evts.length; i++) {
			removeEvent(evts[i], logHuman);
		}
	};
	for (var i = 0; i < evts.length; i++) {
		addEvent(evts[i], logHuman);
	}
})('//franciskim.co/?wordfence_logHuman=1&hid=29E04A458A0942D8ADCBBE04248C8279');
</script> 
  <style>
					.wrapper header,
					.wrapper header nav ul li a,
					.wrapper .portfolio .filters ul li,
					.wrapper header .mobile-menu .line,
					.wrapper header .mobile-menu .line:before,
					.wrapper header .mobile-menu .line:after,
					.wrapper .portfolio .item .overlay,
					.slicknav_menu .slicknav_icon-bar,
					.slicknav_menu .slicknav_icon-bar:before,
					.slicknav_menu .slicknav_icon-bar:after,
					.woocommerce a.button,
					.woocommerce .cart .button,
					.woocommerce .cart input.button,
					.woocommerce-cart .wc-proceed-to-checkout a.checkout-button,
					#cartcontents,
					header nav #minicart,
					.wrapper header .logo,
					header .hamburger .hamburger-inner,
					header .hamburger .hamburger-inner:after,
					header .hamburger .hamburger-inner:before,
					.wrapper .blog-grid .blog-post .blog-post-holder .blog-info {
						-webkit-transition: 0s all;
						-o-transition: 0s all;
						transition: 0s all;
					}
				</style> 
  <style>
					body {
						margin-top: 135px !important;
					}
					.slicknav_menu {
						position: fixed;
						top: 0;
						right: 0;
						z-index: 9999;
					}
					.slicknav_menu .slicknav_nav {
						position: fixed;
						top: 75px;
					}
					@media screen and (max-width: 767px){
						body {
							margin-top: 75px !important;
						}
					}
				</style> 
  <style>
					.wrapper header .logo img { width: 250px; }
				</style> 
  <style>
					footer { text-align: center;}
				</style> 
  <style>
					body {
						font-family: Raleway, sans-serif !important;
					}
				</style> 
  <link rel="shortcut icon" href="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/2016/11/favicon-1.png?x38627"> 
  <!-- Facebook Pixel Code --> 
  <script>
		!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
		n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
		n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
		t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
		document,'script','https://connect.facebook.net/en_US/fbevents.js');
		fbq('init', '936553936422486'); // Insert your pixel ID here.
		fbq('track', 'PageView');
		</script> 
  <noscript>
   &lt;img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=936553936422486&amp;amp;ev=PageView&amp;amp;noscript=1"&gt;
  </noscript> 
  <!-- DO NOT MODIFY --> 
  <!-- End Facebook Pixel Code --> 
  <script>
		document.addEventListener( 'wpcf7mailsent', function( event ) {
    		ga('send', 'event', 'Contact Form', 'submit');
		}, false );
		</script> 
 </head> 
 <body class="post-template-default single single-post postid-371 single-format-standard"> 
  <div class="loader"></div> 
  <div class="wrapper"> 
   <header class="fixed"> 
    <div class="container"> 
     <div class="header"> 
      <div class="row"> 
       <div class="col-md-4"> 
        <div class="logo"> 
         <a href="https://franciskim.co/"> <img src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/2017/06/franciskim.co-logo.png" alt=""> </a> 
        </div> 
       </div> 
       <div class="mobile-menu"> 
        <span class="line"></span> 
       </div> 
       <div class="col-md-8"> 
        <div class="display-none"> 
         <a href="#"> 
          <div class="hamburger-inner"></div> </a> 
        </div> 
        <nav class=""> 
         <ul id="menu" class="menu">
          <li id="menu-item-872" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-872"><a href="https://franciskim.co/">Home</a></li> 
          <li id="menu-item-1043" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1043"><a title="About" href="https://franciskim.co/about/">About</a> 
           <ul class="sub-menu"> 
            <li id="menu-item-1000" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1000"><a href="https://franciskim.co/services/">List of Services</a></li> 
            <li id="menu-item-1001" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1001"><a href="https://franciskim.co/pricing/">Pricing</a></li> 
           </ul> </li> 
          <li id="menu-item-837" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-837"><a href="https://franciskim.co/blog/">Blog</a></li> 
          <li id="menu-item-829" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-829"><a href="#">Links</a> 
           <ul class="sub-menu"> 
            <li id="menu-item-845" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-845"><a title="My Facebook page that isnt much used" target="_blank" href="https://www.facebook.com/franciskim.co/">Facebook</a></li> 
            <li id="menu-item-180" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-180"><a title="Where all my code resides at" target="_blank" href="https://github.com/franciskim">GitHub</a></li> 
            <li id="menu-item-498" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-498"><a title="Follow me on Instagram" target="_blank" href="https://www.instagram.com/franciskim.co/">Instagram</a></li> 
            <li id="menu-item-179" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-179"><a title="Connect with me on LinkedIn" target="_blank" href="https://au.linkedin.com/in/franciskim1">LinkedIn</a></li> 
            <li id="menu-item-263" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-263"><a title="My Node.js packages that Ive developed" target="_blank" href="https://www.npmjs.com/~franciskim">NPM</a></li> 
            <li id="menu-item-914" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-914"><a title="Ive got some products on Product Hunt!" target="_blank" href="https://www.producthunt.com/@franciskim_co">Product Hunt</a></li> 
            <li id="menu-item-826" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-826"><a title="Some beats Ive made in the past" target="_blank" href="http://soundcloud.com/franciskim_co">SoundCloud</a></li> 
            <li id="menu-item-178" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-178"><a title="Follow me on Twitter" target="_blank" href="https://twitter.com/franciskim_co">Twitter</a></li> 
           </ul> </li> 
          <li id="menu-item-182" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-182"><a href="https://franciskim.co/contact/">Get in Touch</a></li> 
         </ul> 
         <footer class="display-none"> 
          <div class="container"> 
           <p><small>#1 on Hacker News | 4 x Magento eCommerce Certified | Amazon Web Services Certified | 200M+ Revenue Yearly</small></p> 
          </div> 
         </footer> 
        </nav> 
       </div> 
      </div> 
     </div> 
    </div> 
   </header> 
   <div class="container"> 
    <div class="blog blog-single"> 
     <div class="row"> 
      <div class="col-md-9 col-sm-9 col-xs-12 blog-content"> 
       <div class="blog-post"> 
        <div class="blog-img"> 
        </div> 
        <div class="blog-info"> 
         <h2>Promise Based Scraper in Node.js</h2> 
         <ul class="post-info"> 
          <li><span>Published 28<sup>th</sup> Nov 2015<br>Last edited 27<sup>th</sup> Nov 2016</span></li> 
         </ul> 
         <div id="attachment_385" style="width: 1376px" class="wp-caption alignnone">
          <img class="size-full wp-image-385" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/2015/11/img_565aa67b4a4a7.png?x38627" alt="Promises/A+ in JavaScript" width="1366" height="768" srcset="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/2015/11/img_565aa67b4a4a7.png?x38627 1366w, https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/2015/11/img_565aa67b4a4a7-300x169.png?x38627 300w, https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/2015/11/img_565aa67b4a4a7-1024x576.png?x38627 1024w, https://d37q6i2m2fcvyp.cloudfront.net/wp-content/uploads/2015/11/img_565aa67b4a4a7-800x450.png?x38627 800w" sizes="(max-width: 1366px) 100vw, 1366px">
          <p class="wp-caption-text">Promises/A+ in JavaScript</p>
         </div> 
         <p id="ZrxkytL">I love automation. And I love scraping. I ended up writing a quick Node.js script to Scrape Magentos Certification Directory to put together a list of Australian &amp; Melbournian Magento Developers / Specialists that are certified.</p> 
         <p>It definitely was a bunch of fun because I tried a new technique based on promises. The promise library I used is a <a href="https://promisesaplus.com/" target="_blank">Promises/A+</a> compliant <a href="http://bluebirdjs.com/" target="_blank">Bluebird</a> library.</p> 
         <p><span id="more-371"></span></p> 
         <p>Without further ado, here is the code:</p>
         <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
         <div id="crayon-59d970a16696a838874766" class="crayon-syntax crayon-theme-iris-vfx-fk crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 25px !important;"> 
          <div class="crayon-plain-wrap">
           <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 15px !important; line-height: 25px !important;">
var Promise = require('bluebird');
var MongoDB = Promise.promisifyAll(require("mongodb"));
var MongoClient = Promise.promisifyAll(MongoDB.MongoClient);
var cheerio = require('cheerio');
var http = require('http');

var urls = [
    'http://www.magentocommerce.com/certification/directory/index/?q=&amp;country_id=AU&amp;region_id=&amp;region=vic&amp;certificate_type=',
    'http://www.magentocommerce.com/certification/directory/index/?q=&amp;country_id=AU&amp;region_id=&amp;region=victoria&amp;certificate_type='
];
var i = 0;
var pause = 10 * 1000;

var fetch = function (url) {
    console.log('Processing', url);
    return new Promise(function (resolve, reject) {
        http.get(url, function (res) {
            var body = "";
            res.setEncoding('utf8');
            res.on('data', function (chunk) {
                body += chunk;
            });
            res.on('end', function () {
                resolve(body);
            })
        });
    });
};

var process = function (url) {
    var devs = [];
    fetch(url)
        .then(function (body) {
            $ = cheerio.load(body);
            $('.results &gt; .row').eq(0).remove(); // remove header row
            return $('.results &gt; .row');
        })
        .then(function (rows) {
            rows.each(function () {
                var dev = {
                    name: $(this).find('div').eq(0).text().trim(),
                    company: $(this).find('div').eq(1).text().trim(),
                    location: $(this).find('div').eq(2).text().trim().replace(',Australia', ', Australia'),
                    certificates: $(this).find('div').eq(3).html().replace('\n', '').trim(),
                    href: $(this).attr('onclick').match(/'(.*?)'/)[1]
                };
                devs.push(dev);
            });
        })
        .then(function () {
            return MongoClient.connectAsync('mongodb://localhost:27017/magento');
        })
        .then(function (db) {
            this.db = db;
            return Promise.all(devs.map(function (dev) {
                return db.collection('melbourne').updateAsync({'name': dev.name}, {$set: dev}, {upsert: true});
            }))
        })
        .then(function (result) {
            console.log('Upserted', result.length, 'records');
            if ($('.main-section .pager a.next').length &gt; 0) {
                setTimeout(function () {
                    process($('.main-section .pager a.next').attr('href'));
                }, pause);
            }
            else if (++i &lt; urls.length) {
                setTimeout(function () {
                    process(urls[i]);
                }, pause);
            }
            else {
                console.log('No more to process, exiting.');
            }
            this.db.close();
        })
        .catch(function (err) {
            throw err;
        });
}

process(urls[i]);</textarea>
          </div> 
          <div class="crayon-main" style=""> 
           <table class="crayon-table"> 
            <tbody>
             <tr class="crayon-row"> 
              <td class="crayon-nums " data-settings="hide"> 
               <div class="crayon-nums-content" style="font-size: 15px !important; line-height: 25px !important;">
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-1">
                 1
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-2">
                 2
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-3">
                 3
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-4">
                 4
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-5">
                 5
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-6">
                 6
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-7">
                 7
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-8">
                 8
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-9">
                 9
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-10">
                 10
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-11">
                 11
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-12">
                 12
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-13">
                 13
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-14">
                 14
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-15">
                 15
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-16">
                 16
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-17">
                 17
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-18">
                 18
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-19">
                 19
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-20">
                 20
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-21">
                 21
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-22">
                 22
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-23">
                 23
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-24">
                 24
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-25">
                 25
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-26">
                 26
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-27">
                 27
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-28">
                 28
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-29">
                 29
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-30">
                 30
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-31">
                 31
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-32">
                 32
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-33">
                 33
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-34">
                 34
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-35">
                 35
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-36">
                 36
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-37">
                 37
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-38">
                 38
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-39">
                 39
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-40">
                 40
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-41">
                 41
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-42">
                 42
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-43">
                 43
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-44">
                 44
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-45">
                 45
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-46">
                 46
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-47">
                 47
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-48">
                 48
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-49">
                 49
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-50">
                 50
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-51">
                 51
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-52">
                 52
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-53">
                 53
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-54">
                 54
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-55">
                 55
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-56">
                 56
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-57">
                 57
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-58">
                 58
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-59">
                 59
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-60">
                 60
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-61">
                 61
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-62">
                 62
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-63">
                 63
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-64">
                 64
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-65">
                 65
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-66">
                 66
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-67">
                 67
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-68">
                 68
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-69">
                 69
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-70">
                 70
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-71">
                 71
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-72">
                 72
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-73">
                 73
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-74">
                 74
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-75">
                 75
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-76">
                 76
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-77">
                 77
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-78">
                 78
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-79">
                 79
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-80">
                 80
                </div>
                <div class="crayon-num" data-line="crayon-59d970a16696a838874766-81">
                 81
                </div>
               </div> </td> 
              <td class="crayon-code">
               <div class="crayon-pre" style="font-size: 15px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                <div class="crayon-line" id="crayon-59d970a16696a838874766-1">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">Promise</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-e">require</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'bluebird'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-2">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">MongoDB</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">Promise</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">promisifyAll</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-e">require</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">"mongodb"</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-3">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">MongoClient</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">Promise</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">promisifyAll</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">MongoDB</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-v">MongoClient</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-4">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">cheerio</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-e">require</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'cheerio'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-5">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">http</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-e">require</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'http'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-6">
                 &nbsp;
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-7">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">urls</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">[</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-8">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-s">'http://www.magentocommerce.com/certification/directory/index/?q=&amp;country_id=AU&amp;region_id=&amp;region=vic&amp;certificate_type='</span>
                 <span class="crayon-sy">,</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-9">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-s">'http://www.magentocommerce.com/certification/directory/index/?q=&amp;country_id=AU&amp;region_id=&amp;region=victoria&amp;certificate_type='</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-10">
                 <span class="crayon-sy">]</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-11">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">i</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-cn">0</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-12">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">pause</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-cn">10</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">*</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-cn">1000</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-13">
                 &nbsp;
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-14">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">fetch</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">url</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-15">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">console</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">log</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'Processing'</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">url</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-16">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">return</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-r">new</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-e">Promise</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">resolve</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">reject</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-17">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">http</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">get</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">url</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">res</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-18">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-e ">body</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-s">""</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-19">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">res</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">setEncoding</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'utf8'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-20">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">res</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">on</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'data'</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">chunk</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-21">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">body</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">+=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">chunk</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-22">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-23">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">res</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">on</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'end'</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-24">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-e">resolve</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">body</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-25">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-26">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-27">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-28">
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-29">
                 &nbsp;
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-30">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">process</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">url</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-31">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">devs</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">[</span>
                 <span class="crayon-sy">]</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-32">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-e">fetch</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">url</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-33">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-st">then</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">body</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-34">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">cheerio</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">load</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">body</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-35">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'.results &gt; .row'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">eq</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-cn">0</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">remove</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-c">// remove header row</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-36">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">return</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'.results &gt; .row'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-37">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-38">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-st">then</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">rows</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-39">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">rows</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-st">each</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-40">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">dev</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-41">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">name</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-r">this</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">find</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'div'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">eq</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-cn">0</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">text</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">trim</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">,</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-42">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">company</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-r">this</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">find</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'div'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">eq</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-cn">1</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">text</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">trim</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">,</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-43">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">location</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-r">this</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">find</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'div'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">eq</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-cn">2</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">text</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">trim</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">replace</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">',Australia'</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-s">', Australia'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">,</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-44">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">certificates</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-r">this</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">find</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'div'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">eq</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-cn">3</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">html</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">replace</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'\n'</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-s">''</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">trim</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">,</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-45">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">href</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-r">this</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">attr</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'onclick'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">match</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-o">/</span>
                 <span class="crayon-s">'(.*?)'</span>
                 <span class="crayon-o">/</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">[</span>
                 <span class="crayon-cn">1</span>
                 <span class="crayon-sy">]</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-46">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-47">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">devs</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">push</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">dev</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-48">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-49">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-50">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-st">then</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-51">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">return</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">MongoClient</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">connectAsync</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'mongodb://localhost:27017/magento'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-52">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-53">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-st">then</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">db</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-54">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-r">this</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-v">db</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">db</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-55">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">return</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">Promise</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">all</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">devs</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">map</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">dev</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-56">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">return</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">db</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">collection</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'melbourne'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">updateAsync</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">{</span>
                 <span class="crayon-s">'name'</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">dev</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-v">name</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-v">set</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">dev</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                 <span class="crayon-v">upsert</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-t">true</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-57">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-58">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-59">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-st">then</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">result</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-60">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">console</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">log</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'Upserted'</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">result</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-v">length</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-s">'records'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-61">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">if</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'.main-section .pager a.next'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-v">length</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">&gt;</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-cn">0</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-62">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-r">setTimeout</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-63">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-e">process</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'.main-section .pager a.next'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">attr</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'href'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-64">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">pause</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-65">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-66">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">else</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-st">if</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-o">++</span>
                 <span class="crayon-v">i</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">&lt;</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">urls</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-v">length</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-67">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-r">setTimeout</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-68">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-e">process</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">urls</span>
                 <span class="crayon-sy">[</span>
                 <span class="crayon-v">i</span>
                 <span class="crayon-sy">]</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-69">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">pause</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-70">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-71">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">else</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-72">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-v">console</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">log</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'No more to process, exiting.'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-73">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-74">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-r">this</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-v">db</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">close</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-75">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-76">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-st">catch</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">err</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-77">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">throw</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">err</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-78">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-79">
                 <span class="crayon-sy">}</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-80">
                 &nbsp;
                </div>
                <div class="crayon-line" id="crayon-59d970a16696a838874766-81">
                 <span class="crayon-e">process</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">urls</span>
                 <span class="crayon-sy">[</span>
                 <span class="crayon-v">i</span>
                 <span class="crayon-sy">]</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
               </div></td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <!-- [Format Time: 0.0118 seconds] --> 
         <p> So the code basically goes through each address in the array <code>urls</code>, with each page that it visits returning a promise object. A chain of <code>.then()</code> goes through each row of developer information, creates a JSON object per developer and stores it in a MongoDB.</p> 
         <p>If a next page button is found, it will go to the next page before visiting the next URL in the <code>urls</code> array.</p> 
         <p>In my opinion, the coolest parts of the code is:</p>
         <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
         <div id="crayon-59d970a166975176228762" class="crayon-syntax crayon-theme-iris-vfx-fk crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-always" style=" margin-top: 12px; margin-bottom: 12px; font-size: 15px !important; line-height: 25px !important;"> 
          <div class="crayon-plain-wrap">
           <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 15px !important; line-height: 25px !important;">
var MongoDB = Promise.promisifyAll(require("mongodb"));
var MongoClient = Promise.promisifyAll(MongoDB.MongoClient);

// -- SNIP --

        .then(function () {
            return MongoClient.connectAsync('mongodb://localhost:27017/magento');
        })
        .then(function (db) {
            this.db = db;
            return Promise.all(devs.map(function (dev) {
                return db.collection('melbourne').updateAsync({'name': dev.name}, {$set: dev}, {upsert: true});
            }))
        })

// -- SNIP --</textarea>
          </div> 
          <div class="crayon-main" style=""> 
           <table class="crayon-table"> 
            <tbody>
             <tr class="crayon-row"> 
              <td class="crayon-nums " data-settings="hide"> 
               <div class="crayon-nums-content" style="font-size: 15px !important; line-height: 25px !important;">
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-1">
                 1
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-2">
                 2
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-3">
                 3
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-4">
                 4
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-5">
                 5
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-6">
                 6
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-7">
                 7
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-8">
                 8
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-9">
                 9
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-10">
                 10
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-11">
                 11
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-12">
                 12
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-13">
                 13
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-14">
                 14
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-15">
                 15
                </div>
                <div class="crayon-num" data-line="crayon-59d970a166975176228762-16">
                 16
                </div>
               </div> </td> 
              <td class="crayon-code">
               <div class="crayon-pre" style="font-size: 15px !important; line-height: 25px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                <div class="crayon-line" id="crayon-59d970a166975176228762-1">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">MongoDB</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">Promise</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">promisifyAll</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-e">require</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">"mongodb"</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-2">
                 <span class="crayon-t">var</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">MongoClient</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">Promise</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">promisifyAll</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">MongoDB</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-v">MongoClient</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-3">
                 &nbsp;
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-4">
                 <span class="crayon-c">// -- SNIP --</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-5">
                 &nbsp;
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-6">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-st">then</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-7">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">return</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">MongoClient</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">connectAsync</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'mongodb://localhost:27017/magento'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-8">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-9">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-st">then</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">db</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-10">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-r">this</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-v">db</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-o">=</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">db</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-11">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">return</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">Promise</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">all</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">devs</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">map</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-t">function</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-v">dev</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-12">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-st">return</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">db</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">collection</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-s">'melbourne'</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-e">updateAsync</span>
                 <span class="crayon-sy">(</span>
                 <span class="crayon-sy">{</span>
                 <span class="crayon-s">'name'</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">dev</span>
                 <span class="crayon-sy">.</span>
                 <span class="crayon-v">name</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                 <span class="crayon-sy">$</span>
                 <span class="crayon-v">set</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-v">dev</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">,</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-sy">{</span>
                 <span class="crayon-v">upsert</span>
                 <span class="crayon-o">:</span>
                 <span class="crayon-h"> </span>
                 <span class="crayon-t">true</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">;</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-13">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-14">
                 <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                 <span class="crayon-sy">}</span>
                 <span class="crayon-sy">)</span>
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-15">
                 &nbsp;
                </div>
                <div class="crayon-line" id="crayon-59d970a166975176228762-16">
                 <span class="crayon-c">// -- SNIP --</span>
                </div>
               </div></td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
         </div> 
         <!-- [Format Time: 0.0025 seconds] --> 
         <p> which pretty much turns a callback based <a href="https://github.com/mongodb/node-mongodb-native" target="_blank">MongoDB native Node.js driver</a> to a promise based one. Itll do a bunch of inserts (upsert) as promises and only when those promises resolve, goes to the next <code>.then()</code></p> 
         <p>You can <a href="https://franciskim.co/2015/11/24/list-of-magento-developers-in-melbourne/" target="_blank">see the result of this code here</a>&nbsp;or view it as a <a href="https://gist.github.com/franciskim/accc5d39b526ea80e441" target="_blank">GitHub Gist.</a></p> 
         <div class="awac-wrapper">
          <div class="awac widget text-2">
           <h4 class="widget-title">Featured Content</h4> 
           <div class="textwidget">
            <p><a href="https://franciskim.co/1-year-1-million/">The 1 Year to $1 Million Project</a></p> 
            <p><a href="https://franciskim.co/dont-need-no-stinking-api-web-scraping-2016-beyond/">I Dont Need No Stinking API  Web Scraping in 2016 and Beyond</a></p> 
            <p><a href="https://franciskim.co/petya-ransomware-live-counter-ransom-dollars-paid/">Petya Ransomware: Live Counter of Ransom Dollars Paid</a></p> 
            <p><a href="https://franciskim.co/cracking-googles-recaptcha-machine-learning/">Cracking Googles reCAPTCHA with Machine Learning (TensorFlow)</a></p> 
           </div> 
          </div>
         </div> 
        </div> 
       </div> 
       <div id="comments" class="comments"> 
        <h3>Comments</h3> 
        <div class="col-md-12"> 
         <ul class="comments-list"> 
          <li class="" id="comment-1449" itemscope itemtype="http://schema.org/Comment"> 
           <div class="row"> 
            <div class="comment col-md-12"> 
             <div class="pic"> 
              <img alt="" src="https://secure.gravatar.com/avatar/52bad6c2e5375f389955d89d7f559a7b?s=65&amp;r=g" srcset="https://secure.gravatar.com/avatar/52bad6c2e5375f389955d89d7f559a7b?s=130&amp;r=g 2x" class="avatar avatar-65 photo" height="65" width="65"> 
             </div> 
             <div class="comment-content"> 
              <h4>Ben P</h4> 
              <span>December 1, 2015 at 7:43 pm</span> 
              <p></p>
              <p>Francis, this looks very clear. Thanks for posting it.</p> 
              <p>Im wondering what your take would be on the problem of the link-following request failing or timing out? No need for code, of course, but would you mind sharing how you would probably modify the scraper to handle this?</p> 
              <p>Thanks again!</p> 
              <p></p> 
             </div> 
            </div> 
           </div> </li> 
         </ul> 
         <ul class="comments-list"> 
          <li class="comment byuser comment-author-franciskim bypostauthor even thread-even depth-1 single-comment clearfix col-md-12" id="comment-1450" itemscope itemtype="http://schema.org/Comment"> 
           <div class="row"> 
            <div class="comment col-md-12"> 
             <div class="pic"> 
              <img alt="" src="https://secure.gravatar.com/avatar/8d9aba79be37c3e972c9d572ee7dc66b?s=65&amp;r=g" srcset="https://secure.gravatar.com/avatar/8d9aba79be37c3e972c9d572ee7dc66b?s=130&amp;r=g 2x" class="avatar avatar-65 photo" height="65" width="65"> 
             </div> 
             <div class="comment-content"> 
              <h4>Francis Kim</h4> 
              <span>December 1, 2015 at 8:19 pm</span> 
              <p></p>
              <p>Hi Ben,</p> 
              <p>I havent made it deliberately fail to test but <code>.catch()</code> should catch any errors and you could also place a <code>.reject()</code> when the http call errors.</p> 
              <p></p> 
             </div> 
            </div> 
           </div> </li> 
         </ul> 
         <ul class="comments-list"> 
          <li class="comment odd alt thread-odd thread-alt depth-1 single-comment clearfix col-md-12" id="comment-3036" itemscope itemtype="http://schema.org/Comment"> 
           <div class="row"> 
            <div class="comment col-md-12"> 
             <div class="pic"> 
              <img alt="" src="https://secure.gravatar.com/avatar/783f8117697751c5f7b6101c51d206e5?s=65&amp;r=g" srcset="https://secure.gravatar.com/avatar/783f8117697751c5f7b6101c51d206e5?s=130&amp;r=g 2x" class="avatar avatar-65 photo" height="65" width="65"> 
             </div> 
             <div class="comment-content"> 
              <h4>Vince</h4> 
              <span>May 3, 2017 at 3:21 pm</span> 
              <p></p>
              <p>doesnt pull anything into the DB</p> 
              <p></p> 
             </div> 
            </div> 
           </div> </li> 
         </ul> 
        </div> 
        <div class="row"> 
         <div class="col-md-12"> 
          <h3 style="margin-top: 45px;">Write a comment</h3> 
         </div> 
        </div> 
        <div class="comment-form"> 
         <div id="respond" class="comment-respond"> 
          <h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="/promise-based-scraper-in-node-js/#respond" style="display:none;">Cancel reply</a></small></h3> 
          <form action="https://franciskim.co/wp-comments-post.php" method="post" id="commentform" class="comment-form"> 
           <p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p>
           <div class="form row" style="margin-top:0;">
            <div class="col-md-12">
             <textarea id="comment" name="comment" placeholder="Your comment"></textarea>
            </div>
           </div>
           <div class="form row"> 
            <div class="col-md-4"> 
             <input type="text" id="author" name="author" placeholder="Name"> 
            </div> 
            <div class="col-md-4"> 
             <input type="email" id="email" name="email" placeholder="Email"> 
            </div> 
            <div class="col-md-4"> 
             <input type="text" id="website" name="website" placeholder="Website"> 
            </div> 
           </div> 
           <p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="371" id="comment_post_ID"> <input type="hidden" name="comment_parent" id="comment_parent" value="0"> </p>
           <p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="6841b027e3"></p> 
           <span id="openid_comment"> <label> <input type="checkbox" id="login_with_openid" name="login_with_openid" checked> Authenticate this comment using <span class="openid_link">OpenID</span>. </label> </span> 
           <script type="text/javascript">jQuery(function(){ add_openid_to_comment_form('https://franciskim.co/index.php', 'af60c852ff') })</script> 
           <p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="105"></p> 
          </form> 
         </div>
         <!-- #respond --> 
        </div> 
       </div>
       <!-- #comments --> 
       <div class="hidden"> 
       </div> 
      </div> 
      <div class="col-md-3 col-sm-3 col-xs-12 sidebar"> 
      </div> 
     </div> 
    </div> 
    <div class="clear"></div> 
    <footer> 
     <!-- Begin MailChimp Signup Form --> 
     <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css"> 
     <style type="text/css">
						#mc_embed_signup{background:transparent; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%; margin:50px auto; max-width:480px;}
						/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
						   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
					</style> 
     <div id="mc_embed_signup"> 
      <form action="//franciskim.us16.list-manage.com/subscribe/post?u=87da45b22a6d699638b148c45&amp;id=054b841924" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate> 
       <div id="mc_embed_signup_scroll"> 
        <label for="mce-EMAIL">Super Exclusive Newsletter (just 1 each year)</label> 
        <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required> 
        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> 
        <div style="position: absolute; left: -5000px;" aria-hidden="true">
         <input type="text" name="b_87da45b22a6d699638b148c45_054b841924" tabindex="-1" value="">
        </div> 
        <div class="clear">
         <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div> 
       </div> 
      </form> 
     </div> 
     <!--End mc_embed_signup--> 
     <p><small>#1 on Hacker News | 4 x Magento eCommerce Certified | Amazon Web Services Certified | 200M+ Revenue Yearly</small></p> 
    </footer> 
   </div> 
  </div> 
  <link rel="stylesheet" id="Raleway-css" href="https://fonts.googleapis.com/css?family=Raleway%3A500%2C900" type="text/css" media="all"> 
  <script type="text/javascript">
/* <![CDATA[ */
var wpcf7 = {"apiSettings":{"root":"https:\/\/franciskim.co\/wp-json\/contact-form-7\/v1","namespace":"contact-form-7\/v1"},"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}},"cached":"1"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/contact-form-7/includes/js/scripts.js?x38627"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var sb_instagram_js_options = {"sb_instagram_at":"2539529.1654d0c.56f83b5e4f2f46c09581efd97ee23ccc"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/instagram-feed/js/sb-instagram.min.js?x38627"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var pvcArgsFrontend = {"mode":"js","requestURL":"https:\/\/franciskim.co\/wp-admin\/admin-ajax.php","postID":"371","nonce":"25ef95620d"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/post-views-counter/js/frontend.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton/assets/js/bootstrap.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton/assets/js/isotope.pkgd.min.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton/assets/js/jquery.slicknav.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton/assets/js/owl.carousel.min.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/themes/proton/assets/js/main.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-includes/js/comment-reply.min.js?x38627"></script> 
  <script type="text/javascript" src="https://checkout.stripe.com/checkout.js"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/wp-simple-pay-pro-for-stripe/assets/js/vendor/accounting.min.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/wp-simple-pay-pro-for-stripe/assets/js/vendor/parsley.min.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/wp-simple-pay-pro-for-stripe/assets/js/vendor/moment.min.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/wp-simple-pay-pro-for-stripe/assets/js/vendor/pikaday.min.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/wp-simple-pay-pro-for-stripe/assets/js/vendor/pikaday.jquery.js?x38627"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var simplePayFrontendGlobals = {"ajaxurl":"https:\/\/franciskim.co\/wp-admin\/admin-ajax.php","nonce":"d569b93556","paymentSubmittingButtonLabel":"Please wait...","couponAmountOffText":"off","zeroAmountCheckoutButtonLabel":"Start Now","zeroDecimalCurrencies":["BIF","CLP","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","VND","VUV","XAF","XOF","XPF"],"scriptDebug":"false"};
var simplePayFormSettings = null;
/* ]]> */
</script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/wp-simple-pay-pro-for-stripe/assets/js/pro-public.min.js?x38627"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var simplePaySubscriptionsFrontendGlobals = {"intervalEveryText":"every","trialCheckoutButtonLabel":"Start Free Trial"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/wp-simple-pay-pro-for-stripe-subscriptions-add-on/assets/js/sub-public.min.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-includes/js/wp-embed.min.js?x38627"></script> 
  <script type="text/javascript" src="https://d37q6i2m2fcvyp.cloudfront.net/wp-content/plugins/akismet/_inc/form.js?x38627"></script>   
  <!-- Performance optimized by W3 Total Cache. Learn more: https://www.w3-edge.com/products/

Object Caching 1700/1895 objects using disk
Page Caching using disk: enhanced
Content Delivery Network via Amazon Web Services: CloudFront: d37q6i2m2fcvyp.cloudfront.net
Database Caching using disk

 Served from: franciskim.co @ 2017-10-08 11:26:09 by W3 Total Cache -->
 </body>
</html>