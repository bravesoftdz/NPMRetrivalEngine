<!doctype html>
<html lang="en-US">
 <head> 
  <title>Simple Augmented Reality With OpenCV, Three.js And WebSockets – Smashing Magazine</title> 
  <meta charset="UTF-8"> 
  <link rel="dns-prefetch" href="https://media-mediatemple.netdna-ssl.com/"> 
  <link rel="dns-prefetch" href="https://auslieferung.commindo-media-resourcen.de/"> 
  <link rel="preconnect" href="https://media-mediatemple.netdna-ssl.com"> 
  <link rel="preconnect" href="https://auslieferung.commindo-media-resourcen.de/"> 
  <style id="smash-above-the-fold-css">body,svg:not(:root){overflow:hidden}a,button,input{margin:0}.cahe,.ntb,h4{text-transform:uppercase}.bobo08{border-bottom:.08em solid rgba(0,0,0,.1)}.bo08{border:.08em solid rgba(0,0,0,.1)}article,aside,b,body,div,figcaption,figure,form,h1,h2,h3,h4,html,img,label,li,nav,p,span,strong,ul{font-size:100%;vertical-align:baseline;margin:0;padding:0;outline:0;border:0;background:0 0}html{-moz-osx-font-smoothing:grayscale;text-rendering:optimizelegibility;-webkit-font-feature-settings:"liga","kern";font-feature-settings:"liga","kern";overflow-y:scroll;overflow-x:hidden}body{line-height:1.46;max-width:2000px;color:#333;background-image:url(https://media-mediatemple.netdna-ssl.com/wp-content/themes/smashing-magazine/assets/images/smbg.png)}a{font-size:100%;text-decoration:none;vertical-align:baseline;padding:0;background:0 0;color:#41b7d8}a:active{color:#fff;background-color:#e53b2c}.pap a,li a,p a{border-bottom:.08em solid rgba(0,0,0,.1);padding-bottom:.08em}br+em a,figcaption a{border-bottom:.09em solid rgba(0,0,0,.1);padding-bottom:.09em}.pmd a,nav a{padding-bottom:0;border:0}img{max-width:100%;height:auto;border:0}ul{list-style:none}ol{list-style:decimal}article ul{list-style:disc}article ol,article ul{font-size:1.125em;margin:.5em 1.5em}article li{padding:.25em 0}article li ol,article li ul{font-size:1em;margin:0 1.5em}input{vertical-align:middle}[type=submit],button,label{cursor:pointer}[type=text],button{font-size:1.125em;outline:0;-webkit-transition:border-color .3s;transition:border-color .3s}button{vertical-align:top;overflow:visible;padding:.75em 2em;border:.08em solid #c73a11;color:#fff;background-color:#e95c33;background:-webkit-linear-gradient(top,#e85c33 0,#e53a2b 100%);background:linear-gradient(to bottom,#e85c33 0,#e53a2b 100%);border-radius:.5em}.sr,.stb{overflow:hidden;white-space:nowrap}[type=text]:placeholder{color:#777}[type=text]{line-height:1.5;margin-bottom:1em;padding:.5em;color:#777;border:.08em solid rgba(0,0,0,.1);background-color:#fff;border-radius:.5em 0 0 .5em}@-ms-viewport{width:device-width}body,button,input,label{font-family:"Proxima Nova Regular","Segoe UI",Roboto,"Droid Sans","Helvetica Neue",Arial,sans-serif;font-style:normal;font-weight:400}.cahe,.cat h3,.category .cat h2,.ntb,b,h4,strong{font-family:'Proxima Nova Bold',"Segoe UI",Roboto,"Droid Sans","Helvetica Neue",Arial,sans-serif;font-style:normal;font-weight:700}.ed+p,.pmd .a,.pmd+p{font-family:"Skolar Regular","Roboto Slab","Droid Serif",Cambria,Georgia,"Times New Roman",Times,serif;font-weight:400;font-style:normal}.ed+p em,.pmd+p em{font-family:'Skolar Italic',"Roboto Slab","Droid Serif",Cambria,Georgia,"Times New Roman",Times,serif;font-weight:400;font-style:italic}.ed+p b,.ed+p strong,.pmd+p b,.pmd+p strong{font-family:'Skolar Bold',"Roboto Slab","Droid Serif",Cambria,Georgia,"Times New Roman",Times,serif;font-weight:700;font-style:normal}h2,h3{font-family:"Skolar Bold","Segoe UI Bold","Roboto Slab","Droid Serif",AvenirNext-Bold,"Avenir Bold",Georgia,"Times New Roman",Times,serif;font-weight:700;font-style:normal}.clearfix::after,.clearfix::before{content:" ";display:table}.clearfix::after{clear:both}.sr{text-indent:200%;height:.008em;width:.008em}.blocked,.ch,.mise,.mn ul,.mnc,.ms form,.msc,.nw,.pmd .pt,.po,.sb,.short,.sn{display:none}.ad .declare,.cahe,.long,.pmd li,.sr,article,figure,label,nav{display:block}.poptag a h2 a,.tags a,h3 .hsl,h4 .hsl{display:inline-block}.awithus,.blocked figure,.gra,.ntb,.stb{float:right}.mn,.mnb,.ms,.pt,.sr{position:absolute}.h,.h .awithus,.poptag a,.pt img,aside,button,div,form,h3 .hsl,h4 .hsl,li,ul{position:relative}.h{z-index:80;width:38.2%;margin-left:5.5%;padding:1.25em 0}.ntb,.stb{padding:.4em}.mnb{top:1.5em;right:1.5em;z-index:90}.ntb,.stb{box-sizing:border-box;border:.08em solid #c73a11;border-radius:.25em;box-shadow:0 .08em .08em rgba(0,0,0,.25)}.ntb{margin-left:1em;color:#fff;background:#e95c33}.stb{text-indent:150%;width:2.9375em;background:url(https://media-mediatemple.netdna-ssl.com/wp-content/themes/smashing-magazine/assets/images/search-icon.svg) 50% 50% no-repeat,#e95c33;background-size:1.875em auto;-webkit-background-size:1.875em}.mn,.ms{width:100%;height:0;max-height:0;padding-top:0;opacity:0;-webkit-transition:none;transition:none}.cc,.post{margin-bottom:2em}.fluid{padding-bottom:1.5em;background-color:#fff;box-shadow:0 0 .625em .08em rgba(0,0,0,.05)}.grid{margin-top:1.25em}.post{padding:.5em 5.5% 4em;border-bottom:.3125em solid #41b7d8}h2{font-size:2em;line-height:1.1}h2 a{color:#333}.cahe{font-size:.45em;line-height:1.5;letter-spacing:.08em;padding-bottom:.5em;color:#41b7d8}article{line-height:1.55}article p{font-size:1.125em}.ed+p,.pmd .a,.pmd+p{font-size:1.375em;line-height:1.35;margin:0}h3{font-size:1.625em;line-height:1.3}h4{font-size:1.125em;letter-spacing:.125em}h3,h4{padding:1.5em 0 .5em}figure img,p,p img{padding:.5em 0}figure{margin:1em 0}.mcc{padding-top:1em;width:12.5em}.pmd{padding-bottom:2em;margin:0}.pmd li{padding-left:1.5em;margin-top:1em;color:rgba(0,0,0,.3)}.pmd .a{padding:.5em .5em .5em 0;border-bottom:.08em solid rgba(0,0,0,.1)}.tags a{margin:0 1em .5em 0;border-bottom:.08em solid transparent}.tags a:first-child{margin-top:0}.tags a::after{content:", "}.tags a:last-child::after{content:""}.cat{border-top:.625em solid;border-bottom:.08em solid;border-color:#e5e5e5;margin:2em 5.5% 3em;padding:1em 0 1.25em}.cat h2{margin-bottom:.5em}.cat h3{font-size:1.25em}.poptag a{padding:.25em .5em;margin:0 .5em .5em 0;border-bottom:.08em solid rgba(0,0,0,.1);background:#a1a1a1;border-radius:.25em}.gra{padding:1.25em .75em 1.25em 1.5em}.avatar{border-radius:50%}.sf label,.sfm label{font-weight:400;color:rgba(0,0,0,.25);margin:-.8em 0 .5em}.sf button{line-height:2.25;left:-.3125em;width:23%;height:2.375em;padding:0 1%;border-left:0;border-radius:0 .5em .5em 0}.sf [type=text]{width:73%;height:1.5em;padding:.375em 0 .375em 2%;margin-bottom:0;border-right:0}.declare{float:left;margin:.875em 0 .5em;color:rgba(0,0,0,.25)}.awithus{margin-top:.875em;z-index:9}.ad .declare{font-size:1em;float:none;padding:1em 0 .5em;margin-top:0}.cad{margin-bottom:1.5em}.blocked{margin:1em 5.5%;padding:1em 1.5em;background:#f9f9f9;border-radius:.5em}.blocked figure{float:right;margin:0 0 0 1em}.pt{top:0;right:-2em}.pt img{float:left;border:.08em solid rgba(0,0,0,.1);border-radius:.3125em}@media screen and (min-width:31.25em){.h{width:28.55%}.pmd li{display:inline-block;padding-right:2em}.pmd .a{display:block}.tags a{display:inline;margin:0}}@media screen and (min-width:38.125em){.grid{padding:.5em 0}.pmd .pt{display:block}}@media screen and (min-width:40.625em){.ad{float:right;margin:0 0 1em 2em}}@media screen and (min-width:50em){body{border-left:.625em solid transparent}.h,.mn,.mn+.mnc,.mn:target,.mn:target+.mnc,.ms,.ms+.msc,.ms:target,.ms:target+.msc{display:none}.ch,.ch li a,.mise,.nw,.nw a,.sn,.sn li a{display:block}.mnb,.mnb a{overflow:hidden;top:-.5em;right:0;height:.01em;width:.01em;padding:0}.ch,.main{float:right}.cc,.ch li,.col,.nw,.nw li{float:left}.nw{width:79%}.nw li{border-right:.08em solid rgba(0,0,0,.05)}.nw li a{padding:2.5em 1em .5em;height:1.75em;color:rgba(0,0,0,.3);-webkit-transition:color .3s,background-color .3s;transition:color .3s,background-color .3s}.nw .current{z-index:2;width:24%;background:#fff}.nw .current a{padding:1.5em 1em 0;height:3.3125em;-webkit-transition:none;transition:none}.nw .current a:focus,.nw .current a:hover{background-color:#fff}.nw .current img{position:relative;top:-.125em}.ch{margin:2.5em 4% 0 0;z-index:50}.ch li{margin-left:.625em}.ch li a{text-indent:100%;overflow:hidden;white-space:nowrap;width:1.4375em;height:1.4375em;background-image:url(https://media-mediatemple.netdna-ssl.com/wp-content/themes/smashing-magazine/assets/images/channels.svg);background-size:353% 600%;opacity:.45;-webkit-transition:all .3s;transition:all .3s}.rss a{background-position:76% 35.5%}.fb a{background-position:76% 62%}.tw a{background-position:76% 90%}.nl a{background-position:76% 9%}.cc{width:100%}.main{width:80%;padding:0;margin-top:1.5em}.mise form{margin:1em 0 2em 5.5%}.mise [type=text]{height:1.125em;padding:1em 2.5%}.mise button{line-height:3.125;width:17.5%;height:3.25em}.sn{width:20%}.sct{margin:2em 0}.sn ul{margin-left:-.08em}.sn li{border-left-width:.625em;border-left-style:solid;padding-bottom:2.25em;-webkit-transition:border-color .3s;transition:border-color .3s}.sn li a{font-family:'Proxima Nova Bold',"Segoe UI",Roboto,"Droid Sans","Helvetica Neue",Arial,sans-serif;font-style:normal;font-weight:700;text-transform:uppercase;letter-spacing:.175em;color:#333;padding:.25em .5em .25em 20%;border-bottom:.08em solid transparent;-webkit-transition:background-color .3s;transition:background-color .3s}.sn li li{border:0;margin-left:.08em;padding-bottom:0}.sn li li a{font-family:"Proxima Nova Regular","Segoe UI",Roboto,"Droid Sans","Helvetica Neue",Arial,sans-serif;font-style:normal;font-weight:400;letter-spacing:0;text-transform:none;color:#777;border:0;padding-left:20%;margin:0;-webkit-transition:color .3s,background-color .3s;transition:color .3s,background-color .3s}.menu-item-coding{border-left-color:#C9E9E5}.menu-item-design{border-left-color:#CDEEAA}.menu-item-mobile{border-left-color:#F9F0A8}.menu-item-graphics{border-left-color:#E0CFDF}.menu-item-uxdesign{border-left-color:#FACED2}.menu-item-wordpress{border-left-color:#BCD8F0}.cat{padding-left:5.5%;padding-right:5.5%}.post{padding-left:11%}.blocked{margin-left:11%}article img{max-width:31.25em}.fwi img{max-width:100%}}@media screen and (min-width:63.75em){.wg h3,.wg h3 a{position:relative}.so img,.so p{overflow:hidden}.mise,.sn li ul{display:none}.sb,.sb .sf{display:block}.sn li,.so img{float:left}.bnnr-list,.wg{clear:both}.nw .current{width:21%}.main,.sn{width:100%}.ch{margin-right:1em}.main{margin-top:-.5em}.post{padding-left:5.5%}.blocked{margin-left:5.5%}.sn{margin-top:0;margin-bottom:0}.sn ul{margin:1em 0 0;padding:0 0 0 5.5%;border-bottom:.3125em solid rgba(0,0,0,.06)}.sn li{border-left-width:0;border-right:.08em solid #e5e5e5;border-bottom-width:.3125em;border-bottom-style:solid;margin-bottom:-.3125em;padding-bottom:0}.sn li:last-child{border-right:0}.sn li a{font-size:.75em;border:0;padding:.75em .9em}.sct{margin-top:-.5em}.menu-item-coding{border-bottom-color:#C9E9E5}.menu-item-design{border-bottom-color:#CDEEAA}.menu-item-mobile{border-bottom-color:#F9F0A8}.menu-item-graphics{border-bottom-color:#E0CFDF}.menu-item-uxdesign{border-bottom-color:#FACED2}.menu-item-wordpress{border-bottom-color:#BCD8F0}h2{padding-top:.5em}.cc{margin-right:-28.125em}.fluid{margin-right:28.125em;border-radius:0 .625em .625em 0}.cat{padding-left:0;padding-right:0;margin-top:2em;margin-right:5.5%}.sb{z-index:3}.sb .sf form{margin:0}.sb .sf .sl{padding:2em 0 .125em}.sb .sf [type=text]{height:1.5em;padding:.375em 0 .375em 2%}.sb .sf button{line-height:2.25;width:23%;height:2.375em}.side{padding:0 0 0 1.25em;width:26.25em;top:-3.325em}.bw{margin:0 0 1.25em}.bw .awithus{margin-right:.5em}.bw p{padding-top:0}.faw{margin-top:1.5em}.bnnr-list li{font-size:.75em;text-align:center;width:48%;display:inline-block;margin:0 2% 1em 0}.bnnr-list a{border-bottom:0}.bnnr-list .double{width:34.16667em}.wg{margin:1.5em 0 1.5em -1.25em;padding:0 1.25em 2em;border:.08em solid rgba(0,0,0,.1);border-left:0;background:rgba(255,255,255,.55);border-radius:0 .625em .625em 0}.wg form{margin:.75em 0 1em}.wg li{list-style:none;padding:1em 0}.wg h3{padding-left:2.5em}.wg h3 img{position:absolute;left:-2.5em;top:0}.sb .mcf input{width:66%}.sb .mcf input+.submit{width:30%}.so div,.wg li{border-bottom:.08em solid rgba(0,0,0,.05)}.so div{margin-top:.5em}.so p{line-height:1.55;padding-top:1.125em}.so img{margin:1.5em 1.5em 0 0;border-radius:.5em}.fir{padding:0 1.5em 1.75em 0}.sec{padding-bottom:1.75em}}@media screen and (min-width:76.25em){.sn li,.sn ul{border-bottom:0}.nw{width:50%}.nw .current{width:29%}.nw .current img{top:-.4375em}.main{width:78%;margin-top:1.8%}.archive .main,.sn{margin-top:4%}.post{padding-top:0}.sn{width:22%}.sn ul{margin:0;padding:0 2.5% 0 0}.sn li{border-right:0;border-left-width:.625em;border-left-style:solid;float:none;margin-bottom:0;padding-bottom:2.25em}.sn li a{font-size:1em;border:none;border-bottom:.08em solid transparent;padding:.25em .5em .25em 25%}.sn li ul{padding:0;margin-left:-.08em;display:block}.sn li ul li{padding-bottom:0;border:0}.sn li ul li a{margin-top:0;padding-left:25%;border:0}.sct{margin:0 0 1em;z-index:99}.menu-item-coding{border-left-color:#C9E9E5}.menu-item-design{border-left-color:#CDEEAA}.menu-item-mobile{border-left-color:#F9F0A8}.menu-item-graphics{border-left-color:#E0CFDF}.menu-item-uxdesign{border-left-color:#FACED2}.menu-item-wordpress{border-left-color:#BCD8F0}.cat{margin-top:0;padding-left:5.5%;padding-right:5.5%}.ch{margin-right:28.125em}}@media screen and (min-width:90.625em){.nw li,body{border:0}.ch,.nw,.nw li{float:none}.tn{float:left;width:10%}.nw{width:auto}.nw li{border-bottom:.08em solid rgba(0,0,0,.1)}.nw li a{padding:1em 0 1em 1.375em}.nw .current{margin:.6em 0 0;width:auto;box-shadow:none}.nw .current a{padding:1.5em 0 1em 1.5em;height:auto}.nw .current img{top:0;left:-.5em}.ch{margin:1.25em 0 0 .875em}.ch li{margin-left:0;margin-right:.5em}.cc{width:90%;border-top:.625em solid transparent}.fluid{border-radius:0 .625em .625em}.grid{margin-top:2.3em}.side{top:0}.mise{top:1.65em;padding-bottom:1em}.sb .sf .sl{margin:1.5em 0 0;padding-top:0}}@media screen and (min-width:100em){body{font-size:1.15em}.post{padding-left:11%;padding-right:11%}.blocked{margin:1em 11%}.sn{margin-top:3.65%}.sn ul li ul{margin-left:-.08em}.ch{margin:1.5em 0 0 1.5em}.ad,.ch{font-size:.86957em}.wg{margin-left:-1.08696em}.cc{margin-right:-24.45652em}.fluid{margin-right:24.45652em}.side{width:22.82609em;padding-left:1.08696em}.bnnr-list .double{width:29.71015em}article p{padding:.75em 0}article li{padding:.5em 0}article img{max-width:27.17391em}.fwi img{max-width:100%}.cat{margin-left:5.5%}.pt{top:-.5em;right:-5em}}@media screen and (min-width:63.75em) and (max-width:70.3125em){.long{display:none}.short{display:block}}</style>
  <script>!function(e){"use strict";function t(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function n(t,n){return e.localStorage&&localStorage[t+"_content"]&&localStorage[t+"_file"]===n}function o(t,o){if(e.localStorage&&e.XMLHttpRequest)n(t,o)?r(localStorage[t+"_content"]):a(t,o);else{var i=l.createElement("link");i.href=o,i.id=t,i.rel="stylesheet",i.type="text/css",l.getElementsByTagName("head")[0].appendChild(i),l.cookie=t}}function a(e,t){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(r(n.responseText),localStorage[e+"_content"]=n.responseText,localStorage[e+"_file"]=t)},n.send()}function r(e){var t=l.createElement("style");t.setAttribute("type","text/css"),l.getElementsByTagName("head")[0].appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e}var l=e.document,i=function(e,t,n){function o(e){return l.body?e():void setTimeout(function(){o(e)})}function a(){i.addEventListener&&i.removeEventListener("load",a),i.media=n||"all"}var r,i=l.createElement("link");if(t)r=t;else{var s=(l.body||l.getElementsByTagName("head")[0]).childNodes;r=s[s.length-1]}var c=l.styleSheets;i.rel="stylesheet",i.href=e,i.media="only x",o(function(){r.parentNode.insertBefore(i,t?r:r.nextSibling)});var d=function(e){for(var t=i.href,n=c.length;n--;)if(c[n].href===t)return e();setTimeout(function(){d(e)})};return i.addEventListener&&i.addEventListener("load",a),i.onloadcssdefined=d,d(a),i};"undefined"!=typeof exports?exports.loadCSS=i:e.loadCSS=i,e.loadLocalStorageCSS=function(a,r){n(a,r)||l.cookie.indexOf(a)>-1?o(a,r):t(e,"load",function(){o(a,r)})}}(this);</script> 
  <link rel="preload" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/main.min.css?ver=6.4.13" as="style" onload="this.rel='stylesheet'">
  <noscript>
   <link rel="stylesheet" id="smash-main-css" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/main.min.css?ver=6.4.13" type="text/css" media="all"> 
  </noscript>
  <link rel="preload" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/articles-only.min.css?ver=6.4.13" as="style" onload="this.rel='stylesheet'">
  <noscript>
   <link rel="stylesheet" id="smash-article-only-css" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/articles-only.min.css?ver=6.4.13" type="text/css" media="all"> 
  </noscript>
  <script id="loadcss__smash-below-articles">loadCSS( "https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/below-articles.min.css?ver=6.4.13", false, "all" );</script>
  <noscript>
   <link rel="stylesheet" id="smash-below-articles-css" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/below-articles.min.css?ver=6.4.13" type="text/css" media="all"> 
  </noscript>
  <script id="loadcss__smash-comments">loadCSS( "https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/comments.min.css?ver=6.4.13", false, "all" );</script>
  <noscript>
   <link rel="stylesheet" id="smash-comments-css" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/comments.min.css?ver=6.4.13" type="text/css" media="all"> 
  </noscript>
  <link rel="stylesheet" id="smash-print-css" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/print.min.css?ver=6.4.13" type="text/css" media="print"> 
  <script id="loadcss__smash-webfonts">loadLocalStorageCSS( "smash-webfonts", "https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/webfonts.min.css?ver=6.4.13" );</script>
  <!--[if IE 8]>
<link rel='stylesheet' id='smash-ie8-css'  href='https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/css/ie8-nu.min.css?ver=6.4.13' type='text/css' media='all' />
<![endif]--> 
  <!-- This site is optimized with the Yoast SEO Premium plugin v4.6 - https://yoast.com/wordpress/plugins/seo/ --> 
  <meta name="description" content="Martin Sikora&nbsp;uses OpenCV in Python to detect objects in a webcam stream and replace them with 3D Earth in Three.js using WebSockets to join all together."> 
  <meta name="robots" content="noodp"> 
  <link rel="canonical" href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/"> 
  <link rel="publisher" href="https://plus.google.com/+SmashingMagazine?"> 
  <meta property="DC.date.issued" content="2016-02-25T10:17:59+01:00"> 
  <!-- / Yoast SEO Premium plugin. --> 
  <link rel="alternate" type="application/rss+xml" title="Smashing Magazine » Feed" href="https://www.smashingmagazine.com/feed/"> 
  <link rel="alternate" type="application/rss+xml" title="Smashing Magazine » Comments Feed" href="https://www.smashingmagazine.com/comments/feed/"> 
  <link rel="alternate" type="application/rss+xml" title="Smashing Magazine » Simple Augmented Reality With OpenCV, Three.js And WebSockets Comments Feed" href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/feed/"> 
  <script type="text/javascript">
/* <![CDATA[ */
var SmashingServiceWorkerData = {"url":"https:\/\/www.smashingmagazine.com\/serviceWorker.js"};
/* ]]> */
</script> 
  <script>
var SmashingServiceWorkerData=SmashingServiceWorkerData||{url:""};(function(a,b){if(b.url&&"serviceWorker" in a){a.serviceWorker.register(b.url);window.addEventListener("load",function(){if(a.serviceWorker.controller){a.serviceWorker.controller.postMessage({command:"trimCaches"})}})}})(navigator,SmashingServiceWorkerData);
</script> 
  <!--[if IE 8]>
<script type='text/javascript' src='https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/js/html5shiv.min.js?ver=6.4.13'></script>
<![endif]--> 
  <link rel="https://api.w.org/" href="https://www.smashingmagazine.com/wp-json/"> 
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.smashingmagazine.com/xmlrpc.php?rsd"> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.smashingmagazine.com/wp-includes/wlwmanifest.xml"> 
  <link rel="shortlink" href="https://www.smashingmagazine.com/?p=233020"> 
  <link rel="alternate" type="application/json+oembed" href="https://www.smashingmagazine.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.smashingmagazine.com%2F2016%2F02%2Fsimple-augmented-reality-with-opencv-a-three-js%2F"> 
  <link rel="alternate" type="text/xml+oembed" href="https://www.smashingmagazine.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.smashingmagazine.com%2F2016%2F02%2Fsimple-augmented-reality-with-opencv-a-three-js%2F&amp;format=xml"> 
  <!-- Stream WordPress user activity plugin v3.0.7 --> 
  <link rel="manifest" href="/manifest.json"> 
  <script>
	dataLayer = [
		{
			'site': {"ID":"1","name":"Smashing Magazine","home":"https:\/\/www.smashingmagazine.com"},
			'user': {"isLoggedIn":false,"ID":0,"role":"visitor"}		}
	];
</script> 
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
		j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
		'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-NWC9FPF');
</script> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <link rel="mask-icon" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/s.svg" color="#e53b2c" sizes="any"> 
  <!--[if IE]><link href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/favicon.ico" rel="icon" /><![endif]--> 
  <link rel="icon" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/favicon.png"> 
  <meta name="application-name" content="Smashing Magazine"> 
  <meta name="msapplication-TileColor" content="#fff"> 
  <meta name="msapplication-square70x70logo" content="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/smashing-windows-icon-70-70.png"> 
  <meta name="msapplication-square150x150logo" content="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/smashing-windows-icon-150-150.png"> 
  <meta name="msapplication-wide310x150logo" content="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/smashing-windows-icon-310-150.png"> 
  <meta name="msapplication-square310x310logo" content="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/smashing-windows-icon-310-310.png"> 
  <meta name="msapplication-notification" content="frequency=30;polling-uri1=http://notifications.buildmypinnedsite.com/?feed=https://www.smashingmagazine.com/feed/&amp;id=1;polling-uri2=http://notifications.buildmypinnedsite.com/?feed=https://www.smashingmagazine.com/feed/&amp;id=2;polling-uri3=http://notifications.buildmypinnedsite.com/?feed=https://www.smashingmagazine.com/feed/&amp;id=3;polling-uri4=http://notifications.buildmypinnedsite.com/?feed=https://www.smashingmagazine.com/feed/&amp;id=4;cycle=1"> 
  <link rel="apple-touch-icon-precomposed" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/apple-touch-icon-precomposed.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/apple-touch-icon-57x57-precomposed.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/apple-touch-icon-72x72-precomposed.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/apple-touch-icon-114x114-precomposed.png"> 
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/apple-touch-icon-144x144-precomposed.png"> 
 </head> 
 <body id="top" class="single single-post postid-233020 single-format-standard www-section"> 
  <noscript>
   <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NWC9FPF" height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript> 
  <div class="mnb"> 
   <a href="#mn" class="ntb js-toggle-btn" title="Jump to the main navigation"> Menu </a> 
   <a href="#ms" class="stb js-toggle-btn" title="Jump to the search"> Search </a> 
  </div>
  <a class="sr" href="#content">Jump to the content</a> 
  <header class="h" role="banner"> 
   <h1 class="logo"> <span class="sr">Smashing Magazine</span> <a href="https://www.smashingmagazine.com/"><img src="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/logo.png" alt="Smashing Magazine Logo" srcset="https://media-mediatemple.netdna-ssl.com/wp-content/themes/smashing-magazine/assets/images/logo.svg"></a> </h1> 
  </header> 
  <nav class="mn" id="mn" role="navigation menu"> 
   <h2>Smashing Pages:</h2> 
   <ul id="menu-smashing-mobile-network" class="mnu">
    <li id="menu-item-218248" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-218248 menu-item-books"><a href="https://www.smashingmagazine.com/books/">Books</a></li> 
    <li id="menu-item-218249" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-218249 menu-item-tickets"><a href="https://www.smashingmagazine.com/workshops/">Tickets</a></li> 
    <li id="menu-item-219109" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-219109 menu-item-shop"><a href="https://shop.smashingmagazine.com/">Shop</a></li> 
    <li id="menu-item-188959" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-188959 menu-item-email-newsletter"><a href="https://www.smashingmagazine.com/the-smashing-newsletter/">Email Newsletter</a></li> 
    <li id="menu-item-188961" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-188961 menu-item-jobs"><a href="http://jobs.smashingmagazine.com">Jobs</a></li> 
    <li id="menu-item-188958" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-188958 menu-item-about-us-impressum"><a href="https://www.smashingmagazine.com/about/">About us / Impressum</a></li> 
   </ul> 
   <h2>Categories:</h2> 
   <ul id="menu-mobile-categories" class="mnu">
    <li id="menu-item-181575" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-181575 menu-item-coding"><a href="https://www.smashingmagazine.com/category/coding/">Coding</a></li> 
    <li id="menu-item-181576" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-181576 menu-item-design"><a href="https://www.smashingmagazine.com/category/design/">Design</a></li> 
    <li id="menu-item-181580" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-181580 menu-item-mobile"><a href="https://www.smashingmagazine.com/category/mobile/">Mobile</a></li> 
    <li id="menu-item-181579" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-181579 menu-item-graphics"><a href="https://www.smashingmagazine.com/category/graphics/">Graphics</a></li> 
    <li id="menu-item-181577" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-181577 menu-item-ux-design"><a href="https://www.smashingmagazine.com/category/uxdesign/">UX Design</a></li> 
    <li id="menu-item-181578" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-181578 menu-item-wordpress"><a href="https://www.smashingmagazine.com/category/wordpress/"><span class="long"><span>Word</span><span>Press</span></span><span class="short">WP</span></a></li> 
   </ul>
  </nav> 
  <a class="mnc js-toggle-btn" href="#top" data-toggle-target="mn" title="Close the navigation">X</a>
  <div class="ms" id="ms" role="search"> 
   <form id="mobile-searching" class="sfm clearfix" method="get" action="https://www.smashingmagazine.com/search-results/" target="_top"> 
    <label for="mobile-search-input">Search on Smashing Magazine</label> 
    <input name="q" id="mobile-search-input" type="text" placeholder="e.g. CSS"> 
    <button class="submit" type="submit">Search</button> 
    <input type="hidden" name="cx" value="partner-pub-6779860845561969:5884617103"> 
    <input type="hidden" name="cof" value="FORID:10"> 
    <input type="hidden" name="ie" value="UTF-8"> 
   </form> 
  </div> 
  <a role="button" class="msc js-toggle-btn" href="#top" data-toggle-target="ms" title="Close the search">X</a> 
  <nav class="tn clearfix" role="navigation"> 
   <ul id="menu-network-menu" class="nw clearfix">
    <li class="current"><a href="https://www.smashingmagazine.com"><img src="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/logo.png" alt="Smashing Magazine" srcset="https://media-mediatemple.netdna-ssl.com/wp-content/themes/smashing-magazine/assets/images/logo.svg"></a></li>
    <li id="menu-item-218245" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-218245 menu-item-books"><a href="https://www.smashingmagazine.com/books/">Books</a></li> 
    <li id="menu-item-231721" class="cody menu-item menu-item-type-custom menu-item-object-custom menu-item-231721 menu-item-ebooks"><a href="https://shop.smashingmagazine.com/products/the-smashing-library">eBooks</a></li> 
    <li id="menu-item-218696" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-218696 menu-item-tickets"><a href="https://www.smashingmagazine.com/smashing-workshops/">Tickets</a></li> 
    <li id="menu-item-231722" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-231722 menu-item-shop"><a href="https://shop.smashingmagazine.com/">Shop</a></li> 
    <li id="menu-item-2" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2 menu-item-jobs"><a href="http://jobs.smashingmagazine.com/">Jobs</a></li> 
   </ul>
   <nav id="social-media-nav" role="menu"> 
    <ul class="ch"> 
     <li class="rss"> <a href="https://www.smashingmagazine.com/feed/" title="Subscribe to our RSS-feed (120K)">RSS</a> </li> 
     <li class="fb"> <a href="//www.facebook.com/smashmag" title="Join our Facebook page! (267k)">Facebook</a> </li> 
     <li class="tw"> <a href="//twitter.com/smashingmag" title="Follow us on Twitter! (956k)">Twitter</a> </li> 
     <li class="nl"> <a href="https://www.smashingmagazine.com/the-smashing-newsletter/" title="Subscribe to our Email Newsletter (180k)">Newsletter</a> </li> 
    </ul> 
   </nav> 
  </nav> 
  <main> 
   <div class="cc"> 
    <div class="fluid clearfix"> 
     <div class="grid clearfix"> 
      <section class="mise sf clearfix" role="search"> 
       <form id="search_1" method="get" action="https://www.smashingmagazine.com/search-results/" target="_top"> 
        <label class="sl" for="searching_1">Search on Smashing Magazine</label> 
        <input id="searching_1" name="q" type="text" placeholder="e.g. JavaScript"> 
        <button class="search_submit" type="submit">Search</button> 
        <input type="hidden" name="cx" value="partner-pub-6779860845561969:5884617103"> 
        <input type="hidden" name="cof" value="FORID:10"> 
        <input type="hidden" name="ie" value="UTF-8"> 
       </form> 
      </section> 
      <div class="col sn"> 
       <div class="sct">
        <ul id="menu-category-menu" class="clearfix">
         <li id="menu-item-116" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-116 menu-item-coding"><a href="https://www.smashingmagazine.com/category/coding/">Coding</a> 
          <ul class="sub-menu"> 
           <li id="menu-item-2014" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-2014 menu-item-css"><a href="https://www.smashingmagazine.com/tag/css/">CSS</a></li> 
           <li id="menu-item-134810" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-134810 menu-item-html"><a href="https://www.smashingmagazine.com/tag/html/">HTML</a></li> 
           <li id="menu-item-2015" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-2015 menu-item-javascript"><a href="https://www.smashingmagazine.com/tag/javascript/">JavaScript</a></li> 
           <li id="menu-item-2016" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-2016 menu-item-techniques"><a href="https://www.smashingmagazine.com/tag/techniques/">Techniques</a></li> 
          </ul> </li> 
         <li id="menu-item-117" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-117 menu-item-design"><a href="https://www.smashingmagazine.com/category/design/">Design</a> 
          <ul class="sub-menu"> 
           <li id="menu-item-2017" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-2017 menu-item-web-design"><a href="https://www.smashingmagazine.com/tag/web-design/">Web Design</a></li> 
           <li id="menu-item-231166" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-231166 menu-item-responsive"><a title="Responsive Web Design" href="https://www.smashingmagazine.com/tag/responsive-web-design/">Responsive</a></li> 
           <li id="menu-item-2032" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-2032 menu-item-typography"><a href="https://www.smashingmagazine.com/tag/typography/">Typography</a></li> 
           <li id="menu-item-2063" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-2063 menu-item-inspiration"><a href="https://www.smashingmagazine.com/tag/inspiration/">Inspiration</a></li> 
          </ul> </li> 
         <li id="menu-item-119" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-119 menu-item-mobile"><a href="https://www.smashingmagazine.com/category/mobile/">Mobile</a> 
          <ul class="sub-menu"> 
           <li id="menu-item-142132" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-142132 menu-item-iphone-ipad"><a href="https://www.smashingmagazine.com/tag/ios/">iPhone &amp; iPad</a></li> 
           <li id="menu-item-143596" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-143596 menu-item-android"><a href="https://www.smashingmagazine.com/tag/android/">Android</a></li> 
           <li id="menu-item-143608" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-143608 menu-item-design-patterns"><a href="https://www.smashingmagazine.com/tag/design-patterns/">Design Patterns</a></li> 
          </ul> </li> 
         <li id="menu-item-118" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-118 menu-item-graphics"><a href="https://www.smashingmagazine.com/category/graphics/">Graphics</a> 
          <ul class="sub-menu"> 
           <li id="menu-item-2264" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-2264 menu-item-photoshop"><a href="https://www.smashingmagazine.com/tag/photoshop/">Photoshop</a></li> 
           <li id="menu-item-160" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-160 menu-item-fireworks"><a href="https://www.smashingmagazine.com/category/fireworks/">Fireworks</a></li> 
           <li id="menu-item-2283" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-2283 menu-item-wallpapers"><a href="https://www.smashingmagazine.com/tag/wallpapers/">Wallpapers</a></li> 
           <li id="menu-item-2305" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-2305 menu-item-freebies"><a href="https://www.smashingmagazine.com/tag/freebies/">Freebies</a></li> 
          </ul> </li> 
         <li id="menu-item-120" class="menu-item-uxdesign menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-120 menu-item-ux-design"><a href="https://www.smashingmagazine.com/category/uxdesign/">UX Design</a> 
          <ul class="sub-menu"> 
           <li id="menu-item-143609" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-143609 menu-item-usability"><a href="https://www.smashingmagazine.com/tag/usability/">Usability</a></li> 
           <li id="menu-item-143610" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-143610 menu-item-user-experience"><a href="https://www.smashingmagazine.com/tag/user-experience/">User Experience</a></li> 
           <li id="menu-item-143611" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-143611 menu-item-ui-design"><a href="https://www.smashingmagazine.com/tag/ui/">UI Design</a></li> 
           <li id="menu-item-143612" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-143612 menu-item-e-commerce"><a href="https://www.smashingmagazine.com/tag/e-commerce/">E-Commerce</a></li> 
          </ul> </li> 
         <li id="menu-item-121" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-121 menu-item-wordpress"><a href="https://www.smashingmagazine.com/category/wordpress/"><span class="long"><span>Word</span><span>Press</span></span><span class="short">WP</span></a> 
          <ul class="sub-menu"> 
           <li id="menu-item-143677" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-143677 menu-item-essentials"><a href="https://www.smashingmagazine.com/tag/essentials/">Essentials</a></li> 
           <li id="menu-item-143678" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-143678 menu-item-techniques"><a href="https://www.smashingmagazine.com/tag/techniques-wp/">Techniques</a></li> 
           <li id="menu-item-143679" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-143679 menu-item-plugins"><a href="https://www.smashingmagazine.com/tag/plugins/">Plugins</a></li> 
           <li id="menu-item-143680" class="menu-item menu-item-type-taxonomy menu-item-object-post_tag menu-item-143680 menu-item-themes"><a href="https://www.smashingmagazine.com/tag/themes/">Themes</a></li> 
          </ul> </li> 
        </ul>
       </div> 
      </div> 
      <div id="content" class="col main"> 
       <div id="blocked" class="blocked clearfix"> 
        <figure style="max-width: 24%;min-width: 90px;"> 
         <a href="https://smashingconf.com/barcelona-2017"> <img src="https://www.smashingmagazine.com/wp-content/uploads/2017/06/smashingconf-barcelona-round-v2.png" alt="Smashing Conf Barcelona"> </a> 
        </figure> 
        <p style="font-size: calc(1em + ((0.4vw + 0.25vh) / 2));"> <strong>You know, we use ad-blockers as well.</strong> We gotta keep those servers running though. Did you know that we publish <a href="https://www.smashingmagazine.com/books/">useful books</a> and run <a href="https://www.smashingmagazine.com/smashing-workshops/">friendly conferences</a> — crafted for pros like yourself? E.g. our upcoming <a href="https://smashingconf.com/barcelona-2017">SmashingConf Barcelona</a>, dedicated to smart front-end techniques and design patterns. </p> 
       </div>
       <article class="post-233020 post type-post status-publish format-standard has-post-thumbnail hentry category-coding tag-apps tag-javascript" vocab="http://schema.org/" typeof="TechArticle"> 
        <h2> <a property="url" href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/" rel="bookmark" title="Read 'Simple Augmented Reality With OpenCV, Three.js And WebSockets'"><span property="name">Simple Augmented Reality With OpenCV, Three.js And WebSockets</span></a> </h2> 
        <ul class="pmd clearfix"> 
         <li class="a" property="author" typeof="person" resource="#authorname">By <a href="https://www.smashingmagazine.com/author/martinsikora/" title="Posts by Martin Sikora" rel="author">Martin Sikora</a></li> 
         <li class="rd" property="datePublished" content="February 25th, 2016">February 25th, 2016</li> 
         <li class="tags" property="keywords"><a href="https://www.smashingmagazine.com/tag/apps/">Apps</a><a href="https://www.smashingmagazine.com/tag/javascript/">JavaScript</a></li> 
         <li class="comments" property="discussionUrl"><a href="#comments" title="Comment on Simple Augmented Reality With OpenCV, Three.js And WebSockets">10 Comments</a> </li> 
        </ul> 
        <div class="ad ed"> 
         <div class="oa_zone--ad cad" id="cad" data-ad-name="Medium Rectangle" data-ad-zone="22" data-ad-media="all"></div> 
        </div> 
        <p>Augmented reality is generally considered to be very hard to create. However, it’s possible to make visually impressive projects using just open source libraries. In this tutorial we’ll make use of <strong>OpenCV</strong> in Python to detect circle-shaped objects in a webcam stream and replace them with 3D Earth in <strong>Three.js</strong> in a browser window while using <strong>WebSockets</strong> to join this all together.</p> 
        <p>We want to strictly separate front-end and back-end in order to make it reusable. In a real-world application we could write the front-end in Unity, Unreal Engine or Blender, for example, to make it look really nice. The browser front-end is the easiest to implement and should work on nearly every possible configuration.</p> 
        <h3 id="further-reading-on-smashingmag"><span class="rh">Further Reading</span> on SmashingMag: <a href="#further-reading-on-smashingmag" aria-label="Link to section 'Further Reading on SmashingMag:'" class="sr hsl">Link</a></h3> 
        <ul> 
         <li><a title="Read 'Introduction To Polygonal Modeling And Three.js'" href="https://www.smashingmagazine.com/2013/09/introduction-to-polygonal-modeling-and-three-js/" rel="bookmark">Introduction To Polygonal Modeling And Three.js</a><sup class="po" id="note-1"><a href="#1">1</a></sup></li> 
         <li><a title="Read 'Building Shaders With Babylon.js'" href="https://www.smashingmagazine.com/2016/11/building-shaders-with-babylon-js/" rel="bookmark">Building Shaders With Babylon.js</a><sup class="po" id="note-2"><a href="#2">2</a></sup></li> 
         <li><a title="Read 'Why AJAX Isn’t Enough'" href="https://www.smashingmagazine.com/2015/01/why-ajax-isnt-enough/" rel="bookmark">Why AJAX Isn’t Enough</a><sup class="po" id="note-3"><a href="#3">3</a></sup></li> 
        </ul> 
        <p>To keep things simple we’ll split the app into three smaller parts:</p> 
        <ol> 
         <li><strong>Python back-end with OpenCV</strong><br> OpenCV will read the webcam stream and open multiple windows with camera image after passing it through multiple filters to ease debugging and give us a little insight into what the circle detection algorithm actually sees. Output of this part will be just 2D coordinates and radius of the detected circle. </li> 
         <li><strong>JavaScript front-end with Three.js in a browser</strong><br> Step-by-step implementation of Three.js library to render textured Earth with moon spinning around it. The most interesting thing here will be mapping 2D screen coordinates into the 3D world. We’ll also approximate the coordinates and radius to increase OpenCV’s accuracy. </li> 
         <li><strong>WebSockets in both front-end and back-end</strong><br> Back-end with WebSockets server will periodically send messages with detected circle coordinates and radii to the browser client. </li> 
        </ol> 
        <figure>
         <iframe src="https://player.vimeo.com/video/156679604" width="500" height="372" frameborder="0" title="Augmented-Reality-earth-opencv-final-2-SD" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
         <br> 
         <figcaption>
          Final result of this article.
          <br> 
          <figcaption></figcaption>
         </figcaption>
        </figure> 
        <h3 id="1-python-back-end-with-opencv">1. Python Back-End With OpenCV <a href="#1-python-back-end-with-opencv" aria-label="Link to section '1. Python Back-End With OpenCV'" class="sr hsl">Link</a></h3> 
        <p>Our first step will be just importing the OpenCV library in Python and opening a window with a live webcam stream.</p> 
        <p>We’re going to use the newest OpenCV 3.0 (<a href="http://docs.opencv.org/doc/tutorials/introduction/table_of_content_introduction/table_of_content_introduction.html">see installation notes</a><sup class="po" id="note-4"><a href="#4">4</a></sup>) with Python 2.7. Please note, that installation on some systems might be problematic and the official documentation isn’t very helpful. I tried myself on Mac OS X version 3.0 from <a href="https://www.macports.org/">MacPorts</a><sup class="po" id="note-5"><a href="#5">5</a></sup> and the binary had a dependency issue so I had to switch to <a href="http://brew.sh/">Homebrew</a><sup class="po" id="note-6"><a href="#6">6</a></sup> instead. Also note that some OpenCV packages might not come with Python binding by default (you need to use some command line options).</p> 
        <p>With Homebrew I ran:</p> 
        <pre><code class="language-bash">brew install opencv
</code></pre> 
        <p>This installs OpenCV with Python bindings by default.</p> 
        <p>Just to test things out I recommend you run Python in interactive mode (run <code>python</code> in CLI without any arguments) and write <code>import cv2</code>. If OpenCV is installed properly and paths to Python bindings are correct it shouldn’t throw any errors.</p> 
        <p>Later, we’ll also use Python’s <code>numpy</code> for some simple operations with matrices so we can install it now as well.</p> 
        <pre><code class="language-bash">pip install numpy
</code></pre> 
        <h4 id="reading-the-camera-image">Reading The Camera Image <a href="#reading-the-camera-image" aria-label="Link to section 'Reading The Camera Image'" class="sr hsl">Link</a></h4> 
        <p>Now we can test the camera:</p> 
        <pre><code class="language-python">import cv2
capture = cv2.VideoCapture(0)

while True:
    ret, image = capture.read()
    cv2.imshow('Camera stream', image)
    if cv2.waitKey(1) &amp; 0xFF == ord('q'):
        break
</code></pre> 
        <p>With <code>cv2.VideoCapture(0)</code> we get access to the camera on index <code>0</code> which is the default (usually the built-in camera). If you want to use a different one, try numbers greater than zero; however, <a href="http://stackoverflow.com/questions/8044539/listing-available-devices-in-python-opencv">there’s no easy way</a><sup class="po" id="note-7"><a href="#7">7</a></sup> to list all available cameras with the current OpenCV version.</p> 
        <p>When we call <code>cv2.imshow('Camera stream', image)</code> for the first time it checks that no window with this name exists and creates a new one for us with an image from the camera. The same window will be reused for each iteration of the main loop.</p> 
        <p>Then we used <code>capture.read()</code> to wait and grab the current camera image. This method also returns a Boolean property <code>ret</code> in case the camera is disconnected or the next frame is not available for some reason.</p> 
        <p>At the end we have <code>cv2.waitKey(1)</code> that checks for 1 millisecond whether any key is pressed and returns its code. So, when we press <code>q</code> we break out of the loop, close the window and the app will end.</p> 
        <p>If this all works, we passed the most difficult part of the back-end app which is getting the camera to work.</p> 
        <h4 id="filtering-camera-images">Filtering Camera Images <a href="#filtering-camera-images" aria-label="Link to section 'Filtering Camera Images'" class="sr hsl">Link</a></h4> 
        <p>For the actual circle detection we’re going to use <strong>circle Hough Transform</strong> which is implemented in <code>cv2.HoughCircles()</code> method and right now is the only algorithm available in OpenCV. The important thing for us is that it needs a grayscaled image as input and uses the <strong>Canny edge detector</strong> algorithm inside to find edges in the image. We want to be able to manually check what the algorithm sees so we’ll compose one large image from four smaller images each with a different filter applied.</p> 
        <p>The Canny edge detector is an algorithm that processes the image in typically four directions (vertical, horizontal and two diagonals) and finds edges. The actual steps that this algorithm makes are <a href="https://en.wikipedia.org/wiki/Canny_edge_detector">explained in greater detail on Wikipedia</a><sup class="po" id="note-8"><a href="#8">8</a></sup> or <a href="http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/canny_detector/canny_detector.html">briefly in the OpenCV docs</a><sup class="po" id="note-9"><a href="#9">9</a></sup>.</p> 
        <p>In contrast to pattern matching this algorithm detects circular shapes so we can use any objects we have to hand that are circular. I’m going to use a lid from an instant coffee jar and then an orange coffee mug.</p> 
        <p>We don’t need to work with full-size images (depends on your camera resolution, of course) so we’ll resize them right between <code>capture.read()</code> and <code>cv2.imshow</code> to 640px width and height accordingly to keep aspect ratio:</p> 
        <pre><code class="language-python">width, height = image.shape
scale = 640.0 / width
image = cv2.resize(image, (0,0), fx=scale, fy=scale)
</code></pre> 
        <p>Then we want to convert it to a grayscaled image and apply first <strong>median blur</strong> which removes noise and retains edges, and then the Canny edge detector to see what the circle detection algorithm is going to work with. For this reason, we’ll compose 2×2 grid with all four previews.</p> 
        <pre><code class="language-python">t = 100 # threshold for Canny Edge Detection algorithm
grey = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
blured = cv2.medianBlur(grey, 15)

# Create 2x2 grid for all previews
grid = np.zeros([2*h, 2*w, 3], np.uint8)

grid[0:h, 0:w] = image
# We need to convert each of them to RGB from greyscaled 8 bit format
grid[h:2*h, 0:w] = np.dstack([cv2.Canny(grey, t / 2, t)] * 3)
grid[0:h, w:2*w] = np.dstack([blured] * 3)
grid[h:2*h, w:2*w] = np.dstack([cv2.Canny(blured, t / 2, t)] * 3)
</code></pre> 
        <figure>
         <iframe src="https://player.vimeo.com/video/156682000" width="500" height="280" frameborder="0" title="Augmented-Reality-filter-grid-SD" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
         <br> 
         <figcaption>
          Grid with previews. Top-left: raw webcam data; top-right: grayscaled after median blur; bottom-left: grayscaled + Canny edge; bottom-right: grayscaled after median blur + Canny edge.
         </figcaption> 
        </figure> 
        <p>Even though Canny edge detector uses Gaussian blur to reduce noise, in my experience it’s still worth using median blur as well. You can compare the two bottom images. The one on the left is just Canny edge detection without any other filter. The second image is also Canny edge detection but this time after applying median blur. It reduced objects in the background which will help circle detection.</p> 
        <h4 id="detecting-circles-with-hough-gradient">Detecting Circles With Hough Gradient <a href="#detecting-circles-with-hough-gradient" aria-label="Link to section 'Detecting Circles With Hough Gradient'" class="sr hsl">Link</a></h4> 
        <p>Internally, OpenCV uses a more efficient implementation of Hough Circle Transform called Hough Gradient Method that uses edge information from Canny edge detector. The gradient method is described in depth in the book <cite><a href="http://shop.oreilly.com/product/9780596516130.do">Learning OpenCV</a><sup class="po" id="note-10"><a href="#10">10</a></sup></cite> and the <a href="https://en.wikipedia.org/wiki/Circle_Hough_Transform">Circle Hough Transform on Wikipedia</a><sup class="po" id="note-11"><a href="#11">11</a></sup>.</p> 
        <p>Now it’s time for the actual circle detection:</p> 
        <pre><code class="language-python">sc = 1 # Scale for the algorithm
md = 30 # Minimum required distance between two circles
# Accumulator threshold for circle detection. Smaller numbers are more
# sensitive to false detections but make the detection more tolerant.
at = 40
circles = cv2.HoughCircles(blured, cv2.HOUGH_GRADIENT, sc, md, t, at)
</code></pre> 
        <p>This returns an array of all detected circles. For simplicity’s sake, we’ll care only about the first one. Hough Gradient is quite sensitive to really circular shapes so it’s unlikely that this will result in false detections. If it did, increase the <code>at</code> parameter. This is why we used median blur above; it removed more noise so we can use a lower threshold, making the detection more tolerant to inaccuracies and with a lower chance of detecting false circles.</p> 
        <p>We’ll print circle center and its radius to the console and also draw the found circle with its center to the image from camera in a separate window. Later, we’ll send it via WebSocket to the browser. Note, that <code>x</code>, <code>y</code> and <code>radius</code> are all in pixels.</p> 
        <pre><code class="language-python">if circles is not None:
    # We care only about the first circle found.
    circle = circles[0][0]
    x, y, radius = int(circle[0]), int(circle[1]), int(circle[2])
    print(x, y, radius)

    # Highlight the circle
    cv2.circle(image, [x, y], radius, (0, 0, 255), 1)
    # Draw a dot in the center
    cv2.circle(image, [x, y], 1, (0, 0, 255), 1)
</code></pre> 
        <p>This will print to console tuples like:</p> 
        <pre><code class="language-python">(251, 202, 74)
(252, 203, 73)
(250, 202, 74)
(246, 202, 76)
(246, 204, 74)
(246, 205, 72)
</code></pre> 
        <figure>
         <iframe src="https://player.vimeo.com/video/156682432" width="500" height="280" frameborder="0" title="Augmented-Reality-circle-detection-SD" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
         <br> 
         <figcaption>
          Webcam stream with circles detected using Hough Gradient.
         </figcaption> 
        </figure> 
        <p>As you can see on this animation, it failed to find any circles at all. My built-in camera has only 15fps and when I move my hand quickly the image is blurred so it doesn’t find circle edges, not even after applying filters.</p> 
        <p>At the end of this article we’ll come back to this problem and talk a lot about camera-specific settings and choice of detection algorithm, but we can already say that even though my setup is very bad (only 15fps, poor lighting, a lot of noise in the background, the object has low contrast), the result is reasonably good.</p> 
        <p>That’s all for now. We have the <code>x</code> and <code>y</code> coordinates and <code>radius</code> in pixels of a circle found in the webcam image.</p> 
        <p>You can see the <a href="https://gist.github.com/martinsik/a3d6142b0392d77c13ab#file-circle_detection-py">full source code for this part on gist.github.com</a><sup class="po" id="note-12"><a href="#12">12</a></sup>.</p> 
        <section> 
         <div class="oa_zone--ad icad" id="cad-middle" data-ad-name="Content Ad Middle" data-ad-zone="110" data-ad-media="all"></div> 
        </section> 
        <h3 id="2-javascript-front-end-with-three-js-in-browsers">2. JavaScript Front-End With Three.js In Browsers <a href="#2-javascript-front-end-with-three-js-in-browsers" aria-label="Link to section '2. JavaScript Front-End With Three.js In Browsers'" class="sr hsl">Link</a></h3> 
        <p>The front-end part is based on the <a href="http://threejs.org/">Three.js</a><sup class="po" id="note-27"><a href="#27">27</a></sup><sup class="po" id="note-13"><a href="#13">13</a></sup> (version r72) library. We’ll start by just creating a rotating textured sphere representing Earth in the center of the screen, then add the moon spinning around it. At the end we’ll map 2D screen mouse coordinates to the 3D space.</p> 
        <p>Our HTML page will consist of just a single <code>&lt;canvas&gt;</code> element. see <a href="https://gist.github.com/martinsik/a3d6142b0392d77c13ab#file-index-html"><i>index.html</i> on gist.github.com</a><sup class="po" id="note-14"><a href="#14">14</a></sup>.</p> 
        <h4 id="creating-earth">Creating Earth <a href="#creating-earth" aria-label="Link to section 'Creating Earth'" class="sr hsl">Link</a></h4> 
        <p>JavaScript is going to be a bit longer but it’s split into multiple initialization functions where each has single purpose. Earth and moon textures come from <a href="http://planetpixelemporium.com/earth.html">planetpixelemporium.com</a><sup class="po" id="note-15"><a href="#15">15</a></sup>. Note that when loading textures, CORS rules are applied.</p> 
        <pre><code class="language-javascript">var scene, camera, renderer, light, earthMesh, earthRotY = 0;

function initScene(width, height) {
    scene = new THREE.Scene();
    // Setup cameta with 45 deg field of view and same aspect ratio
    camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);
    // Set the camera to 400 units along `z` axis
    camera.position.set(0, 0, 400);

    renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(width, height);
    renderer.shadowMap.enabled = true;
    document.body.appendChild(renderer.domElement);
}

function initLight() {
    light = new THREE.SpotLight(0xffffff);
    // Position the light slightly to a side to make shadows look better.
    light.position.set(400, 100, 1000);
    light.castShadow = true;
    scene.add(light);
}

function initEarth() {
    // Load Earth texture and create material from it
    var earthMaterial = new THREE.MeshLambertMaterial({
        map: THREE.ImageUtils.loadTexture("/images/earthmap1k.jpg"),
    });
    // Create a sphere 25 units in radius and 16 segments
    // both horizontally and vertically.
    var earthGeometry = new THREE.SphereGeometry(25, 16, 16);
    earthMesh = new THREE.Mesh(earthGeometry, earthMaterial);
    earthMesh.receiveShadow = true;
    earthMesh.castShadow = true;
    // Add Earth to the scene
    scene.add(earthMesh);
}

// Update position of objects in the scene
function update() {
    earthRotY += 0.007;
    earthMesh.rotation.y = earthRotY;
}

// Redraw entire scene
function render() {
    update();
    renderer.setClearColor(0x000000, 0);
    renderer.render(scene, camera);
    // Schedule another frame
    requestAnimationFrame(render);
}

document.addEventListener('DOMContentLoaded', function(e) {
    // Initialize everything and start rendering
    initScene(window.innerWidth, window.innerHeight);
    initEarth();
    initLight();
    // Start rendering the scene
    requestAnimationFrame(render);
});
</code></pre> 
        <p><a href="http://plnkr.co/edit/baBQZQrbGrv0RiiFGylq?p=preview">See a live demo here.</a><sup class="po" id="note-16"><a href="#16">16</a></sup></p> 
        <figure>
         <img src="https://www.smashingmagazine.com/wp-content/uploads/2016/02/threejs-spinning-earth.gif" width="500" height="200" alt="threejs-spinning-earth">
         <br> 
         <figcaption>
          Textured sphere with Three.js. (
          <a href="http://planetpixelemporium.com/earth.html">Earth texture credit</a>
          <sup class="po" id="note-17"><a href="#17">17</a></sup>)
         </figcaption> 
        </figure> 
        <p>This was mostly just basic Three.js stuff. Object and method names are self-explantory (like <code>receiveShadow</code> or <code>castShadow</code>) but if you’ve never used it before I strongly recommend you look at <a href="http://stemkoski.github.io/Three.js/">Lee Stemkoski’s tutorials</a><sup class="po" id="note-18"><a href="#18">18</a></sup>.</p> 
        <p>Optionally, we could also draw an axis in the center of the screen to help us with the coordinate system.</p> 
        <pre><code class="language-javascript">var axes = new THREE.AxisHelper(60);
axes.position.set(0, 0, 0);
scene.add(axes);
</code></pre> 
        <h4 id="adding-the-moon">Adding The Moon <a href="#adding-the-moon" aria-label="Link to section 'Adding The Moon'" class="sr hsl">Link</a></h4> 
        <p>Creating the moon is going to be very similar. The main difference is that we need to set the moon’s position relative to Earth.</p> 
        <pre><code class="language-javascript">function initMoon() {
    // The same as initEarth() with just different texture
}

// Update position of objects in the scene
function update() {
    // Update Earth position
    // ...

    // Update Moon position
    moonRotY += 0.005;
    radY += 0.03;
    radZ += 0.0005;

    // Calculate position on a sphere
    x = moonDist * Math.cos(radZ) * Math.sin(radY);
    y = moonDist * Math.sin(radZ) * Math.sin(radY);
    z = moonDist * Math.cos(radY);

    var pos = earthMesh.position;
    // We can keep `z` as is because we're not moving the Earth
    // along z axis.
    moonMesh.position.set(x + earthMesh.pos.x, y + earthMesh.pos.y, z);
    moonMesh.rotation.y = moonRotY;
}
</code></pre> 
        <p><a href="http://plnkr.co/edit/u5GuZBgcdkhoDCFBFbga?p=preview">See a live demo here.</a><sup class="po" id="note-19"><a href="#19">19</a></sup></p> 
        <figure>
         <iframe src="https://player.vimeo.com/video/156683239" width="500" height="200" frameborder="0" title="Augmented-Reality-threejs-spinning-earth-and-moon-SD" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
         <br> 
         <figcaption>
          Earth and moon with Three.js. (
          <a href="http://planetpixelemporium.com/earth.html">Earth and moon textures credit</a>
          <sup class="po" id="note-22"><a href="#22">22</a></sup>
          <sup class="po" id="note-20"><a href="#20">20</a></sup>)
         </figcaption> 
        </figure> 
        <h4 id="mapping-2d-coordinates-to-a-3d-world">Mapping 2D Coordinates To A 3D World <a href="#mapping-2d-coordinates-to-a-3d-world" aria-label="Link to section 'Mapping 2D Coordinates To A 3D World'" class="sr hsl">Link</a></h4> 
        <p>So far, everything is pretty obvious. The most interesting part is going to be how to covert 2D screen coordinates coming from OpenCV (see output of circular detection above) to a 3D world? When we were defining radii and positions in Three.js we used some units but these have nothing to do with actual screen pixels. In fact, dimensions of everything we see in the scene are highly dependent on our camera settings (like aspect ratio or field of view).</p> 
        <p>For this reason, we’ll make a flat plane object that will be large enough to cover the entire scene with its center at <code>[0,0,0]</code>. For demonstration purposes we’ll map 2D mouse coordinates to Earth’s position in 3D with a fixed <code>z</code> axis. In other words, we’ll convert only <code>x</code> and <code>y</code> and not worry about <code>z</code>, which is the distance from the object to our camera.</p> 
        <p>We’ll convert mouse screen positions into a range from <code>-1.0</code> to <code>+1.0</code> with its center at <code>[0,0]</code> because we need to work with normalized vectors.</p> 
        <p>Later we’ll use this exact technique to map the position of the detected circle to 3D and also to match circle size from 2D to 3D.</p> 
        <pre><code class="language-javascript">var mouse = {};

function initPlane() {
    // The plane needs to be large to always cover entire scene
    var tmpGeometry = new THREE.PlaneGeometry(1000, 1000, 1, 1);
    tmpGeometry.position = new THREE.Vector3(0, 0, 0);
    var tmpMesh = new THREE.Mesh(tmpGeometry);
}

function onDocumentMouseMove(event) {
    // Current mouse position with [0,0] in the center of the window
    // and ranging from -1.0 to +1.0 with `y` axis inverted.
    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
    mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
}

function update() {
    // ... the rest of the function

    // We need mouse x and y coordinates to set vector's direction
    var vector = new THREE.Vector3(mouse.x, mouse.y, 0.0);
    // Unproject camera distortion (fov, aspect ratio)
    vector.unproject(camera);
    var norm = vector.sub(camera.position).normalize();
    // Cast a line from our camera to the tmpMesh and see where these
    // two intersect. That's our 2D position in 3D coordinates.
    var ray = new THREE.Raycaster(camera.position, norm);
    var intersects = ray.intersectObject(tmpMesh);

    earthMesh.position.x = intersects[0].point.x;
    earthMesh.position.y = intersects[0].point.y;
}
</code></pre> 
        <p><a href="http://plnkr.co/edit/MEYNOIRp7Y2DrrcyU9Eg?p=preview">See a live demo here.</a><sup class="po" id="note-21"><a href="#21">21</a></sup></p> 
        <figure>
         <img src="https://www.smashingmagazine.com/wp-content/uploads/2016/02/threejs-earth-to-mouse.gif" width="500" height="300" alt="threejs-spinning-earth">
         <br> 
         <figcaption>
          Earth position in 3D mapped to 2D mouse position. (
          <a href="http://planetpixelemporium.com/earth.html">Earth and moon textures credit</a>
          <sup class="po" id="note-22"><a href="#22">22</a></sup>
          <sup class="po" id="note-20"><a href="#20">20</a></sup>)
         </figcaption> 
        </figure> 
        <p>Since we’re checking the intersection with a plane, we know there’s always going to be only one.</p> 
        <p>That’s all for this part. At the end of the next part we’ll also add WebSockets and a <code>&lt;video&gt;</code> element with our camera stream that will be overlaid by the 3D scene in Three.js.</p> 
        <h3 id="3-websockets-in-both-front-end-and-back-end">3. WebSockets In Both Front-End And Back-End <a href="#3-websockets-in-both-front-end-and-back-end" aria-label="Link to section '3. WebSockets In Both Front-End And Back-End'" class="sr hsl">Link</a></h3> 
        <p>We can start by implementing WebSockets in the Python back-end by installing <code>simple-websocket-server</code> libraries. There’re many different libraries like <a href="http://www.tornadoweb.org/en/stable/">Tornado</a><sup class="po" id="note-23"><a href="#23">23</a></sup> or <a href="http://autobahn.ws/python/">Autobahn</a><sup class="po" id="note-24"><a href="#24">24</a></sup>. We’ll use <code>simple-websocket-server</code> because it’s very easy to use and has no dependecies.</p> 
        <pre><code class="language-bash">pip install git+https://github.com/dpallot/simple-websocket-server.git
</code></pre> 
        <p>We’ll run the WebSocket server in a separate thread and keep track of all connected clients.</p> 
        <pre><code class="language-python">from SimpleWebSocketServer import SimpleWebSocketServer, WebSocket
clients = [], server = None

class SimpleWSServer(WebSocket):
    def handleConnected(self):
        clients.append(self)

    def handleClose(self):
        clients.remove(self)

def run_server():
    global server
    server = SimpleWebSocketServer('', 9000, SimpleWSServer,
                                   selectInterval=(1000.0 / 15) / 1000)
    server.serveforever()

t = threading.Thread(target=run_server)
t.start()

# The rest of the OpenCV code ...
</code></pre> 
        <p>We used the <code>selectInterval</code> parameter in the server’s constructor to make it periodically check for any pending messages. The server sends messages only when receiving data from clients, or it needs to sit on the main thread in a loop. We can’t let it block the main thread because OpenCV needs it as well. Since we know that the camera runs only at 15fps we can use the same interval on the WebSocket server.</p> 
        <p>Then, after we detect the circles, we can iterate all connected clients and send the current position and radius relative to the image size.</p> 
        <pre><code class="language-python">for client in clients:
    msg = json.dumps({'x': x / w, 'y': y / h, 'radius': radius / w})
    client.sendMessage(unicode(msg))
</code></pre> 
        <p>You can see the <a href="https://gist.github.com/martinsik/a3d6142b0392d77c13ab#file-circle_detection_with_websocket_server-py">full source code for the server is on gist.github.com</a><sup class="po" id="note-25"><a href="#25">25</a></sup>.</p> 
        <p>The JavaScript part will mimic the same behavior as we did with mouse position. We’ll also keep track of the few messages and calculate a mean value for each axis and radius to improve accuracy.</p> 
        <pre><code class="language-javascript">var history = [];
var ws = new WebSocket('ws://localhost:9000');
ws.onopen = function() {
    console.log('onopen');
};
ws.onmessage = function (event) {
    var m = JSON.parse(event.data);
    history.push({ x: m.x * 2 - 1, y: -m.y * 2 + 1, radius: m.radius});

    // ... rest of the function.
};
</code></pre> 
        <p>Instead of setting Earth’s position to my current mouse position we’ll use the <code>msgHistory</code> variable.</p> 
        <p>It’s probably not necessary to paste the entire code here, so feel free to look at <a href="https://gist.github.com/martinsik/a3d6142b0392d77c13ab#file-threejs_with_websockets-js">implementation details on gist.gihtub.com</a><sup class="po" id="note-26"><a href="#26">26</a></sup>.</p> 
        <p>Then add one <code>&lt;video&gt;</code> element with the webcam stream filling the entire window that will be overlaid by our 3D scene with a transparent background.</p> 
        <pre><code class="language-javascript">var videoElm = document.querySelector('video');
// Make sure the video fits the window.
var constrains = { video: { mandatory: { minWidth: window.innerWidth }}};

if (navigator.getUserMedia) {
    navigator.getUserMedia(constrains, function(stream) {
        videoElm.src = window.URL.createObjectURL(stream);
        // When the webcam stream is ready get it's dimensions.
        videoElm.oncanplay = function() {
            init(videoElm.clientWidth, videoElm.clientHeight);
            // Init everything ...

            requestAnimationFrame(render);
        }
    }, function() {});
}
</code></pre> 
        <p>The final result:</p> 
        <figure>
         <iframe src="https://player.vimeo.com/video/156683592" width="500" height="372" frameborder="0" title="Augmented-Reality-earth-opencv-final-SD" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
         <br> 
         <figcaption>
          Final application with Earth mapped to coordinates found by OpenCV.
         </figcaption> 
        </figure> 
        <p>To quickly recap what we did and what the above video shows:</p> 
        <ol> 
         <li>Python back-end runs a WebSocket server.</li> 
         <li>Server detects a circle using OpenCV from a webcam stream.</li> 
         <li>JavaScript client displays the same webcam stream using <code>&lt;video&gt;</code> element.</li> 
         <li>Client renders 3D scene using <a href="http://threejs.org/">Three.js</a><sup class="po" id="note-27"><a href="#27">27</a></sup><sup class="po" id="note-13"><a href="#13">13</a></sup>.</li> 
         <li>Client connects to the server via WebSocket protocol and receives circle position and radius.</li> 
        </ol> 
        <p>The actual code used for this <a href="https://gist.github.com/martinsik/a3d6142b0392d77c13ab#file-threejs_with_websockets-js">demo is available on GitHub</a><sup class="po" id="note-28"><a href="#28">28</a></sup>. It’s slightly more sophisticated and also interpolates coordinates between two messages from the back-end because the webcam stream runs only at 15fps while the 3D scene is rendered at 60fps. You can see the <a href="https://www.youtube.com/watch?v=GQNW3BMKOkI">original video on YouTube</a><sup class="po" id="note-29"><a href="#29">29</a></sup>.</p> 
        <h3 id="caveats">Caveats <a href="#caveats" aria-label="Link to section 'Caveats'" class="sr hsl">Link</a></h3> 
        <p>There are some findings worth noting:</p> 
        <h5 id="circle-detection-isnt-ideal">Circle detection isn’t ideal <a href="#circle-detection-isnt-ideal" aria-label="Link to section 'Circle detection isn’t ideal'" class="sr hsl">Link</a></h5> 
        <p>It’s great that it works with any circular object but it’s very sensitive to noise and image deformation, although as you can see above our result is pretty good. Also, there are probably no practical examples of circle detection available apart from the most basic usage. It might be better to <a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=1048464">use ellipse detection</a><sup class="po" id="note-30"><a href="#30">30</a></sup> but it’s not implemented in OpenCV right now.</p> 
        <h5 id="everything-depends-on-your-setup">Everything depends on your setup <a href="#everything-depends-on-your-setup" aria-label="Link to section 'Everything depends on your setup'" class="sr hsl">Link</a></h5> 
        <p>Built-in webcams are generally pretty bad. 15fps isn’t enough and just increasing it to 30fps reduces motion blur significantly and makes detection more reliable.We can break down this point into four more points:</p> 
        <ul> 
         <li><strong>Camera distortions</strong><br> Many cameras introduce some image distortion, most commonly a fish-eye effect which has a significant influence on shape detection. OpenCV’s documentation has a very straightforward tutorial on how to <a href="http://docs.opencv.org/master/dc/dbb/tutorial_py_calibration.html">reduce distortion by calibrating your camera</a><sup class="po" id="note-31"><a href="#31">31</a></sup>. </li> 
         <li><strong>There’s no official list of devices supported by OpenCV</strong><br> Even if you already have a good camera it might not work with OpenCV without further explanation. I’ve also read about people using some other library to capture a camera image (like <a href="http://damien.douxchamps.net/ieee1394/libdc1394/">libdc1394</a><sup class="po" id="note-32"><a href="#32">32</a></sup> for IEEE 1394-based cameras) and then using OpenCV just to process the images. Brew package manager lets you compile OpenCV directly with libdc1394 support.</li> 
         <li><strong>Some cameras work better with OpenCV than others</strong><br> If you’re lucky you can set <a href="http://docs.opencv.org/master/d8/dfe/classcv_1_1VideoCapture.html#a8c6d8c2d37505b5ca61ffd4bb54e9a7c&amp;gsc.tab=0">some camera options like frames per second</a><sup class="po" id="note-33"><a href="#33">33</a></sup> directly on your camera but it might also have no effect at all if OpenCV isn’t friendly with your device. Again, without any explanation. </li> 
         <li><strong>All parameters depend on a real-world usage</strong><br> When used in a real-world installation, it’s highly recommended to test the algorithms and filters in the actual environment because things like lights, background color or object choice have significant effects on the result. This also includes shadows from daylight, people standing around, and so on. </li> 
        </ul> 
        <h5 id="pattern-matching-is-usually-a-better-choice">Pattern matching is usually a better choice <a href="#pattern-matching-is-usually-a-better-choice" aria-label="Link to section 'Pattern matching is usually a better choice'" class="sr hsl">Link</a></h5> 
        <p>If you see any augmented reality used in practice it’ll be probably based on pattern matching. It’s generally more reliable and not so affected by the problems described above.</p> 
        <h5 id="filters-are-crucial">Filters are crucial <a href="#filters-are-crucial" aria-label="Link to section 'Filters are crucial'" class="sr hsl">Link</a></h5> 
        <p>I think correct usage of filters requires some experience and always a little magic. The processing time of most filters depends on their parameters, although in <a href="http://docs.opencv.org/3.0.0/">OpenCV 3.0</a><sup class="po" id="note-34"><a href="#34">34</a></sup> some of them are already rewritten into CUDA C (a C-like language for highly parallel programming with NVIDIA graphics cards) which brings significant performance improvements.</p> 
        <h5 id="filter-data-from-opencv">Filter data from OpenCV <a href="#filter-data-from-opencv" aria-label="Link to section 'Filter data from OpenCV'" class="sr hsl">Link</a></h5> 
        <p>We’ve seen that circle detection has some inaccuracies: sometimes it fails to find any circle or it detects the wrong radius. To minimize this type of error it would be worthwhile to implement some more sophisticated method to improve accuracy. In our example we used median for <code>x</code>, <code>y</code> and <code>radius</code>, which is very simple. A commonly used filter with good results is the <a href="https://en.wikipedia.org/wiki/Kalman_filter">Kalman filter</a><sup class="po" id="note-35"><a href="#35">35</a></sup>, used by autopilots for drones to reduce inaccuracy coming from sensors. However, its implementation isn’t as simple as using just <code>math.mean()</code> from <a href="http://mathjs.org">http://mathjs.org</a><sup class="po" id="note-36"><a href="#36">36</a></sup>.</p> 
        <h3 id="conclusion">Conclusion <a href="#conclusion" aria-label="Link to section 'Conclusion'" class="sr hsl">Link</a></h3> 
        <p>I first saw a similar application in the <a href="http://www.mncn.csic.es/">National Museum of Natural History in Madrid</a><sup class="po" id="note-37"><a href="#37">37</a></sup> two years ago and I wondered how difficult it would be to make something similar.</p> 
        <p>My core idea behind this demo was to use tools that are common on the web (like WebSockets and Three.js) and don’t require any prerequisites so anyone can start using them right away. That’s why I wanted to use just circle detection and not pattern matching, which would require to print or have some particular real-world object.</p> 
        <p>I need to say that I severely underestimated the actual camera requirements. High frames per second and good lighting are more important than resolution. I also didn’t expect that camera incompatibility with OpenCV would be an issue.</p> 
        <p><em property="editor">(rb, jb, og, ml)</em></p> 
        <h4 class="po" id="footnotes">Footnotes <a href="#footnotes" aria-label="Link to section 'Footnotes'" class="sr hsl">Link</a></h4>
        <ol class="po">
         <li id="#1"><a href="#note-1">1 https://www.smashingmagazine.com/2013/09/introduction-to-polygonal-modeling-and-three-js/</a></li>
         <li id="#2"><a href="#note-2">2 https://www.smashingmagazine.com/2016/11/building-shaders-with-babylon-js/</a></li>
         <li id="#3"><a href="#note-3">3 https://www.smashingmagazine.com/2015/01/why-ajax-isnt-enough/</a></li>
         <li id="#4"><a href="#note-4">4 http://docs.opencv.org/doc/tutorials/introduction/table_of_content_introduction/table_of_content_introduction.html</a></li>
         <li id="#5"><a href="#note-5">5 https://www.macports.org/</a></li>
         <li id="#6"><a href="#note-6">6 http://brew.sh/</a></li>
         <li id="#7"><a href="#note-7">7 http://stackoverflow.com/questions/8044539/listing-available-devices-in-python-opencv</a></li>
         <li id="#8"><a href="#note-8">8 https://en.wikipedia.org/wiki/Canny_edge_detector</a></li>
         <li id="#9"><a href="#note-9">9 http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/canny_detector/canny_detector.html</a></li>
         <li id="#10"><a href="#note-10">10 http://shop.oreilly.com/product/9780596516130.do</a></li>
         <li id="#11"><a href="#note-11">11 https://en.wikipedia.org/wiki/Circle_Hough_Transform</a></li>
         <li id="#12"><a href="#note-12">12 https://gist.github.com/martinsik/a3d6142b0392d77c13ab#file-circle_detection-py</a></li>
         <li id="#13"><a href="#note-13">13 http://threejs.org/</a></li>
         <li id="#14"><a href="#note-14">14 https://gist.github.com/martinsik/a3d6142b0392d77c13ab#file-index-html</a></li>
         <li id="#15"><a href="#note-15">15 http://planetpixelemporium.com/earth.html</a></li>
         <li id="#16"><a href="#note-16">16 http://plnkr.co/edit/baBQZQrbGrv0RiiFGylq?p=preview</a></li>
         <li id="#17"><a href="#note-17">17 http://planetpixelemporium.com/earth.html</a></li>
         <li id="#18"><a href="#note-18">18 http://stemkoski.github.io/Three.js/</a></li>
         <li id="#19"><a href="#note-19">19 http://plnkr.co/edit/u5GuZBgcdkhoDCFBFbga?p=preview</a></li>
         <li id="#20"><a href="#note-20">20 http://planetpixelemporium.com/earth.html</a></li>
         <li id="#21"><a href="#note-21">21 http://plnkr.co/edit/MEYNOIRp7Y2DrrcyU9Eg?p=preview</a></li>
         <li id="#22"><a href="#note-22">22 http://planetpixelemporium.com/earth.html</a></li>
         <li id="#23"><a href="#note-23">23 http://www.tornadoweb.org/en/stable/</a></li>
         <li id="#24"><a href="#note-24">24 http://autobahn.ws/python/</a></li>
         <li id="#25"><a href="#note-25">25 https://gist.github.com/martinsik/a3d6142b0392d77c13ab#file-circle_detection_with_websocket_server-py</a></li>
         <li id="#26"><a href="#note-26">26 https://gist.github.com/martinsik/a3d6142b0392d77c13ab#file-threejs_with_websockets-js</a></li>
         <li id="#27"><a href="#note-27">27 http://threejs.org/</a></li>
         <li id="#28"><a href="#note-28">28 https://gist.github.com/martinsik/a3d6142b0392d77c13ab#file-threejs_with_websockets-js</a></li>
         <li id="#29"><a href="#note-29">29 https://www.youtube.com/watch?v=GQNW3BMKOkI</a></li>
         <li id="#30"><a href="#note-30">30 http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=1048464</a></li>
         <li id="#31"><a href="#note-31">31 http://docs.opencv.org/master/dc/dbb/tutorial_py_calibration.html</a></li>
         <li id="#32"><a href="#note-32">32 http://damien.douxchamps.net/ieee1394/libdc1394/</a></li>
         <li id="#33"><a href="#note-33">33 http://docs.opencv.org/master/d8/dfe/classcv_1_1VideoCapture.html#a8c6d8c2d37505b5ca61ffd4bb54e9a7c&amp;gsc.tab=0</a></li>
         <li id="#34"><a href="#note-34">34 http://docs.opencv.org/3.0.0/</a></li>
         <li id="#35"><a href="#note-35">35 https://en.wikipedia.org/wiki/Kalman_filter</a></li>
         <li id="#36"><a href="#note-36">36 http://mathjs.org</a></li>
         <li id="#37"><a href="#note-37">37 http://www.mncn.csic.es/</a></li>
        </ol> 
        <div class="lt">
         <a href="https://www.smashingmagazine.com/tag/apps/">Apps</a>
         <a href="https://www.smashingmagazine.com/tag/javascript/">JavaScript</a>
        </div> 
        <p> <a href="#top" class="top">? Back to top</a> <a onclick="clicky.log('#sharelink-clicked');" class="sot single" href="https://twitter.com/intent/tweet?original_referer=https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/&amp;source=tweetbutton&amp;text=Simple%20Augmented%20Reality%20With%20OpenCV%2C%20Three.js%20And%20WebSockets&amp;url=https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/&amp;via=smashingmag">Tweet it</a><a onclick="clicky.log('#sharelink-clicked');" class="sot single" href="http://www.facebook.com/sharer/sharer.php?u=https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/">Share on Facebook</a></p> 
        <p></p> 
       </article> 
       <div class="bio clearfix"> 
        <div class="grv"> 
         <img src="https://secure.gravatar.com/avatar/?s=78&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/ae64db7213bb3bf4d4f5c475800250f9?s=78&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/ae64db7213bb3bf4d4f5c475800250f9?s=156&amp;d=mm&amp;r=g" class="avatar" height="78" width="78"> 
        </div> 
        <div class="about"> 
         <a rel="author" class="poa" href="https://www.smashingmagazine.com/author/martinsikora/?rel=author" title="Posts by Martin Sikora">Martin Sikora</a> 
         <p>Martin Sikora works as a developer in Czech based digital agency <a href="https://www.pria.cz/">PRIA</a> in Zlín with various languages and technologies, recently primarily in Angular2 and PHP, but also <a href="http://www.amazon.com/Dart-Essentials-Martin-Sikora-ebook/dp/B00XJRN8ZU">experiments with Dart</a>.</p> 
        </div> 
       </div>
       <div class="adv"> 
        <div class="oa_zone--ad commentspnsrtarget" id="commentspnsrtarget" data-ad-name="Comment Sponsor" data-ad-zone="26" data-ad-media="all"></div> 
       </div> 
       <ul id="comments" class="sub-tabs clearfix"> 
        <li><a href="#show-comments" class="active">10 Comments</a></li> 
       </ul> 
       <div id="discussion" class="subtab-pages discussion"> 
        <div id="show-comments"> 
         <ol id="comments-overview" class="cl"> 
          <li class="comment even thread-even depth-1 clearfix"> <span class="cn">1</span> 
           <div class="c" id="comment-1287626"> 
            <div class="cau clearfix"> 
             <img src="https://secure.gravatar.com/avatar/?s=38&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/944ea27d31d4e800dc09353b97196984?s=38&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/944ea27d31d4e800dc09353b97196984?s=76&amp;d=mm&amp;r=g" class="avatar" height="38" width="38"> 
             <div class="aum"> 
              <h3>Long Spirit</h3> 
              <span class="dati"><a href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/#comment-1287626" title="Jump to Commentlink #1">February 25, 2016 2:59 pm</a></span> 
             </div> 
            </div> 
            <div class="ctx"> 
             <p>Really cool, but the applied usage to real life needs is the main point…</p> 
            </div> 
            <div class="com"> 
             <div class="reply"></div> 
             <div class="rating__container clearfix" aria-live="polite"> 
              <div id="rating__value--1287626" class="rating__value rating__value--negative">
               -19
              </div> 
              <div class="rating__stars" data-comment_id="1287626"> 
               <a class="rating__button rating__button--up" href="#" data-id="1" data-nonce="68e9584fe9" title="Vote up!"></a> 
               <a class="rating__button rating__button--down" href="#" data-id="-1" data-nonce="928c3cc8e7" title="Vote down!"></a> 
              </div> 
             </div> 
            </div> 
           </div> 
           <ul class="children"> 
            <li class="comment odd alt depth-2 clearfix"> <span class="cn">2</span> 
             <div class="c" id="comment-1287791"> 
              <div class="cau clearfix"> 
               <img src="https://secure.gravatar.com/avatar/?s=38&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/08826dd1e705cf9b5235cb26e0be228e?s=38&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/08826dd1e705cf9b5235cb26e0be228e?s=76&amp;d=mm&amp;r=g" class="avatar" height="38" width="38"> 
               <div class="aum"> 
                <h3>Really?</h3> 
                <span class="dati"><a href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/#comment-1287791" title="Jump to Commentlink #2">March 3, 2016 3:57 am</a></span> 
               </div> 
              </div> 
              <div class="ctx"> 
               <p>The applied use case is limited to your own creativity. How about appreciate the fact that you were given a clear tutorial on how to implement a complex design pattern using just a couple readily available frameworks. What were you expecting? A ready-to-sell application using augmented reality?</p> 
              </div> 
              <div class="com"> 
               <div class="reply"></div> 
               <div class="rating__container clearfix" aria-live="polite"> 
                <div id="rating__value--1287791" class="rating__value rating__value--positive">
                 15
                </div> 
                <div class="rating__stars" data-comment_id="1287791"> 
                 <a class="rating__button rating__button--up" href="#" data-id="1" data-nonce="482efa0a6e" title="Vote up!"></a> 
                 <a class="rating__button rating__button--down" href="#" data-id="-1" data-nonce="c780501eb5" title="Vote down!"></a> 
                </div> 
               </div> 
              </div> 
             </div> </li>
            <!-- #comment-## --> 
           </ul>
           <!-- .children --> </li>
          <!-- #comment-## --> 
          <li class="comment even thread-odd thread-alt depth-1 clearfix"> <span class="cn">3</span> 
           <div class="c" id="comment-1287628"> 
            <div class="cau clearfix"> 
             <img src="https://secure.gravatar.com/avatar/?s=38&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/f12e933f5e8a7f6daf1933f71dce7435?s=38&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/f12e933f5e8a7f6daf1933f71dce7435?s=76&amp;d=mm&amp;r=g" class="avatar" height="38" width="38"> 
             <div class="aum"> 
              <h3>sunpietro</h3> 
              <span class="dati"><a href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/#comment-1287628" title="Jump to Commentlink #3">February 25, 2016 3:43 pm</a></span> 
             </div> 
            </div> 
            <div class="ctx"> 
             <p>Good post! You reminded me the days I had been developing augmented reality apps using ActionScript!<br> I’ll give it a try once again :)</p> 
            </div> 
            <div class="com"> 
             <div class="reply"></div> 
             <div class="rating__container clearfix" aria-live="polite"> 
              <div id="rating__value--1287628" class="rating__value rating__value--positive">
               4
              </div> 
              <div class="rating__stars" data-comment_id="1287628"> 
               <a class="rating__button rating__button--up" href="#" data-id="1" data-nonce="7783d0b694" title="Vote up!"></a> 
               <a class="rating__button rating__button--down" href="#" data-id="-1" data-nonce="18b9a07cc3" title="Vote down!"></a> 
              </div> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt thread-even depth-1 clearfix"> <span class="cn">4</span> 
           <div class="c" id="comment-1287857"> 
            <div class="cau clearfix"> 
             <img src="https://secure.gravatar.com/avatar/?s=38&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/eadf87190ba443ab28556a43e3479b00?s=38&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/eadf87190ba443ab28556a43e3479b00?s=76&amp;d=mm&amp;r=g" class="avatar" height="38" width="38"> 
             <div class="aum"> 
              <h3>Eneko</h3> 
              <span class="dati"><a href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/#comment-1287857" title="Jump to Commentlink #4">March 7, 2016 10:44 am</a></span> 
             </div> 
            </div> 
            <div class="ctx"> 
             <p>Great example!<br> I want to recreate all you’ve explained in this article but some parts are missing in the Github source. How are you sending the clients video stream to the server? In the back-end you are getting the video data directly from the webcam, not from the data which is sent from the client.<br> And even all, this is a good reference to start working on augmented reality. Thank you!</p> 
            </div> 
            <div class="com"> 
             <div class="reply"></div> 
             <div class="rating__container clearfix" aria-live="polite"> 
              <div id="rating__value--1287857" class="rating__value">
               0
              </div> 
              <div class="rating__stars" data-comment_id="1287857"> 
               <a class="rating__button rating__button--up" href="#" data-id="1" data-nonce="2c7bbcaf7e" title="Vote up!"></a> 
               <a class="rating__button rating__button--down" href="#" data-id="-1" data-nonce="7baa186f4d" title="Vote down!"></a> 
              </div> 
             </div> 
            </div> 
           </div> 
           <ul class="children"> 
            <li class="comment even depth-2 clearfix"> <span class="cn">5</span> 
             <div class="c" id="comment-1287889"> 
              <div class="cau clearfix"> 
               <img src="https://secure.gravatar.com/avatar/?s=38&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/ffa4e0a2eef8279ea313b05a22bd4c0e?s=38&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/ffa4e0a2eef8279ea313b05a22bd4c0e?s=76&amp;d=mm&amp;r=g" class="avatar" height="38" width="38"> 
               <div class="aum"> 
                <h3>David</h3> 
                <span class="dati"><a href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/#comment-1287889" title="Jump to Commentlink #5">March 9, 2016 8:25 pm</a></span> 
               </div> 
              </div> 
              <div class="ctx"> 
               <p>WebSockets is how it’s done, which is optimal, since rather than XMLHTTP requests are one at a time, but WebSockets is real-time, which, again, is optimal.</p> 
              </div> 
              <div class="com"> 
               <div class="reply"></div> 
               <div class="rating__container clearfix" aria-live="polite"> 
                <div id="rating__value--1287889" class="rating__value rating__value--positive">
                 3
                </div> 
                <div class="rating__stars" data-comment_id="1287889"> 
                 <a class="rating__button rating__button--up" href="#" data-id="1" data-nonce="41adc6a247" title="Vote up!"></a> 
                 <a class="rating__button rating__button--down" href="#" data-id="-1" data-nonce="04f977f91c" title="Vote down!"></a> 
                </div> 
               </div> 
              </div> 
             </div> </li>
            <!-- #comment-## --> 
           </ul>
           <!-- .children --> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt thread-odd thread-alt depth-1 clearfix"> <span class="cn">6</span> 
           <div class="c" id="comment-1287890"> 
            <div class="cau clearfix"> 
             <img src="https://secure.gravatar.com/avatar/?s=38&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/ffa4e0a2eef8279ea313b05a22bd4c0e?s=38&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/ffa4e0a2eef8279ea313b05a22bd4c0e?s=76&amp;d=mm&amp;r=g" class="avatar" height="38" width="38"> 
             <div class="aum"> 
              <h3>David</h3> 
              <span class="dati"><a href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/#comment-1287890" title="Jump to Commentlink #6">March 9, 2016 8:27 pm</a></span> 
             </div> 
            </div> 
            <div class="ctx"> 
             <p>Great example! And good job with picking the method of communication. I have never done anything like this before, so this is really cool!</p> 
            </div> 
            <div class="com"> 
             <div class="reply"></div> 
             <div class="rating__container clearfix" aria-live="polite"> 
              <div id="rating__value--1287890" class="rating__value rating__value--positive">
               2
              </div> 
              <div class="rating__stars" data-comment_id="1287890"> 
               <a class="rating__button rating__button--up" href="#" data-id="1" data-nonce="cc6947f2fe" title="Vote up!"></a> 
               <a class="rating__button rating__button--down" href="#" data-id="-1" data-nonce="fddd94637f" title="Vote down!"></a> 
              </div> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even thread-even depth-1 clearfix"> <span class="cn">7</span> 
           <div class="c" id="comment-1288158"> 
            <div class="cau clearfix"> 
             <img src="https://secure.gravatar.com/avatar/?s=38&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/cc717ceea1d080cf6adbec0ee38338e7?s=38&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/cc717ceea1d080cf6adbec0ee38338e7?s=76&amp;d=mm&amp;r=g" class="avatar" height="38" width="38"> 
             <div class="aum"> 
              <h3>Smith</h3> 
              <span class="dati"><a href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/#comment-1288158" title="Jump to Commentlink #7">March 23, 2016 8:52 pm</a></span> 
             </div> 
            </div> 
            <div class="ctx"> 
             <p>I have yet to try this but can you elaborate how video is played on client-end? Where exactly are you transmitting the video. Sorry for noobish question.</p> 
            </div> 
            <div class="com"> 
             <div class="reply"></div> 
             <div class="rating__container clearfix" aria-live="polite"> 
              <div id="rating__value--1288158" class="rating__value rating__value--positive">
               1
              </div> 
              <div class="rating__stars" data-comment_id="1288158"> 
               <a class="rating__button rating__button--up" href="#" data-id="1" data-nonce="9319f67522" title="Vote up!"></a> 
               <a class="rating__button rating__button--down" href="#" data-id="-1" data-nonce="b203de864d" title="Vote down!"></a> 
              </div> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt thread-odd thread-alt depth-1 clearfix"> <span class="cn">8</span> 
           <div class="c" id="comment-1289069"> 
            <div class="cau clearfix"> 
             <img src="https://secure.gravatar.com/avatar/?s=38&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/4a6c03662808b0e4b739a41f8ee0c87e?s=38&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/4a6c03662808b0e4b739a41f8ee0c87e?s=76&amp;d=mm&amp;r=g" class="avatar" height="38" width="38"> 
             <div class="aum"> 
              <h3>Mario</h3> 
              <span class="dati"><a href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/#comment-1289069" title="Jump to Commentlink #8">May 1, 2016 5:11 am</a></span> 
             </div> 
            </div> 
            <div class="ctx"> 
             <p>This shit was so easy with actionscript 3.0, one of the few things that javascript and webgl haven’t been able to overpass is the 3D rendering on flash, especially on how easy it was to develop a simple example like this.</p> 
            </div> 
            <div class="com"> 
             <div class="reply"></div> 
             <div class="rating__container clearfix" aria-live="polite"> 
              <div id="rating__value--1289069" class="rating__value rating__value--positive">
               1
              </div> 
              <div class="rating__stars" data-comment_id="1289069"> 
               <a class="rating__button rating__button--up" href="#" data-id="1" data-nonce="3d6c480387" title="Vote up!"></a> 
               <a class="rating__button rating__button--down" href="#" data-id="-1" data-nonce="21592c5445" title="Vote down!"></a> 
              </div> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even thread-even depth-1 clearfix"> <span class="cn">9</span> 
           <div class="c" id="comment-1289644"> 
            <div class="cau clearfix"> 
             <img src="https://secure.gravatar.com/avatar/?s=38&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/28e17bb2cb6eb4b050d04e72bcfa9c16?s=38&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/28e17bb2cb6eb4b050d04e72bcfa9c16?s=76&amp;d=mm&amp;r=g" class="avatar" height="38" width="38"> 
             <div class="aum"> 
              <h3>Michal</h3> 
              <span class="dati"><a href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/#comment-1289644" title="Jump to Commentlink #9">May 30, 2016 11:57 pm</a></span> 
             </div> 
            </div> 
            <div class="ctx"> 
             <p>Nice idea however some people want to know how to run the client side source – how they can do it? via web browser? which adress? where should they put the client’s side files (e.g. index.html) (in var/www in linux and run apache server?). What is main.js file? Should they rename “threejs_with_websockets.js” to to “main.js”? What about earth and moon textures or downloading three.js library? Which version of three.js library is the most suitable for this project?</p> 
            </div> 
            <div class="com"> 
             <div class="reply"></div> 
             <div class="rating__container clearfix" aria-live="polite"> 
              <div id="rating__value--1289644" class="rating__value">
               0
              </div> 
              <div class="rating__stars" data-comment_id="1289644"> 
               <a class="rating__button rating__button--up" href="#" data-id="1" data-nonce="5ebbf25f3f" title="Vote up!"></a> 
               <a class="rating__button rating__button--down" href="#" data-id="-1" data-nonce="ac28fb0021" title="Vote down!"></a> 
              </div> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt thread-odd thread-alt depth-1 clearfix"> <span class="cn">10</span> 
           <div class="c" id="comment-1290013"> 
            <div class="cau clearfix"> 
             <img src="https://secure.gravatar.com/avatar/?s=38&amp;d=mm&amp;r=g" data-src="https://secure.gravatar.com/avatar/e5b263fcd47d524ebdfe2afeec7df359?s=38&amp;d=mm&amp;r=g" data-src-retina="https://secure.gravatar.com/avatar/e5b263fcd47d524ebdfe2afeec7df359?s=76&amp;d=mm&amp;r=g" class="avatar" height="38" width="38"> 
             <div class="aum"> 
              <h3>Jay</h3> 
              <span class="dati"><a href="https://www.smashingmagazine.com/2016/02/simple-augmented-reality-with-opencv-a-three-js/#comment-1290013" title="Jump to Commentlink #10">June 20, 2016 6:08 pm</a></span> 
             </div> 
            </div> 
            <div class="ctx"> 
             <p>The demo on github seems incomplete. How does the videocapture in opencv get displayed on the web page? I have tried and it doesn’t work.</p> 
            </div> 
            <div class="com"> 
             <div class="reply"></div> 
             <div class="rating__container clearfix" aria-live="polite"> 
              <div id="rating__value--1290013" class="rating__value rating__value--positive">
               2
              </div> 
              <div class="rating__stars" data-comment_id="1290013"> 
               <a class="rating__button rating__button--up" href="#" data-id="1" data-nonce="4067a352bd" title="Vote up!"></a> 
               <a class="rating__button rating__button--down" href="#" data-id="-1" data-nonce="f357d889e7" title="Vote down!"></a> 
              </div> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
         </ol> 
        </div> 
       </div> 
      </div> 
     </div> 
     <p><a href="#top" class="top" title="Jump to the top of the page">? Back to top</a></p> 
    </div>
   </div>
  </main> 
  <aside id="wpsidebar" class="sb" role="complementary"> 
   <div class="col side"> 
    <section class="mise sf clearfix" role="search"> 
     <form id="search_2" method="get" action="https://www.smashingmagazine.com/search-results/" target="_top"> 
      <label class="sl" for="searching_2">Search on Smashing Magazine</label> 
      <input id="searching_2" name="q" type="text" placeholder="e.g. JavaScript"> 
      <button class="search_submit" type="submit">Search</button> 
      <input type="hidden" name="cx" value="partner-pub-6779860845561969:5884617103"> 
      <input type="hidden" name="cof" value="FORID:10"> 
      <input type="hidden" name="ie" value="UTF-8"> 
     </form> 
    </section> 
    <section class="bw faw"> 
     <p class="awithus"> <a class="ed-us" href="mailto:sponsoring@smashingmagazine.com"> Become a sponsor! </a> </p> 
     <div id="spnsrlist-a" class="oa_zone--sponsor" data-sponsor-lines="1"></div> 
    </section> 
    <section class="sf wg"> 
     <h3> <a href="https://www.smashingmagazine.com/the-smashing-newsletter/"> <img src="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/smnl.png" alt="198,064 fine folks have signed up to our Newsletter already, when will you?"> Smashing Newsletter </a> </h3> 
     <p>Subscribe to our email newsletter for useful tips and valuable resources, sent out every second Tuesday.</p> 
     <div id="mc_embed_signup" class="mcf"> 
      <form action="//smashingmagazine.us1.list-manage.com/subscribe/post?u=16b832d9ad4b28edf261f34df&amp;id=a1666656e0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate"> 
       <label for="mcer-EMAIL" class="sr">Please provide us with your email address:</label> 
       <input id="mcer-EMAIL" name="email" autocomplete="email" type="text" placeholder="email address"> 
       <button id="mc-embedded-subscribe" name="subscribe" class="submit" type="submit">Subscribe</button> 
      </form> 
      <a href="https://www.smashingmagazine.com/the-smashing-newsletter/"><img class="mcc" src="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/mc-counter.svg" alt="Currently, we have 191728 subscribers to our newsletter"></a> 
     </div> 
    </section> 
    <section class="bw"> 
     <div id="spnsrlist-b" class="oa_zone--sponsor" data-sponsor-lines="3"></div> 
    </section> 
    <section class="so wg"> 
     <div class="fir"> 
      <a href="https://www.smashingmagazine.com/design-systems-book" style="border:0;"> <img src="https://www.smashingmagazine.com/wp-content/uploads/2017/06/cover-design-systems-2-sidebar.png" alt="Design Systems Book" width="94" height="131"> </a> 
      <p> As designing static pages has become untenable, many have started to approach design in a modular way. In this book, we’ll identify what makes an <strong>effective design system</strong> that empowers teams to create great digital products. <a href="https://www.smashingmagazine.com/design-systems-book/">Get the book now ?</a> </p> 
     </div> 
     <div class="sec"> 
      <a href="https://www.smashingmagazine.com/inclusive-design-patterns" style="border: 0;"> <img src="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/inclusive-design-patterns.png" alt="Inclusive Design Patterns by Heydon Pickering" width="94" height="135"> </a> 
      <p> Today, too many websites are still inaccessible. In our new book <em>Inclusive Design Patterns</em>, we explore how to craft <strong>flexible front-end design patterns</strong> and make future-proof and accessible interfaces without extra effort. Hardcover, 312 pages. <a href="https://www.smashingmagazine.com/inclusive-design-patterns">Get the book ?</a> </p> 
     </div> 
     <div class="thi"> 
      <a href="https://www.smashingmagazine.com/sketch-handbook" style="border:0;"> <img src="https://www.smashingmagazine.com/wp-content/uploads/2016/11/sketch-handbook-sidebar-opt-v2.png" alt="The Sketch Handbook, with tips and tricks for designing with Sketch." width="94" height="142"></a> 
      <p>Meet the new <em>Sketch Handbook</em>, our brand <strong>new Smashing book</strong> that will help you master all the tricky, advanced facets of Sketch. Filled with <strong>practical examples and tutorials in 12 chapters</strong>, the book will help you become more proficient in your work. <a href="https://www.smashingmagazine.com/sketch-handbook">Get the book</a>.</p> 
     </div> 
    </section> 
    <section class="bw"> 
     <div id="spnsrlist-c" class="oa_zone--sponsor" data-sponsor-lines="2"></div> 
    </section> 
    <section class="mt wg"> 
     <a href="http://mediatemple.net"> <img data-src="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/mediatemple.svg" alt="Media Temple Logo" width="94" height="94"> </a> 
     <p>We are proudly hosted on<br><a href="http://mediatemple.net/webhosting/vps/dedicated-server/">Media Temple Dedicated Servers</a>. Performance matters.</p> 
    </section> 
    <section> 
     <div class="oa_zone--ad" id="sidebar_special-1" data-ad-name="Sidebar Special 1" data-ad-zone="72"></div> 
    </section> 
    <section> 
     <div class="oa_zone--ad" id="sidebar_special-2" data-ad-name="Sidebar Special 2" data-ad-zone="72"></div> 
    </section> 
    <section> 
     <div class="oa_zone--ad" id="sidebar_special-3" data-ad-name="Sidebar Special 3" data-ad-zone="72"></div> 
    </section> 
    <section> 
     <div class="oa_zone--ad" id="sidebar_special-4" data-ad-name="Sidebar Special 4" data-ad-zone="72"></div> 
    </section> 
    <section class="wg"> 
     <div id="jobs"> 
      <h3> <a href="http://jobs.smashingmagazine.com/?pk_campaign=sm&amp;piwik_kwd=widget"> <span>Smashing Job Board</span> <img data-src="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/images/sm-jobs.png" alt="Smashing Jobs" width="36" height="34"> </a> </h3> 
      <ul class="tl">
       <li class="clearfix"><a href="http://feedproxy.google.com/~r/smjobs/~3/tIwStCTwaB4/2503551">Project Manager - Digital, Websites, Apps - Morley - (Saginaw) - FullTime</a><p> Project Manager - Digital, Websites, Apps We're looking for someone to lead digital projects from concept to completion and can communicate via ...</p></li>
       <li class="clearfix"><a href="http://feedproxy.google.com/~r/smjobs/~3/IJFsA_ueSpM/2503466">Senior Graphic Designer - Verily Magazine - (New York, New York) - FullTime</a><p>Graphic Designer Want to create something meaningful? This is your chance. Verily is currently looking for a full-time Graphic Designer t...</p></li>
      </ul> 
      <a class="cr" href="http://jobs.smashingmagazine.com?pk_campaign=sm&amp;piwik_kwd=widget"> View more job openings… </a> 
     </div> 
    </section> 
    <section class="clearfix"> 
     <div class="oa_zone--ad sidebar_sky" id="sidebar_sky-1" data-ad-name="Sidebar 1" data-ad-zone="40"></div> 
    </section> 
    <section class="clearfix"> 
     <div class="oa_zone--ad sidebar_sky" id="sidebar_sky-2" data-ad-name="Sidebar 2" data-ad-zone="40"></div> 
    </section> 
    <section class="so wg conf"> 
     <div class="fir"> 
      <a href="https://smashingconf.com/barcelona-2017"> <img data-src="https://www.smashingmagazine.com/wp-content/uploads/2017/06/smashingconf-barcelona-sidebar.png" alt="SmashingConf Barcelona 2017" height="100" width="100"> </a> 
      <p> Trends don’t matter, but techniques do. With <a href="https://smashingconf.com/barcelona-2017/">SmashingConf Barcelona</a>, we’ll explore problems, smart solutions and lessons learned from actual projects. Taking place on October 17–18 at the Palau de la Música Catalana. <a href="https://smashingconf.com/barcelona-2017/registration">To the tickets ?</a> </p> 
     </div> 
    </section> 
    <section class="bw"> 
     <div id="spnsrlist-d" class="oa_zone--sponsor" data-sponsor-lines="2"></div> 
    </section> 
    <section class="clearfix"> 
     <div class="oa_zone--ad sidebar_sky" id="sidebar_sky-3" data-ad-name="Sidebar 3" data-ad-zone="40"></div> 
    </section> 
   </div> 
  </aside> 
  <footer class="f" id="footer" role="contentinfo"> 
   <p class="stmt"> <em>With a commitment to quality content for the design community.</em> <br>Founded by Vitaly Friedman and Sven Lennartz. 2006-2017. <br>Made in Germany. <span class="flinks"> ? <a href="https://www.smashingmagazine.com/write-for-us/">Write for us</a> – <a href="https://www.smashingmagazine.com/contact/">Contact us</a> – <a href="https://www.smashingmagazine.com/privacy-policy-2/">Datenschutzerklärung</a> – <a href="https://www.smashingmagazine.com/about/">Impressum</a>. </span> </p> 
  </footer> 
  <script type="text/javascript">
/* <![CDATA[ */
var iec_config = {"ajax_url":"https:\/\/www.smashingmagazine.com\/wp-json\/inpsyde-extended-comments\/rate\/","nonce":"cd18fe9c17"};
/* ]]> */
</script> 
  <script id="loadjs__inpsyde_extended_comments_rating">!function(a){"use strict";a.loadOnloadJS=function(b,c){a.addEventListener("load",function(){loadJS(b,c)},!1)},a.loadJS=function(b,c){var d=a.document.createElement("script");d.src=b,d.async=c||!1,a.document.body.appendChild(d)}}(window);
 loadOnloadJS( "https://www.smashingmagazine.com/wp-content/plugins/extended-comments/assets/js/build.min.js?ver=1.0", 1 );</script>
  <script id="inlinejs__preload-polfill">!function(t){"use strict";var e=t.document,r={};r.isPreloadSupported=function(){try{return e.createElement("link").relList.supports("preload")}catch(t){return!1}},r.init=function(){for(var t=e.getElementsByTagName("link"),r=0;r<t.length;r++){var n=t[r];"preload"===n.rel&&"style"===n.getAttribute("as")&&(loadCSS(n.href,n),n.rel=null)}},window.loadCSS&&!r.isPreloadSupported()&&r.init()}(this);</script>
  <script id="loadjs__comment-reply"> loadOnloadJS( "https://www.smashingmagazine.com/wp-includes/js/comment-reply.min.js", 1 );</script>
  <script id="loadjs__smash-onload"> loadOnloadJS( "https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/js/onload.min.js?ver=6.4.13", 1 );</script>
  <script id="loadjs__smash-fastclick"> loadOnloadJS( "https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/js/fastclick.min.js?ver=6.4.13", 1 );</script>
  <script id="loadjs__smash-lazy-images"> loadOnloadJS( "https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/js/lazy-images.min.js?ver=6.4.13", 1 );</script>
  <script id="loadjs__smash-blocked"> loadOnloadJS( "https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/js/blocked.min.js?ver=6.4.13", 1 );</script>
  <script id="loadjs__codepen"> loadOnloadJS( "https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/js/codepen.js?ver=6.4.13", 1 );</script>
  <script id="loadjs__prism"> loadOnloadJS( "https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/js/prism.js?ver=6.4.13", 1 );</script>
  <script type="text/javascript">
/* <![CDATA[ */
var AdsI18N = {"Advertisement":"Advertisement"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://www.smashingmagazine.com/wp-content/themes/smashing-magazine/assets/js/ads.min.js?ver=6.4.13"></script> 
  <script id="inlinejs__wp-embed">!function(a,b){"use strict";function c(){if(!e){e=!0;var a,c,d,f,g=-1!==navigator.appVersion.indexOf("MSIE 10"),h=!!navigator.userAgent.match(/Trident.*rv:11\./),i=b.querySelectorAll("iframe.wp-embedded-content");for(c=0;c<i.length;c++)if(d=i[c],!d.getAttribute("data-secret")){if(f=Math.random().toString(36).substr(2,10),d.src+="#?secret="+f,d.setAttribute("data-secret",f),g||h)a=d.cloneNode(!0),a.removeAttribute("security"),d.parentNode.replaceChild(a,d)}else;}}var d=!1,e=!1;if(b.querySelector)if(a.addEventListener)d=!0;if(a.wp=a.wp||{},!a.wp.receiveEmbedMessage)if(a.wp.receiveEmbedMessage=function(c){var d=c.data;if(d.secret||d.message||d.value)if(!/[^a-zA-Z0-9]/.test(d.secret)){var e,f,g,h,i,j=b.querySelectorAll('iframe[data-secret="'+d.secret+'"]'),k=b.querySelectorAll('blockquote[data-secret="'+d.secret+'"]');for(e=0;e<k.length;e++)k[e].style.display="none";for(e=0;e<j.length;e++)if(f=j[e],c.source===f.contentWindow){if(f.removeAttribute("style"),"height"===d.message){if(g=parseInt(d.value,10),g>1e3)g=1e3;else if(200>~~g)g=200;f.height=g}if("link"===d.message)if(h=b.createElement("a"),i=b.createElement("a"),h.href=f.getAttribute("src"),i.href=d.value,i.host===h.host)if(b.activeElement===f)a.top.location.href=d.value}else;}},d)a.addEventListener("message",a.wp.receiveEmbedMessage,!1),b.addEventListener("DOMContentLoaded",c,!1),a.addEventListener("load",c,!1)}(window,document);</script> 
  <script>try {
			SmashingAds.loadAds();
		} catch ( e ) {
		}</script> 
  <script>try {
			SmashingAds.render( OA_output );
		} catch ( e ) {
		}</script>  
 </body>
</html>