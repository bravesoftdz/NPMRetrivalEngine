<!doctype html>
<html>
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <title>How to start a WhatsApp conversation directly from the web</title> 
  <meta name="description" content=""> 
  <meta name="HandheldFriendly" content="True"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <link href="https://pbs.twimg.com/profile_images/663743244069527552/gs041hRp.png" rel="apple-touch-icon"> 
  <link rel="shortcut icon" href="/favicon.ico"> 
  <meta name="theme-color" content="#7e4396"> 
  <meta name="apple-mobile-web-app-status-bar-style" content="#7e4396"> 
  <link rel="stylesheet" type="text/css" href="/assets/css/screen.css?v=49f9d751bd"> 
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400"> 
  <meta name="referrer" content="origin"> 
  <meta property="og:site_name" content="The Marketing Technologist | The marketing technology blog"> 
  <meta property="og:type" content="article"> 
  <meta property="og:title" content="How to start a WhatsApp conversation directly from the web"> 
  <meta property="og:description" content="Did you know you can send a WhatsApp message directly from a web page? You might have already seen this elsewhere because AddThis also offers it in their well-known and well-spread sharing tools. As an online marketing agency, we can..."> 
  <meta property="og:url" content="https://www.themarketingtechnologist.co/open-a-whatsapp-conversation-directly-from-your-ad/"> 
  <meta property="og:image" content="https://themarketingtechnologist-ghost.s3.amazonaws.com/2016/Aug/1200_628_MarketingTechnologist_Template__1_-1470168722663.jpg"> 
  <meta property="article:published_time" content="2016-08-02T20:51:19.006Z"> 
  <meta property="article:modified_time" content="2016-08-02T21:03:36.975Z"> 
  <meta property="article:tag" content="Code"> 
  <meta name="twitter:card" content="summary_large_image"> 
  <meta name="twitter:title" content="How to start a WhatsApp conversation directly from the web via @marketingtechnologist"> 
  <meta name="twitter:description" content="Did you know you can send a WhatsApp message directly from a web page? You might have already seen this elsewhere because AddThis also offers it in their well-known and well-spread sharing tools. As an online marketing agency, we can..."> 
  <meta name="twitter:url" content="https://www.themarketingtechnologist.co/open-a-whatsapp-conversation-directly-from-your-ad/"> 
  <meta name="twitter:image:src" content="https://themarketingtechnologist-ghost.s3.amazonaws.com/2016/Aug/1200_628_MarketingTechnologist_Template__1_-1470168722663.jpg"> 
  <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "The Marketing Technologist | The marketing technology blog",
    "author": {
        "@type": "Person",
        "name": "Siebe Hiemstra",
        "image": "https://pbs.twimg.com/profile_images/378800000097198037/8c4c4e234c213b1b96b5668434f528ec.jpeg",
        "url": "https://www.themarketingtechnologist.co/author/siebe",
        "sameAs": null,
        "description": "Technical Lead at Greenhouse Group"
    },
    "headline": "How to start a WhatsApp conversation directly from the web",
    "url": "https://www.themarketingtechnologist.co/open-a-whatsapp-conversation-directly-from-your-ad/",
    "datePublished": "2016-08-02T20:51:19.006Z",
    "dateModified": "2016-08-02T21:03:36.975Z",
    "image": "https://themarketingtechnologist-ghost.s3.amazonaws.com/2016/Aug/1200_628_MarketingTechnologist_Template__1_-1470168722663.jpg",
    "keywords": "Code",
    "description": "Did you know you can send a WhatsApp message directly from a web page? You might have already seen this elsewhere because AddThis also offers it in their well-known and well-spread sharing tools. As an online marketing agency, we can..."
}
    </script> 
  <script type="text/javascript" src="/shared/ghost-url.min.js?v=49f9d751bd"></script> 
  <script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "e6cfb4b8cc3d"
});
</script> 
  <meta name="generator" content="Ghost 0.7"> 
  <link rel="alternate" type="application/rss+xml" title="The Marketing Technologist | The marketing technology blog" href="https://www.themarketingtechnologist.co/rss/"> 
  <meta name="ProjectName" content="TheMarketingTechnologist"> 
  <meta name="ProjectBuild" content="09-11-2015 12:00"> 
  <link href="https://fonts.googleapis.com/css?family=Bree+Serif" rel="stylesheet" type="text/css"> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.css" rel="stylesheet" type="text/css"> 
  <meta name="google-site-verification" content="nwvU3LNRvNBtunzaknMaAiG75vDQ_0R9PRBzDV6w5ns"> 
  <style>
.post-title a,.post-template .post-title {
color: #7e4396 
}
.home-template .page-description, .post-template .page-description {
  color: rgba(255,255,255,.7);
}
.subscribe-button:nth-child(2) {display:none}
.tag-python .post {
max-width:950px;
}
.tag-datascience .post {
max-width:950px;
}
    
.post-content > p:last-child::after {
content: '*/';
    color: #7E4396;
    font-weight: bold;
    font-size: 1.4em;
    display: inline-block;
    position: absolute;
    letter-spacing: -4px;
}
    
    

.home-template .page-title, .post-template .page-title {
color: #fff;
}
.post-template .page-description {
font-size: 1.7rem;
}
.vertical,.main-nav.overlay,.no-cover.main-header {
background-color: #7e4396
}

h1 a, h1 a:hover {
color: #fff;
text-decoration:none;
}
    
    video {
  width: 100%    !important;
  height: auto   !important;
}
    .page-title a {
        display: block;
    height: 100%;
    }
.no-cover .main-nav.overlay .subscribe-button {
color: rgba(255,255,255,0.8);
  border-color: rgba(255,255,255,0.7);
}
.no-cover .main-nav.overlay .subscribe-button:hover {
color: #000;
}
.no-cover .main-nav.overlay .twitter-button{
margin-right:5px;
}
h1 a:hover {
color: rgba(0,0,0,1);
}

.post-template .page-title {
  font-size: 5rem;
color:#fff;
}
.main-header.post-header {
height:auto;
padding: 2rem 0;
}
.page-title {
font-size:6rem;
}

@media only screen and (max-width: 500px) {
.page-title {
font-size:4rem;
}
}
    
    @media only screen and (max-width: 400px) {
.hide-mobile {
    display:none !important;
}
}
    
 .paged .page-title, .home-template .page-title {
    color: #fff;
    background-image: url(https://themarketingtechnologist-ghost.s3.amazonaws.com/2015/Nov/logo_white__1_-1447872577400.png);
    width: 250px;
    height: 250px;
    background-size: 100%;
    text-indent: -9999px;
    margin: 0 auto;
    margin-top: 30px;
    margin-bottom: 30px;
}
    .paged .categories {
         font-size: .8em;
    }
    .paged .page-title {
        width: 150px;
    height: 150px;
    background-size: 100%;
    }
    @media only screen and (min-width: 500px) {
    .paged .page-description, .home-template .page-description {
     margin-bottom: 40px;   
    }}
    
    .post-template .page-title {
    font-size: 5rem;
    color: #fff;
    color: #fff;
    background-image: url(https://themarketingtechnologist-ghost.s3.amazonaws.com/2016/Jan/logo_white-1452095021362.png);
    width: 130px;
    height: 130px;
    background-size: 100%;
    text-indent: -9999px;
    margin: 0 auto;
    margin-top: 10px;
    margin-bottom: 20px;
}
    .paged .page-description {
    font-size:1.5rem;
    }
    .post-template .categories a {
     font-size:14px;   
    }
</style> 
  <meta property="og:image" content="http://zandbak.acceptatie.bluemango.nl/geek/logo3.png"> 
 </head> 
 <body class="post-template tag-code"> 
  <!-- Go to www.addthis.com/dashboard to customize your tools --> 
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5649e56325dbdbd0" async></script> 
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5649e56325dbdbd0" async></script> 
  <header class="main-header no-cover post-header"> 
   <div class="vertical"> 
    <div class="main-header-content inner"> 
     <h1 class="page-title"><a href="/">The Marketing Technologist.</a></h1> 
     <h2 class="page-description">We talk about analytics, code, data science and everything related to marketing technology. Backed by the tech geeks of Greenhouse Group.</h2> 
    </div> 
   </div> 
   <a class="scroll-down icon-arrow-left" href="#content" data-offset="-45"><span class="hidden">Scroll Down</span></a> 
  </header> 
  <div class="categories"> 
   <div class="search"> 
    <form> 
     <input id="search-field" placeholder="Search.."> 
    </form> 
    <div id="results"></div> 
   </div> 
   <ul style="
    list-style-type: none;
    display: block;
    height: 30px;
    text-align: center;
"> 
    <li style="
    display: inline;
    /* width: 110px; */
    /* float: left; */
"><a href="/tag/video/">Video</a></li> 
    <li style="
    display: inline;     /* width: 110px; */
    /* float: left; */
"><a href="/tag/analytics">Analytics</a></li> 
    <li style="
    display: inline;
    /* width: 110px; */
    /* float: left; */
"><a href="/tag/social-advertising/">Social</a></li> 
    <li style="
    display: inline;     /* width: 110px; */
    /* float: left; */
"><a href="/tag/datascience">Data Science</a></li> 
    <li style="
    display: inline;     /* width: 110px; */
    /* float: left; */
"><a href="/tag/code">Code</a></li> 
   </ul> 
  </div> 
  <main class="content" role="main"> 
   <article class="post tag-code"> 
    <header class="post-header"> 
     <h1 class="post-title">How to start a WhatsApp conversation directly from the web</h1> 
     <span class="post-author">By <a href="/author/siebe/">Siebe Hiemstra</a></span> 
     <section class="post-meta"> 
      <time class="post-date" datetime="2016-08-02">02 August 2016</time> 
      <span class="post-tags"><a href="/tag/code/">Code</a></span> 
     </section> 
    </header> 
    <div class="post-image">
     <img src="https://themarketingtechnologist-ghost.s3.amazonaws.com/2016/Aug/1200_628_MarketingTechnologist_Template__1_-1470168722663.jpg">
    </div> 
    <section class="post-content"> 
     <p>Did you know you can send a <a href="https://www.whatsapp.com/">WhatsApp</a> message directly from a web page? You might have already seen this elsewhere because AddThis also offers it in their well-known and well-spread sharing tools. As an online marketing agency, we can also leverage the power of WhatsApp by integrating it in our campaigns. We could, for example, create a button that sends a campaign's promotion code to a buddy over WhatsApp. The good news is: it's extremely easy. The bad news? It has quite some limitations.</p> 
     <h2 id="sendaspecificmessage">Send a specific message</h2> 
     <p>Most of the times when you are browsing the web, you utilise the <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> or <a href="https://en.wikipedia.org/wiki/HTTPS">HTTPS</a> protocol. But in order to send a message over WhatsApp, you'll need a different protocol. You can send a message over WhatsApp using a so-called <em>custom URL Schema</em>. A lot of big apps have custom schemas implemented, and <a href="http://www.gotschemes.com/">Got Schema</a> has a decent overview of what's out there. </p> 
     <p><a href="https://www.whatsapp.com/faq/en/iphone/23559013">WhatsApp's schema</a> looks pretty straightforward: <code>whatsapp://</code>. But instead of just opening the Whatsapp app, we want to send a message. The Whatsapp:// schema supports a <code>text</code> parameter. If present, this text will be pre-filled into message text input field on a conversation screen. It looks something like this:</p> 
     <pre><code>whatsapp://send?text=message  
</code></pre> 
     <p>To use this in a web page, we could simply add it to a link: </p> 
     <pre><code>&lt;a href="whatsapp://send?text=Hello%2C%20World!"&gt;Send message to WhatsApp&lt;/a&gt;  
</code></pre> 
     <p>If you're on a mobile phone with WhatsApp installed, you can <a href="whatsapp://send?text=Hello%2C%20World">give it a try over here</a>. This should work on both Android and iOS. You should see something close to these screenshots: <br> <img src="https://themarketingtechnologist-ghost.s3.amazonaws.com/2016/Aug/whatsapp-1470144313076.jpg" alt=""></p> 
     <h2 id="startconversationwithaspecificperson">Start conversation with a specific person</h2> 
     <p>Until recently, the WhatsApp protocol also offered an "Address Book ID" parameter on iOS. Essentially, the ID is a unique string that WhatsApp associates with each contact in your buddy list. Unfortunately, WhatsApp removed this option. This makes it impossible to send a message to a specific user/phone number. </p> 
     <p>On Android, it's possible to open the Whatsapp chat window for a specific buddy. To do so, you need to use an Android intent. Intents are messages which allow <del>application components</del> <em>your browser</em> to request functionality from <del>other Android components</del> <em>the WhatsApp app</em>. Intents allow you to interact with components from the same applications as well as with components contributed by other applications.</p> 
     <p>This is the Android Intent to start a Whatsapp conversation:</p> 
     <pre><code>intent://send/+XXXXXXXXXXX#Intent;scheme=smsto;package=com.whatsapp;action=android.intent.action.SENDTO;end  
</code></pre> 
     <p>To use this in a web page, we simply add it to a link:</p> 
     <pre><code>&lt;a href="intent://send/+XXXXXXXXXXX#Intent;scheme=smsto;package=com.whatsapp;action=android.intent.action.SENDTO;end"&gt;Open WhatsApp chat window&lt;/a&gt;  
</code></pre> 
     <p>Of course, you should replace the <em>XXXXXXXXXXX</em> with a valid phone number. Unfortunately, it's not possible to add a specific message to the conversation. </p> 
     <h3 id="combiningwiththirdpartyurltrackersorurlshorteners">Combining with third party URL trackers or URL shorteners</h3> 
     <p>When you want to add a WhatsApp link to a Facebook post, you might not want to show the total URL (or intent) to a visitor. Unfortunately, the URL shorten services that I know of (like <a href="https://bitly.com/">Bit.ly</a>) require your URL to start with <em>http(s)</em>. </p> 
     <p>Also, when you want to use this in a display ad, most ad servers and DSP's require a creative to trigger a click tracker. These trackers only support the HTTP(S) protocol. I've found a workaround for using the WhatsApp link in AppNexus, but this is too much of an ugly hack I really do not want to encourage anyone to use this =). </p> 
     <h3 id="detectwhetherwhatsappisinstalledornot">Detect whether WhatsApp is installed or not?</h3> 
     <p>There is no legitimate way of achieving the goal of detecting whether WhatsApp or any other specific app, is installed on the device without having the browser re-direct to the app if it is installed. Bummer. </p> 
     <p><em>Image by <a href="https://www.flickr.com/photos/microsiervos/15137651306/in/photolist-p4Eqm3-djCUYy-kZMPsp-EGju7e-q9WDuo-ksmHPM-Hc1R5b-h2G83g-khvKWX-dZZo74-sjA8LQ-fP5C7K-o1Wp1n-pMSq4Q-mLEaxR-vge1GH-vdqryU-dkkpkV-by8hfj-vuUgPg-o1VrDw-pee74f-oxpGeq-aqyRym-aqyRyU-p6drFj-feKUFq-aqwbDF-dHBtfC-bkihEU-dEFvTi-nkQdr3-aqwbGg-wPUv95-oLunc5-aqwbHz-eePN4H-aqyRAu-g74BKw-qQixjv-e1FJAu-wwoUYQ-fPSG9E-fPSGbG-oTYxut-cwCTo5-avEr1w-fPA9P8-cwCT33-cwCTi5/">microsiervos</a> - <a href="https://creativecommons.org/licenses/by/2.0/">Creative Commons Attribution 2.0 Generic</a></em></p> 
    </section> 
    <section class="share"> 
     <!--<h4>Share this post</h4>--> 
     <!--<a class="icon-twitter" href="https://twitter.com/share?text=How%20to%20start%20a%20WhatsApp%20conversation%20directly%20from%20the%20web&amp;url=https://www.themarketingtechnologist.co/open-a-whatsapp-conversation-directly-from-your-ad/"--> 
     <!--onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">--> 
     <!--<span class="hidden">Twitter</span>--> 
     <!--</a>--> 
     <!--<a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.themarketingtechnologist.co/open-a-whatsapp-conversation-directly-from-your-ad/"--> 
     <!--onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">--> 
     <!--<span class="hidden">Facebook</span>--> 
     <!--</a>--> 
     <!--<a class="icon-google-plus" href="https://plus.google.com/share?url=https://www.themarketingtechnologist.co/open-a-whatsapp-conversation-directly-from-your-ad/"--> 
     <!--onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">--> 
     <!--<span class="hidden">Google+</span>--> 
     <!--</a>--> 
     <div class="addthis_native_toolbox"></div> 
    </section> 
    <section class="related miss" style="
    background-color: #7E4396;
    padding: 1em;
"> 
     <h4 style="
    color: #fff;

">Did you enjoy reading this?</h4>
     <p style="
    color: #fff;
    margin-bottom: 0;
"> Don't miss our next story. Follow us on <a href="http://www.twitter.com/m__technologist">Twitter</a> or <a href="https://www.facebook.com/themarketingtechnologist/">Facebook</a>.</p> 
    </section> 
    <footer class="post-footer"> 
     <figure class="author-image"> 
      <a class="img" href="/author/siebe/" style="background-image: url(https://pbs.twimg.com/profile_images/378800000097198037/8c4c4e234c213b1b96b5668434f528ec.jpeg)"><span class="hidden">Siebe Hiemstra's Picture</span></a> 
     </figure> 
     <section class="author"> 
      <h4><a href="/author/siebe/">Siebe Hiemstra</a></h4> 
      <p>Technical Lead at Greenhouse Group</p> 
      <div class="author-meta"> 
       <span class="author-location icon-location">Eindhoven</span> 
      </div> 
     </section> 
     <section class="related"> 
      <hr> 
      <h3>Related posts</h3> 
      <ul> 
      </ul> 
     </section> 
     <section> 
      <div id="disqus_thread"></div> 
      <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES * * */
                    var disqus_shortname = 'bluemangogeek';

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script> 
      <noscript>
       Please enable JavaScript to view the 
       <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
      </noscript> 
     </section> 
    </footer> 
   </article> 
  </main> 
  <footer class="site-footer clearfix"> 
   <section class="copyright"> 
    <h2>What is a Marketing Technologist?</h2> 
    <p> The marketing technologist not only understands the insights and methods of different fields of expertise, but can shape them in new ways that add business value. The marketing technologist therefore builds on technological, marketing, analytical and strategical qualities. This leads to analysing and seeing new business opportunities and building technological solutions for marketing purposes. The most distinctive characteristic of the current marketing technologist is bridging paradoxical worlds (for example IT and marketing). It's in building the bridge where value is added. <a href="http://www.themarketingtechnologist.co/about-the-marketing-technologist/">Read more about The Marketing Technologist</a> </p> The Marketing Technologist is an initiative of the tech geeks at 
    <a href="http://www.greenhousegroup.com">Greenhouse Group</a>. We talk about analytics, code, data science and everything related to marketing technology. 
    <br>We are proud to be part of 
    <a href="http://www.groupm.com">GroupM</a>. 
    <div class="logo"> 
     <a href="http://www.groupm.com"><img src="https://themarketingtechnologist-ghost.s3.amazonaws.com/2015/Dec/groupm-1449353251148.png" alt="Greenhouse Group is part of GroupM"></a> 
    </div> 
   </section>
  </footer> 
  <!-- You can safely delete this line if your theme does not require jQuery --> 
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js"></script> 
  <script>
if($('.tag-labs').length > 0) {
 $('.post-content p:eq(0)').prepend('<p style="color:#7e4396; font-weight:bold">This post concerns Greenhouse Group Labs, an innovation program for students, established by Greenhouse Group. Labs is an ideal opportunity to test the latest technologies available, while allowing for talented young individuals to deeply explore them and come up with groundbreaking solutions.</p>');   
}
PR['registerLangHandler'](
    PR['createSimpleLexer'](
        [
         // whitespace
         [PR['PR_PLAIN'],   /^[\t\n\r \xA0]+/, null, '\t\n\r \xA0'],
         // all comments begin with '%'
         [PR['PR_COMMENT'], /^%[^\r\n]*/, null, '%']
        ],
        [
         //[PR['PR_DECLARATION'], /^\\([egx]?def|(new|renew|provide)(command|environment))\b/],
         // any command starting with a \ and contains
         // either only letters (a-z,A-Z), '@' (internal macros)
         [PR['PR_KEYWORD'], /^\\[a-zA-Z@]+/],
         // or contains only one character
         [PR['PR_KEYWORD'], /^\\./],
         // Highlight dollar for math mode and ampersam for tabular
         [PR['PR_TYPE'],    /^[__aSyNcId_&lt;_nIgVwO_J__]/],
         // numeric measurement values with attached units
         [PR['PR_LITERAL'],
          /[+-]?(?:\.\d+|\d+(?:\.\d*)?)(cm|em|ex|in|pc|pt|bp|mm)/i],
         // punctuation usually occurring within commands
         [PR['PR_PUNCTUATION'], /^[{}()\[\]=]+/]
        ]),
    ['latex', 'tex']);
</script> 
  <script>
var pageRegExp = /^\/page\/[0-9][0-9]?[0-9]?\/$/,
wordCount = $('article p').text().split(' ').length,
postType = 'large'
if(wordCount < 500){
  postType = 'small';
}else if(wordCount < 1000){
  postType = 'medium';
}

if(document.location.search.indexOf('tms=qubit') !== -1){
    //standard stuff
    window.universal_variable = window.universal_variable || {}; 
    // Homepage
    if(location.pathname === '/') {
      window.universal_variable = {
        page:{
          category: '',
          title: document.title,
          type: 'home',
          word_count: $('article p, article h2').text().split(' ').length 
        }
    } 
    } else if(pageRegExp.test(document.location.pathname) === true){
      window.universal_variable = {
        page:{
          category: '',
          title: document.title,
          type: 'page',
          word_count: $('article p, article h2').text().split(' ').length 
        }
      } 
    }else{
      window.universal_variable = {
        page:{
          category: $('.post-meta a').text(),
          title: $('h1.post-title').text(),
          author: $('.author h4 a').html(),
          type: 'post',
          year: $('time.post-date').html().split(' ')[2],
          month: $('time.post-date').html().split(' ')[1],    
          word_count: $('article p').text().split(' ').length,
          size: postType 
        }
      }
    }
    var script = document.createElement('script'),
        qubitContainer = 'tmtvsgtmtest';
    
    if(document.location.search.indexOf('play') !== -1) qubitContainer = 'tmtplayground';
    script.async = true;
    //script.defer = true;
    script.src = '//d3c3cq33003psk.cloudfront.net/opentag-62893-'+qubitContainer+'.js';
    document.head.appendChild(script);
  }else if(document.location.search.indexOf('tms=gtm') !== -1){
    window.dataLayer = []; 
     var gtmContainer = '5JS3HQK';
    if(document.location.search.indexOf('play') !== -1) gtmContainer = 'TPVVGSW';

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-'+gtmContainer);
    
    // Homepage
    if(location.pathname === '/') {
      dataLayer.push({
        page:{
          category: '',
          title: document.title,
          type: 'home',
          word_count: $('article p, article h2').text().split(' ').length 
        }
     });
    } else if(pageRegExp.test(document.location.pathname) === true){
      dataLayer.push({
        page:{
          category: '',
          title: document.title,
          type: 'page',
          word_count: $('article p, article h2').text().split(' ').length 
        }
      }); 
    }else{
      dataLayer.push({
        page:{
          category: $('.post-meta a').text(),
          title: $('h1.post-title').text(),
          author: $('.author h4 a').html(),
          type: 'post',
          year: $('time.post-date').html().split(' ')[2],
          month: $('time.post-date').html().split(' ')[1],    
          word_count: $('article p').text().split(' ').length,
          size: postType 
        }
      });
    }
  }else{
    window.dataLayer = [];

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MHKPNG');
    window.universal_variable; 
    // Homepage
    if(location.pathname === '/') {
      window.universal_variable = {
        page:{
          category: '',
          title: document.title,
          type: 'home',
          word_count: $('article p, article h2').text().split(' ').length 
        }
      } 
    } else if(pageRegExp.test(document.location.pathname) === true){
      window.universal_variable = {
        page:{
          category: '',
          title: document.title,
          type: 'page',
          word_count: $('article p, article h2').text().split(' ').length 
        }
      } 
    }else{    
      window.universal_variable = {
        page:{
          category: $('.post-meta a').text(),
          title: $('h1.post-title').text(),
          author: $('.author h4 a').html(),
          type: 'post',
          year: $('time.post-date').html().split(' ')[2],
          month: $('time.post-date').html().split(' ')[1],    
          word_count: $('article p').text().split(' ').length,
          size: postType 
        }
      }
    }
    dataLayer.push({'event': 'uv_update'});
  }
</script> 
  <script type="text/javascript" src="/assets/js/jquery.fitvids.js?v=49f9d751bd"></script> 
  <script type="text/javascript" src="/assets/js/ghostrelated.js?v=49f9d751bd"></script> 
  <script type="text/javascript" src="/assets/js/ghosthunter.min.js?v=49f9d751bd"></script> 
  <script type="text/javascript" src="/assets/js/index.js?v=49f9d751bd"></script>   
 </body>
</html>