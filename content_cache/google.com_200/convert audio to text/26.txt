<!doctype html>
<html>
 <head> 
  <title>
Using HTML5 and Javascript to Deliver Text-Based Audio Descriptions
</title> 
  <link rel="stylesheet" type="text/css" href="ibm.css"> 
 </head> 
 <body> 
  <div align="center"> 
   <div id="logos" role="banner"> 
    <a href="http://www.research.ibm.com/trl/extfnt_e.htm"><img id="ibmlogo2" src="ibmlogo.jpg" alt="ibm logo"></a> 
    <a href="http://ncam.wgbh.org"><img id="ncamlogo2" src="ncamlogo.gif" alt="ncam logo"></a> 
    <h1 id="pageheader2">Using HTML5 and Javascript to Deliver <br>Text-Based Audio Descriptions</h1> 
   </div> 
  </div> 
  <br> 
  <div id="navigation" role="navigation"> 
   <h2>Table of Contents</h2> 
   <ol> 
    <li><a href="#intro">Introduction</a></li> 
    <li><a href="#videos">The Described Videos</a></li> 
    <li><a href="#page">What's on Each Page</a></li> 
    <li><a href="#sysreq">System Requirements</a></li> 
    <li><a href="#trouble">Troubleshooting</a></li> 
    <li><a href="#notes">Technical Notes</a></li> 
    <li><a href="#download">Download</a></li> 
    <li><a href="#comments">Your Comments</a></li> 
   </ol> 
  </div> 
  <div role="main"> 
   <h2 id="intro">Introduction</h2> 
   <p>For more than 20 years, audio descriptions (also known as video descriptions) have been delivered using human narration. Traditionally, a describer will first write a script that describes key visual elements, such as costumes, scenery, scene changes, on-screen text, etc., that would otherwise not be available to viewers unable to see the screen. These descriptions are normally carefully timed to fit into the natural pauses of the dialog or narration. This script is recorded by a human narrator, and the description audio track is then mixed with the regular program-audio soundtrack before the program or movie is broadcast. In television programming, descriptions are usually delivered to the viewer via a separate audio channel and can be turned on and off; in theatrical presentations, such as first-run movies, descriptions can be delivered via wireless transmitter to patrons wearing special headsets; in an online environment, descriptions are often delivered as part of the regular program-audio soundtrack and cannot be turned off (these open-described movies are often offered as alternatives to the undescribed versions).</p> 
   <p><a href="http://www.research.ibm.com/trl/extfnt_e.htm">IBM-Research Tokyo</a> recently partnered with the <a href="http://ncam.wgbh.org"> Carl and Ruth Shapiro Family National Center for Accessible Media (NCAM)</a> at WGBH to research ways to deliver online audio descriptions via text-to-speech (TTS) methods, rather than using human recordings. IBM and NCAM explored two approaches which exploit new <a href="http://dev.w3.org/html5/spec/media-elements.html">HTML5 media elements</a>-- <a href="http://dev.w3.org/html5/spec/the-video-element.html#the-video-element"><code>video</code></a>, <a href="http://dev.w3.org/html5/spec/the-audio-element.html#the-audio-element"><code>audio</code></a> and <a href="http://dev.w3.org/html5/spec/the-track-element.html#the-track-element"><code>track</code></a>-- as well as Javascript: </p> 
   <ol> 
    <li>Writing and time-stamping a description script, then delivering the descriptions as hidden text in real time in such a way that a user's screen reader will read them aloud. The descriptions remain otherwise invisible and inaudible to non-screen-reader users.</li> 
    <li>Writing and time-stamping descriptions, then recording them using TTS technology. At the time of playback, each description is individually retrieved and played aloud at intervals corresponding to the time-stamped script.</li> 
   </ol> 
   <h2 id="videos">The Described Videos</h2> 
   <p>This Web site showcases five brief videos, linked below, each of which demonstrates the two methods outlined above. Each video shows off a different type of description technique, as described in the following list.</p> 
   <ol> 
    <li><a href="changeforlife.html">A Change for Life</a> shows how on-screen textual information can be made accessible using TTS descriptions.</li> 
    <li><a href="ming.html">Simply Ming</a> illustrates how descriptions can be compressed into the briefest of pauses, at times competing with the program audio.</li> 
    <li><a href="sintel-clip.html">Sintel</a> demonstrates how longer descriptions can be used in dramatic settings.</li> 
    <li><a href="taste.html">The Sense of Taste</a> shows descriptions in a documentary setting.</li> 
    <li><a href="snortsnifflesneeze.html">Snort Sniffle Sneeze</a> illustrates brief descriptions.</li> 
   </ol> 
   <h2 id="page">What's on Each Page</h2> 
   <p>Each page contains two video players, one on the left side of the screen and one on the right:</p> 
   <ul> 
    <li>The player on the left, labeled "TTS Descriptions" (hereafter known as the TTS player), displays video and delivers text-based audio descriptions in real time that can be read aloud only by screen readers but are otherwise invisible and inaudible. If you are not using a screen reader, you will not hear these descriptions. You can, however, make the text visible by using the "Show/Hide Text" button, which can help in understanding what's going on with the screen reader. See the <a href="#sysreq">system requirements</a> to learn about what combinations of screen readers and browsers can be used. The speed, voice and pitch at which these descriptions are delivered will depend on your screen reader's settings. Be aware that if your screen reader is set to read slowly, some descriptions may overlap, and thus obscure, the program audio.</li> 
    <li>The player on the right, labeled "Pre-Recorded Audio Descriptions" (hereafter known as the pre-recorded player), displays video and delivers pre-recorded TTS descriptions in real time. These descriptions are not integrated into the program-audio track, but instead are individually retrieved and played back according to a timing list created in advance. All users will hear these descriptions; a screen reader is not needed, nor is a specific browser or any other special software. Because these descriptions are pre-recorded, you do not have control over speed, voice or pitch. Note that these videos feature "ducked" program audio: when a description plays, the program audio is programmatically lowered so that the description is brought forward; when the description finishes playing, the program audio is raised to its normal level.</li> 
   </ul> 
   <p>Each player can be controlled with a mouse or from the keyboard using the buttons located below each player. You can also use each player's built-in controls, but the screen-reader accessibility of these controls will vary depending on the browser your are using. If you find that you cannot identify or use the built-in controls, use the buttons instead (all of which are screen-reader and keyboard accessible).</p> 
   <p>Each player also makes use of keyboard shortcuts, or access keys. These shortcuts are listed below.</p> 
   <h3>Keyboard shortcuts (access keys) for controlling the players</h3> 
   <p><strong>TTS player:</strong></p> 
   <ul> 
    <li>Play/pause: 1</li> 
    <li>Stop: 2</li> 
    <li>Move forward seven seconds: 3</li> 
    <li>Move back seven seconds: 4</li> 
    <li>Show/Hide Text: 5</li> 
   </ul> 
   <p><strong>Pre-recorded player:</strong></p> 
   <ul> 
    <li>Play/pause: 6</li> 
    <li>Stop: 7</li> 
    <li>Move forward seven seconds: 8</li> 
    <li>Move back seven seconds: 9</li> 
   </ul> 
   <p>You will need to press certain modifier keys along with the numbers above in order to activate the shortcuts. Which modifiers you press will depend on the browser you're using. A list of browsers and their modifier keys is shown below. (Note: some screen readers will announce the modifier keys for you.)</p> 
   <h3>Keyboard-shortcut modifier keys:</h3> 
   <ul> 
    <li>Chrome (Mac): Control+Option</li> 
    <li>Chrome (Windows): Alt</li> 
    <li>Firefox (Mac): Control</li> 
    <li>Firefox (Windows): Shift+Alt</li> 
    <li>IE9: Alt </li> 
    <li>Opera (Mac): Shift+Esc; release the modifiers and then press the desired number key</li> 
    <li>Opera (Windows): Shift+Esc; release the modifiers and then press the desired number key</li> 
    <li>Safari: Control+Option</li> 
   </ul> 
   <p>Please see <a href="#trouble">special notes and troubleshooting</a> if you are having problems hearing the descriptions, seeing the video or controlling the players.</p> 
   <h2 id="sysreq">System Requirements</h2> 
   <p>To access the descriptions in the TTS player, you will need the following:</p> 
   <ul> 
    <li>A screen reader that is capable of reading text delivered to a live region, such as: 
     <ul> 
      <li>JAWS 11, 12 or 13</li> 
      <li>NVDA 2011.3 or higher</li> 
      <li>VoiceOver on OS 10.7/Lion (10.6/Snow Leopard <strong>will not work</strong>)</li> 
     </ul> </li> 
    <li>A browser capable of supporting live regions, such as: 
     <ul> 
      <li>Chrome 16 (Mac or Windows). Note that Chrome for Windows will play the TTS descriptions only with NVDA, not with JAWS.</li> 
      <li>Firefox 4+ (Mac or Windows)</li> 
      <li>IE9 (Windows)</li> 
      <li>Safari 5.0 or higher (Mac)</li> 
     </ul> </li> 
   </ul> 
   <p>To access the descriptions in the pre-recorded player, you can use any of the browsers listed above as well as other browsers, such as Opera. You do not need a screen reader in order to hear the pre-recorded descriptions.</p> 
   <p>iOS users, take note: you can also access the TTS descriptions using VoiceOver on the iPhone or iPad. The iPad will play videos in the Web page, but the iPhone will launch the videos separately in the QuickTime player. In both instances, however, VoiceOver will read the TTS descriptions aloud. For best results, make sure your handheld device is running the most current version of the operating system (5.0.1 as of this writing). At this time, the pre-recorded descriptions will not play on iOS devices because Mobile Safari is not capable of playing more than one media file (e.g., separate video and audio files) at a time.</p> 
   <h2 id="trouble">Troubleshooting</h2> 
   <h3>TTS player problems</h3> 
   <h4>Can't hear the descriptions</h4> 
   <ol> 
    <li>First, review the <a href="#sysreq">system requirements</a>. Using a Mac? You <strong>must</strong> be running OS 10.7/Lion, not 10.6/Snow Leopard, in order to hear the TTS descriptions. Note that if you are not using a screen reader, you will not be able to hear the TTS descriptions provided by the TTS player.</li> 
    <li>If your screen reader is not reading the TTS descriptions, reloading the page and shutting down/restarting the screen reader usually causes the descriptions to be read aloud. Note that the screen reader will only read descriptions aloud in the TTS player, not the pre-recorded player.</li> 
    <li>On the Mac, VoiceOver will only work with Safari and Chrome. It will not work with Firefox or Opera.</li> 
    <li>On Windows, you must use either JAWS or NVDA. Currently, Window-Eyes does not provide support for text displayed in live regions and so cannot be used to read the TTS descriptions.</li> 
   </ol> 
   <p>Also remember that the speed at which the descriptions are delivered depends entirely on your screen-reader settings. If you find that the descriptions are competing with or obscuring the program audio, increase the reading speed.</p> 
   <h4>VoiceOver reads the descriptions twice</h4> 
   <p>If you find that VoiceOver always reads the TTS descriptions twice, shut down VoiceOver and restart it. (You should not need to close and re-open your browser.) This should solve the problem.</p> 
   <h3>Pre-recorded player problems</h3> 
   <h4>Video and descriptions play unevenly or are truncated</h4> 
   <ol> 
    <li>Firefox browsers (Mac and Windows) may occasionally truncate the pre-recorded audio descriptions. If this happens, pause or stop the video, wait a few seconds and then resume playback.</li> 
    <li>Firefox browsers (Mac and Windows) may occasionally display erratic video, video and program audio that are somewhat out of sync, or stuttering audio. If this happens, pause or stop the video, wait a few seconds and then resume playback.</li> 
   </ol> 
   <h3>Browser problems</h3> 
   <h4>Can't see video or hear audio</h4> 
   <ol> 
    <li>The videos are supplied in MP4 and Ogg/Theora formats using the HTML5 <code>video</code> element. The track element and Javascript are used to deliver the descriptions, and ARIA markup is used to help screen readers locate and read the TTS descriptions. For best results, use the most current versions of the browsers and screen readers listed in the <a href="#sysreq">system requirements</a>.</li> 
    <li>Firefox browsers (Mac and Windows) may occasionally display erratic video, video and program audio that are somewhat out of sync, or stuttering audio. If this happens, pause or stop the video, wait a few seconds and then resume playback.</li> 
   </ol> 
   <h4>VoiceOver isn't passing the keyboard-shortcut commands for the players</h4> 
   <p>VoiceOver will take control of the keyboard-shortcut combinations by default. To use VoiceOver with the keyboard shortcuts, first press Control+Option+Tab to activate the pass-through command, then press the keyboard-shortcut commands you want to use.</p> 
   <h2 id="notes">Technical Notes</h2> 
   <p>The videos in both the TTS and pre-recorded demonstrations are displayed using the HTML5 media elements <code>video</code> and <code>audio</code>, for which there is now reliable browser support.</p> 
   <h3>TTS Description (left-side player) Notes</h3> 
   <p>The TTS descriptions can be thought of as timed text, similar to captions except that they are used to describe visual elements rather than display a transcription of narration, dialog or non-speech information. And instead of being displayed visually they're "displayed" aurally.</p> 
   <p>While the HTML5 specification does include includes a <code>track</code> element for displaying captions, there's currently no browser support for it. In these demonstrations, <code>track</code> element support is emulated using the <a href="http://popcornjs.org/">Popcorn.js HTML5 Media Framework</a>. The Popcorn.js library is designed to manage timed events related to media playback. Furthermore, media playback has been enhanced with custom Javascript which makes use of the Popcorn.js library, and has been encapsulated in the popcornPlayer.js code. Additionally, both of those libraries make use of the JQuery.js library, which provides convenient access to DOM elements and various other operations.</p> 
   <p>The TTS descriptions flow logically as follows:</p> 
   <ul> 
    <li>Descriptions are first written and time-stamped in the <a href="http://www.w3.org/TR/2010/REC-ttaf1-dfxp-20101118/">TTML</a> format.</li> 
    <li>The timed descriptions are loaded by the player when the Web page loads.</li> 
    <li>The timed descriptions are converted into callback events within the Popcorn.js framework, and attached to the <code>video</code> element.</li> 
    <li>As the video progresses, callback events are triggered by the Popcorn.js framework as it "watches" the <code>video</code> element timeline.</li> 
    <li>Events-- that is, individual descriptions-- are handled by "displaying" them in a live region on the Web page (actually, they're displayed in a live region that has positioned off-screen using CSS).</li> 
    <li>Using ARIA markup (e.g., aria-live) the <code>div</code> containing the hidden descriptions is made available as a priority to the local screen reader (JAWS, NVDA or VoiceOver), which reads the descriptions aloud as they're inserted into the live region.</li> 
   </ul> 
   <p>It should be noted that when browsers finally implement support for <code>track</code> elements directly within the HTML5 media framework, most of the Javascript around the TTS playback will be unnecessary. At that point, one would simply create the <code><code>div</code></code> to hold the description text and let the media element implementation handle its display, with the screen reader handling the audio rendering. It should further be noted that the author would still need to employ ARIA markup (such as the <code>aria-live</code> attribute) so that screen readers intercept and read the descriptions in a timely manner.</p> 
   <h3>Pre-Recorded Description (right-side player) Notes</h3> 
   <p>The pre-recorded descriptions follow a similar path as the TTS descriptions, with a few deviations. Using a TTS library such as <a href="http://nextup.com">Text Aloud</a>™, MS SAPI, etc., the TTML textual descriptions written for the TTS player are each turned into audio clips. These clips are then compiled sequentially into a single audio file. At this point, each discrete audio description can be thought of as a sub-clip within the larger compilation file.</p> 
   <p>To coordinate description playback at the correct moment in the timeline, a TTML file is used as a "trigger" file. Each trigger is made up of two timecodes: the first corresponds to the spot in the compilation file where the specific description sub-clip begins, and the second corresponds to the point in the main timeline at which the sub-clip must stop playing. The popcornPlayer.js code programmatically adds an <code>audio</code> element to the Web page and uses it to play back the sub-clips as needed.</p> 
   <p>The flow logic of the pre-recorded descriptions is shown below.</p> 
   <ul> 
    <li>Descriptions are written and time-stamped as a TTML file.</li> 
    <li>The timed descriptions are loaded by the player when the Web page loads.</li> 
    <li>The timed descriptions are converted into callback events within the Popcorn.js framework, and attached to the <code>video</code> element.</li> 
    <li>As the video progresses, callback events are triggered by the Popcorn.js framework as it "watches" the <code>video</code> element timeline.</li> 
    <li>Events are handled by playing back the audio of the sub-clip as specified in each timed element from the TTML file. HTML5 support is used directly to manipulate the <code>audio</code> element.</li> 
   </ul> 
   <p>Note that the pre-recorded player also uses the volume attribute of the media elements to manage "ducking," which allows for lowering the volume of the program-audio track while raising the volume of the description audio sub-clip. This process is managed as a fade-in/out to make the transitions more pleasant to hear. Authors may also use volume attributes in the TTML file, so that ducking can be managed on a per-description (as opposed to a global) basis, if necessary.</p> 
   <p>It should be noted that, unlike browser support for the <code>track</code> element, there is currently no support in HTML5 for synchronous media-element playback. <a href="http://www.w3.org/TR/2008/REC-SMIL3-20081201/">SMIL</a> provides such support, but HTML5 has not, as yet, embraced a similar timing model.</p> 
   <h3>URL Parameters</h3> 
   <p>For convenience, the Javascript on each page recognizes three specific parameters in the URL line:</p> 
   <ul> 
    <li>showText - Sets the default state of the visibility of text on the TTS (left-side) player. Set to true or false. Default is false (invisible).</li> 
    <li>showTextButton - Sets the visibility of <em>button</em> for showing/hiding the text on the TTS (left-side) player. Set to true or false. Default is true (visible).</li> 
    <li>timeJump - Sets the value (in seconds) of the jump forward/back for those buttons. Set to a decimal value. Default is 10.0 seconds.</li> 
   </ul> 
   <p>For example, the following URL will display the page with TTS text visible, the button invisible, and the jump forward/back value to 20 seconds:<br></p> 
   <pre>http://ncamftp.wgbh.org/ibm/dvs/taste.html?showText=true&amp;showTextButton=false&amp;timeJump=20.0</pre> 
   <h2 id="download">Download</h2> 
   <p> <a href="http://ncamftp.wgbh.org/ibm/dvs/text-based-descriptions.zip">Download the full archive of the Web pages and media</a>. Expand into a single directory. (Approximately 160 MB.)</p> 
   <h2 id="comments">Your Comments</h2> 
   <p> To comment on the videos and technology behind them, visit our <a href="http://wgbhncam.wordpress.com">blog</a>.</p> 
  </div>   
 </body>
</html>