<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width"> 
  <title>Using WebP Images | CSS-Tricks</title> 
  <link rel="apple-touch-icon" href="https://cdn.css-tricks.com/apple-touch-icon.png"> 
  <meta name="msapplication-TileColor" content="#00aba9"> 
  <meta name="msapplication-TileImage" content="https://cdn.css-tricks.com/mstile-144x144.png"> 
  <meta property="fb:pages" content="124436167285"> 
  <link rel="search" type="application/opensearchdescription+xml" href="https://cdn.css-tricks.com/opensearch.xml" title="CSS-Tricks Search"> 
  <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://feeds.feedburner.com/CssTricks"> 
  <link rel="stylesheet" href="https://cloud.typography.com/610186/6645572/css/fonts.css"> 
  <!--[if !IE]><!--> 
  <link rel="stylesheet" href="https://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-16/style.css?v=9.99"> 
  <!--<![endif]--> 
  <!--[if lt IE 9]>
  <link rel="stylesheet" href="https://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-16/css/oldie.css">
  <![endif]--> 
  <!--[if IE 9]>
  <link rel="stylesheet" href="https://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-16/style.css?v=9.99>
  <![endif]--> 
  <!-- This site is optimized with the Yoast SEO plugin v5.5 - https://yoast.com/wordpress/plugins/seo/ --> 
  <meta name="description" content="Using WebP images can yield substantially lower file sizes for your images, giving way to quicker page load times. Learn how to use them in this post!"> 
  <link rel="canonical" href="https://css-tricks.com/using-webp-images/"> 
  <meta property="og:locale" content="en_US"> 
  <meta property="og:type" content="article"> 
  <meta property="og:title" content="Using WebP Images | CSS-Tricks"> 
  <meta property="og:description" content="Using WebP images can yield substantially lower file sizes for your images, giving way to quicker page load times. Learn how to use them in this post!"> 
  <meta property="og:url" content="https://css-tricks.com/using-webp-images/"> 
  <meta property="og:site_name" content="CSS-Tricks"> 
  <meta property="article:publisher" content="https://www.facebook.com/CSSTricks"> 
  <meta property="article:tag" content="images"> 
  <meta property="article:tag" content="performance"> 
  <meta property="article:tag" content="picture"> 
  <meta property="article:tag" content="webp"> 
  <meta property="article:section" content="Article"> 
  <meta property="article:published_time" content="2016-08-26T07:11:08+00:00"> 
  <meta property="article:modified_time" content="2017-01-12T09:21:39+00:00"> 
  <meta property="og:updated_time" content="2017-01-12T09:21:39+00:00"> 
  <meta property="og:image" content="https://cdn.css-tricks.com/wp-content/uploads/2016/08/tacos-2x.jpg"> 
  <meta property="og:image:secure_url" content="https://cdn.css-tricks.com/wp-content/uploads/2016/08/tacos-2x.jpg"> 
  <meta property="og:image" content="https://cdn.css-tricks.com/wp-content/uploads/2016/08/webp-plugin-2x.png"> 
  <meta property="og:image:secure_url" content="https://cdn.css-tricks.com/wp-content/uploads/2016/08/webp-plugin-2x.png"> 
  <meta property="og:image" content="https://cdn.css-tricks.com/wp-content/uploads/2016/08/broken-webp-2x.png"> 
  <meta property="og:image:secure_url" content="https://cdn.css-tricks.com/wp-content/uploads/2016/08/broken-webp-2x.png"> 
  <meta property="og:image" content="https://cdn.css-tricks.com/wp-content/uploads/2016/08/Wagner-WebP-MAP-HI.jpg"> 
  <meta property="og:image:secure_url" content="https://cdn.css-tricks.com/wp-content/uploads/2016/08/Wagner-WebP-MAP-HI.jpg"> 
  <meta name="twitter:card" content="summary"> 
  <meta name="twitter:description" content="Using WebP images can yield substantially lower file sizes for your images, giving way to quicker page load times. Learn how to use them in this post!"> 
  <meta name="twitter:title" content="Using WebP Images | CSS-Tricks"> 
  <meta name="twitter:site" content="@Real_CSS_Tricks"> 
  <meta name="twitter:image" content="https://cdn.css-tricks.com/wp-content/uploads/2016/08/tacos-2x.jpg"> 
  <meta name="twitter:creator" content="@malchata"> 
  <script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"WebSite","@id":"#website","url":"https:\/\/css-tricks.com\/","name":"CSS-Tricks","potentialAction":{"@type":"SearchAction","target":"https:\/\/css-tricks.com\/?s={search_term_string}","query-input":"required name=search_term_string"}}</script> 
  <!-- / Yoast SEO plugin. --> 
  <link rel="alternate" type="application/rss+xml" title="CSS-Tricks » Using WebP Images Comments Feed" href="https://css-tricks.com/using-webp-images/feed/"> 
  <script type="text/javascript" src="https://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-16/js/libs/jquery-3.1.1.min.js"></script> 
  <script type="text/javascript" src="https://cdn.css-tricks.com/wp-includes/js/underscore.min.js?ver=1.8.3"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var _wpUtilSettings = {"ajax":{"url":"\/wp-admin\/admin-ajax.php"}};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://cdn.css-tricks.com/wp-includes/js/wp-util.min.js?ver=4.8.2"></script> 
  <script type="text/javascript" src="https://cdn.css-tricks.com/wp-content/uploads/minqueue-cache/minqueue-1d89617e-d0965934.js"></script> 
  <link rel="https://api.w.org/" href="https://css-tricks.com/wp-json/"> 
  <link rel="shortlink" href="https://css-tricks.com/?p=244913"> 
  <link rel="alternate" type="application/json+oembed" href="https://css-tricks.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcss-tricks.com%2Fusing-webp-images%2F"> 
  <link rel="alternate" type="text/xml+oembed" href="https://css-tricks.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcss-tricks.com%2Fusing-webp-images%2F&amp;format=xml"> 
  <!-- Better Art Direction Styles --> 
  <link rel="dns-prefetch" href="//v0.wordpress.com"> 
  <link rel="dns-prefetch" href="//jetpack.wordpress.com"> 
  <link rel="dns-prefetch" href="//s0.wp.com"> 
  <link rel="dns-prefetch" href="//s1.wp.com"> 
  <link rel="dns-prefetch" href="//s2.wp.com"> 
  <link rel="dns-prefetch" href="//public-api.wordpress.com"> 
  <link rel="dns-prefetch" href="//0.gravatar.com"> 
  <link rel="dns-prefetch" href="//1.gravatar.com"> 
  <link rel="dns-prefetch" href="//2.gravatar.com"> 
  <noscript>
   <style>.woocommerce-product-gallery{ opacity: 1 !important; }</style>
  </noscript> 
  <script type="text/javascript">var algolia = {"debug":false,"application_id":"V0D2YCS22R","search_api_key":"c31ce3c9664f308b166cc7757a3884e7","powered_by_enabled":false,"query":"","autocomplete":{"sources":[{"index_id":"searchable_posts","index_name":"prod_searchable_posts","label":"All posts","admin_name":"All posts","position":2,"max_suggestions":5,"tmpl_suggestion":"autocomplete-post-suggestion","enabled":true}],"input_selector":"input[name='s']:not('.no-autocomplete')"},"indices":{"searchable_posts":{"name":"prod_searchable_posts","id":"searchable_posts","enabled":true,"replicas":[]}}};</script>
  <script type="text/html" id="tmpl-autocomplete-header">
  <div class="autocomplete-header">
    <div class="autocomplete-header-title">{{{ data.label }}}</div>
    <div class="clear"></div>
  </div>
</script> 
  <script type="text/html" id="tmpl-autocomplete-post-suggestion">
  <a class="suggestion-link" href="{{ data.permalink }}" title="{{ data.post_title }}">
    <# if ( data.images.thumbnail ) { #>
      <img class="suggestion-post-thumbnail" src="{{ data.images.thumbnail.url }}" alt="{{ data.post_title }}">
      <# } #>
        <div class="suggestion-post-attributes">
          <span class="suggestion-post-title">{{{ data._highlightResult.post_title.value }}}</span>
          <# if ( data._snippetResult['content'] ) { #>
            <span class="suggestion-post-content">{{{ data._snippetResult['content'].value }}}</span>
            <# } #>
        </div>
  </a>
</script> 
  <script type="text/html" id="tmpl-autocomplete-term-suggestion">
  <a class="suggestion-link" href="{{ data.permalink }}" title="{{ data.name }}">
    <svg viewBox="0 0 21 21" width="21" height="21">
      <svg width="21" height="21" viewBox="0 0 21 21">
        <path
            d="M4.662 8.72l-1.23 1.23c-.682.682-.68 1.792.004 2.477l5.135 5.135c.7.693 1.8.688 2.48.005l1.23-1.23 5.35-5.346c.31-.31.54-.92.51-1.36l-.32-4.29c-.09-1.09-1.05-2.06-2.15-2.14l-4.3-.33c-.43-.03-1.05.2-1.36.51l-.79.8-2.27 2.28-2.28 2.27zm9.826-.98c.69 0 1.25-.56 1.25-1.25s-.56-1.25-1.25-1.25-1.25.56-1.25 1.25.56 1.25 1.25 1.25z"
            fill-rule="evenodd"></path>
      </svg>
    </svg>
    <span class="suggestion-post-title">{{{ data._highlightResult.name.value }}}</span>
  </a>
</script> 
  <script type="text/html" id="tmpl-autocomplete-user-suggestion">
  <a class="suggestion-link user-suggestion-link" href="{{ data.posts_url }}" title="{{ data.display_name }}">
    <# if ( data.avatar_url ) { #>
      <img class="suggestion-user-thumbnail" src="{{ data.avatar_url }}" alt="{{ data.display_name }}">
      <# } #>

        <span class="suggestion-post-title">{{{ data._highlightResult.display_name.value }}}</span>
  </a>
</script> 
  <script type="text/html" id="tmpl-autocomplete-footer">
  <div class="autocomplete-footer">
    <div class="autocomplete-footer-branding">
      <a href="#" class="algolia-powered-by-link" title="Algolia">
        <svg width="130" viewBox="0 0 130 18" xmlns="http://www.w3.org/2000/svg">
          <title>Search by Algolia</title>
          <defs>
            <linearGradient x1="-36.868%" y1="134.936%" x2="129.432%" y2="-27.7%" id="a">
              <stop stop-color="#00AEFF" offset="0%"/>
              <stop stop-color="#3369E7" offset="100%"/>
            </linearGradient>
          </defs>
          <g fill="none" fill-rule="evenodd">
            <path
                d="M59.399.022h13.299a2.372 2.372 0 0 1 2.377 2.364V15.62a2.372 2.372 0 0 1-2.377 2.364H59.399a2.372 2.372 0 0 1-2.377-2.364V2.381A2.368 2.368 0 0 1 59.399.022z"
                fill="url(#a)"/>
            <path
                d="M66.257 4.56c-2.815 0-5.1 2.272-5.1 5.078 0 2.806 2.284 5.072 5.1 5.072 2.815 0 5.1-2.272 5.1-5.078 0-2.806-2.279-5.072-5.1-5.072zm0 8.652c-1.983 0-3.593-1.602-3.593-3.574 0-1.972 1.61-3.574 3.593-3.574 1.983 0 3.593 1.602 3.593 3.574a3.582 3.582 0 0 1-3.593 3.574zm0-6.418v2.664c0 .076.082.131.153.093l2.377-1.226c.055-.027.071-.093.044-.147a2.96 2.96 0 0 0-2.465-1.487c-.055 0-.11.044-.11.104l.001-.001zm-3.33-1.956l-.312-.311a.783.783 0 0 0-1.106 0l-.372.37a.773.773 0 0 0 0 1.101l.307.305c.049.049.121.038.164-.011.181-.245.378-.479.597-.697.225-.223.455-.42.707-.599.055-.033.06-.109.016-.158h-.001zm5.001-.806v-.616a.781.781 0 0 0-.783-.779h-1.824a.78.78 0 0 0-.783.779v.632c0 .071.066.12.137.104a5.736 5.736 0 0 1 1.588-.223c.52 0 1.035.071 1.534.207a.106.106 0 0 0 .131-.104z"
                fill="#FFF"/>
            <path
                d="M102.162 13.762c0 1.455-.372 2.517-1.123 3.193-.75.676-1.895 1.013-3.44 1.013-.564 0-1.736-.109-2.673-.316l.345-1.689c.783.163 1.819.207 2.361.207.86 0 1.473-.174 1.84-.523.367-.349.548-.866.548-1.553v-.349a6.374 6.374 0 0 1-.838.316 4.151 4.151 0 0 1-1.194.158 4.515 4.515 0 0 1-1.616-.278 3.385 3.385 0 0 1-1.254-.817 3.744 3.744 0 0 1-.811-1.351c-.192-.539-.29-1.504-.29-2.212 0-.665.104-1.498.307-2.054a3.925 3.925 0 0 1 .904-1.433 4.124 4.124 0 0 1 1.441-.926 5.31 5.31 0 0 1 1.945-.365c.696 0 1.337.087 1.961.191a15.86 15.86 0 0 1 1.588.332v8.456h-.001zm-5.954-4.206c0 .893.197 1.885.592 2.299.394.414.904.621 1.528.621.34 0 .663-.049.964-.142a2.75 2.75 0 0 0 .734-.332v-5.29a8.531 8.531 0 0 0-1.413-.18c-.778-.022-1.369.294-1.786.801-.411.507-.619 1.395-.619 2.223zm16.12 0c0 .719-.104 1.264-.318 1.858a4.389 4.389 0 0 1-.904 1.52c-.389.42-.854.746-1.402.975-.548.229-1.391.36-1.813.36-.422-.005-1.26-.125-1.802-.36a4.088 4.088 0 0 1-1.397-.975 4.486 4.486 0 0 1-.909-1.52 5.037 5.037 0 0 1-.329-1.858c0-.719.099-1.411.318-1.999.219-.588.526-1.09.92-1.509.394-.42.865-.741 1.402-.97a4.547 4.547 0 0 1 1.786-.338 4.69 4.69 0 0 1 1.791.338c.548.229 1.019.55 1.402.97.389.42.69.921.909 1.509.23.588.345 1.28.345 1.999h.001zm-2.191.005c0-.921-.203-1.689-.597-2.223-.394-.539-.948-.806-1.654-.806-.707 0-1.26.267-1.654.806-.394.539-.586 1.302-.586 2.223 0 .932.197 1.558.592 2.098.394.545.948.812 1.654.812.707 0 1.26-.272 1.654-.812.394-.545.592-1.166.592-2.098h-.001zm6.962 4.707c-3.511.016-3.511-2.822-3.511-3.274L113.583.926l2.142-.338v10.003c0 .256 0 1.88 1.375 1.885v1.792h-.001zm3.774 0h-2.153V5.072l2.153-.338v9.534zm-1.079-10.542c.718 0 1.304-.578 1.304-1.291 0-.714-.581-1.291-1.304-1.291-.723 0-1.304.578-1.304 1.291 0 .714.586 1.291 1.304 1.291zm6.431 1.013c.707 0 1.304.087 1.786.262.482.174.871.42 1.156.73.285.311.488.735.608 1.182.126.447.186.937.186 1.476v5.481a25.24 25.24 0 0 1-1.495.251c-.668.098-1.419.147-2.251.147a6.829 6.829 0 0 1-1.517-.158 3.213 3.213 0 0 1-1.178-.507 2.455 2.455 0 0 1-.761-.904c-.181-.37-.274-.893-.274-1.438 0-.523.104-.855.307-1.215.208-.36.487-.654.838-.883a3.609 3.609 0 0 1 1.227-.49 7.073 7.073 0 0 1 2.202-.103c.263.027.537.076.833.147v-.349c0-.245-.027-.479-.088-.697a1.486 1.486 0 0 0-.307-.583c-.148-.169-.34-.3-.581-.392a2.536 2.536 0 0 0-.915-.163c-.493 0-.942.06-1.353.131-.411.071-.75.153-1.008.245l-.257-1.749c.268-.093.668-.185 1.183-.278a9.335 9.335 0 0 1 1.66-.142l-.001-.001zm.181 7.731c.657 0 1.145-.038 1.484-.104v-2.168a5.097 5.097 0 0 0-1.978-.104c-.241.033-.46.098-.652.191a1.167 1.167 0 0 0-.466.392c-.121.169-.175.267-.175.523 0 .501.175.79.493.981.323.196.75.289 1.293.289h.001zM84.109 4.794c.707 0 1.304.087 1.786.262.482.174.871.42 1.156.73.29.316.487.735.608 1.182.126.447.186.937.186 1.476v5.481a25.24 25.24 0 0 1-1.495.251c-.668.098-1.419.147-2.251.147a6.829 6.829 0 0 1-1.517-.158 3.213 3.213 0 0 1-1.178-.507 2.455 2.455 0 0 1-.761-.904c-.181-.37-.274-.893-.274-1.438 0-.523.104-.855.307-1.215.208-.36.487-.654.838-.883a3.609 3.609 0 0 1 1.227-.49 7.073 7.073 0 0 1 2.202-.103c.257.027.537.076.833.147v-.349c0-.245-.027-.479-.088-.697a1.486 1.486 0 0 0-.307-.583c-.148-.169-.34-.3-.581-.392a2.536 2.536 0 0 0-.915-.163c-.493 0-.942.06-1.353.131-.411.071-.75.153-1.008.245l-.257-1.749c.268-.093.668-.185 1.183-.278a8.89 8.89 0 0 1 1.66-.142l-.001-.001zm.186 7.736c.657 0 1.145-.038 1.484-.104v-2.168a5.097 5.097 0 0 0-1.978-.104c-.241.033-.46.098-.652.191a1.167 1.167 0 0 0-.466.392c-.121.169-.175.267-.175.523 0 .501.175.79.493.981.318.191.75.289 1.293.289h.001zm8.682 1.738c-3.511.016-3.511-2.822-3.511-3.274L89.461.926l2.142-.338v10.003c0 .256 0 1.88 1.375 1.885v1.792h-.001z"
                fill="#182359"/>
            <path
                d="M5.027 11.025c0 .698-.252 1.246-.757 1.644-.505.397-1.201.596-2.089.596-.888 0-1.615-.138-2.181-.414v-1.214c.358.168.739.301 1.141.397.403.097.778.145 1.125.145.508 0 .884-.097 1.125-.29a.945.945 0 0 0 .363-.779.978.978 0 0 0-.333-.747c-.222-.204-.68-.446-1.375-.725-.716-.29-1.221-.621-1.515-.994-.294-.372-.44-.82-.44-1.343 0-.655.233-1.171.698-1.547.466-.376 1.09-.564 1.875-.564.752 0 1.5.165 2.245.494l-.408 1.047c-.698-.294-1.321-.44-1.869-.44-.415 0-.73.09-.945.271a.89.89 0 0 0-.322.717c0 .204.043.379.129.524.086.145.227.282.424.411.197.129.551.299 1.063.51.577.24.999.464 1.268.671.269.208.466.442.591.704.125.261.188.569.188.924l-.001.002zm3.98 2.24c-.924 0-1.646-.269-2.167-.808-.521-.539-.782-1.281-.782-2.226 0-.97.242-1.733.725-2.288.483-.555 1.148-.833 1.993-.833.784 0 1.404.238 1.858.714.455.476.682 1.132.682 1.966v.682H7.357c.018.577.174 1.02.467 1.329.294.31.707.465 1.241.465.351 0 .678-.033.98-.099a5.1 5.1 0 0 0 .975-.33v1.026a3.865 3.865 0 0 1-.935.312 5.723 5.723 0 0 1-1.08.091l.002-.001zm-.231-5.199c-.401 0-.722.127-.964.381s-.386.625-.432 1.112h2.696c-.007-.491-.125-.862-.354-1.115-.229-.252-.544-.379-.945-.379l-.001.001zm7.692 5.092l-.252-.827h-.043c-.286.362-.575.608-.865.739-.29.131-.662.196-1.117.196-.584 0-1.039-.158-1.367-.473-.328-.315-.491-.761-.491-1.337 0-.612.227-1.074.682-1.386.455-.312 1.148-.482 2.079-.51l1.026-.032v-.317c0-.38-.089-.663-.266-.851-.177-.188-.452-.282-.824-.282-.304 0-.596.045-.876.134a6.68 6.68 0 0 0-.806.317l-.408-.902a4.414 4.414 0 0 1 1.058-.384 4.856 4.856 0 0 1 1.085-.132c.756 0 1.326.165 1.711.494.385.329.577.847.577 1.552v4.002h-.902l-.001-.001zm-1.88-.859c.458 0 .826-.128 1.104-.384.278-.256.416-.615.416-1.077v-.516l-.763.032c-.594.021-1.027.121-1.297.298s-.406.448-.406.814c0 .265.079.47.236.615.158.145.394.218.709.218h.001zm7.557-5.189c.254 0 .464.018.628.054l-.124 1.176a2.383 2.383 0 0 0-.559-.064c-.505 0-.914.165-1.227.494-.313.329-.47.757-.47 1.284v3.105h-1.262V7.218h.988l.167 1.047h.064c.197-.354.454-.636.771-.843a1.83 1.83 0 0 1 1.023-.312h.001zm4.125 6.155c-.899 0-1.582-.262-2.049-.787-.467-.525-.701-1.277-.701-2.259 0-.999.244-1.767.733-2.304.489-.537 1.195-.806 2.119-.806.627 0 1.191.116 1.692.349l-.381 1.015c-.534-.208-.974-.312-1.321-.312-1.028 0-1.542.682-1.542 2.046 0 .666.128 1.166.384 1.501.256.335.631.502 1.125.502a3.23 3.23 0 0 0 1.595-.419v1.101a2.53 2.53 0 0 1-.722.285 4.356 4.356 0 0 1-.932.086v.002zm8.277-.107h-1.268V9.506c0-.458-.092-.8-.277-1.026-.184-.226-.477-.338-.878-.338-.53 0-.919.158-1.168.475-.249.317-.373.848-.373 1.593v2.949h-1.262V4.801h1.262v2.122c0 .34-.021.704-.064 1.09h.081a1.76 1.76 0 0 1 .717-.666c.306-.158.663-.236 1.072-.236 1.439 0 2.159.725 2.159 2.175v3.873l-.001-.001zm7.649-6.048c.741 0 1.319.269 1.732.806.414.537.62 1.291.62 2.261 0 .974-.209 1.732-.628 2.275-.419.542-1.001.814-1.746.814-.752 0-1.336-.27-1.751-.811h-.086l-.231.704h-.945V4.801h1.262v1.987l-.021.655-.032.553h.054c.401-.591.992-.886 1.772-.886zm-.328 1.031c-.508 0-.875.149-1.098.448-.224.299-.339.799-.346 1.501v.086c0 .723.115 1.247.344 1.571.229.324.603.486 1.123.486.448 0 .787-.177 1.018-.532.231-.354.346-.867.346-1.536 0-1.35-.462-2.025-1.386-2.025l-.001.001zm3.244-.924h1.375l1.209 3.368c.183.48.304.931.365 1.354h.043c.032-.197.091-.436.177-.717.086-.281.541-1.616 1.364-4.004h1.364l-2.541 6.73c-.462 1.235-1.232 1.853-2.31 1.853-.279 0-.551-.03-.816-.091v-.999c.19.043.406.064.65.064.609 0 1.037-.353 1.284-1.058l.22-.559-2.385-5.941h.001z"
                fill="#1D3657"/>
          </g>
        </svg>
      </a>
    </div>
  </div>
</script> 
  <script type="text/html" id="tmpl-autocomplete-empty">
  <div class="autocomplete-empty">
      No results matched your query     <span class="empty-query">"{{ data.query }}"</span>
  </div>
</script> 
  <script type="text/javascript">
  jQuery(function () {
    /* init Algolia client */
    var client = algoliasearch(algolia.application_id, algolia.search_api_key);

    /* setup default sources */
    var sources = [];
    jQuery.each(algolia.autocomplete.sources, function (i, config) {
      var suggestion_template = wp.template(config['tmpl_suggestion']);
      sources.push({
        source: algoliaAutocomplete.sources.hits(client.initIndex(config['index_name']), {
          hitsPerPage: config['max_suggestions'],
          attributesToSnippet: [
            'content:10'
          ],
          highlightPreTag: '__ais-highlight__',
          highlightPostTag: '__/ais-highlight__'
        }),
        templates: {
          header: function () {
            return wp.template('autocomplete-header')({
              label: _.escape(config['label'])
            });
          },
          suggestion: function (hit) {
            for (var key in hit._highlightResult) {
              /* We do not deal with arrays. */
              if (typeof hit._highlightResult[key].value !== 'string') {
                continue;
              }
              hit._highlightResult[key].value = _.escape(hit._highlightResult[key].value);
              hit._highlightResult[key].value = hit._highlightResult[key].value.replace(/__ais-highlight__/g, '<em>').replace(/__\/ais-highlight__/g, '</em>');
            }

            for (var key in hit._snippetResult) {
              /* We do not deal with arrays. */
              if (typeof hit._snippetResult[key].value !== 'string') {
                continue;
              }

              hit._snippetResult[key].value = _.escape(hit._snippetResult[key].value);
              hit._snippetResult[key].value = hit._snippetResult[key].value.replace(/__ais-highlight__/g, '<em>').replace(/__\/ais-highlight__/g, '</em>');
            }

            return suggestion_template(hit);
          }
        }
      });

    });

    /* Setup dropdown menus */
    jQuery("input[name='s']:not('.no-autocomplete')").each(function (i) {
      var $searchInput = jQuery(this);

      var config = {
        debug: algolia.debug,
        hint: false,
        openOnFocus: true,
        appendTo: 'body',
        templates: {
          empty: wp.template('autocomplete-empty')
        }
      };

      if (algolia.powered_by_enabled) {
        config.templates.footer = wp.template('autocomplete-footer');
      }

      /* Instantiate autocomplete.js */
      var autocomplete = algoliaAutocomplete($searchInput[0], config, sources)
      .on('autocomplete:selected', function (e, suggestion) {
        /* Redirect the user when we detect a suggestion selection. */
        window.location.href = suggestion.permalink;
      });

      /* Force the dropdown to be re-drawn on scroll to handle fixed containers. */
      jQuery(window).scroll(function() {
        if(autocomplete.autocomplete.getWrapper().style.display === "block") {
          autocomplete.autocomplete.close();
          autocomplete.autocomplete.open();
        }
      });
    });

    jQuery(document).on("click", ".algolia-powered-by-link", function (e) {
      e.preventDefault();
      window.location = "https://www.algolia.com/?utm_source=WordPress&utm_medium=extension&utm_content=" + window.location.hostname + "&utm_campaign=poweredby";
    });
  });
</script> 
 </head> 
 <body class="post-template-default single single-post postid-244913 single-format-standard"> 
  <header class="site-header"> 
   <div class="menu-toggle-area"> 
    <button id="mobile-menu-toggle" class="button button-header mobile-menu-toggle"> 
     <svg class="icon-menu" width="26px" height="26px"> 
      <use xlink:href="#icon-menu"></use> 
     </svg> </button> 
   </div> 
   <div class="logo"> 
    <a href="/"> 
     <svg class="icon-logo-star" width="26px" height="26px"> 
      <use xlink:href="#icon-logo-star"></use> 
     </svg> </a> 
   </div> 
   <div class="header-middle-area"> 
    <a href="/" class="logo-link"> CSS-Tricks </a> 
   </div> 
   <button id="search-opener" class="button button-header search-opener-button"> 
    <svg class="icon-search" width="26px" height="26px"> 
     <use xlink:href="#icon-search"></use> 
    </svg> 
    <svg class="icon-close" width="26px" height="26px"> 
     <use xlink:href="#icon-close"></use> 
    </svg> </button> 
   <div class="search" role="search" id="search-area"> 
    <form id="search-form" class="search-form" action="/"> 
     <label for="s" id="search-label" class="screen-reader"> Search </label> 
     <input aria-labelledby="search-label" id="s" required type="search" name="s" class="search-field" value="" placeholder="flexbox"> 
     <button type="submit" class="button button-header search-button"> 
      <svg class="icon-search" width="26px" height="26px"> 
       <use xlink:href="#icon-search"></use> 
      </svg> </button> 
    </form> 
   </div> 
  </header> 
  <div class="all-site-wrap"> 
   <nav class="main-nav" id="main-nav"> 
    <ul> 
     <li class="home"> <a href="/"> 
       <svg class="icon-nav-home" width="26px" height="26px"> 
        <use xlink:href="#icon-nav-home"></use> 
       </svg> <span>Home</span> </a> </li> 
     <li class="videos"> <a href="/video-screencasts/"> 
       <svg class="icon-nav-video" width="26px" height="26px"> 
        <use xlink:href="#icon-nav-video"></use> 
       </svg> <span>Videos</span> </a> </li> 
     <li class="almanac"> <a href="/almanac/"> 
       <svg class="icon-nav-almanac" width="26px" height="26px"> 
        <use xlink:href="#icon-nav-almanac"></use> 
       </svg> <span>Almanac</span> </a> </li> 
     <li class="gallery"> <a href="/gallery/"> 
       <svg class="icon-nav-gallery" width="26px" height="26px"> 
        <use xlink:href="#icon-nav-gallery"></use> 
       </svg> <span>Gallery</span> </a> </li> 
     <li class="snippets"> <a href="/snippets/"> 
       <svg class="icon-nav-snippets" width="26px" height="26px"> 
        <use xlink:href="#icon-nav-snippets"></use> 
       </svg> <span>Snippets</span> </a> </li> 
     <li class="forums"> <a href="/forums/"> 
       <svg class="icon-nav-forums" width="26px" height="26px"> 
        <use xlink:href="#icon-nav-forums"></use> 
       </svg> <span>Forums</span> </a> </li> 
     <li class="newsletter"> <a href="/newsletters/"> 
       <svg class="icon-nav-newsletter" width="26px" height="26px"> 
        <use xlink:href="#icon-nav-newsletter"></use> 
       </svg> <span>Newsletter</span> </a> </li> 
     <li class="jobs"> <a href="/jobs/"> 
       <svg class="icon-nav-jobs" width="26px" height="26px"> 
        <use xlink:href="#icon-nav-jobs"></use> 
       </svg> <span>Jobs</span> </a> </li> 
     <li class="guides"> <a href="/guides/"> 
       <svg class="icon-nav-guide" width="26px" height="26px"> 
        <use xlink:href="#icon-nav-guide"></use> 
       </svg> <span>Guides</span> </a> </li> 
     <li class="shop"> <a href="/shop/"> 
       <svg class="icon-nav-shop" width="26px" height="26px"> 
        <use xlink:href="#icon-nav-shop"></use> 
       </svg> <span>Shop</span> </a> </li> 
    </ul> 
   </nav> 
   <div class="page-wrap"> 
    <article id="post-244913" role="main" class="instapaper_body h-entry e-content"> 
     <header class="mega-header"> 
      <h1 class="p-name"> Using WebP Images </h1> 
     </header> 
     <p class="author-byline"> <span class="author-and-date"> By <a href="https://css-tricks.com/author/jeremywagner/"> <span class="p-author"> Jeremy Wagner </span> </a> <span class="slashes">On</span> <time datetime="2016-08-26" class="dt-published"> August 26, 2016 </time> </span> <span class="byline-tags"> 
       <svg class="icon-tag" width="12px" height="12px">
        <use xlink:href="#icon-tag"></use>
       </svg><a href="https://css-tricks.com/tag/images/" rel="tag">images</a>, <a href="https://css-tricks.com/tag/performance/" rel="tag">performance</a>, <a href="https://css-tricks.com/tag/picture/" rel="tag">picture</a>, <a href="https://css-tricks.com/tag/webp/" rel="tag">webp</a> </span> </p> 
     <div class="article-content"> 
      <div class="module module-ad"> 
       <div id="bsap_1279518" class="bsarocks bsap_3469a2a501a9e18091036aa0c89f9dcb"></div> 
      </div> 
      <p>We've all been there before: You're browsing a website that has a ton of huge images of delicious food, or maybe that new gadget you've been eyeballing. These images tug at your senses, and for content authors, they're essential in moving people to do things.</p> 
      <p>Except that these images are downright huge. Like really huge. On a doddering mobile connection, you can even see these images unfurl before you like a descending window shade. You're suddenly reminded of the bad old days of dial-up.</p> 
      <p>This is a problem, because images represent a significant portion of what's downloaded on a typical website, and for good reason. Images are expressive tools, and they have the ability to speak more than copy can. The challenge is in walking the tightrope between visually rich content, and the speedy delivery of it.</p> 
      <p>The solution to this dilemma is not one dimensional. <span id="more-244913"></span> Many techniques exist for slimming down unruly images, and delivering them according to the capabilities of the devices that request them. Such a topic can easily be its own book, but the focus of this post will be very specific: Google's WebP image format, and how you can take advantage of it to serve images that have all the visual fidelity your images have now, but at a fraction of the file size. Let's begin!</p> 
      <h3>What is WebP, and Why Should I Even Care?</h3> 
      <p>WebP is an image format developed and first released by Google in 2010. It supports encoding images in both lossless and lossy formats, making it a versatile format for any type of visual media, and a great alternative format to both PNG or JPEG. WebP's visual quality is often comparable to more ubiquitous formats. Below is a comparison of a lossy WebP image and a JPEG image:</p> 
      <figure id="post-244916" class="align-none media-244916">
       <img src="https://cdn.css-tricks.com/wp-content/uploads/2016/08/tacos-2x.jpg" alt="" srcset="https://res.cloudinary.com/css-tricks/image/fetch/q_auto,f_auto/https://cdn.css-tricks.com/wp-content/uploads/2016/08/tacos-2x.jpg 770w, https://res.cloudinary.com/css-tricks/image/fetch/q_auto,f_auto/https://cdn.css-tricks.com/wp-content/uploads/2016/08/tacos-2x-300x84.jpg 300w, https://res.cloudinary.com/css-tricks/image/fetch/q_auto,f_auto/https://cdn.css-tricks.com/wp-content/uploads/2016/08/tacos-2x-768x215.jpg 768w" sizes="(min-width: 1850px) calc( (100vw - 555px) / 3 )
       (min-width: 1251px) calc( (100vw - 530px) / 2 )
       (min-width: 1086px) calc(100vw - 480px)
       (min-width: 626px)  calc(100vw - 335px)
                           calc(100vw - 30px)">
       <figcaption>
        Can you tell the difference? (Hint: the WebP version is on the right.)
       </figcaption>
      </figure> 
      <p>In the above example, the visual differences are nearly imperceptible, yet the differences in file size are substantial. The JPEG version on the left weighs in at 56.7 KB, and the WebP version on the right is nearly a third smaller at 38 KB. Not too bad, especially when you consider that the visual quality between the two is comparable.</p> 
      <p>So the next question, of course, is “what's the browser support?” Not as slim as you might think. Since WebP is a Google technology, support for it is fixed to Blink-based browsers. These browsers make up a significant portion of users worldwide, however, meaning that <a href="http://caniuse.com/#search=webp">nearly 70%</a> of browsers in use support WebP at the time of this writing. If you had the chance to make your website faster for over two thirds of your users, would you pass it up? I think not.</p> 
      <p>It's important to remember, though, that WebP is <strong>not a replacement</strong> for JPEG and PNG images. It's a format you can serve to browsers that can use it, but you should keep older image formats on hand for other browsers. This is the nature of developing for the web: Have your Plan A ready for browsers that can handle it, and have your Plan B (and maybe Plan C) ready for those browsers that are less capable.</p> 
      <p>Enough with the disclaimers. Let's optimize!</p> 
      <h3>Converting your Images to WebP</h3> 
      <p>If you're familiar with Photoshop, the easiest way to get a taste for WebP is to try out the <a href="http://telegraphics.com.au/sw/product/WebPFormat#webpformat">WebP Photoshop Plugin</a>. After you install it, you'll be able to use the Save As option (not Save For Web!) and select either WebP or WebP Lossless from the format dropdown.</p> 
      <p>What's the difference between the two? Think of it as being a lot like the differences between JPEG and PNG images. JPEGs are lossy, and PNG images are lossless. Use regular old WebP when you want to convert your JPEG images. Use WebP Lossless when you're converting your PNGs.</p> 
      <p>When you save images using the WebP Lossless format with the Photoshop plugin, you're given no prompts. It just takes care of everything. When you choose regular old WebP for your lossy images, though, you'll get something like this:</p> 
      <figure id="post-244921" class="align-none media-244921">
       <img src="https://cdn.css-tricks.com/wp-content/uploads/2016/08/webp-plugin-2x.png" alt="" srcset="https://res.cloudinary.com/css-tricks/image/fetch/q_auto,f_auto/https://cdn.css-tricks.com/wp-content/uploads/2016/08/webp-plugin-2x.png 1290w, https://res.cloudinary.com/css-tricks/image/fetch/q_auto,f_auto/https://cdn.css-tricks.com/wp-content/uploads/2016/08/webp-plugin-2x-300x183.png 300w, https://res.cloudinary.com/css-tricks/image/fetch/q_auto,f_auto/https://cdn.css-tricks.com/wp-content/uploads/2016/08/webp-plugin-2x-768x468.png 768w, https://res.cloudinary.com/css-tricks/image/fetch/q_auto,f_auto/https://cdn.css-tricks.com/wp-content/uploads/2016/08/webp-plugin-2x-1024x624.png 1024w" sizes="(min-width: 1850px) calc( (100vw - 555px) / 3 )
       (min-width: 1251px) calc( (100vw - 530px) / 2 )
       (min-width: 1086px) calc(100vw - 480px)
       (min-width: 626px)  calc(100vw - 335px)
                           calc(100vw - 30px)">
       <figcaption>
        The WebP Lossy Configuration Dialogue
       </figcaption>
      </figure> 
      <p>The settings dialogue for lossy WebP gives more flexibility for configuring the output. You can adjust the image quality by using a slider from 0 to 100 (similar to JPEG), set the strength of the filtering profile to get lower file sizes (at the expense of visual quality, of course) and adjust noise filtering and sharpness.</p> 
      <p>My gripe with the WebP Photoshop plugin is two-fold: There isn't a Save for Web interface for it so that you can preview what an image will look like with the settings you've chosen. If you wanted to save a bunch of images, you've have to create a batch process. My second gripe probably isn't a hurdle for you if you like batch processing in Photoshop, but I'm more of a coder, so my preference is to use something like Node to convert many images at once.</p> 
      <h3>Converting Images to WebP with Node</h3> 
      <p><a href="https://nodejs.org">Node.js</a> is awesome, and for jack-of all-trades types such as myself, it's less about the fact that it brings JavaScript to the server, and more that it's a productivity tool that I can use while I build websites. In this article, we're going to use Node to convert your JPEGs and PNGs to WebP images en masse with the use of a Node package called <a href="https://www.npmjs.com/package/imagemin"><code>imagemin</code></a>.</p> 
      <p><code>imagemin</code> is the Swiss Army Knife of image processors in Node, but we'll just focus on using it to convert all of our JPEGs and PNGs to WebP images. Don't fret, though! Even if you've never used Node before, this article will walk you through everything. If the idea of using Node bugs you, you can use the WebP Photoshop plugin and skip ahead.</p> 
      <p>The first thing you'll want to do is <a href="https://nodejs.org/en/download">download Node.js</a> and install it. This should only take you a few minutes. Once installed, open a terminal window, and go to your web project's root folder. From there, just use Node Package Manager (npm) to install <code>imagemin</code> and the <a href="https://www.npmjs.com/package/imagemin-webp"><code>imagemin-webp</code></a> plugin:</p> 
      <pre rel="Command Line"><code>npm install imagemin imagemin-webp</code></pre> 
      <p>The install may take up to a minute. When finished, open your text editor and create a new file named <code>webp.js</code> in your web project's root folder. Type the script below into the file:</p> 
      <pre rel="JavaScript"><code class="language-javascript">var imagemin = require("imagemin"),    // The imagemin module.
  webp = require("imagemin-webp"),   // imagemin's WebP plugin.
  outputFolder = "./img",            // Output folder
  PNGImages = "./img/*.png",         // PNG images
  JPEGImages = "./img/*.jpg";        // JPEG images

imagemin([PNGImages], outputFolder, {
  plugins: [webp({
      lossless: true // Losslessly encode images
  })]
});

imagemin([JPEGImages], outputFolder, {
  plugins: [webp({
    quality: 65 // Quality setting from 0 to 100
  })]
});</code></pre> 
      <p>This script will process all JPEG and PNG images in the <code>img</code> folder and convert them to WebP. When converting PNG images, we set the <code>lossless</code> option to <code>true</code>. When converting JPEG images, we set the <code>quality</code> option to <code>65</code>. Feel free to experiment with these settings to get different results. You can experiment with even more settings at the <a href="https://www.npmjs.com/package/imagemin-webp"><code>imagemin-webp</code> plugin page</a>.</p> 
      <p>This script assumes that all of your JPEG and PNG images are in a folder named <code>img</code>. If this isn't the case, you can change the values of the <code>PNGImages</code> and <code>JPEGImages</code> variables. This script also assumes you want the WebP output to go into the <code>img</code> folder. If you don't want that, change the value of the <code>outputFolder</code> variable to whatever you need. Once you're ready, run the script like so:</p> 
      <pre rel="Command Line"><code>node webp.js</code></pre> 
      <p>This will process all of the images, and dump their WebP counterparts into the <code>img</code> folder. The benefits you realize will depend on the images you're converting. In my case, a folder with JPEGs totaling roughly 2.75 MB was trimmed down to <strong>1.04 MB</strong> without any perceptible loss in visual quality. That's a <strong>62% reduction</strong> without much effort! Now that all of your images are converted, you're ready to start using them. Let's jump in and put them to use!</p> 
      <h3>Using WebP in HTML</h3> 
      <p>Using a WebP image in HTML is like using any other kind of image, right? Just slap that sucker into the <code>&lt;img /&gt;</code> tag's <code>src</code> attribute and away you go!</p> 
      <pre rel="HTML"><code class="language-markup">&lt;!-- Nothing possibly can go wrong with this, right? --&gt;
&lt;img src="img/myAwesomeWebPImage.webp" alt="WebP rules." /&gt;</code></pre> 
      <p>This will work great, but only for browsers that support it. Woe betide those unlucky users who wander by your site when all you're using is WebP:</p> 
      <figure id="post-244917" class="align-none media-244917">
       <img src="https://cdn.css-tricks.com/wp-content/uploads/2016/08/broken-webp-2x.png" alt="" srcset="https://res.cloudinary.com/css-tricks/image/fetch/q_auto,f_auto/https://cdn.css-tricks.com/wp-content/uploads/2016/08/broken-webp-2x.png 714w, https://res.cloudinary.com/css-tricks/image/fetch/q_auto,f_auto/https://cdn.css-tricks.com/wp-content/uploads/2016/08/broken-webp-2x-300x186.png 300w" sizes="(min-width: 1850px) calc( (100vw - 555px) / 3 )
       (min-width: 1251px) calc( (100vw - 530px) / 2 )
       (min-width: 1086px) calc(100vw - 480px)
       (min-width: 626px)  calc(100vw - 335px)
                           calc(100vw - 30px)">
       <figcaption>
        WHAT HAPPENED
       </figcaption>
      </figure> 
      <p>It sucks, sure, but that's just the way front end development is, so buck up. Some features just aren't going to work in every browser, and that's not going to change anytime soon. The easiest way we can make this work is to use the <code></code> element to specify a set of fallbacks like so:</p> 
      <pre rel="HTML"><code class="language-markup">&lt;picture&gt;
  &lt;source srcset="img/awesomeWebPImage.webp" type="image/webp"&gt;
  &lt;source srcset="img/creakyOldJPEG.jpg" type="image/jpeg"&gt; 
  &lt;img src="img/creakyOldJPEG.jpg" alt="Alt Text!"&gt;
&lt;/picture&gt;</code></pre> 
      <p>This is probably your best best for the broadest possible compatibility because it will work in every single browser, not just those that support the <code></code> element. The reason for this is that browsers that don't support <code>&lt;picture&gt;</code> will just display whatever source is specified in the <code>&lt;img&gt;</code> tag. If you need full <code>&lt;picture&gt;</code> support, you can always drop in <a href="https://github.com/scottjehl/picturefill">Scott Jehl's super-slick Picturefill script</a>.</p> 
      <h3>Using WebP Images in CSS</h3> 
      <p>The picture gets more complex when you need to use WebP images in CSS. Unlike the <code></code> element in HTML which falls back gracefully to the <code>&lt;img&gt;</code> element in all browsers, CSS doesn't provide a built-in solution for fallback images that's optimal. Solutions such as multiple backgrounds end up downloading both resources in some cases, which is a big optimization no no. The solution lies in feature detection.</p> 
      <p><a href="http://modernizr.com">Modernizr</a> is a well-known feature detection library that detects available features in browsers. WebP support just so happens to be one of those detections. Even better, you can do a custom Modernizr build with only WebP detection at <a href="https://modernizr.com/download">https://modernizr.com/download</a>, which allows you to detect WebP support with very low overhead.</p> 
      <p>When you add this custom build to your website via the <code>&lt;script&gt;</code> tag, it will automatically add one of two classes to the <code>&lt;html&gt;</code> element:</p> 
      <ol> 
       <li>The <code>webp</code> class is added when the browser supports WebP.</li> 
       <li>The <code>no-webp</code> class is added when the browser <em>doesn't</em> support WebP.</li> 
      </ol> 
      <p>With these classes, you'll be able to use CSS to load background images according to a browser's capability by targeting the class on the <code></code> tag:</p> 
      <pre rel="CSS"><code class="language-css">.no-webp .elementWithBackgroundImage {
  background-image: url("image.jpg");
}

.webp .elementWithBackgroundImage{
  background-image: url("image.webp");
}</code></pre> 
      <p>That's it. Browsers that can use WebP will get WebP. Those that can't will just fall back to supported image types. It's a win-win! Except...</p> 
      <h3>What About Users with JavaScript Disabled?</h3> 
      <p>If you're depending on Modernizr, you have to think about those users who have JavaScript disabled. Sorry, but it's the way things are. If you're going to use feature detection that can leave some of your users in the dark, you'll need to test with JavaScript disabled. With the feature detection classes used above, JavaScript-less browsers won't even show a background image. This is because the disabled script never gets to add the detection classes to the <code>&lt;html&gt;</code> element.</p> 
      <p>To get around this, we'll start by adding a class of <code>no-js</code> to the <code></code> tag:</p> 
      <pre rel="HTML"><code class="language-markup">&lt;html class="no-js"&gt;</code></pre> 
      <p>We'll then write a small piece of inline script that we'll place before any <code></code> or <code></code> tags:</p> 
      <pre rel="HTML"><code class="language-markup">&lt;script&gt;
  document.documentElement.classList.remove("no-js");
&lt;/script&gt;</code></pre> 
      <p>This will remove the <code>no-js</code> class on the <code>&lt;html&gt;</code> element when parsed.</p> 
      <p>So what good does this do us? When JavaScript is disabled, this small script never runs, so the <code>no-js</code> class will stay on the element. This means we can can add another rule to provide an image type that has the widest support:</p> 
      <pre rel="CSS"><code class="language-css">.no-js .elementWithBackgroundImage {
  background-image: url("image.jpg");
}</code></pre> 
      <p>This covers all our bases. If JavaScript is available, the inline script is run and removes the <code>no-js</code> class before the CSS is parsed, so the JPEG is never downloaded in a WebP-capable browser. If JavaScript is indeed turned off, then the class is not removed and the more compatible image format is used.</p> 
      <p>Now that we've done all of this, these are the use cases we can expect:</p> 
      <ol> 
       <li>Those who can use WebP will get WebP.</li> 
       <li>Those who can't use WebP will get PNG or JPEG images.</li> 
       <li>Those with JavaScript turned off will get PNG or JPEG images.</li> 
      </ol> 
      <p>Give yourself a hand. You just learned how to progressively use WebP images.</p> 
      <h3>In Closing</h3> 
      <p>WebP is a versatile image format that we can serve in place of PNG and JPEG images (if it's supported.) It can yield a substantial reduction in the size of images on your website, and as we know, anything that results in transferring less data lowers page load time.</p> 
      <p>Are there cons? A few. The biggest one is that you're maintaining two sets of images to achieve the best possible support, which may not be possible for your website if there's a huge set of imagery that you need to convert over to WebP. Another is that you'll have to manage a bit of JavaScript if you need to use WebP images in CSS. Another notable one is that users who save your images to the disk may not have a default program set up to view WebP images.</p> 
      <p>The takeaway is that the relatively low effort is worth the savings you'll realize, savings that will improve the user experience of your website by allowing it to load faster. Users browsing via mobile networks will benefit especially. Now go forward and WebP to your heart's content!</p> 
      <hr> 
      <div class="explanation" style="overflow: hidden;"> 
       <img src="https://cdn.css-tricks.com/wp-content/uploads/2016/08/Wagner-WebP-MAP-HI.jpg" alt="Cover of Web Performance in Action" style="float: left; margin: 0 20px 2px 0; max-width: 180px;">
       <p></p> 
       <p><a href="https://jeremywagner.me">Jeremy Wagner</a> is the author of <a href="https://manning.com/books/web-performance-in-action?a_aid=webopt&amp;a_bid=63c31090">Web Performance in Action</a>, an upcoming title from Manning Publications. Use coupon code <code>csstripc</code> to save 38% off it, or any other Manning book.</p> 
       <p>Check him out on Twitter: <a href="https://twitter.com/malchata">@malchata</a></p> 
      </div> 
      <div class="sharedaddy sd-sharing-enabled">
       <div class="robots-nocontent sd-block sd-social sd-social-text sd-sharing">
        <h3 class="sd-title">Share this:</h3>
        <div class="sd-content">
         <ul>
          <li class="share-twitter"><a rel="nofollow" data-shared="sharing-twitter-244913" class="share-twitter sd-button no-icon" href="https://css-tricks.com/using-webp-images/?share=twitter" target="_blank" title="Click to share on Twitter"><span>Twitter</span></a></li>
          <li class="share-facebook"><a rel="nofollow" data-shared="sharing-facebook-244913" class="share-facebook sd-button no-icon" href="https://css-tricks.com/using-webp-images/?share=facebook" target="_blank" title="Click to share on Facebook"><span>Facebook</span></a></li>
          <li class="share-pocket"><a rel="nofollow" data-shared="" class="share-pocket sd-button no-icon" href="https://css-tricks.com/using-webp-images/?share=pocket" target="_blank" title="Click to share on Pocket"><span>Pocket</span></a></li>
          <li class="share-end"></li>
         </ul>
        </div>
       </div>
      </div> 
     </div> 
    </article> 
    <div class="end-of-article-ads"> 
     <div class="bsap-doubles side-by-side"> 
      <div id="bsap_1250418" class="bsarocks bsap_3469a2a501a9e18091036aa0c89f9dcb"></div> 
     </div> 
    </div> 
    <div class="comments-col"> 
     <div class="module-comments"> 
      <section id="comments"> 
       <h2 class="comments-title"> Comments </h2> 
       <ol class="commentlist group"> 
        <li class="comment even thread-even depth-1" id="li-comment-1603736"> 
         <div class="grid group comment-wrap" id="comment-1603736"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/72d95c114998eeb8ae8a9aff83ad33b2?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Johan Westling
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603736"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-08-26T08:23:59+00:00">August 26, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>Wouldn’t it be possible to use the @support to override the default background image with the webp image instead of relying on modernizer?</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> 
         <ul class="children"> 
          <li class="comment odd alt depth-2" id="li-comment-1603737"> 
           <div class="grid group comment-wrap" id="comment-1603737"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/72d95c114998eeb8ae8a9aff83ad33b2?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Johan Westling
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603737"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-26T08:29:43+00:00">August 26, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Or would it figure it’s supported, just ignoring the image provide in the url()?</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even depth-2" id="li-comment-1603739"> 
           <div class="grid group comment-wrap" id="comment-1603739"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/376deae39b17fad6cfb354fb62f69f41?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               MaxArt
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603739"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-26T08:36:28+00:00">August 26, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>No, @supports only checks if the CSS engine supports a given property/value pair (and in some cases even lying about it).</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment byuser comment-author-jeremywagner bypostauthor odd alt depth-2" id="li-comment-1603741"> 
           <div class="grid group comment-wrap" id="comment-1603741"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/1439e90e6361bfbcef96639fed4c6241?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Jeremy Wagner
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603741"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-26T08:39:41+00:00">August 26, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>When I attempted to do the multiple background trick, I believe it ended up downloading the WebP source anyway– and failing. So it was sort of suboptimal that way. I’d have to look back and check, but there was a specific reason I didn’t go that route when I first wrote this article on my blog back in April.</p> 
              <p>Thanks for reading!</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
         </ul>
         <!-- .children --> </li>
        <!-- #comment-## --> 
        <li class="comment even thread-odd thread-alt depth-1 featured" id="li-comment-1603738"> 
         <div class="grid group comment-wrap" id="comment-1603738"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/376deae39b17fad6cfb354fb62f69f41?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             MaxArt
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603738"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-08-26T08:33:15+00:00">August 26, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>Also make sure the HTTP server supports webp images, correctly sending image/webp as the content type.<br> It happened to me that I happily developed a site with webp images for Blink-based browsers, and couldn’t see anything when it went online because they were served as application/octet-stream</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> 
         <ul class="children"> 
          <li class="comment byuser comment-author-jeremywagner bypostauthor odd alt depth-2" id="li-comment-1603740"> 
           <div class="grid group comment-wrap" id="comment-1603740"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/1439e90e6361bfbcef96639fed4c6241?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Jeremy Wagner
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603740"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-26T08:37:54+00:00">August 26, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Yes! I haven’t had to do this myself, but some configurations may require it. If you needed to do this in Apache for one reason or another, this should work:</p> 
              <pre><code>&lt;IfModule mime_module&gt;
    AddType image/webp .webp
&lt;/IfModule&gt;
</code></pre> 
              <p>Thanks for bringing this up! :)</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
         </ul>
         <!-- .children --> </li>
        <!-- #comment-## --> 
        <li class="comment even thread-even depth-1 featured" id="li-comment-1603742"> 
         <div class="grid group comment-wrap" id="comment-1603742"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/7c27045d95743b03a60ce8d18ff5d541?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Cory
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603742"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-08-26T09:48:59+00:00">August 26, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>full disclosure: I wrote this :)</p> 
            <p>Here is <a href="https://corydowdy.com/blog/webp-jxr-nginx-content-negotiation-test" rel="nofollow">how you can use Nginx to serve Webp and JXR images to Microsoft Edge</a>. Also how to convert to a jxr through photoshop or command line</p> 
            <p>It uses content negotiation, so you you can continue using regular image tag with/without srcset, and has the original solutions for Webp images for Apache and Nginx that Ilya Grigorik and Eugene Lazutkin came up with!</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> </li>
        <!-- #comment-## --> 
        <li class="comment odd alt thread-odd thread-alt depth-1 featured" id="li-comment-1603747"> 
         <div class="grid group comment-wrap" id="comment-1603747"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/9b2e3dabf361eeaf308ce6cca61cf44c?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Randy Jensen
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603747"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-08-27T05:12:26+00:00">August 27, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>If it helps anyone, I wrote a WordPress plugin to handle the conversion of images to WebP during upload. It doesn’t make the front-end load these, you’ll need to do that in your theme, but it’ll convert all images including custom image sizes.</p> 
            <p><a href="https://github.com/randyjensen/rj-webp-converter" rel="nofollow">https://github.com/randyjensen/rj-webp-converter</a></p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> 
         <ul class="children"> 
          <li class="comment even depth-2" id="li-comment-1603753"> 
           <div class="grid group comment-wrap" id="comment-1603753"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/97bb2735dabd0484cba0f35c0b0b036d?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Josh
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603753"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-27T16:19:03+00:00">August 27, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Pretty helpful! But be careful with regular expressions; they can be a bit tricky. You should rewrite instances of <code>/(.jpg|.png)/</code> to <code>/\.(jpe?g|png)$/i</code></p> 
              <p>— a <code>.</code> just means “anything”, not necessarily a dot; you need to backslash it to be taken literally<br> — <code>jpe?g</code> will match both <code>jpg</code> and <code>jpeg</code><br> — the <code>$</code> makes sure the match is only at the end (otherwise <code>jpgofacat.jpg</code> would become <code>ofacat.web</code> when you run <code>preg_replace</code>)<br> — the <code>i</code> at the end makes it case insensitive</p> 
              <p>I also recommend checking out PHP’s native WebP capabilities: <a href="http://php.net/manual/en/function.imagecreatefromwebp.php" rel="nofollow">http://php.net/manual/en/function.imagecreatefromwebp.php</a> They aren’t necessarily going to be as fast as running <code>cwebp</code> from the server, but <code>exec()</code> is an incredibly dangerous PHP function to leave enabled, so any chance to drop that dependency is worth taking.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt depth-2" id="li-comment-1603754"> 
           <div class="grid group comment-wrap" id="comment-1603754"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/9b2e3dabf361eeaf308ce6cca61cf44c?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Randy Jensen
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603754"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-27T16:34:44+00:00">August 27, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Excellent points Josh. Thanks!</p> 
              <p>I haven’t updated anything with that plugin in over two years so I think this is a good time to revisit it.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even depth-2" id="li-comment-1603759"> 
           <div class="grid group comment-wrap" id="comment-1603759"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/1439e90e6361bfbcef96639fed4c6241?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Jeremy Wagner
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603759"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-28T07:47:30+00:00">August 28, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Don’t quote me on this, but I think you can limit the amount of access to other folders in the system by setting the <code>open_basedir</code> php.ini directive: <a href="http://php.net/manual/en/ini.core.php#ini.open-basedir" rel="nofollow">http://php.net/manual/en/ini.core.php#ini.open-basedir</a></p> 
              <p>So you may still be able to somewhat safely use <code>exec</code> or <code>shell_exec</code> if you set this, but don’t take my word for it, test it out. I still disable both of these functions in my configuration, FWIW.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt depth-2" id="li-comment-1603760"> 
           <div class="grid group comment-wrap" id="comment-1603760"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/9b2e3dabf361eeaf308ce6cca61cf44c?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Randy Jensen
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603760"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-28T08:02:52+00:00">August 28, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Ya, exec definitely needs to go. It looks like <a href="http://php.net/manual/en/function.imagewebp.php" rel="nofollow">http://php.net/manual/en/function.imagewebp.php</a> is what I need. This will allow me to get rid of the libwebp dependency and get the plugin in to the official WordPress repo. This is what happens when you don’t touch a library for 2 years.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even depth-2" id="li-comment-1603762"> 
           <div class="grid group comment-wrap" id="comment-1603762"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/97bb2735dabd0484cba0f35c0b0b036d?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Josh
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603762"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-28T08:29:26+00:00">August 28, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p><code>open_basedir</code> restrictions only apply to PHP. <code>exec()</code> happens outside PHP (which is why it is dangerous). Those commands are subject to the usual r/w/x permission restrictions imposed by the file system, but that’s about it.</p> 
              <p>A better way to marry PHP and System is the <code>proc</code> family of functions (e.g. <a href="http://php.net/manual/en/function.proc-open.php" rel="nofollow">http://php.net/manual/en/function.proc-open.php</a> ). Here, PHP is actually in charge of launching and managing specific system processes, so <code>open_basedir</code> restrictions will apply. Rather than whitelist the whole of <code>/usr/bin/</code> or anything crazy like that, you can add individual binaries like <code>/usr/bin/gpg</code>.</p> 
              <p><code>proc</code> is the best solution for individual projects or PEAR/PECL packages, but is a bit much for a general use WordPress function. Native PHP is probably all you can get away with in that context. :)</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
         </ul>
         <!-- .children --> </li>
        <!-- #comment-## --> 
        <li class="comment odd alt thread-even depth-1" id="li-comment-1603752"> 
         <div class="grid group comment-wrap" id="comment-1603752"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/46a12c8cf24f9d7f8ad7a1ef3ee5a010?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Joe Duarte
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603752"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-08-27T15:59:23+00:00">August 27, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>Hi Jeremy – Do you have any data indicating that using webp reduces page load times? I wouldn’t assume that it does without testing it extensively. webp is much slower to decode than jpeg, so the fact that the images are smaller doesn’t necessarily mean you’ll get faster page loads. A web page isn’t a blob of uniform data, that decodes and renders at a uniform rate. These are all completely different formats with different codecs. I tried getting real-world webp performance data from Google, but so far they won’t release any. There’s not much point in using webp without having detailed performance data showing a benefit, unless the goal is simply to reduce bandwidth charges regardless of page performance.</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> 
         <ul class="children"> 
          <li class="comment even depth-2" id="li-comment-1603755"> 
           <div class="grid group comment-wrap" id="comment-1603755"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/1439e90e6361bfbcef96639fed4c6241?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Jeremy Wagner
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603755"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-27T20:04:16+00:00">August 27, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Decode times are trivial. With modern processing, there’s no reason for why decoding any image, even WebP images, should take so long that a significant reduction in data transferred over the wire would be a useless endeavor.</p> 
              <p>I wrote about this in my book, and through an example, I was able to reduce load times by about 20%-35%, depending on the DPI of the screen involved. If you’re interested in this chapter, I can send you a copy for free, just DM me on my twitter account. If you can’t, let me know what your handle is. I’ll follow you so you can get in touch.</p> 
              <p>The best way to get real world performance data is to create your own in this case. I use WebP on my blog for all raster images, and I would never recommend it to anyone if I didn’t feel it wasn’t good for performance. Can it be time consuming to implement for existing content? Sure. But I think the result is worth the effort if you can justify it.</p> 
              <p>Thanks for reading!</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt depth-2" id="li-comment-1603781"> 
           <div class="grid group comment-wrap" id="comment-1603781"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/46a12c8cf24f9d7f8ad7a1ef3ee5a010?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Joe Duarte
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603781"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-29T20:14:19+00:00">August 29, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Jeremy, this part seems off:</p> 
              <p>“Decode times are trivial. With modern processing, there’s no reason for why decoding any image, even WebP images, should take so long that a significant reduction in data transferred over the wire would be a useless endeavor.”</p> 
              <p>If I’m reading you right, you’re saying that slower decoding can’t offset smaller file size in terms of combined time to download + time to decode/rasterize? That’s definitely not going to true for all sorts of formats and scenarios. If that’s a widespread belief, we need to educate people. The basic math will be similar to what Cloudflare posted here when analyzing brotli: <a href="https://blog.cloudflare.com/results-experimenting-brotli/" rel="nofollow">https://blog.cloudflare.com/results-experimenting-brotli/</a></p> 
              <p>If we’re looking at client side, then the math is download time + decode time. If the baseline is a 100 KiB JPEG that takes 10 ms to decode, on a 10 Mibit/sec connection, it would be 80 ms to download + 10 ms for decode = 90 ms total.</p> 
              <p>If we serve a webp instead, say it’s only 60 KiB now, but it takes five times as long to decode, then it’s 48 ms download + 50 ms to decode = 98 ms total.</p> 
              <p>That kind of result can easily happen for all sorts of codec changes. If we switched from gzip to xz for example (for all the text files), we’d have smaller download sizes but the slower decompression would easily outweigh the download savings, which is why we don’t do it. webp is much slower to decode than jpeg and png. How much slower is a mystery, since Google won’t release valid data. Tencent reports that it’s 4 or 5 times slower than PNG: <a href="https://isux.tencent.com/introduction-of-webp.html" rel="nofollow">https://isux.tencent.com/introduction-of-webp.html</a> Note than PNG will in turn be slower than JPEG on almost any device (JPEG is magic basically, and lots of devices have hardware-accelerated JPEG decoding, or even dedicated “fixed-function” JPEG decoder chips.</p> 
              <p>Since they’re promoting the format, and since they have so many resources and dollars, I expect Google to fully document the webp format and to produce rich, valid performance data. It’s very strange that they’ve refused to do so. Webp doesn’t even have a spec or a standard, and it’s pretty buggy at this point. It’s risky to put valuable assets into a format that doesn’t have a spec and where a new decoder version can destroy files encoded using a previous version (that happened last year with webp). It’s also quite possible that webp is slowing page load time — that it’s so much slower to decode that it offsets the compression savings. This seems more likely with their lossy modes than their lossless, but know one seems to know for sure. There was a thread here on the webp list where I reviewed the “evidence” Google tried to pass off (the Tencent study from above was the only performance data in all their links): <a href="https://groups.google.com/a/webmproject.org/forum/#!searchin/webp-discuss/useful$20performance$20data/webp-discuss/4r6frraRtkg/nNdTEitlMwAJ" rel="nofollow">https://groups.google.com/a/webmproject.org/forum/#!searchin/webp-discuss/useful$20performance$20data/webp-discuss/4r6frraRtkg/nNdTEitlMwAJ</a></p> 
              <p>People shouldn’t use stuff just because Google tells them too. They need to provide evidence, and they should stop being so creepy about trashing MozJPEG all over the web. They’re behavior is strange right now (<a href="https://blog.cloudflare.com/experimenting-with-mozjpeg-2-0/" rel="nofollow">https://blog.cloudflare.com/experimenting-with-mozjpeg-2-0/</a> <a href="https://medium.com/@duhroach/reducing-jpg-file-size-e5b27df3257c#.oj7an6ffs" rel="nofollow">https://medium.com/@duhroach/reducing-jpg-file-size-e5b27df3257c#.oj7an6ffs</a>)</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even depth-2" id="li-comment-1603793"> 
           <div class="grid group comment-wrap" id="comment-1603793"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/1439e90e6361bfbcef96639fed4c6241?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Jeremy Wagner
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603793"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-30T10:09:40+00:00">August 30, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Here’s what I’ve found in my analysis of how Chrome seems to behave when I use WebP, and bear in mind, this is one test case, and is by no means exhaustive:</p> 
              <p>I have two images on a server:<br> <a href="https://jeremywagner.me/img/global/stpaul-2x.jpg" rel="nofollow">https://jeremywagner.me/img/global/stpaul-2x.jpg</a><br> <a href="https://jeremywagner.me/img/global/stpaul-2x.webp" rel="nofollow">https://jeremywagner.me/img/global/stpaul-2x.webp</a></p> 
              <p>Both images are a shot of Downtown Saint Paul (because Minnesota.) The source is a JPEG that I found on Google Images. It’s 126 KB, and this is after the JPEG has been processed using imagemin-jpeg-recompress. The WebP version is a lossy WebP with a quality setting of 65, and it weighs in at 59.8 KB. These figures are from Chrome’s network panel, so they ostensibly include HTTP headers in the final size. These images are pretty comparable in terms of visual quality.</p> 
              <p>So let’s talk about decode time. We can hem and haw about decode times and how trivial/important it is. To me, it’s trivial. Because once I have an alternative image format in hand, and I know it’s reasonably smaller, all I care about is how long the browser takes to begin painting the image. Using Chrome’s timeline tool, here’s what I see for first paint times using Google Chrome’s “Good 3G” network throttling profile (1.5Mb/s) over ten trials for each image type (with caching disabled):</p> 
              <p>JPEG: 455.85ms<br> WebP: 320.63ms</p> 
              <p>This is about a 30% improvement. Of course, this test is for a single image, accessed directly outside of the context of a web page. But I think it’s a reasonably decent demonstration that decode time just isn’t that big of a factor. Remember that the source for your decode time data was published in 2014– Browser internals can change a lot in two years. If those figures are still accurate today, then their impact diminishes as connections get slower. Internet infrastructure and connectivity quality is still a problem in developing nations. When I test for speed, I test how people on the slowest connections may be affected. So I still routinely test on 2G and 3G simulations.</p> 
              <p>WebP is not a panacea. Neither is JPEG, GIF, SVG, or PNG. We have all of these different formats, and they’re good for all kinds of content. There are a few cases when I losslessly encoded PNGs to WebP, and the WebP format is actually larger. In those cases, I discard them and use the PNG image. Most of the time when I use WebP though, the result is comparable image quality in a significantly smaller image file. FWIW, I don’t work for Google, and I’m not beholden to them. I think WebP is a great contender format, and I’m going to recommend it where it makes sense.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt depth-2" id="li-comment-1603795"> 
           <div class="grid group comment-wrap" id="comment-1603795"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/97bb2735dabd0484cba0f35c0b0b036d?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Josh
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603795"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-30T10:38:35+00:00">August 30, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>WebP can have an astounding impact on load times under realworld conditions like a CMS, where the average user spends no time optimizing graphics for the web whatsoever. I recently updated a client’s WordPress site to automatically generate WebP images from the sources they upload and serve everything wrapped in a <code>&lt;picture&gt;</code> element (backgrounds too, using <code>object-fit</code> and a polyfill). Across some 4000 existing images, a mixture of JPEG, PNG, and GIF, the WebP counterparts (generated using only the <code>-jpeg_like</code> flag) ended up 59% smaller. (The server was already losslessly compressing uploaded images, with an average savings of about 10-15% for JPEGs and 50-75% for PNGs; the 59% WebP figure is in addition to that).</p> 
              <p>This, of course, increased the document sizes a bit because of the extra <code>&lt;picture&gt;</code> markup and the <code>object-fit</code> polyfill, but gzip and http/2 optimizations make text a fairly small deal. There was also extra i/o overhead because of the filesystem checks for WebP sister images (particularly with srcsets, since there are that many more sources to check), causing the document compilation times to increase. But even so, page loads ended up being on average about 40% faster. WebP savings significantly outpaced document bloat and i/o, so the more images on a page, the higher the savings ended up being.</p> 
              <p>Nobody has reported any decode-related lag. I suspect machines that are susceptible to that are not going to be running supported browsers anyway.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even depth-2" id="li-comment-1603798"> 
           <div class="grid group comment-wrap" id="comment-1603798"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/9005b531138a6839fc232c8a70da3aa5?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Ferdy Christant
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603798"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-30T11:29:57+00:00">August 30, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>@Josh:</p> 
              <p>” (The server was already losslessly compressing uploaded images, with an average savings of about 10-15% for JPEGs and 50-75% for PNGs; the 59% WebP figure is in addition to that).”</p> 
              <p>This statement raises a lot of questions. First of all, there is no such thing as losslessly compressing a JPEG. A JPEG is always lossy. Even if you open one and save it without making any changes, it is lossy. I assume you mean that they were being compressed without an immediate visual loss of quality, but that’s not the same as lossless. It’s just a “safe” compression level.</p> 
              <p>If I read further, my interpretation is that next you achieved an additional 59% savings due to the use of WebP on top of JPEGs that were compressed 15-20% in size. This can mean a whole lot of things.</p> 
              <p>First, the so-called “losless” compression of JPEGs can mean they were not well compressed at all in the first place. So it could mean that if you’d set the JPEG quality level to 60-70% (the sweet spot), you can actually win up to 70% in file size. In that case you would push the JPEG format to its edge.</p> 
              <p>I do not belief that you managed to achieve an additional 59% savings on top of that. WebP versus maximum usable compression of JPEG surely does not lead to a 59% overall saving. What you managed instead is to save 59% of a JPEG that was barely compressed at all, which isn’t a fair comparison.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt depth-2" id="li-comment-1603796"> 
           <div class="grid group comment-wrap" id="comment-1603796"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/97bb2735dabd0484cba0f35c0b0b036d?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Josh
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603796"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-30T10:48:44+00:00">August 30, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>I should amend my last comment to stipulate that i/o-related lag, whether in generating the images in the first place or checking to see whether they exist, largely depends on the server. I wouldn’t attempt any disk- or db-intensive optimizations on a shared host without some serious cache in place, as chances are it will already be struggling enough just to render the basic theme.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even depth-2" id="li-comment-1603800"> 
           <div class="grid group comment-wrap" id="comment-1603800"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/97bb2735dabd0484cba0f35c0b0b036d?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Josh
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603800"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-30T12:20:10+00:00">August 30, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>@Ferdy,<br> JPEG compression in this case consists almost entirely of removing metadata from the image (i.e. the non-image bits). End users tend to upload images straight off the camera, so to speak, without any pre-upload effort spent on making more web appropriate versions. Metadata has its uses, sure, but for this particular site it is at best bloat and at worst a security risk, so the server does what the user does not and removes it. The relative percentage savings from this operation depends on the metadata:imagedata ratio. Even a tag-crazy person won’t be able to make much of a relative dent into a high-resolution photo, but some cheap low-res stock photo from Getty? The metadata will account for a larger percentage of the original file size. The particular site I mentioned tends to upload images somewhere in between the two extremes, so removing metadata saves about 10-15% on average.</p> 
              <p>But you are incorrect in saying that the JPEG container format leaves no room for lossless compression. It is true there isn’t much wiggle room, but there is wiggle room nonetheless. There are tools like jpegrescan that can squeeze out an extra 1-2% savings. Sometimes there is also room for improvement by making a JPEG progressive (if nothing else, they have a more friendlier decode display).</p> 
              <p>To your other comment about the images not being well-compressed in the first place, of course they weren’t. We are in 100% agreement. I used the phrase “realworld conditions” to describe the real world. The average computer user has no understanding of the differences between JPEG and PNG, let alone the configuration options embedded within each individual format. Lossless compression can only optimize the encoding of what’s already there; it can never compete with just saving an image with appropriate configurations to begin with. ;)</p> 
              <p>So to reiterate, the images mentioned in my post were ones that were already there, uploaded by the client (plus the various thumbs generated by the CMS), and losslessly cleaned up by an automated server process. In this “realworld” use case, using the <code>-jpeg_like</code> flag on the <code>cwebp</code> binary produced files that were (lossily this time) 59% smaller than the compressed source. The WebP and source graphics are not 100% identical-looking. WebP has a slight gloss over certain types of texture that you can spot if you see two versions side-by-side. But the effects take humans into consideration and so aren’t used in ways that we’d be likely to notice if we didn’t have a comparison to make.</p> 
              <p>I didn’t mean to imply that WebP will always achieve 59% savings, only that it can perform even better than others were mentioning when you start with a more common (i.e. crappy) source. I implemented a similar WebP solution on one of my own web sites, but the source material there was better optimized to begin with, JPEG-only, and the images were qualitatively different than those used by the client (halftone filtered photographic content… a killer for both WebP and WebM optimization), so I only ended up saving about 10%. Haha.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt depth-2" id="li-comment-1603940"> 
           <div class="grid group comment-wrap" id="comment-1603940"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/5877d521525f86d0473a8f5919afc667?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Valentin Born
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603940"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-09-06T19:48:41+00:00">September 6, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>@Josh<br> 59% seems realistic to me, for unoptimised source images.</p> 
              <blockquote>
               <p> uploaded by the client (plus the various thumbs generated by the CMS), and losslessly cleaned up by an automated server process </p>
              </blockquote> 
              <p>By “losslessly”, do you mean something like imagemagick convert’s “-quality 100” option? This could actually increase the source’s size … Or was it more like “-quality 75” (no big visual difference)? (keeping in mind that every app may define its own quality scale, so the meaning of “quality 75” is different in gimp, photoshop, imagemagick, …)</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even depth-2" id="li-comment-1603942"> 
           <div class="grid group comment-wrap" id="comment-1603942"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/5877d521525f86d0473a8f5919afc667?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Valentin Born
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603942"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-09-06T21:35:01+00:00">September 6, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>@Ferdy</p> 
              <blockquote>
               <p> there is no such thing as losslessly compressing a JPEG. </p>
              </blockquote> 
              <p>Actually, there seems to be: convert’s “-quality 0” or “-quality 100”. I dont’t really understand the difference. 100 usually increases file size; 0 seems lossless to me, reduces file size on high quality images, will increase size of previously down-sampled images (-quality 35); 1 is worst quality setting for jpg in imagemagick.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt depth-2" id="li-comment-1603950"> 
           <div class="grid group comment-wrap" id="comment-1603950"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/97bb2735dabd0484cba0f35c0b0b036d?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Josh
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603950"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-09-07T06:27:08+00:00">September 7, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>@Valentin,</p> 
              <blockquote>
               <p>By “losslessly”, do you mean something like imagemagick convert’s “-quality 100” option? </p>
              </blockquote> 
              <p>No, I’m not referring to the quality setting of the JPEG. That falls under “lossy”, even if the end result is literally bigger (like converting from 85 to 100). Though as @Ferdy and I were discussing, experimenting with a JPEG quality setting is the single biggest thing one can do toward web optimization. But for WordPress in particular, the quality setting of the source graphic is moot, since typically the site will only serve the auto-generated thumbnails to visitors, which are saved at a set quality and don’t really inherit any benefit from the source’s disk size. The only real benefit for WP to uploading an optimized source is that it will be able to generate the thumbs more quickly.</p> 
              <p>For lossless JPEG compression, I run two programs: jpegoptim and jpegrescan.</p> 
              <pre><code>jpegoptim -f --strip-all --all-progressive /path/to/source.jpg
jpegrescan -t /path/to/source.jpg /path/to/new.jpg &amp;&amp; mv /path/to/new.jpg /path/to/source.jpg</code></pre> 
              <p>jpegoptim stips metadata and makes the JPEG progressive. Metadata tends to be the biggest savings since image programs and cameras and whatnot can inject a ton of data there. Progressiveness can also result in some disk savings, though not always.</p> 
              <p>jpegrescan looks for inefficiencies in the actual compression and will make improvements where it can. Its impact depends on the program that saved the image in the first place.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
         </ul>
         <!-- .children --> </li>
        <!-- #comment-## --> 
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-1603770"> 
         <div class="grid group comment-wrap" id="comment-1603770"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/9005b531138a6839fc232c8a70da3aa5?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Ferdy
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603770"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-08-29T05:53:01+00:00">August 29, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>Good article, but I do think it skips over the most important part, which is savings vs quality. The example of the small thumbnail is very beneficial to webp, indeed the size is smaller and you can’t really see any difference.</p> 
            <p>It is a mistake though to take that as a conclusion that one should always try to serve all images as webp where possible, which is implied.</p> 
            <p>For example, as soon as you turn your eye to larger image sizes, quality differences become a lot more visible, and the sizing differences as well. WebP does tend to perform well in large images, yet also has huge issues, such as the aggressive smoothing of skin on photos of people.</p> 
            <p>Not directly aimed at the author of the article, but the general conclusion I read everywhere as webp being roughly 30% smaller is absolutely not a minimum, it is more like a maximum. The same goes for the conclusion that they offer similar quality, this hugely depends on the actual content.</p> 
            <p>So, in many cases, the advantage is far smaller than 30%, which leaves me to wonder…why bother? I’m not anti webp, I just think it’s oversold.</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> </li>
        <!-- #comment-## --> 
        <li class="comment odd alt thread-even depth-1" id="li-comment-1603777"> 
         <div class="grid group comment-wrap" id="comment-1603777"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/78b53080bd58a175574403d50a5658b7?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Ken
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603777"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-08-29T11:22:24+00:00">August 29, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>Whatever happened to WebPJS? <a href="https://webpjs.appspot.com/" rel="nofollow">https://webpjs.appspot.com/</a> It seems to be abandoned. Is there any better WebP JavaScript implementation out there?</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> </li>
        <!-- #comment-## --> 
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-1603801"> 
         <div class="grid group comment-wrap" id="comment-1603801"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/9005b531138a6839fc232c8a70da3aa5?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Ferdy Christant
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603801"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-08-30T12:48:38+00:00">August 30, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>@Josh: Thanks, you cleared up a lot of things. So to reiterate your process:</p> 
            <p>user uploads original (with exif/meta, and typically not compressed)<br> automated process removes metadata, saving 15-20%<br> you run a lossy webp compression, saving 59% in addition</p> 
            <p>Sounds good, especially if the quality of output is found acceptable. But it still leaves open the question: what if step 3 was a lossy JPEG compression? How much would you save then? Would it be more or less than 59%, and what would it do to visual quality at different compression levels?</p> 
            <p>You don’t need to answer that, but I think that is the true question of webp vs jpeg compression. And to complicate things further, indeed the type of content matters as well :)</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> 
         <ul class="children"> 
          <li class="comment odd alt depth-2" id="li-comment-1603802"> 
           <div class="grid group comment-wrap" id="comment-1603802"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/97bb2735dabd0484cba0f35c0b0b036d?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Josh
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603802"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-30T13:15:41+00:00">August 30, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Saving an image correctly for the web is a good idea, but there isn’t really a magic quality setting; it depends a lot on the subjective eye and the content of the image. Pictures with sharp contrasting colors might have noticeable artifacts at even 95% (unless you disable chrome subsampling), while a desert landscape might be totally fine as low as 50%. All of the fancy image techniques employed on this particular project are ones that can safely be left to do their thing unsupervised.</p> 
              <p>WordPress uses a quality setting of 85% by default when making thumbnails. That seems to be a pretty good baseline for most types of pictures. Most themes should be using custom thumbnail sizes just about everywhere on a site, in which case the visitor is always benefiting from lossy compression, regardless of what the user originally uploaded.</p> 
              <p>But one place where this practice seems to be ignored are situations where an image has to expand indefinitely to cover some area, like a large hero. Good old <code>background-cover</code>. In fact, swapping out CSS backgrounds with responsive <code>object-fit</code> <code>&lt;picture&gt;</code> elements on my client’s site was what made the single biggest impact in terms of overall page size. This would have been the case even without WebP being involved in that chunk, though WebP inched it along that much further. The markup is a bit annoying and a polyfill had to be rewritten and tested, but the payoff was worth it.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even depth-2" id="li-comment-1603803"> 
           <div class="grid group comment-wrap" id="comment-1603803"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/9005b531138a6839fc232c8a70da3aa5?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Ferdy Christant
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603803"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-08-30T13:41:42+00:00">August 30, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>@Josh.</p> 
              <p>It’s absolutely true that the content of the image decides which quality level you can get away with. At work though, we did not have the luxury to do this per image so we were forced to set an overall quality level. Through some extensive testing on large sets of images we managed to get it down to 60-65%. This is right on the absolute tipping point of artifacts. Note that the type of images were photographs of people using the product. Still we’re using this pretty low quality level even on large masthead images without complaints. If you look at the JPEG quality level vs file size charts, 60% is quite the optimum. Note that this curve is far from linear.</p> 
              <p>So in that light, I consider 85% very conservative. Especially for thumbnails, depending on their size, where you can even experiment with going below 60% since artifacts are often too small to notice.</p> 
              <p>Finally, I like to point out a technique that is quite under appreciated:<br> <a href="https://www.netvlies.nl/tips-updates/design-interactie/retina-revolution" rel="nofollow">https://www.netvlies.nl/tips-updates/design-interactie/retina-revolution</a></p> 
              <p>So this technique uses very large images (in terms of resolution) and then uses very aggressive compression on them. Next, it lets the browser resize the image. The benefit is that in many cases, you can serve a single image for all, have support for retina, without having an increase in file size. The best of all worlds?</p> 
              <p>Main criticism is that it causes an increase in memory usage when these larger-than-needed images are decoded on the client. In practice, I have found that claim to not cause any real world issues as I have been using this technique for years on one of my websites.</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
         </ul>
         <!-- .children --> </li>
        <!-- #comment-## --> 
        <li class="comment odd alt thread-even depth-1" id="li-comment-1603811"> 
         <div class="grid group comment-wrap" id="comment-1603811"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/d706aa8a12a3f79cb311d70c6fcbba14?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Chris Stroud
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603811"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-08-31T01:02:32+00:00">August 31, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>How about using the Google pagespeed module to convert to webp only if the browser supports it? :)</p> 
            <p><a href="https://developers.google.com/speed/pagespeed/module/filter-image-optimize" rel="nofollow">https://developers.google.com/speed/pagespeed/module/filter-image-optimize</a></p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> </li>
        <!-- #comment-## --> 
        <li class="comment even thread-odd thread-alt depth-1" id="li-comment-1603967"> 
         <div class="grid group comment-wrap" id="comment-1603967"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/46a12c8cf24f9d7f8ad7a1ef3ee5a010?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Joe Duarte
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603967"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-09-07T19:43:45+00:00">September 7, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>@Jeremy Those numbers look good. When you say “once I have an alternative image format in hand, and I know it’s reasonably smaller, all I care about is how long the browser takes to begin painting the image”, that’s close to what I care about too. You juxtaposed it against decode time, but I’d bundle all that together, so I should have made that clear.</p> 
            <p>The bottom line for me is page render time, including whatever images we need to render. So my only quibble with your metric is that I don’t care so much about how long the browser takes to <em>begin</em> painting the image, but rather how long it takes to finish rendering all of them and the page overall. One might be a good proxy for the other – I’m not sure.</p> 
            <p>The tencent data is from 2014, but the Google data is even older – 4 and 5 years old. I’m puzzled by why Google doesn’t release any valid data, and I was appalled by the evidence they tried to pass off when I asked for data (just a bunch of CDN puff pieces talking only about file sizes), so I might be biased from my annoyance with them. webp also makes me nervous because there’s no spec, and Google’s development and testing process seems casual and unsystematic – bad bugs crop up randomly, they don’t release automated test suites with good test images. More broadly, their projects usually have a Mac monoculture, and they end up not testing enough on Windows machines, so I expect surprises when it comes to webp and Windows. The fact that their lossy conversion process and API are so poorly documented make me cautious about converting assets to webp, even if the JPEGs and TIFFs <em>should</em> still exist – I don’t like having assets in sketchy formats.</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> 
         <ul class="children"> 
          <li class="comment odd alt depth-2" id="li-comment-1603969"> 
           <div class="grid group comment-wrap" id="comment-1603969"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/1439e90e6361bfbcef96639fed4c6241?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Jeremy Wagner
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1603969"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-09-07T20:27:58+00:00">September 7, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>A healthy amount of skepticism is good, and I know this is a pro-WebP piece, but that comes from the success I’ve had in applying it. If a WebP image is significantly smaller than its JPEG or PNG equivalent, it will get a head start on painting well before the conventional formats load, which, in my experience, offsets any disadvantage in decoding. This is especially true on very slow connections like you’ll find in developing nations. Speaking of which, WebP can be an asset to internet users reliant on restricted data plans, so speed isn’t necessarily the only aspect worthy of our consideration.</p> 
              <p>I agree that Google <em>should</em> provide some official metrics on its performance, but on the other hand, the format is also out there for anyone to use. Anyone willing to experiment can draw their own conclusions, provided they have the knowledge and ability to rigorously test (which I freely admit can be a barrier for less experienced developers.) Where Windows is concerned, I haven’t run into any problems in regard to WebP. I develop my side projects on a Macbook Pro at home, and I use a Windows machine at work, so I have a good balance between the two environments on a daily basis.</p> 
              <p>On that note, libwebp is also open source: <a href="https://chromium.googlesource.com/webm/libwebp" rel="nofollow">https://chromium.googlesource.com/webm/libwebp</a> From what I can see, the encoder and decoder source is available to peruse. I don’t necessarily buy into the idea that they’re being nakedly evasive. I don’t write C or C++ for a living, so I can’t account for every nook and cranny of the source, but it’s not as if Google is offering WebP as though it’s Soylent Green. More probable (at least to me) is that they have a bevy of high-profile projects going on at any one time, and WebP is low on their list of priorities.</p> 
              <p>There is also a container specification for WebP available at <a href="https://developers.google.com/speed/webp/docs/riff_container" rel="nofollow">https://developers.google.com/speed/webp/docs/riff_container</a> that might interest you. Though if you’ve bugged Google sufficiently, I can’t imagine that they haven’t sent this to you, so maybe this spec isn’t to your satisfaction.</p> 
              <p>Hope this helps. Thanks for challenging my assertions. I think the back and forth provides for some good reading outside of the scope of the article. :)</p> 
              <p>-j</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
         </ul>
         <!-- .children --> </li>
        <!-- #comment-## --> 
        <li class="comment even thread-even depth-1" id="li-comment-1603968"> 
         <div class="grid group comment-wrap" id="comment-1603968"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/46a12c8cf24f9d7f8ad7a1ef3ee5a010?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Joe Duarte
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1603968"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-09-07T20:18:44+00:00">September 7, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>@Ferdy JPEGs can be losslessly compressed. The fact that JPEG is a lossy format doesn’t mean that any given JPEG can’t be losslessly compressed (beyond its prior lossy compression or creation). Beyond the metadata, the quant tables can be optimized, and that’s one of things MozJPEG does. It usually comes down to taking the existing encoding (which was lossy) and finding ways to optimize that encoding.</p> 
            <p>@Josh, the I/O-related lag might be the biggest issue with using webp, according to this data from a Smashing article: <a href="http://mattshull.com/webptests.pdf" rel="nofollow">http://mattshull.com/webptests.pdf</a></p> 
            <p>I was surprised to see the iPhone times deteriorate just from using webp for <em>other</em> browsers. Nothing should have changed for the iPhone, since it was still receiving JPEGs in tests C and D (because Safari doesn’t support webp). It might have been an htaccess-related lag. I think an important issue gets lost when people talk about webp and other improved compression formats. Deploying a new format not only changes the browser’s behavior – it changes the server’s behavior. It adds code, logic, and complexity to the server, and possibly adds lag time. It should be possible to eliminate most of that lag, but by default it looks like having Apache serve webp files to some browsers, and JPEGs to others, really slowed things down. This will take more digging and research.</p> 
            <p>As you mentioned, there’s a lot of room for JPEG optimization. It’s not clear to me that webp-equivalent size reductions can’t be achieved by using better JPEG tools like JPEG-Recompress and JPEGMin, both of which appear to be using the smallfry algorithm (see: <a href="https://github.com/danielgtaylor/jpeg-archive" rel="nofollow">https://github.com/danielgtaylor/jpeg-archive</a>)</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> </li>
        <!-- #comment-## --> 
        <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1604053"> 
         <div class="grid group comment-wrap" id="comment-1604053"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/aa29f413861548d005cc6959cc30d602?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Daniel David
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1604053"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-09-11T14:32:18+00:00">September 11, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>@Jeremy when I try to run the imagemin-webp plugin with node webp.js I get the following error:</p> 
            <p>C:\work\webp\webp.js:7<br> new imagemin().src(PNGImages).dest(outputFolder).use(webp({<br> ^</p> 
            <p>TypeError: (input, output, opts) =&gt; {<br> if (!Array.isArray(input)) {<br> return Promise.reject(new TypeError(‘Expected an arr……<br> } is not a constructor<br> at Object. (C:\work\webp\webp.js:7:1)<br> at Module._compile (module.js:409:26)<br> at Object.Module._extensions..js (module.js:416:10)<br> at Module.load (module.js:343:32)<br> at Function.Module._load (module.js:300:12)<br> at Function.Module.runMain (module.js:441:10)<br> at startup (node.js:139:18)<br> at node.js:974:3</p> 
            <p>Any idea what the problem is?</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> 
         <ul class="children"> 
          <li class="comment even depth-2" id="li-comment-1604221"> 
           <div class="grid group comment-wrap" id="comment-1604221"> 
            <div class="comment-avatar grid-1-5"> 
             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/1439e90e6361bfbcef96639fed4c6241?s=160&amp;d=retro&amp;r=pg"> 
            </div> 
            <div class="comment-body group grid-4-5"> 
             <div class="comment-author-wrap vcard"> 
              <div class="comment-author">
               Jeremy Wagner
              </div> 
              <div class="comment-time">
               <a href="https://css-tricks.com/using-webp-images/#comment-1604221"><span class="screen-reader">Permalink to comment</span>#</a> 
               <time datetime="2016-09-20T07:50:15+00:00">September 20, 2016</time>
              </div> 
             </div> 
             <div class="comment-content"> 
              <p>Dave, I’m sorry! I saw this, but got sidelined. If you haven’t figured this out yet, just send me an email to <a href="mailto:public@jeremywagner.me">public@jeremywagner.me</a>, or bug me on Twitter @malchata and send me your code. I’ll look it over. Seems to me like it should be something simple that’s being overlooked.</p> 
              <p>Thanks for reading, man. :)</p> 
              <div class="reply"> 
              </div>
              <!-- .reply --> 
             </div> 
            </div> 
           </div> </li>
          <!-- #comment-## --> 
         </ul>
         <!-- .children --> </li>
        <!-- #comment-## --> 
        <li class="comment odd alt thread-even depth-1" id="li-comment-1604222"> 
         <div class="grid group comment-wrap" id="comment-1604222"> 
          <div class="comment-avatar grid-1-5"> 
           <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" width="50" height="50" class="lazyload-gravatar" alt="User Avatar" data-src="https://secure.gravatar.com/avatar/5b8ab162584bbfcaa492b9c1a7c45c1e?s=160&amp;d=retro&amp;r=pg"> 
          </div> 
          <div class="comment-body group grid-4-5"> 
           <div class="comment-author-wrap vcard"> 
            <div class="comment-author">
             Alex
            </div> 
            <div class="comment-time">
             <a href="https://css-tricks.com/using-webp-images/#comment-1604222"><span class="screen-reader">Permalink to comment</span>#</a> 
             <time datetime="2016-09-20T07:59:58+00:00">September 20, 2016</time>
            </div> 
           </div> 
           <div class="comment-content"> 
            <p>Hi, Jeremy. Thank you for the article, it’s pretty good. I’m already using Webp images in my projects and I can see a trouble with using Webp as background. For example, I have <i>header.png</i> for <i>.no-js</i> and <i>.no-webp</i> and <i>header.webp</i> for <i>.webp</i> classes of HTML-tag. At first I thought that images downloading works exactly as described in your article, but then I checked page from mobile internet and noticed that background images downloads twice – a PNG version at first and Webp after. I looked into Network tab in my Developer Tools and saw that my suspicion confirmed – there were two downloaded background images. PNG starts to download as a background for <i>.no-js</i>, then <i>.webp</i> class is added to HTML-tag and Webp-image starts to download again. So, maybe there is any workaround / another way to use Webp as background from CSS?</p> 
            <div class="reply"> 
            </div>
            <!-- .reply --> 
           </div> 
          </div> 
         </div> </li>
        <!-- #comment-## --> 
       </ol> 
       <div class="comments-closed">
         This comment thread is closed. If you have important information to share, please 
        <a href="/contact/">contact us</a>. 
       </div> 
      </section> 
     </div> 
    </div> 
   </div> 
   <aside class="entry-unrelated sidebar sidebar-right"> 
    <div id="all-ads"></div> 
   </aside> 
  </div> 
  <footer class="site-footer footer-newsletter"> 
   <div class="footer-section-1"></div> 
   <div class="footer-section-2"> 
    <img src="https://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-16/images/get-the-newsletter.png" alt="Get the Newsletter!"> 
    <form action="//chriscoyier.us2.list-manage.com/subscribe/post?u=155f5a9ccc4e24c318130cace&amp;id=197f127a68" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate> 
     <p class="mc-field-group"> <label for="mce-EMAIL" class="screen-reader">Email Address</label> <input type="email" name="EMAIL" class="required email mailchimp-email-input" id="mce-EMAIL"> 
      <svg class="icon-email" width="20px" height="15px"> 
       <use xlink:href="#icon-email"></use> 
      </svg> <input type="submit" value="Subscribe" name="Subscribe" id="mc-embedded-subscribe" class="button subscribe-button"> </p> 
     <div id="mce-responses" class="clear"> 
      <div class="response" id="mce-error-response" style="display:none"></div> 
      <div class="response" id="mce-success-response" style="display:none"></div> 
     </div> 
     <div style="position: absolute; left: -9999px; top: -9999px">
      <input type="text" name="b_155f5a9ccc4e24c318130cace_197f127a68" value="">
     </div> 
    </form> 
   </div> 
   <div class="footer-section-3">
     Lots of great stuff that isn't published anywhere else! 
   </div> 
  </footer> 
  <footer class="site-footer footer-mediatemple"> 
   <div class="footer-section-1"></div> 
   <div class="footer-section-2"> 
    <a href="https://mediatemple.net/landing/csstricks/?utm_source=CSS-Tricks&amp;utm_medium=display&amp;utm_campaign=heaeder-box"><img class="mt-img" src="https://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-16/images/mediatemple-logo-white-superwide.svg" alt="Media Temple"></a> 
   </div> 
   <div class="footer-section-3"> 
    <a href="https://mediatemple.net/landing/csstricks/?utm_source=CSS-Tricks&amp;utm_medium=display&amp;utm_campaign=heaeder-box">CSS-Tricks web host since day one. Save 20% with code <strong>CSSTRICKS</strong>.</a> 
   </div> 
  </footer> 
  <footer class="site-footer footer-colophon"> 
   <div class="footer-section-1"> 
    <svg class="icon-footer-star" width="280px" height="280px"> 
     <use xlink:href="#icon-logo-star"></use> 
    </svg> 
   </div> 
   <div class="footer-section-2"> 
    <div> 
     <p>CSS-Tricks* is created, written by, and maintained by <a href="http://chriscoyier.net">Chris Coyier</a> and <a href="/about/">a team</a> of swell people. It is built on <a href="http://wordpress.org/">WordPress</a>, hosted by <a href="https://mediatemple.net/landing/csstricks/?utm_source=CSS-Tricks&amp;utm_medium=display&amp;utm_campaign=footer-link">Media Temple</a>, and the assets are served by <a href="http://tracking.maxcdn.com/c/13088/3982/378">MaxCDN</a>. It is made possible through <a href="/advertising/">sponsorships</a> from products and services we like.</p> 
     <p class="mega-big-time-warning"><small>*May or may not contain any actual "CSS" or "Tricks".</small></p> 
     <a class="twitter-follow-button" href="https://twitter.com/Real_CSS_Tricks"> Follow @Real_CSS_Tricks </a> 
    </div> 
    <nav> 
     <a href="/contact/">Contact</a> 
     <a href="/about/">About</a> 
     <a href="/archives/">Archives</a> 
     <a href="/advertising/">Advertise</a> 
     <a href="/jobs/">Jobs</a> 
     <a href="/license/">License</a> 
     <a href="/subscription-options/">Subscribe</a> 
     <a href="/feed/">RSS</a> 
     <a href="/guest-posting/">Guest Posting</a> 
    </nav> 
   </div> 
   <div class="footer-section-3"> 
    <div class="module module-jobs"> 
     <h4 class="h4">Front-End Jobs</h4> 
     <ul class="job-list"> 
      <li> <a href="https://codepen.io/url/job/zoBBQn"> <strong> ATCOM </strong> is hiring a Front End Web Developer </a> </li> 
      <li> <a href="https://codepen.io/url/job/rdNNwz"> <strong> Instrumental Inc. </strong> is hiring a Front End Engineer </a> </li> 
      <li> <a href="https://codepen.io/url/job/ngggbn"> <strong> Lodgify </strong> is hiring a Sr Frontend Developer with React </a> </li> 
     </ul> 
     <div class="button-wrap"> 
      <a href="/jobs/" class="button full-width-button">See More Jobs</a> 
      <a href="https://codepen.io/job/new/" class="button full-width-button">Post a Job</a> 
     </div> 
    </div> 
   </div> 
  </footer> 
  <svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" display="none">
   <symbol id="icon-anchor" viewbox="0 0 54.89 64">
    <title>icon-anchor</title>
    <path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="2" d="M26.96 13v50" />
    <path fill="none" stroke="#000" stroke-linejoin="bevel" stroke-width="2" d="M13.96 50l-10-3-3 10M39.96 50l10-3 4 10" />
    <path d="M49.71 47A24 24 0 0 1 27 63 24 24 0 0 1 4.21 47M17.96 17h18" fill="none" stroke="#000" stroke-linejoin="bevel" stroke-width="2" />
    <circle cx="26.96" cy="7" r="6" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="2" />
   </symbol>
   <symbol id="icon-close" viewbox="0 0 95.08 95.09">
    <title>icon-close</title>
    <path d="M58.31 47.47l34.58-34.58a7.63 7.63 0 0 0 0-10.69 7.63 7.63 0 0 0-10.69 0L47.62 36.78 13 2.19a7.63 7.63 0 0 0-10.69 0 7.63 7.63 0 0 0 0 10.69l34.6 34.6L2.33 82.07a7.29 7.29 0 0 0 0 10.69 7.63 7.63 0 0 0 10.69 0l34.6-34.6 34.6 34.6a7.27 7.27 0 0 0 10.68 0 7.63 7.63 0 0 0 0-10.69z" data-name="Layer 1" />
   </symbol>
   <symbol id="icon-email" viewbox="0 0 100 68.89">
    <title>icon-email</title>
    <path d="M36.25 38.44L47.74 49.1a3.33 3.33 0 0 0 4.51 0l11.5-10.66 24.69 23.78H11.56zM93.33 11v46.6L68.68 33.85zM6.67 11l24.65 22.85L6.67 57.64zm5.1-4.37h76.46L50 42.12zM4.44 0A4.51 4.51 0 0 0 0 4.44v60a4.51 4.51 0 0 0 4.44 4.44h91.12a4.51 4.51 0 0 0 4.44-4.44v-60A4.51 4.51 0 0 0 95.56 0z" data-name="Layer 1" />
   </symbol>
   <symbol id="icon-link" viewbox="0 0 100 58.84">
    <title>icon-link</title>
    <path d="M78.47 48H49.21a10.66 10.66 0 0 1-9-4.91h10.58A21.57 21.57 0 0 0 71.7 26.64h6.76a10.67 10.67 0 0 1 0 21.33zm-67.6-26.47a10.67 10.67 0 0 1 10.67-10.66H50.8A10.59 10.59 0 0 1 58.34 14a10.94 10.94 0 0 1 1.43 1.79H49.21a21.57 21.57 0 0 0-20.92 16.4h-6.76a10.67 10.67 0 0 1-10.66-10.66zm39.92 10.66H39.86a10.68 10.68 0 0 1 9.35-5.54h10.93a10.67 10.67 0 0 1-9.35 5.54zM100 37.31a21.53 21.53 0 0 0-21.53-21.53h-6.92A21.53 21.53 0 0 0 50.8 0H21.54a21.53 21.53 0 0 0 0 43.06h6.83v-.31A21.41 21.41 0 0 0 34 52.53a21.4 21.4 0 0 0 15.2 6.31h29.26A21.56 21.56 0 0 0 100 37.31z" />
   </symbol>
   <symbol id="icon-logo-star" viewbox="0 0 362.62 388.52">
    <title>icon-logo-star</title>
    <path d="M156.58 239l-88.3 64.75c-10.59 7.06-18.84 11.77-29.43 11.77-21.19 0-38.85-18.84-38.85-40 0-17.69 14.13-30.64 27.08-36.52l103.6-44.74-103.6-45.92C13 142.46 0 129.51 0 111.85 0 90.66 18.84 73 40 73c10.6 0 17.66 3.53 28.25 11.77l88.3 64.75-11.74-104.78C141.28 20 157.76 0 181.31 0s40 18.84 36.5 43.56L206 149.52l88.3-64.75C304.93 76.53 313.17 73 323.77 73a39.2 39.2 0 0 1 38.85 38.85c0 18.84-12.95 30.61-27.08 36.5l-103.61 45.91L335.54 239c14.13 5.88 27.08 18.83 27.08 37.67 0 21.19-18.84 38.85-40 38.85-9.42 0-17.66-4.71-28.26-11.77L206 239l11.77 104.78c3.53 24.72-12.95 44.74-36.5 44.74s-40-18.84-36.5-43.56z" />
   </symbol>
   <symbol id="icon-menu" viewbox="0 0 100 68.42">
    <title>icon-menu</title>
    <path d="M94.73 10.53H5.27c-7 0-7-10.53 0-10.53h89.46c6.88.14 6.88 10.38 0 10.53zm0 18.42H5.27c-7 0-7 10.53 0 10.53h89.46c6.86-.17 6.86-10.38 0-10.53zm0 28.94H5.27c-7 0-7 10.53 0 10.53h89.46c7.03 0 7.03-10.53 0-10.53z" data-name="Layer 1" />
   </symbol>
   <symbol id="icon-nav-almanac" viewbox="0 0 64 64">
    <path fill="none" d="M7 1h46v62H7z" />
    <path fill="none" vector-effect="non-scaling-stroke" d="M15 63V2M20 15h28M20 21h28" />
   </symbol>
   <symbol id="icon-nav-forums" viewbox="0 0 64 64">
    <path d="M10 15h44v2H10zM10 25h44v2H10zM10 35h44v2H10z" />
    <path d="M17 61.174L32.37 48H64V4H0v44h17v13.174zM2 46V6h60v40H31.63L19 56.826V46H2z" />
   </symbol>
   <symbol id="icon-nav-gallery" viewbox="0 0 64 64">
    <path d="M0 54h64V10H0v44zm2-2v-4.544l21.952-19.09 12.156 12.156 6.051-8.068L62 49.459V52H2zm60-40v34.826l-20.16-17.28-5.949 7.932-11.843-11.844L2 44.805V12h60z" />
    <path d="M51 28c3.309 0 6-2.691 6-6s-2.691-6-6-6-6 2.691-6 6 2.691 6 6 6zm0-10c2.206 0 4 1.794 4 4s-1.794 4-4 4-4-1.794-4-4 1.794-4 4-4z" />
   </symbol>
   <symbol id="icon-nav-guide" viewbox="0 0 64 56.9">
    <title>icon-nav-guide</title>
    <path d="M1 55.45l21-8 20 8 21-8v-46l-21 8-20-8-21 8v46zM22 1.45v46M42 9.45v46" />
   </symbol>
   <symbol id="icon-nav-home" viewbox="0 0 64 64">
    <path d="M32 3L2 33h9v30h12V47h16v16h12V33h11z" />
   </symbol>
   <symbol id="icon-nav-jobs" viewbox="0 0 64 64">
    <path d="M41 37.586L23.414 20l12-12-5.305-5.302-.688.486c-.025.018-2.537 1.769-5.671 1.769-2.244 0-4.277-.896-6.043-2.66L17 1.586-.414 19 12 31.414l10-10L39.586 39l-3 3L57 62.414 64.414 55 44 34.586l-3 3zM2.414 19L17.026 4.388c1.983 1.703 4.241 2.565 6.724 2.565 2.722 0 4.992-1.057 6.103-1.687L32.586 8 12 28.586 2.414 19zM57 59.586L39.414 42 44 37.414 61.586 55 57 59.586z" />
   </symbol>
   <symbol id="icon-nav-newsletter" viewbox="0 0 64 64">
    <path d="M64 12H0v39h64V12zm-4.395 2L32 31.81 4.395 14h55.21zM2 49V14.835L32 34.19l30-19.355V49H2z" />
   </symbol>
   <symbol id="icon-nav-shop" viewbox="0 0 64 64">
    <path d="M44 18h10v45H10V18h10z" />
    <path d="M22 24V11c0-5.523 4.477-10 10-10s10 4.477 10 10v13" />
   </symbol>
   <symbol id="icon-nav-snippets" viewbox="0 0 64 64">
    <path d="M0 64h64.414L0-.414V64zm2-9h6v-2H2v-6h4v-2H2v-6h6v-2H2v-6h4v-2H2v-6h6v-2H2V4.414L59.586 62H2v-7z" />
    <path d="M13 27.586V55h27.414L13 27.586zm2 4.828L35.586 53H15V32.414zM64.375 46.375l-2.472-9.886L25-.414 17.586 7l36.903 36.903 9.886 2.472zm-2.75-2.75l-6.114-1.528L26.414 13 31 8.414l29.097 29.097 1.528 6.114zM25 2.414L29.586 7 25 11.586 20.414 7 25 2.414z" />
   </symbol>
   <symbol id="icon-nav-video" viewbox="0 0 64 64">
    <path d="M46 30l17-10v32L46 42v10H1V20h45zM6 28h4M14 28h4" />
    <path d="M7 36h18v10H7zM6 12h26l8 8" />
   </symbol>
   <symbol id="icon-search" viewbox="0 0 100 100">
    <title>icon-search</title>
    <path d="M80.65 66.78a33.55 33.55 0 0 1-47.44-47.44 33.55 33.55 0 1 1 47.44 47.44zm6.73-54.16a43.06 43.06 0 0 0-65.32 55.71L2 88.39A6.8 6.8 0 0 0 11.61 98l20.06-20.06a43.06 43.06 0 0 0 55.71-65.32z" />
   </symbol>
   <symbol id="icon-star" viewbox="0 0 100 95.52">
    <title>icon-star</title>
    <path d="M64.19 28.77a5.17 5.17 0 0 0 3.9 2.83s29.27-3 31.74 4.61-23 22.39-23 22.39a5.17 5.17 0 0 0-1.49 4.58s11.91 26.9 5.42 31.61S52.4 79.87 52.4 79.87a5.21 5.21 0 0 0-2.41-.6 5.14 5.14 0 0 0-2.41.6S25.68 99.5 19.2 94.79s5.42-31.61 5.42-31.61a5.18 5.18 0 0 0-1.49-4.58S-2.31 43.83.17 36.21s31.74-4.61 31.74-4.61a5.19 5.19 0 0 0 3.9-2.83S42 0 50 0s14.19 28.77 14.19 28.77z" data-name="Layer 1" />
   </symbol>
   <symbol id="icon-tag" viewbox="0 0 100 99.98">
    <title>icon-tag</title>
    <path d="M42 42a10.07 10.07 0 1 1 0-14.24A10 10 0 0 1 42 42zm56 6.5l-43.74-44a7.19 7.19 0 0 0-5-2.25L8 0a7.55 7.55 0 0 0-8 7v1l2.5 41a7.11 7.11 0 0 0 2.25 4.75l43.49 44a7.2 7.2 0 0 0 5.24 2.25 6.81 6.81 0 0 0 5.25-2.25L97.72 59A7.47 7.47 0 0 0 98 48.5z" />
   </symbol>
  </svg> 
  <script>var pollsL10n = {"ajax_url":"https:\/\/css-tricks.com\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"0","show_fading":"1"};</script>
  <script>var markdownify = {"ajax_url":"\/wp-admin\/admin-ajax.php","nonce":"9b7a3d0a1a"};</script>
  <script type="text/javascript" src="//css-tricks.com/wp-content/plugins/woocommerce/assets/js/jquery-blockui/jquery.blockUI.min.js?ver=2.70"></script> 
  <script type="text/javascript" src="//css-tricks.com/wp-content/plugins/woocommerce/assets/js/js-cookie/js.cookie.min.js?ver=2.1.4"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var woocommerce_params = {"ajax_url":"\/wp-admin\/admin-ajax.php","wc_ajax_url":"\/using-webp-images\/?wc-ajax=%%endpoint%%"};
/* ]]> */
</script> 
  <script type="text/javascript" src="//css-tricks.com/wp-content/plugins/woocommerce/assets/js/frontend/woocommerce.min.js?ver=3.1.2"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var wc_cart_fragments_params = {"ajax_url":"\/wp-admin\/admin-ajax.php","wc_ajax_url":"\/using-webp-images\/?wc-ajax=%%endpoint%%","fragment_name":"wc_fragments_245f567ae953de9c427d52544d56608e"};
/* ]]> */
</script> 
  <script type="text/javascript" src="//css-tricks.com/wp-content/plugins/woocommerce/assets/js/frontend/cart-fragments.min.js?ver=3.1.2"></script> 
  <script type="text/javascript" src="https://cdn.css-tricks.com/wp-includes/js/wp-embed.min.js?ver=4.8.2"></script> 
  <script type="text/javascript" src="https://cdn.css-tricks.com/wp-content/uploads/minqueue-cache/minqueue-19094438-0e0b1276.js"></script> 
  <script src="https://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-16/js/min/global-min.js?v=2.9"></script> 
  <script async src="//assets.codepen.io/assets/embed/ei.js"></script> 
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-68528-29', 'auto');
  ga('send', 'pageview');
</script> 
  <script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));</script>   
 </body>
</html>