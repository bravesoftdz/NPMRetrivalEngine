<!doctype html>
<html lang="ja" data-admin-domain="//blog.hatena.ne.jp" data-author="nagixx" data-avail-langs="ja en" data-blog="nagix.hatenablog.com" data-blog-host="nagix.hatenablog.com" data-blog-is-public="1" data-blog-name="nagix" data-blog-uri="http://nagix.hatenablog.com/" data-blog-uuid="12921228815714338053" data-blogs-uri-base="http://nagix.hatenablog.com" data-brand="hatenablog" data-data-layer="{&quot;hatenablog&quot;:{&quot;admin&quot;:{},&quot;pro&quot;:&quot;free&quot;,&quot;page_id&quot;:&quot;entry&quot;,&quot;blog&quot;:{&quot;enable_ads&quot;:&quot;true&quot;,&quot;name&quot;:&quot;nagix&quot;,&quot;is_public&quot;:&quot;true&quot;,&quot;uri&quot;:&quot;http://nagix.hatenablog.com/&quot;,&quot;force_pc_view&quot;:&quot;false&quot;,&quot;entry_show_footer_related_entries&quot;:&quot;true&quot;,&quot;is_responsive_view&quot;:&quot;false&quot;,&quot;enable_keyword_link&quot;:&quot;true&quot;,&quot;owner_name&quot;:&quot;nagixx&quot;},&quot;brand&quot;:&quot;hatenablog&quot;,&quot;analytics&quot;:{&quot;property_id&quot;:&quot;&quot;,&quot;non_sampling_property_id&quot;:&quot;&quot;,&quot;brand_property_id&quot;:&quot;&quot;,&quot;separated_property_id&quot;:&quot;UA-29716941-17&quot;},&quot;brand_tracking_category&quot;:&quot;hatenablog&quot;,&quot;permalink_entry&quot;:{&quot;hour&quot;:&quot;0&quot;,&quot;author_name&quot;:&quot;nagixx&quot;,&quot;date&quot;:&quot;2017-07-11&quot;,&quot;categories&quot;:&quot;Chart.js&quot;,&quot;title&quot;:&quot;Drawing a real-time Bitcoin chart using Chart.js&quot;,&quot;uri&quot;:&quot;http://nagix.hatenablog.com/entry/2017/07/11/004952&quot;},&quot;router_type&quot;:&quot;blogs&quot;}}" data-device="pc" data-dont-recommend-pro="false" data-globalheader-color="b" data-globalheader-type="pc" data-has-touch-view="1" data-page="entry" data-plus-available="" data-pro="false" data-router-type="blogs" data-static-domain="https://cdn.blog.st-hatena.com" data-version="81e3c14c65644aa31088e13e30478aea" itemscope itemtype="http://schema.org/Article" data-initial-state="{}">
 <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#"> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=7; IE=9; IE=10; IE=11"> 
  <title>Drawing a real-time Bitcoin chart using Chart.js - nagix</title> 
  <link rel="canonical" href="http://nagix.hatenablog.com/entry/2017/07/11/004952"> 
  <meta itemprop="name" content="Drawing a real-time Bitcoin chart using Chart.js - nagix"> 
  <meta itemprop="image" content="https://cdn-ak.f.st-hatena.com/images/fotolife/n/nagixx/20170710/20170710085252.png"> 
  <meta property="og:title" content="Drawing a real-time Bitcoin chart using Chart.js - nagix"> 
  <meta property="og:type" content="article"> 
  <meta property="og:url" content="http://nagix.hatenablog.com/entry/2017/07/11/004952"> 
  <meta property="og:image" content="https://cdn-ak.f.st-hatena.com/images/fotolife/n/nagixx/20170710/20170710085252.png"> 
  <meta property="og:description" content="(*??????????) Chart.js is a popular JavaScript chart library that enables to create dynamic, beautiful charts easily. I recently made chartjs-plugin-streaming, a Chart.js plugin for live streaming data with the auto-scroll feature. It is suitable for IoT-related use cases such as sensor data monitor…"> 
  <meta property="og:site_name" content="nagix"> 
  <meta property="article:published_time" content="1499701792"> 
  <meta property="article:tag" content="Chart.js"> 
  <meta name="twitter:card" content="summary_large_image"> 
  <meta name="twitter:image" content="https://cdn-ak.f.st-hatena.com/images/fotolife/n/nagixx/20170710/20170710085252.png"> 
  <meta name="twitter:title" content="Drawing a real-time Bitcoin chart using Chart.js - nagix"> 
  <meta name="twitter:description" content="(*??????????) Chart.js is a popular JavaScript chart library that enables to create dynamic, beautiful charts easily. I recently made chartjs-plugin-streaming, …"> 
  <meta name="twitter:app:name:iphone" content="?????????"> 
  <meta name="twitter:app:id:iphone" content="583299321"> 
  <meta name="twitter:app:url:iphone" content="hatenablog:///open?uri=http%3A%2F%2Fnagix.hatenablog.com%2Fentry%2F2017%2F07%2F11%2F004952"> 
  <meta name="twitter:site" content="@nagix"> 
  <meta name="description" content="(*??????????) Chart.js is a popular JavaScript chart library that enables to create dynamic, beautiful charts easily. I recently made chartjs-plugin-streaming, …"> 
  <script id="embed-gtm-data-layer-loader" data-data-layer-page-specific="{&quot;hatenablog&quot;:{&quot;blogs_permalink&quot;:{&quot;has_related_entries_with_elasticsearch&quot;:&quot;true&quot;}}}">
(function() {
  function loadDataLayer(elem, attrName) {
    if (!elem) { return {}; }
    var json = elem.getAttribute(attrName);
    if (!json) { return {}; }
    return JSON.parse(json);
  }

  var globalVariables = loadDataLayer(
    document.documentElement,
    'data-data-layer'
  );
  var pageSpecificVariables = loadDataLayer(
    document.getElementById('embed-gtm-data-layer-loader'),
    'data-data-layer-page-specific'
  );

  var variables = [globalVariables, pageSpecificVariables];

  if (!window.dataLayer) {
    window.dataLayer = [];
  }

  for (var i = 0; i < variables.length; i++) {
    window.dataLayer.push(variables[i]);
  }
})();
</script> 
  <!-- Google Tag Manager --> 
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P4CXTW');</script> 
  <!-- End Google Tag Manager --> 
  <link rel="shortcut icon" href="https://cdn.blog.st-hatena.com/images/favicon.ico"> 
  <link rel="icon" sizes="192x192" href="https://cdn.blog.st-hatena.com/images/common/meta-icon-global.png"> 
  <link rel="alternate" type="application/atom+xml" title="Atom" href="http://nagix.hatenablog.com/feed"> 
  <link rel="alternate" type="application/rss+xml" title="RSS2.0" href="http://nagix.hatenablog.com/rss"> 
  <link rel="alternate" type="application/json+oembed" href="http://hatenablog.com/oembed?url=http%3A%2F%2Fnagix.hatenablog.com%2Fentry%2F2017%2F07%2F11%2F004952&amp;format=json" title="oEmbed Profile of Drawing a real-time Bitcoin chart using Chart.js"> 
  <link rel="alternate" type="text/xml+oembed" href="http://hatenablog.com/oembed?url=http%3A%2F%2Fnagix.hatenablog.com%2Fentry%2F2017%2F07%2F11%2F004952&amp;format=xml" title="oEmbed Profile of Drawing a real-time Bitcoin chart using Chart.js"> 
  <link rel="author" href="http://www.hatena.ne.jp/nagixx/"> 
  <link rel="stylesheet" type="text/css" href="https://cdn.blog.st-hatena.com/css/blog.css?version=59dcf7fb0572aeb7ad72f678b9fded501d9d359f&amp;env=production"> 
  <link rel="stylesheet" type="text/css" href="//blog.hatena.ne.jp/-/blog_style/12921228815714338053/a2c344ecce0a9cab9c004c35b7371d292367066f"> 
  <script> </script> 
  <style>
  div#google_afc_user,
  div.google-afc-user-container,
  div.google_afc_image,
  div.google_afc_blocklink {
      display: block !important;
  }
</style> 
 </head> 
 <body class="page-entry category-Chart.js"> 
  <div id="header-container"> 
   <div id="sp-suggest" style="display: none;">
    <a id="sp-suggest-link" href="#">??????????????</a>
   </div> 
  </div> 
  <div id="globalheader-container" data-brand="hatenablog"> 
   <iframe id="globalheader" height="37" frameborder="0" allowtransparency="true"></iframe> 
  </div> 
  <div id="container"> 
   <div id="container-inner"> 
    <header id="blog-title" data-brand="hatenablog"> 
     <div id="blog-title-inner"> 
      <div id="blog-title-content"> 
       <h1 id="title"><a href="http://nagix.hatenablog.com/">nagix</a></h1> 
      </div> 
     </div> 
    </header> 
    <div id="content" class="hfeed"> 
     <div id="content-inner"> 
      <div id="wrapper"> 
       <div id="main"> 
        <div id="main-inner"> 
         <!-- google_ad_section_start --> 
         <!-- rakuten_ad_target_begin --> 
         <article class="entry hentry js-entry-article date-first autopagerize_page_element chars-12400 words-1800 mode-html entry-odd" id="entry-8599973812278252134" data-keyword-campaign="" data-uuid="8599973812278252134" data-publication-type="entry"> 
          <div class="entry-inner"> 
           <header class="entry-header"> 
            <div class="date entry-date first"> 
             <a href="http://nagix.hatenablog.com/archive/2017/07/11" rel="nofollow"> <time pubdate datetime="2017-07-10T15:49:52Z" title="2017-07-10T15:49:52Z"> <span class="date-year">2017</span><span class="hyphen">-</span><span class="date-month">07</span><span class="hyphen">-</span><span class="date-day">11</span> </time> </a> 
            </div> 
            <h1 class="entry-title"> <a href="http://nagix.hatenablog.com/entry/2017/07/11/004952" class="entry-title-link bookmark">Drawing a real-time Bitcoin chart using Chart.js</a> </h1> 
            <div class="entry-categories categories"> 
             <a href="http://nagix.hatenablog.com/archive/category/Chart.js" class="entry-category-link category-Chart.js">Chart.js</a> 
            </div> 
           </header> 
           <div class="entry-content"> 
            <p> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"></script> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.js"></script> <script type="text/javascript" src="https://github.com/nagix/chartjs-plugin-streaming/releases/download/v1.1.0/chartjs-plugin-streaming.js"></script> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pusher/4.1.0/pusher.js"></script> </p> 
            <p>(*???????<a href="http://nagix.hatenablog.com/entry/2017/07/10/081553">???</a>)</p> 
            <p><a href="http://www.chartjs.org">Chart.js</a> is a popular <a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a> chart library that enables to create dynamic, beautiful charts easily. I recently made <a href="https://nagix.github.io/chartjs-plugin-streaming/">chartjs-plugin-streaming</a>, a Chart.js plugin for live streaming data with the auto-scroll feature. It is suitable for IoT-related use cases such as sensor data monitoring, and when I was looking for some real examples of streaming data, I noticed that it is also good for displaying real-time digital currency trading data that the digital currency exchanges provide. So, I just tried that out.</p> 
            <p>It is becoming more common for the exchanges to deliver trading data efficiently using WebSocket. Some of them require authentication, but in this article, let's create trading charts for the exchanges that provide public <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> without authentication.</p> 
            <h3>First example: Bitfinex WebSocket <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a></h3> 
            <p>First, we need to include the following required libraries.</p> 
            <ul> 
             <li><a href="https://momentjs.com">Moment.js</a>: Date &amp; time library</li> 
             <li><a href="http://www.chartjs.org">Chart.js</a>: Chart library</li> 
             <li><a href="https://nagix.github.io/chartjs-plugin-streaming/">chartjs-plugin-streaming</a>: Chart.js plugin for streaming data</li> 
             <li><a href="https://pusher.com">Pusher</a>: Pub/Sub messaging library</li> 
            </ul> 
            <p>Put the following tags between &lt;head&gt; and &lt;/head&gt;.</p> 
            <pre data-unlink="">&lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="https://github.com/nagix/chartjs-plugin-streaming/releases/download/v1.1.0/chartjs-plugin-streaming.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pusher/4.1.0/pusher.js"&gt;&lt;/script&gt;</pre> 
            <p>Next, let's add a <a class="keyword" href="http://d.hatena.ne.jp/keyword/canvas">canvas</a> to the page. Include an id so that you can identify the chart later.</p> 
            <pre>&lt;<a class="keyword" href="http://d.hatena.ne.jp/keyword/canvas">canvas</a> id="Bitfinex"&gt;&lt;/<a class="keyword" href="http://d.hatena.ne.jp/keyword/canvas">canvas</a>&gt;</pre> 
            <p>Then, prepare an object for buffering data, which is <code>buf</code>. Set the array that has two empty array elements to the&nbsp;property with the same name as <a class="keyword" href="http://d.hatena.ne.jp/keyword/canvas">canvas</a>'s id. The first array is for 'buy' prices and the second is for 'sell' prices.</p> 
            <pre>&lt;script type="text/<a class="keyword" href="http://d.hatena.ne.jp/keyword/javascript">javascript</a>"&gt;
var buf = {};
buf['Bitfinex'] = [[], []];
&lt;/script&gt;</pre> 
            <p>Now, let's <a class="keyword" href="http://d.hatena.ne.jp/keyword/access">access</a> the real data. We are going to collect real-time trading data using WebSocket from Bitfinex in Hong Kong, which is one of the largest exchanges by BTC/USD trading volume. You can subscribe trading data of the <a class="keyword" href="http://d.hatena.ne.jp/keyword/Bitcoin">Bitcoin</a>/US dollar pair by sending a request like below to the <a class="keyword" href="http://d.hatena.ne.jp/keyword/URI">URI</a> <code>wss://api.bitfinex.com/ws</code> provided by Bitfinex. (See <a href="https://docs.bitfinex.com/v1/docs/ws-general">Bitfinex WebSocket API</a> for details)</p> 
            <pre>{
    "event": "subscribe", // subscribe request
    "channel": "trades",  // trade data
    "pair": "BTCUSD"      // <a class="keyword" href="http://d.hatena.ne.jp/keyword/Bitcoin">Bitcoin</a>/US dollar
}</pre> 
            <p>The data you will receive through the callback function is like this.</p> 
            <pre>[
    5,             // 0: channel ID
    'te',          // 1: message type
    '1234-BTCUSD', // 2: sequence ID
    1443659698,    // 3: timestamp
    236.42,        // 4: price
    0.49064538     // 5: amount bought (positive) or sold (negative)
]</pre> 
            <p>As we only need the trade type, the timestamp (X-axis) and the price (Y-axis), the filtered data is stored into the buffer on every message receipt using the following code.</p> 
            <pre>var ws = new WebSocket('<a class="keyword" href="http://d.hatena.ne.jp/keyword/wss">wss</a>://<a class="keyword" href="http://d.hatena.ne.jp/keyword/api">api</a>.bitfinex.com/ws/');
ws.onopen = function() {
    ws.send(<a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>.stringify({      // send subscribe request
        "event": "subscribe",
        "channel": "trades",
        "pair": "BTCUSD"
    }));
};
ws.onmessage = function(msg) {     // callback on message receipt
    var response = <a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>.parse(msg.data);
    if (response[1] === 'te') {    // Only 'te' message type is needed
        buf['Bitfinex'][response[5] &gt; 0 ? 0 : 1].push({
            x: response[3] * 1000, // timestamp in milliseconds
            y: response[4]         // price in US dollar
        });
    }
}</pre> 
            <p>Finally, we need to configure the chart. Regarding the details of the chart customization, please refer to the Chart.js <a href="http://www.chartjs.org/docs/">official documentation</a>. The key points here are that the <code>'realtime'</code> scale that the chartjs-plugin-streaming plugin provides are set to the X axis, and that the entire data stored in the buffer is added to the chart in the <code>onRefresh</code> callback function that is called at a regular interval (every second by default).</p> 
            <pre>var id = 'Bitfinex';
var ctx = document.getElementById(id).getContext('2d');
var chart = new Chart(ctx, {
    type: 'line',
    data: {
        datasets: [{
            data: [],
            label: 'Buy',                     // 'buy' price data
            borderColor: 'rgb(255, 99, 132)', // line color
            backgroundColor: 'rgba(255, 99, 132, 0.5)', // fill color
            fill: false,                      // no fill
            lineTension: 0                    // straight line
        }, {
            data: [],
            label: 'Sell',                    // 'sell' price data
            borderColor: 'rgb(54, 162, 235)', // line color
            backgroundColor: 'rgba(54, 162, 235, 0.5)', // fill color
            fill: false,                      // no fill
            lineTension: 0                    // straight line
        }]
    },
    options: {
        title: {
            text: 'BTC/USD (' + id + ')', // chart title
            display: true
        },
        scales: {
            xAxes: [{
                type: 'realtime' // auto-scroll on X axis
            }]
        },
        plugins: {
            streaming: {
                duration: 300000, // display data for the latest 300000ms (5 mins)
                onRefresh: function(chart) { // callback on chart update interval
                    Array.prototype.push.apply(
                        chart.data.datasets[0].data, buf[id][0]
                    );            // add 'buy' price data to chart
                    Array.prototype.push.apply(
                        chart.data.datasets[1].data, buf[id][1]
                    );            // add 'sell' price data to chart
                    buf[id] = [[], []]; // clear buffer
                }
            }
        }
    }
});</pre> 
            <p>Below is the completed chart. You can see that the chart is scrolling from the right to the left slowly.</p> 
            <p>
             <canvas id="Bitfinex">
              Bitfinex
             </canvas></p> 
            <h3>Bitstamp WebSocket <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a></h3> 
            <p>The next example is Bitstamp, an exchange in UK, which is the central trading hub in Europe. Bitstamp uses <a href="https://pusher.com">Pusher</a>, a Pub/Sub messaging library for real time WebSocket streaming. Therefore, the data subscription code is much simpler. (See <a href="https://www.bitstamp.net/websocket/">Bitstamp WebSocket API</a> for details)</p> 
            <p>The data you will receive through the callback function is like this.</p> 
            <pre>{
    id: 17044523,            // trade unique ID
    amount: 1,               // amount
    price: 2496.21,          // price
    type: 1,                 // trade type (0: buy, 1: sell?
    timestamp: "1499472674", // timestamp
    buy_order_id: 47485421,  //	buy order ID
    sell_order_id: 47485426  //	sell order ID
}</pre> 
            <p>Below is the code that receives data. It also takes only the trade type, the timestamp and the price.</p> 
            <pre>buf['Bitstamp'] = [[], []]; // prepare buffer
var pusher = new Pusher('de504dc5763aeef9ff52'); // Pusher key for Bitstamp
var channel = pusher.subscribe('live_trades'); // subscribe live trade data
channel.bind('trade', function (data) { // callback on message receipt
    buf['Bitstamp'][data.type].push({
        x: data.timestamp * 1000, // timestamp in milliseconds
        y: data.price             // price in US dollar
    });
});</pre> 
            <p>The configuration of the chart is the same as above except for the id. Below is the completed chart.</p> 
            <p>
             <canvas id="Bitstamp">
              Bitstamp
             </canvas></p> 
            <h3>BTC-E WebSocket <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a></h3> 
            <p>BTC-E is also a popular exchage located in Bulgaria. It uses Pusher for streaming as well. (See <a href="https://btc-e.com/pushAPI/docs">BTC-E WebSocket API</a> for details)</p> 
            <p>Below is the data you will receive.</p> 
            <pre>[
    [
        "buy",       // 0: trade type
        "2476.999",  // 1: price
        "0.08863539" // 2: amount
    ]
]</pre> 
            <p>As timestamps are not included in case of BTC-E, set the current time using <code>Date.now()</code>.</p> 
            <pre>buf['BTC-E'] = [[], []]; // prepare buffer
var pusher = new Pusher('c354d4d129ee0faa5c92'); // Pusher key for BTC-E
var channel = pusher.subscribe('btc_usd.trades'); // subscribe BTC/USD trades
channel.bind('trades', function (dataset) { // callback on message receipt
    dataset.forEach(function(data) {
        buf['BTC-E'][data[0] === 'buy' ? 0 : 1].push({
            x: Date.now(), // timestamp in milliseconds
            y: data[1]     // price in US dollar
        });
    });
});</pre> 
            <p>
             <canvas id="BTC-E">
              BTC-E
             </canvas></p> 
            <h3>BitMEX WebSocket <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a></h3> 
            <p>BitMEX is an exchange in Hong Kong, which is famous for high leverage trading. It provides a normal WebSocket <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>. Below are the request and the message to be received. (See <a href="https://www.bitmex.com/app/wsAPI">BitMEX WebSocket API</a> for details)</p> 
            <pre>{
    "op": "subscribe", // subscribe request
    "args": [
        "trade:XBTUSD" // <a class="keyword" href="http://d.hatena.ne.jp/keyword/Bitcoin">Bitcoin</a>/US dollar
    ]
}</pre> 
            <pre>{
    table: "trade",
    action: "insert",
    data: [
        {
            timestamp: "2017-07-09T01:39:30.866Z", // timestamp
            symbol: "XBTUSD",         // currency pair symbol
            side: "Buy",              // trade type
            size: 34,                 // amount
            price: 2548.9,            // price
            tickDirection: "ZeroPlusTick", // tick direction
            trdMatchID: "34d6de97-5d54-3431-e505-ffc3bc8c58ef",
            grossValue: 2039284,      // gross value 
            homeNotional: 0.02039284, // notional in <a class="keyword" href="http://d.hatena.ne.jp/keyword/Bitcoin">Bitcoin</a>
            foreignNotional: 52       // notional in US dollar
        }
    ]
}</pre> 
            <p>The code and chart are as follows.</p> 
            <pre>buf['BitMEX'] = [[], []]; // prepare buffer
var ws = new WebSocket('<a class="keyword" href="http://d.hatena.ne.jp/keyword/wss">wss</a>://www.bitmex.com/realtime');
ws.onopen = function() {
    ws.send(<a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>.stringify(    // send subscribe request
      ?"op": "subscribe",
      ?"args": [
            "trade:XBTUSD"
        ]
    }));
};
ws.onmessage = function(msg) { // callback on message receipt
    var response = <a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>.parse(msg.data);
    response.data.forEach(function(data) {
        buf['BitMEX'][data.side === 'Buy' ? 0 : 1].push({
            x: data.timestamp, // timestamp
            y: data.price      // price in US dollar
        });
    });
}</pre> 
            <p>
             <canvas id="BitMEX">
              BitMEX
             </canvas></p> 
            <h3>CoinCheck WebSocket <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a></h3> 
            <p>The last one is Japanese exchange, CoinCheck. Only BTC/Japanese-yen rates are delivered here, so let's display them. Below are the request and the message to be received. (See <a href="https://coincheck.com/documents/exchange/api#websocket">CoinCheck WebSocket API</a> for details?</p> 
            <pre>{
    "type": "subscribe",        // subscribe request
    "channel": "btc_jpy-trades" // <a class="keyword" href="http://d.hatena.ne.jp/keyword/Bitcoin">Bitcoin</a>/Japanese yen
}</pre> 
            <pre>[
    9856377,    // trade ID
    "btc_jpy",  // currency pair
    "289544.0", // price
    "0.0367",   // amount
    "sell"      // trade type
]</pre> 
            <p>The code and chart are as follows.</p> 
            <pre>buf['CoinCheck'] = [[], []];
var ws = new WebSocket('<a class="keyword" href="http://d.hatena.ne.jp/keyword/wss">wss</a>://ws-<a class="keyword" href="http://d.hatena.ne.jp/keyword/api">api</a>.coincheck.com/');
ws.onopen = function() {
    ws.send(<a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>.stringify({        // send subscribe request
        "type": "subscribe",
        "channel": "btc_jpy-trades"
    }));
};
ws.onmessage = function(msg) { // callback on message receipt
    var response = <a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>.parse(msg.data);
    buf['CoinCheck'][response[4] === 'buy' ? 0 : 1].push({
        x: Date.now(), // timestamp in milliseconds
        y: response[2] // price in Japanese yen
    });
}</pre> 
            <p>
             <canvas id="CoinCheck">
              CoinCheck WebSocket 
              <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>
             </canvas></p> 
            <p>There are many other digital currency exchanges that provide <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> to deliver real-time trading data. The <a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a> and data format are slightly different each other, but you can draw a chart with minimum modification. I <a class="keyword" href="http://d.hatena.ne.jp/keyword/hope">hope</a> this article helps you try out for yourself.</p> 
            <script type="text/javascript">// <![CDATA[
var buf = {};

buf['Bitfinex'] = [[], []];
var wsBitfinex = new WebSocket('wss://api.bitfinex.com/ws/');
wsBitfinex.onopen = function() {
    wsBitfinex.send(JSON.stringify({"event":"subscribe", "channel":"trades", "pair":"BTCUSD"}));
};
wsBitfinex.onmessage = function(msg) {
    var response = JSON.parse(msg.data);
    if (response[1] === 'te') {
        buf['Bitfinex'][response[5] > 0 ? 0 : 1].push({
            x: response[3] * 1000,
            y: response[4]
        });
    }
}

buf['Bitstamp'] = [[], []];
var pusher = new Pusher('de504dc5763aeef9ff52');
var channel = pusher.subscribe('live_trades');
channel.bind('trade', function (data) {
    buf['Bitstamp'][data.type].push({
        x: data.timestamp * 1000,
        y: data.price
    });
});

buf['BTC-E'] = [[], []];
var pusher = new Pusher('c354d4d129ee0faa5c92');
var channel = pusher.subscribe('btc_usd.trades');
channel.bind('trades', function (dataset) {
    dataset.forEach(function(data) {
        buf['BTC-E'][data[0] === 'buy' ? 0 : 1].push({
            x: Date.now(),
            y: data[1]
        });
    });
});

buf['BitMEX'] = [[], []];
var wsBitMEX = new WebSocket('wss://www.bitmex.com/realtime');
wsBitMEX.onopen = function() {
    wsBitMEX.send(JSON.stringify({"op":"subscribe", "args":["trade:XBTUSD"]}));
};
wsBitMEX.onmessage = function(msg) {
    var response = JSON.parse(msg.data);
    console.log(response);
    if (response.table === 'trade') {
        response.data.forEach(function(data) {
            buf['BitMEX'][data.side === 'Buy' ? 0 : 1].push({
                x: data.timestamp,
                y: data.price
            });
        });
    }
}

buf['CoinCheck'] = [[], []];
var wsCoinCheck = new WebSocket('wss://ws-api.coincheck.com/');
wsCoinCheck.onopen = function() {
    wsCoinCheck.send(JSON.stringify({"type":"subscribe", "channel":"btc_jpy-trades"}));
};
wsCoinCheck.onmessage = function(msg) {
    var response = JSON.parse(msg.data);
    buf['CoinCheck'][response[4] === 'buy' ? 0 : 1].push({
        x: Date.now(),
        y: response[2]
    });
}

var ids = ['Bitfinex', 'Bitstamp', 'BTC-E', 'BitMEX', 'CoinCheck'];
ids.forEach(function(id) {
    var ctx = document.getElementById(id).getContext('2d');
    var chart = new Chart(ctx, {
        type: 'line',
        data: {
            datasets: [{
                data: [],
                label: 'Buy',
                borderColor: 'rgb(255, 99, 132)',
                backgroundColor: 'rgba(255, 99, 132, 0.5)',
                fill: false,
                lineTension: 0
            }, {
                data: [],
                label: 'Sell',
                borderColor: 'rgb(54, 162, 235)',
                backgroundColor: 'rgba(54, 162, 235, 0.5)',
                fill: false,
                lineTension: 0
            }]
        },
        options: {
            title: {
                text: (id !== 'CoinCheck' ? 'BTC/USD' : 'BTC/JPY') + ' (' + id + ')',
                display: true
            },
            scales: {
                xAxes: [{
                    type: 'realtime'
                }]
            },
            plugins: {
                streaming: {
                    duration: 300000,
                    onRefresh: function(chart) {
                        Array.prototype.push.apply(chart.data.datasets[0].data, buf[id][0]);
                        Array.prototype.push.apply(chart.data.datasets[1].data, buf[id][1]);
                        buf[id] = [[], []];
                    }
                }
            }
        }
    });
});
// ]]></script> 
           </div> 
           <footer class="entry-footer"> 
            <p class="entry-footer-section"> <span class="author vcard"><span class="fn" data-load-nickname="1" data-user-name="nagixx">nagixx</span></span> <span class="entry-footer-time"><a href="http://nagix.hatenablog.com/entry/2017/07/11/004952"><time data-relative datetime="2017-07-10T15:49:52Z" title="2017-07-10T15:49:52Z" pubdate class="updated">2017-07-11 00:49</time></a></span> </p> 
            <div class="hatena-star-container"> 
            </div> 
            <div class="hatena-star-metadata" style="display: none"> 
             <a class="hatena-star-permalink" href="http://nagix.hatenablog.com/entry/2017/07/11/004952">Drawing a real-time Bitcoin chart using Chart.js</a> 
            </div> 
            <div class="social-buttons"> 
             <div class="social-button-item"> 
              <a href="http://b.hatena.ne.jp/entry/http://nagix.hatenablog.com/entry/2017/07/11/004952" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="?????????????????"><img src="https://b.st-hatena.com/images/entry-button/button-only.gif" alt="?????????????????" width="20" height="20" style="border: none;"></a> 
             </div> 
             <div class="social-button-item"> 
              <div class="fb-share-button" data-layout="box_count" data-href="http://nagix.hatenablog.com/entry/2017/07/11/004952"></div> 
             </div> 
             <div class="social-button-item"> 
              <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://nagix.hatenablog.com/entry/2017/07/11/004952" data-count="vertical" data-text="Drawing a real-time Bitcoin chart using Chart.js - nagix" data-lang="ja">Tweet</a> 
             </div> 
             <div class="social-button-item"> 
              <div class="g-plusone" data-size="tall" data-href="http://nagix.hatenablog.com/entry/2017/07/11/004952"></div> 
             </div> 
            </div> 
            <div class="google-afc-image test-google-rectangle-ads"> 
             <script>
  var hatenadfp = hatenadfp || {};
  hatenadfp.adUnits = hatenadfp.adUnits || [];
  hatenadfp.adUnits.push(
    
      
      
      { unitName: 'blog_user', size: [[300, 250], [336, 280], [468, 60], ["fluid"]], divId: 'google_afc_user_container_0', allowContentMatch: true }
    
  );
  hatenadfp.isNGContent = false;
  
</script> 
             <div id="google_afc_user_container_0" class="google-afc-user-container  google_afc_blocklink2_5 google_afc_boder"></div> 
             <a href="http://blog.hatena.ne.jp/guide/pro" class="open-pro-modal" data-guide-pro-modal-ad-url="http://hatenablog.com/guide/pro/modal/ad">?????????</a> 
            </div> 
            <div class="customized-footer"> 
             <div class="entry-footer-modules" id="entry-footer-secondary-modules"> 
              <div class="hatena-module hatena-module-related-entries"> 
               <!-- Hatena-Epic-has-related-entries-with-elasticsearch:true --> 
               <div class="hatena-module-title">
                 ???? 
               </div> 
               <div class="hatena-module-body"> 
                <ul class="related-entries hatena-urllist urllist-with-thumbnails"> 
                 <li class="urllist-item related-entries-item"> 
                  <div class="urllist-item-inner related-entries-item-inner"> 
                   <a class="urllist-image-link related-entries-image-link" href="http://nagix.hatenablog.com/entry/2017/07/10/081553"> <img alt="Bitcoin ???????????? Chart.js ?????" src="https://cdn.image.st-hatena.com/image/square/d6b2131390aa5cfcd15707f1cbd75f88caa27c4c/backend=imagemagick;height=100;version=1;width=100/https%3A%2F%2Fcdn-ak.f.st-hatena.com%2Fimages%2Ffotolife%2Fn%2Fnagixx%2F20170710%2F20170710085252.png" class="urllist-image related-entries-image" title="Bitcoin ???????????? Chart.js ?????" width="100"> </a> 
                   <div class="urllist-date-link related-entries-date-link"> 
                    <a href="http://nagix.hatenablog.com/archive/2017/07/10" rel="nofollow"> <time pubdate datetime="2017-07-09T23:15:53Z" title="2017-07-09T23:15:53Z"> 2017-07-10 </time> </a> 
                   </div> 
                   <a href="http://nagix.hatenablog.com/entry/2017/07/10/081553" class="urllist-title-link related-entries-title-link  urllist-title related-entries-title">Bitcoin ???????????? Chart.js ?????</a> 
                   <div class="urllist-entry-body related-entries-entry-body">
                    (*English translation is here) Chart.js ?????????…
                   </div> 
                  </div> </li> 
                 <li class="urllist-item related-entries-item"> 
                  <div class="urllist-item-inner related-entries-item-inner"> 
                   <a class="urllist-image-link related-entries-image-link" href="http://nagix.hatenablog.com/entry/2015/10/29/172915"> <img alt="Apache Drill????????????????JSON??????????" src="https://cdn.image.st-hatena.com/image/square/6412819d6a8899e338d0f404695a88ec67ea4eda/backend=imagemagick;height=100;version=1;width=100/http%3A%2F%2Ff.st-hatena.com%2Fimages%2Ffotolife%2Fn%2Fnagixx%2F20131216%2F20131216193805.png" class="urllist-image related-entries-image" title="Apache Drill????????????????JSON??????????" width="100"> </a> 
                   <div class="urllist-date-link related-entries-date-link"> 
                    <a href="http://nagix.hatenablog.com/archive/2015/10/29" rel="nofollow"> <time pubdate datetime="2015-10-29T08:29:15Z" title="2015-10-29T08:29:15Z"> 2015-10-29 </time> </a> 
                   </div> 
                   <a href="http://nagix.hatenablog.com/entry/2015/10/29/172915" class="urllist-title-link related-entries-title-link  urllist-title related-entries-title">Apache Drill????????????????JSON??????????</a> 
                   <div class="urllist-entry-body related-entries-entry-body">
                    ??????JSON?????????????????????…
                   </div> 
                  </div> </li> 
                </ul> 
               </div> 
              </div> 
             </div> 
            </div> 
            <div class="comment-box"> 
             <ul class="comment"> 
              <li class="read-more-comments" style="display: none;"><a>?????</a></li> 
             </ul> 
             <a class="leave-comment-title">???????</a> 
            </div> 
           </footer> 
          </div> 
         </article> 
         <!-- rakuten_ad_target_end --> 
         <!-- google_ad_section_end --> 
         <div class="pager pager-permalink permalink"> 
          <span class="pager-next"> <a href="http://nagix.hatenablog.com/entry/2017/07/10/081553" rel="next"> Bitcoin ???????????? Chart.… <span class="pager-arrow"> »</span> </a> </span> 
         </div> 
        </div> 
       </div> 
       <aside id="box1"> 
        <div id="box1-inner"> 
        </div> 
       </aside> 
      </div>
      <!-- #wrapper --> 
      <aside id="box2"> 
       <div id="box2-inner"> 
        <div class="hatena-module hatena-module-profile"> 
         <div class="hatena-module-title">
           ?????? 
         </div> 
         <div class="hatena-module-body"> 
          <a href="http://nagix.hatenablog.com/about" class="profile-icon-link"> <img src="https://cdn1.www.st-hatena.com/users/na/nagixx/profile.gif" alt="id:nagixx" class="profile-icon"> </a> 
          <span class="id"> <a href="http://nagix.hatenablog.com/about" class="hatena-id-link"><span data-load-nickname="1" data-user-name="nagixx">id:nagixx</span></a> </span> 
          <div class="hatena-follow-button-box btn-subscribe js-hatena-follow-button-box"> 
           <a href="#" class="hatena-follow-button js-hatena-follow-button"> <span class="subscribing"> <span class="foreground">????</span> <span class="background">??????</span> </span> <span class="unsubscribing" data-track-name="profile-widget-subscribe-button" data-track-once> <span class="foreground">?????</span> <span class="background">?????</span> </span> </a> 
           <div class="subscription-count-box js-subscription-count-box"> 
            <i></i> 
            <u></u> 
            <span class="subscription-count js-subscription-count"> </span> 
           </div> 
          </div> 
          <div class="hatena-follow-button-box btn-twitter"> 
           <a href="https://twitter.com/nagix" class="twitter-follow-button" data-show-count="false" data-lang="ja"> @nagix????? </a> 
          </div> 
         </div> 
        </div> 
        <div class="hatena-module hatena-module-search-box"> 
         <div class="hatena-module-title">
           ?? 
         </div> 
         <div class="hatena-module-body"> 
          <form class="search-form" role="search" action="http://nagix.hatenablog.com/search" method="get"> 
           <input type="text" name="q" class="search-module-input" value="" placeholder="?????" required> 
           <input type="submit" value="??" class="search-module-button"> 
          </form> 
         </div> 
        </div> 
        <div class="hatena-module hatena-module-links"> 
         <div class="hatena-module-title">
           ??? 
         </div> 
         <div class="hatena-module-body"> 
          <ul class="hatena-urllist"> 
           <li> <a href="http://hatenablog.com/">??????</a> </li> 
           <li> <a href="http://hatenablog.com/guide?via=200109">????????????</a> </li> 
           <li> <a href="http://staff.hatenablog.com">????</a> </li> 
           <li> <a href="http://hatenablog.com/g/">?????? ????</a> </li> 
          </ul> 
         </div> 
        </div> 
        <div class="hatena-module hatena-module-recent-entries "> 
         <div class="hatena-module-title"> 
          <a href="http://nagix.hatenablog.com/archive"> ???? </a> 
         </div> 
         <div class="hatena-module-body"> 
          <ul class="recent-entries hatena-urllist "> 
           <li class="urllist-item recent-entries-item"> 
            <div class="urllist-item-inner recent-entries-item-inner"> 
             <a href="http://nagix.hatenablog.com/entry/2017/07/11/004952" class="urllist-title-link recent-entries-title-link  urllist-title recent-entries-title">Drawing a real-time Bitcoin chart using Chart.js</a> 
            </div> </li> 
           <li class="urllist-item recent-entries-item"> 
            <div class="urllist-item-inner recent-entries-item-inner"> 
             <a href="http://nagix.hatenablog.com/entry/2017/07/10/081553" class="urllist-title-link recent-entries-title-link  urllist-title recent-entries-title">Bitcoin ???????????? Chart.js ?????</a> 
            </div> </li> 
           <li class="urllist-item recent-entries-item"> 
            <div class="urllist-item-inner recent-entries-item-inner"> 
             <a href="http://nagix.hatenablog.com/entry/2016/04/11/091940" class="urllist-title-link recent-entries-title-link  urllist-title recent-entries-title">HDFS Snapshot + distcp ? MapR-FS Volume Mirroring ???</a> 
            </div> </li> 
           <li class="urllist-item recent-entries-item"> 
            <div class="urllist-item-inner recent-entries-item-inner"> 
             <a href="http://nagix.hatenablog.com/entry/2015/12/25/181736" class="urllist-title-link recent-entries-title-link  urllist-title recent-entries-title">2016 ????????????????</a> 
            </div> </li> 
           <li class="urllist-item recent-entries-item"> 
            <div class="urllist-item-inner recent-entries-item-inner"> 
             <a href="http://nagix.hatenablog.com/entry/2015/12/24/235900" class="urllist-title-link recent-entries-title-link  urllist-title recent-entries-title">Drill ?????????????????</a> 
            </div> </li> 
          </ul> 
         </div> 
        </div> 
        <div class="hatena-module hatena-module-archive" data-archive-type="default" data-archive-url="http://nagix.hatenablog.com/archive"> 
         <div class="hatena-module-title"> 
          <a href="http://nagix.hatenablog.com/archive">???????</a> 
         </div> 
         <div class="hatena-module-body"> 
         </div> 
        </div> 
        <div class="hatena-module hatena-module-html"> 
         <div class="hatena-module-title">
          Twitter
         </div> 
         <div class="hatena-module-body"> 
          <a class="twitter-timeline" href="https://twitter.com/nagix" data-widget-id="412765116782743552">@nagix ???????</a> 
          <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
         </div> 
        </div> 
       </div> 
      </aside> 
     </div> 
    </div> 
    <script type="text/javascript" src="//b.hatena.ne.jp/js/hatena_dfp2.js"></script> 
   </div> 
  </div> 
  <footer id="footer" data-brand="hatenablog"> 
   <div id="footer-inner"> 
    <div style="display:none !important" class="guest-footer js-guide-register test-blogs-register-guide" data-action="guide-register"> 
     <div class="guest-footer-content"> 
      <h3>?????????????</h3> 
      <p>nagixx???????????????????????????????????????</p> 
      <div class="guest-footer-btn-container"> 
       <div class="guest-footer-btn"> 
        <a class="btn btn-register" href="http://blog.hatena.ne.jp/register?via=200227" target="_blank">???????????????</a> 
       </div> 
       <div class="guest-footer-btn"> 
        <a href="http://hatenablog.com/guide" target="_blank">????????</a> 
       </div> 
      </div> 
     </div> 
    </div> 
    <address class="footer-address"> <a href="http://nagix.hatenablog.com/"> <img src="https://cdn.blog.st-hatena.com/images/admin/blog-icon-noimage.png" width="16" height="16" alt="nagix"> <span class="footer-address-name">nagix</span> </a> </address> 
    <p class="services"> Powered by <a href="http://hatenablog.com/">Hatena Blog</a> | <a href="http://www.hatena.ne.jp/faq/report/blog?target_label=nagixx&amp;target_url=http%3A%2F%2Fblog.hatena.ne.jp%2Fgo%3Fblog%3Dhttp%253A%252F%252Fnagix.hatenablog.com%252Fentry%252F2017%252F07%252F11%252F004952&amp;location=http%3A%2F%2Fblog.hatena.ne.jp%2Fgo%3Fblog%3Dhttp%253A%252F%252Fnagix.hatenablog.com%252Fentry%252F2017%252F07%252F11%252F004952" class="report-abuse-link test-report-abuse-link" target="_blank">????????</a> </p> 
   </div> 
  </footer> 
  <script src="https://s.hatena.ne.jp/js/HatenaStar.js"></script> 
  <div id="fb-root"></div> 
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
  
    js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&appId=719729204785177&version=v2.7";
  
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script> 
  <div class="quote-box"> 
   <div class="tooltip-quote tooltip-quote-star"> 
    <i class="blogicon-star" title="?????????"></i> 
   </div> 
   <div class="tooltip-quote tooltip-quote-stock"> 
    <i class="blogicon-quote" title="???????"></i> 
   </div> 
   <div class="tooltip-quote tooltip-quote-tweet js-tooltip-quote-tweet"> 
    <a class="js-tweet-quote" target="_blank" data-track-name="quote-tweet" data-track-once><i class="blogicon-twitter" title="??????????"></i></a> 
   </div> 
  </div> 
  <div class="message-box" id="quote-star-message-box" style="display: none; position: absolute;">
    ????????? 
  </div> 
  <div class="quote-stock-panel" id="quote-stock-message-box" style="position: absolute; z-index: 3000"> 
   <div class="message-box" id="quote-stock-succeeded-message" style="display: none"> 
    <p>???????????</p> 
    <button class="btn btn-primary" id="quote-stock-show-editor-button" data-track-name="curation-quote-edit-button">?????????</button> 
    <button class="btn quote-stock-close-message-button">???</button> 
   </div> 
   <div class="message-box" id="quote-login-required-message" style="display: none"> 
    <p>??????????????????</p> 
    <button class="btn btn-primary" id="quote-login-button">????</button> 
    <button class="btn quote-stock-close-message-button">???</button> 
   </div> 
   <div class="error-box" id="quote-stock-failed-message" style="display: none"> 
    <p>?????????????????????????</p> 
    <button class="btn quote-stock-close-message-button">???</button> 
   </div> 
   <div class="error-box" id="unstockable-quote-message-box" style="display: none; position: absolute; z-index: 3000;"> 
    <p>?????????????????</p> 
   </div> 
  </div> 
  <script type="x-underscore-template" id="js-requote-button-template">
  <div class="requote-button js-requote-button">
    <button class="requote-button-btn tipsy-top" title="????"><i class="blogicon-quote"></i></button>
  </div>
</script> 
  <div id="hidden-subscribe-button" style="display: none;"> 
   <div class="hatena-follow-button-box btn-subscribe js-hatena-follow-button-box"> 
    <a href="#" class="hatena-follow-button js-hatena-follow-button"> <span class="subscribing"> <span class="foreground">????</span> <span class="background">??????</span> </span> <span class="unsubscribing" data-track-name="profile-widget-subscribe-button" data-track-once> <span class="foreground">?????</span> <span class="background">?????</span> </span> </a> 
    <div class="subscription-count-box js-subscription-count-box"> 
     <i></i> 
     <u></u> 
     <span class="subscription-count js-subscription-count"> </span> 
    </div> 
   </div> 
  </div> 
  <script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script> 
  <script src="https://apis.google.com/js/platform.js" async defer>
  { lang: 'ja', "parsetags": "explicit" }
</script> 
  <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async></script> 
  <script type="text/javascript" src="https://cdn.blog.st-hatena.com/js/external/react-with-addons.min.js?version=15.4.1"></script> 
  <script type="text/javascript" src="https://cdn.blog.st-hatena.com/js/external/react-dom.min.js?version=15.4.1"></script> 
  <script type="text/javascript" src="https://cdn.blog.st-hatena.com/js/external/jquery.min.js?version=1.12.3"></script> 
  <script type="text/javascript" src="//cdn7.www.st-hatena.com/js/jquery/jquery-ui.1.10.0.custom.min.js"></script> 
  <script type="text/javascript" src="https://cdn.blog.st-hatena.com/js/external/jquery.flot.js?version=0.8.3"></script> 
  <script type="text/javascript" src="https://cdn.blog.st-hatena.com/js/external/jquery.flot.time.js?version=0.8.3"></script> 
  <script id="hatenablog-js" data-env="production" type="text/javascript" src="https://cdn.blog.st-hatena.com/js/hatenablog.js?version=206c80bd0c47db004f96a4d2d60765f6b29a4c56&amp;env=production" crossorigin="anonymous"></script> 
  <script type="text/javascript" src="https://cdn.blog.st-hatena.com/js/texts-ja.js?version=04bb28a95e22746295d5a6cd497468c7e628c710&amp;env=production"></script> 
  <script type="text/javascript">Hatena.Diary.GlobalHeader.init()</script> 
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>   
 </body>
</html>