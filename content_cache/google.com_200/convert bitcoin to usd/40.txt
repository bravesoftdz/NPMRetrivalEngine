<!doctype html>
<html lang="en" class="desktop-view not-mobile-device  anon">
 <head> 
  <meta charset="utf-8"> 
  <title>Bitcoin Price Index JSON Parse TCP Client - Project Share - Particle</title> 
  <meta name="description" content="[image] 

Here&amp;#39;s a full example of a Bitcoin Price Index JSON parsing TCP Client.  The end result is the BPI value as a Double precision variable that you can work with.  Remember you have to open a serial terminal after&amp;hellip;"> 
  <meta name="author" content=""> 
  <meta name="generator" content="Discourse 1.8.0.beta9 - https://github.com/discourse/discourse version 708f65f740aeaf89444477134732ace0d78db2a1"> 
  <link rel="icon" type="image/png" href="https://s3.amazonaws.com/spark-assets/purple.ico"> 
  <link rel="apple-touch-icon" type="image/png" href="https://s3.amazonaws.com/spark-assets/spark-icon-large.png"> 
  <link rel="icon" sizes="144x144" href="https://s3.amazonaws.com/spark-assets/spark-icon-large.png"> 
  <meta name="theme-color" content="#ffffff"> 
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes"> 
  <link rel="canonical" href="https://community.particle.io/t/bitcoin-price-index-json-parse-tcp-client/5383"> 
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://community.particle.io","potentialAction":{"@type":"SearchAction","target":"https://community.particle.io/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script> 
  <link rel="search" type="application/opensearchdescription+xml" href="https://community.particle.io/opensearch.xml" title="Particle Search"> 
  <style>
  @font-face {
    font-family: 'FontAwesome';
    src: url('/assets/fontawesome-webfont-ff82aeed6b9bb6701696c84d1b223d2e682eb78c89117a438ce6cfea8c498995.woff2?https://community.particle.io&amp;2&v=4.5.0') format('woff2'),
         url('/assets/fontawesome-webfont-c812ddc9e475d3e65d68a6b3b589ce598a2a5babb7afc55477d59215c4a38a40.woff?https://community.particle.io&amp;2&v=4.5.0') format('woff');
  }
</style> 
  <link href="/stylesheets/desktop_d2fb7a967a2eaecaaad9b66308afd4de0e23f8c5.css?__ws=community.particle.io" media="all" rel="stylesheet"> 
  <link class="custom-css" rel="stylesheet" href="/site_customizations/7e202ef2-56d7-47d5-98d8-a9c8d15e57dd.css?target=desktop&amp;v=64628e0528a40ca598a622659fc50123&amp;__ws=community.particle.io" type="text/css" media="all"> 
  <meta name="fragment" content="!"> 
  <script>
      window.EmberENV = window.EmberENV || {};
      window.EmberENV['FORCE_JQUERY'] = true;
    </script> 
  <script src="/assets/locales/en-fa1a8cade62e3f162248b8c16646be51c963c79cda3eb0dce0f750e19c50e506.js"></script> 
  <script src="/assets/ember_jquery-b018f0ade967f79b21dc04fb709bf3ce41b791c8047282d68784382bbd80ba38.js"></script> 
  <script src="/assets/preload-store-9a5d6688476c54b0eb6e11cf444ab9dc19602f99f10114228f41fe605c31ac4d.js"></script> 
  <script src="/assets/vendor-5a4802805cd79c222d41da263922f73e374d3f2617501bf6a30baf69390f4473.js"></script> 
  <script src="/assets/pretty-text-bundle-f6b0056040ab06a7554e97e5e4f119988c5ee44509e2b450c93b6abb76797d46.js"></script> 
  <script src="/assets/application-f15f5e4e8258f3a9d5a0f7081413d24033acafb91f211600b6f9d206e23af3cd.js"></script> 
  <script src="/assets/plugin-f61595b2195e3f50e61683d125aeea002836a962fbd985ba46cc4c21b00f43a0.js"></script> 
  <script src="/assets/plugin-third-party-1c972d03b7bf419ea46fe4c258157766a5958061fbc66b2d19c8db2df1de2f97.js"></script> 
  <meta name="google-site-verification" content="xoBkwTJRCA1Uxlx-g3dDw3YeaXTTA5hXQJfmR1mL84s"> 
  <link rel="manifest" href="/manifest.json"> 
  <link rel="alternate" type="application/rss+xml" title="RSS feed of 'Bitcoin Price Index JSON Parse TCP Client'" href="https://community.particle.io/t/bitcoin-price-index-json-parse-tcp-client/5383.rss"> 
  <meta property="og:site_name" content="Particle"> 
  <meta name="twitter:card" content="summary"> 
  <meta name="twitter:image" content="http://coedmagazine.files.wordpress.com/2014/01/bitcoin.jpg?w=600&amp;h=350"> 
  <meta property="og:image" content="http://coedmagazine.files.wordpress.com/2014/01/bitcoin.jpg?w=600&amp;h=350"> 
  <meta property="og:url" content="https://community.particle.io/t/bitcoin-price-index-json-parse-tcp-client/5383"> 
  <meta name="twitter:url" content="https://community.particle.io/t/bitcoin-price-index-json-parse-tcp-client/5383"> 
  <meta property="og:title" content="Bitcoin Price Index JSON Parse TCP Client"> 
  <meta name="twitter:title" content="Bitcoin Price Index JSON Parse TCP Client"> 
  <meta property="og:description" content="[image]   Here's a full example of a Bitcoin Price Index JSON parsing TCP Client.  The end result is the BPI value as a Double precision variable that you can work with.  Remember you have to open a serial terminal after you boot your Core, then press ENTER.  Successive presses of ENTER will perform another GET request.  Modify to suit your own needs for total world domination!   Note: This is a unsecure HTTP request... do NOT use this code to buy or sell bitcoins. Keep it fluffy people sparkles ..."> 
  <meta name="twitter:description" content="[image]   Here's a full example of a Bitcoin Price Index JSON parsing TCP Client.  The end result is the BPI value as a Double precision variable that you can work with.  Remember you have to open a serial terminal after you boot your Core, then press ENTER.  Successive presses of ENTER will perform another GET request.  Modify to suit your own needs for total world domination!   Note: This is a unsecure HTTP request... do NOT use this code to buy or sell bitcoins. Keep it fluffy people sparkles ..."> 
  <meta name="twitter:label1" value="Reading time"> 
  <meta name="twitter:data1" value="5 mins ?"> 
  <meta name="twitter:label2" value="Likes"> 
  <meta name="twitter:data2" value="12 ?"> 
 </head> 
 <body class=""> 
  <div class="debug-eyeline"></div> 
  <noscript data-path="/t/bitcoin-price-index-json-parse-tcp-client/5383"> 
   <header class="d-header"> 
    <div class="wrap"> 
     <div class="contents"> 
      <div class="row"> 
       <div class="title span13"> 
        <a href="/"> <img src="https://s3.amazonaws.com/spark-website/particle-community.png" alt="Particle" id="site-logo"> </a> 
       </div> 
       <div class="panel clearfix"> 
        <a href="/login" class="btn btn-primary btn-small login-button"><i class="fa fa-user"></i> Log In</a> 
       </div> 
      </div> 
     </div> 
    </div> 
   </header> 
   <div id="main-outlet" class="wrap"> 
    <!-- preload-content: --> 
    <h1> <a href="/t/bitcoin-price-index-json-parse-tcp-client/5383">Bitcoin Price Index JSON Parse TCP Client</a> </h1> 
    <div id="breadcrumbs"> 
     <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"> 
      <a href="/c/project-share" itemprop="url"> <span itemprop="title">Project Share</span> </a> 
     </div> 
    </div> 
    <hr> 
    <div itemscope itemtype="http://schema.org/DiscussionForumPosting"> 
     <div class="creator"> 
      <span> <a href="/u/BDub"><b itemprop="author">BDub</b></a> <time datetime="2014-06-27T05:26:17Z" itemprop="datePublished"> 2014-06-27 05:26:17 UTC </time> </span> 
      <span itemprop="position">#1</span> 
     </div> 
     <div class="post" itemprop="articleBody"> 
      <p><a href="http://coedmagazine.files.wordpress.com/2014/01/bitcoin.jpg?w=600&amp;h=350" target="_blank"><img src="http://coedmagazine.files.wordpress.com/2014/01/bitcoin.jpg?w=600&amp;h=350" width="600" height="350"></a></p> 
      <p>Here's a full example of a Bitcoin Price Index JSON parsing TCP Client. The end result is the BPI value as a Double precision variable that you can work with. Remember you have to open a serial terminal after you boot your Core, then press ENTER. Successive presses of ENTER will perform another GET request. Modify to suit your own needs for total world domination!</p> 
      <p><em>Note: This is a unsecure HTTP request... do NOT use this code to buy or sell bitcoins.</em><br>Keep it fluffy people <img src="//community.spark.io/images/emoji/emoji_one/sparkles.png" title=":sparkles:" class="emoji" alt="sparkles" width="20" height="20"> <img src="//community.spark.io/images/emoji/emoji_one/sparkling_heart.png" title=":sparkling_heart:" class="emoji" alt="sparkling_heart" width="20" height="20"> <img src="//community.spark.io/images/emoji/emoji_one/spark.png" title=":spark:" class="emoji" alt="spark" width="20" height="20"> <img src="//community.spark.io/images/emoji/emoji_one/rainbow.png" title=":rainbow:" class="emoji" alt="rainbow" width="20" height="20"> </p> 
      <h1>BitcoinPrice.ino</h1> 
      <p></p>
      <pre><code class="cpp">/* 
 * Bitcoin Price Index JSON Parsing TCP Client Example
 * BDub @ Technobly.com 6/27/2014
 * LICENSE: MIT (C) 2014 BDub
 *
 */

#pragma SPARK_NO_PREPROCESSOR

#include "application.h"
#include "rest_client.h"
#include "jsmnSpark.h"

#define TOKEN_STRING(js, t, s) \
	(strncmp(js+(t).start, s, (t).end - (t).start) == 0 \
	&amp;&amp; strlen(s) == (t).end - (t).start)

#define TOKEN_PRINT(t) \
	Serial.print(", type: "); Serial.print((t).type); Serial.print(" size: "); Serial.print((t).size); \
	Serial.print(" start: "); Serial.print((t).start); Serial.print(" end: "); Serial.println((t).end)

/* IMPORTANT TO CHANGE THE NUMBER OF TOKENS TO MATCH YOUR DATA CLOSELY */
#define NUM_TOKENS 23
#define MAX_OBJ_SIZE 50
#define HOSTNAME "api.coindesk.com"

RestClient client = RestClient(HOSTNAME);
String response;

void setup() {
  Serial.begin(9600); // Make sure serial terminal is closed before powering up Core
  while(!Serial.available()) SPARK_WLAN_Loop(); // Open serial terminal now, and press ENTER
}

void loop() {
  int i, r;
  jsmn_parser p;
  jsmntok_t tok[NUM_TOKENS];
  char obj[MAX_OBJ_SIZE];

  // Press ENTER in your serial terminal to continue...
  if (!Serial.available())
    return;

  obj[0] = Serial.read(); // Flush the serial buffer to pause next time through

  response = ""; // Clear the response String

  // GET request
  int statusCode = client.get("/v1/bpi/currentprice/USD.json", &amp;response);

  // Uncomment following line to force a test response, real response will not have all of these escaped characters
  //response = "{\"time\":{\"updated\":\"Jun 27, 2014 04:17:00 UTC\",\"updatedISO\":\"2014-06-27T04:17:00+00:00\",\"updateduk\":\"Jun 27, 2014 at 05:17 BST\"},\"disclaimer\":\"This data was produced from the CoinDesk Bitcoin Price Index (USD). Non-USD currency data converted using hourly conversion rate from openexchangerates.org\",\"bpi\":{\"USD\":{\"code\":\"USD\",\"rate\":\"577.6150\",\"description\":\"United States Dollar\",\"rate_float\":577.615}}}";

  if(statusCode != 200) {
    Serial.print("Error code from server: ");
    Serial.println(statusCode);
    return;
  }

  Serial.print("Response body from server: ");
  Serial.println(response);
  Serial.println(" ");

  // Parse response from server
  jsmn_init(&amp;p);
  r = jsmn_parse(&amp;p, response.c_str(), tok, NUM_TOKENS);

  // Determine status code
  if (r == JSMN_SUCCESS) {
    Serial.println("Parsed successfully.");
  }
  else if(r == JSMN_ERROR_INVAL) {
    Serial.println("Bad token, JSON string is corrupted!");
    return;
  }
  else if(r == JSMN_ERROR_NOMEM) {
    Serial.println("Not enough tokens, JSON string is too large! Increase NUM_TOKENS.");
    return;
  }
  else if(r == JSMN_ERROR_PART) {
    Serial.println("JSON string is too short, expecting more JSON data!");
    return;
  }
  else {
    Serial.println("Parse failed! Unknown Error.");
    return;
  }

  // Print out a list of Tokens
  for (i = 0; i &lt; NUM_TOKENS; i++) {
    Serial.print("Token ");
    Serial.print(i);
    TOKEN_PRINT(tok[i]);
    delay(10);
  }

  // Convert 17th token to string
  i = 17;
  strlcpy(obj, &amp;response.c_str()[tok[i].start], (tok[i].end - tok[i].start + 1));
  Serial.print("\nToken["); Serial.print(i); Serial.print("]: ");
  Serial.println(obj);  // Print it out now just in case it's not the right one, 
                        // we'll get and idea of where we are in the object

  // Does this token == "rate" ?
  if ( TOKEN_STRING(response.c_str(), tok[i], "rate") )
  {
    // Convert next token to string
    i++;
	strlcpy(obj, &amp;response.c_str()[tok[i].start], (tok[i].end - tok[i].start + 1));

	// Convert string to double, contains numerical value of Bitcoin Price Index
	double bpi = strtod(obj, NULL);

	// Print double out to 4 decimal places
	Serial.print("Token["); Serial.print(i); Serial.print("]: ");
	Serial.println(bpi, 4);

	// Take control of the RGB LED
	RGB.control(true);

	// Change the RGB's color to GREEN
	RGB.color(0, 255, 0);

	// Delay for one second
	delay(1000);

	// Release control of the RGB LED
	RGB.control(false);
  }
  else {
    Serial.println("'rate' token not found");
  }
}

</code></pre> 
      <hr> 
      <h1>jsmnSpark.cpp</h1> 
      <p></p>
      <pre><code class="cpp">#include "application.h"
#include "jsmnSpark.h"

/**
 * Allocates a fresh unused token from the token pull.
 */

static jsmntok_t *jsmn_alloc_token(jsmn_parser *parser, 
		jsmntok_t *tokens, size_t num_tokens) {
	jsmntok_t *tok;
	if (parser-&gt;toknext &gt;= num_tokens) {
		return NULL;
	}
	tok = &amp;tokens[parser-&gt;toknext++];
	tok-&gt;start = tok-&gt;end = -1;
	tok-&gt;size = 0;
#ifdef JSMN_PARENT_LINKS
	tok-&gt;parent = -1;
#endif
	return tok;
}

/**
 * Fills token type and boundaries.
 */
static void jsmn_fill_token(jsmntok_t *token, jsmntype_t type, 
                            int start, int end) {
	token-&gt;type = type;
	token-&gt;start = start;
	token-&gt;end = end;
	token-&gt;size = 0;
}

/**
 * Fills next available token with JSON primitive.
 */
static jsmnerr_t jsmn_parse_primitive(jsmn_parser *parser, const char *js,
		jsmntok_t *tokens, size_t num_tokens) {
	jsmntok_t *token;
	int start;

	start = parser-&gt;pos;

	for (; js[parser-&gt;pos] != '\0'; parser-&gt;pos++) {
		switch (js[parser-&gt;pos]) {
#ifndef JSMN_STRICT
			/* In strict mode primitive must be followed by "," or "}" or "]" */
			case ':':
#endif
			case '\t' : case '\r' : case '\n' : case ' ' :
			case ','  : case ']'  : case '}' :
				goto found;
		}
		if (js[parser-&gt;pos] &lt; 32 || js[parser-&gt;pos] &gt;= 127) {
			parser-&gt;pos = start;
			return JSMN_ERROR_INVAL;
		}
	}
#ifdef JSMN_STRICT
	/* In strict mode primitive must be followed by a comma/object/array */
	parser-&gt;pos = start;
	return JSMN_ERROR_PART;
#endif

found:
	token = jsmn_alloc_token(parser, tokens, num_tokens);
	if (token == NULL) {
		parser-&gt;pos = start;
		return JSMN_ERROR_NOMEM;
	}
	jsmn_fill_token(token, JSMN_PRIMITIVE, start, parser-&gt;pos);
#ifdef JSMN_PARENT_LINKS
	token-&gt;parent = parser-&gt;toksuper;
#endif
	parser-&gt;pos--;
	return JSMN_SUCCESS;
}

/**
 * Filsl next token with JSON string.
 */
static jsmnerr_t jsmn_parse_string(jsmn_parser *parser, const char *js,
		jsmntok_t *tokens, size_t num_tokens) {
	jsmntok_t *token;

	int start = parser-&gt;pos;

	parser-&gt;pos++;

	// Skip starting quote
	for (; js[parser-&gt;pos] != '\0'; parser-&gt;pos++) {
		char c = js[parser-&gt;pos];

		// Quote: end of string
		if (c == '\"') {
			token = jsmn_alloc_token(parser, tokens, num_tokens);
			if (token == NULL) {
				parser-&gt;pos = start;
				return JSMN_ERROR_NOMEM;
			}
			jsmn_fill_token(token, JSMN_STRING, start+1, parser-&gt;pos);
#ifdef JSMN_PARENT_LINKS
			token-&gt;parent = parser-&gt;toksuper;
#endif
			return JSMN_SUCCESS;
		}

		// Backslash: Quoted symbol expected
		if (c == '\\') {
			parser-&gt;pos++;
			switch (js[parser-&gt;pos]) {
				// Allowed escaped symbols
				case '\"': case '/' : case '\\' : case 'b' :
				case 'f' : case 'r' : case 'n'  : case 't' :
					break;
				// Allows escaped symbol \uXXXX
				case 'u':
					parser-&gt;pos++;
					//int i = 0;
					for(int i = 0; i &lt; 4 &amp;&amp; js[parser-&gt;pos] != '\0'; i++) {
						// If it isn't a hex character we have an error
						if(!((js[parser-&gt;pos] &gt;= 48 &amp;&amp; js[parser-&gt;pos] &lt;= 57) || // 0-9
									(js[parser-&gt;pos] &gt;= 65 &amp;&amp; js[parser-&gt;pos] &lt;= 70) || // A-F
									(js[parser-&gt;pos] &gt;= 97 &amp;&amp; js[parser-&gt;pos] &lt;= 102))) { // a-f
							parser-&gt;pos = start;
							return JSMN_ERROR_INVAL;
						}
						parser-&gt;pos++;
					}
					parser-&gt;pos--;
					break;
				// Unexpected symbol
				default:
					parser-&gt;pos = start;
					return JSMN_ERROR_INVAL;
			}
		}

	}
	parser-&gt;pos = start;
	return JSMN_ERROR_PART;
}

/**
 * Parse JSON string and fill tokens.
 */
jsmnerr_t jsmn_parse(jsmn_parser *parser, const char *js, jsmntok_t *tokens, 
		unsigned int num_tokens) {
	jsmnerr_t r;
	int i;
	jsmntok_t *token;

	for (; js[parser-&gt;pos] != '\0'; parser-&gt;pos++) {
		char c;
		jsmntype_t type;

		c = js[parser-&gt;pos];
		switch (c) {
			case '{': case '[':
				token = jsmn_alloc_token(parser, tokens, num_tokens);
				if (token == NULL)
					return JSMN_ERROR_NOMEM;
				if (parser-&gt;toksuper != -1) {
					tokens[parser-&gt;toksuper].size++;
#ifdef JSMN_PARENT_LINKS
					token-&gt;parent = parser-&gt;toksuper;
#endif
				}
				token-&gt;type = (c == '{' ? JSMN_OBJECT : JSMN_ARRAY);
				token-&gt;start = parser-&gt;pos;
				parser-&gt;toksuper = parser-&gt;toknext - 1;
				break;
			case '}': case ']':
				type = (c == '}' ? JSMN_OBJECT : JSMN_ARRAY);
#ifdef JSMN_PARENT_LINKS
				if (parser-&gt;toknext &lt; 1) {
					return JSMN_ERROR_INVAL;
				}
				token = &amp;tokens[parser-&gt;toknext - 1];
				for (;;) {
					if (token-&gt;start != -1 &amp;&amp; token-&gt;end == -1) {
						if (token-&gt;type != type) {
							return JSMN_ERROR_INVAL;
						}
						token-&gt;end = parser-&gt;pos + 1;
						parser-&gt;toksuper = token-&gt;parent;
						break;
					}
					if (token-&gt;parent == -1) {
						break;
					}
					token = &amp;tokens[token-&gt;parent];
				}
#else
				for (i = parser-&gt;toknext - 1; i &gt;= 0; i--) {
					token = &amp;tokens[i];
					if (token-&gt;start != -1 &amp;&amp; token-&gt;end == -1) {
						if (token-&gt;type != type) {
							return JSMN_ERROR_INVAL;
						}
						parser-&gt;toksuper = -1;
						token-&gt;end = parser-&gt;pos + 1;
						break;
					}
				}
				/* Error if unmatched closing bracket */
				if (i == -1) return JSMN_ERROR_INVAL;
				for (; i &gt;= 0; i--) {
					token = &amp;tokens[i];
					if (token-&gt;start != -1 &amp;&amp; token-&gt;end == -1) {
						parser-&gt;toksuper = i;
						break;
					}
				}
#endif
				break;
			case '\"':
				r = jsmn_parse_string(parser, js, tokens, num_tokens);
				if (r &lt; 0) return r;
				if (parser-&gt;toksuper != -1)
					tokens[parser-&gt;toksuper].size++;
				break;
			case '\t' : case '\r' : case '\n' : case ':' : case ',': case ' ': 
				break;
#ifdef JSMN_STRICT
			/* In strict mode primitives are: numbers and booleans */
			case '-': case '0': case '1' : case '2': case '3' : case '4':
			case '5': case '6': case '7' : case '8': case '9':
			case 't': case 'f': case 'n' :
#else
			/* In non-strict mode every unquoted value is a primitive */
			default:
#endif
				r = jsmn_parse_primitive(parser, js, tokens, num_tokens);
				if (r &lt; 0) return r;
				if (parser-&gt;toksuper != -1)
					tokens[parser-&gt;toksuper].size++;
				break;

#ifdef JSMN_STRICT
			/* Unexpected char in strict mode */
			default:
				return JSMN_ERROR_INVAL;
#endif

		}
	}

	for (i = parser-&gt;toknext - 1; i &gt;= 0; i--) {
		/* Unmatched opened object or array */
		if (tokens[i].start != -1 &amp;&amp; tokens[i].end == -1) {
			return JSMN_ERROR_PART;
		}
	}

	return JSMN_SUCCESS;
}

/**
 * Creates a new parser based over a given  buffer with an array of tokens 
 * available.
 */
void jsmn_init(jsmn_parser *parser) {
	parser-&gt;pos = 0;
	parser-&gt;toknext = 0;
	parser-&gt;toksuper = -1;
}</code></pre> 
      <hr> 
      <h1>jsmnSpark.h</h1> 
      <p></p>
      <pre><code class="cpp">#ifndef __JSMN_H_
#define __JSMN_H_

/**
 * JSON type identifier. Basic types are:
 * 	o Object
 * 	o Array
 * 	o String
 * 	o Other primitive: number, boolean (true/false) or null
 */
typedef enum {
	JSMN_PRIMITIVE = 0,
	JSMN_OBJECT = 1,
	JSMN_ARRAY = 2,
	JSMN_STRING = 3
} jsmntype_t;

typedef enum {
	/* Not enough tokens were provided */
	JSMN_ERROR_NOMEM = -1,
	/* Invalid character inside JSON string */
	JSMN_ERROR_INVAL = -2,
	/* The string is not a full JSON packet, more bytes expected */
	JSMN_ERROR_PART = -3,
	/* Everything was fine */
	JSMN_SUCCESS = 0
} jsmnerr_t;

/**
 * JSON token description.
 * @param		type	type (object, array, string etc.)
 * @param		start	start position in JSON data string
 * @param		end		end position in JSON data string
 */
typedef struct {
	jsmntype_t type;
	int start;
	int end;
	int size;
#ifdef JSMN_PARENT_LINKS
	int parent;
#endif
} jsmntok_t;

/**
 * JSON parser. Contains an array of token blocks available. Also stores
 * the string being parsed now and current position in that string
 */
typedef struct {
	unsigned int pos; /* offset in the JSON string */
	unsigned int toknext; /* next token to allocate */
	int toksuper; /* superior token node, e.g parent object or array */
} jsmn_parser;

/**
 * Create JSON parser over an array of tokens
 */
void jsmn_init(jsmn_parser *parser);

/**
 * Run JSON parser. It parses a JSON data string into and array of tokens, each describing
 * a single JSON object.
 */
jsmnerr_t jsmn_parse(jsmn_parser *parser, const char *js, 
		jsmntok_t *tokens, unsigned int num_tokens);

#endif __JSMN_H_</code></pre> 
      <hr> 
      <h1>rest_client.cpp</h1> 
      <p></p>
      <pre><code class="cpp">/**
 ******************************************************************************
 * @file    rest_client.cpp
 * 
 * details: https://github.com/llad/spark-restclient
 * 
 * credit: https://github.com/csquared/arduino-restclient
 * 
 ******************************************************************************

*/

#include "rest_client.h"

//#define HTTP_DEBUG

#ifdef HTTP_DEBUG
#define HTTP_DEBUG_PRINT(string) (Serial.print(string))
#endif

#ifndef HTTP_DEBUG
#define HTTP_DEBUG_PRINT(string)
#endif

RestClient::RestClient(const char* _host){
  host = _host;
  port = 80;
  num_headers = 0;
  contentTypeSet = false;
}

RestClient::RestClient(const char* _host, int _port){
  host = _host;
  port = _port;
  num_headers = 0;
  contentTypeSet = false;
}

// GET path
int RestClient::get(const char* path){
  return request("GET", path, NULL, NULL);
}

//GET path with response
int RestClient::get(const char* path, String* response){
  return request("GET", path, NULL, response);
}

// POST path and body
int RestClient::post(const char* path, const char* body){
  return request("POST", path, body, NULL);
}

// POST path and body with response
int RestClient::post(const char* path, const char* body, String* response){
  return request("POST", path, body, response);
}

// PUT path and body
int RestClient::put(const char* path, const char* body){
  return request("PUT", path, body, NULL);
}

// PUT path and body with response
int RestClient::put(const char* path, const char* body, String* response){
  return request("PUT", path, body, response);
}

// DELETE path
int RestClient::del(const char* path){
  return request("DELETE", path, NULL, NULL);
}

// DELETE path and response
int RestClient::del(const char* path, String* response){
  return request("DELETE", path, NULL, response);
}

// DELETE path and body
int RestClient::del(const char* path, const char* body ){
  return request("DELETE", path, body, NULL);
}

// DELETE path and body with response
int RestClient::del(const char* path, const char* body, String* response){
  return request("DELETE", path, body, response);
}

void RestClient::write(const char* string){
  HTTP_DEBUG_PRINT(string);
  client.print(string);
}

void RestClient::setHeader(const char* header){
  headers[num_headers] = header;
  num_headers++;
}

// The mother- generic request method.
//
int RestClient::request(const char* method, const char* path,
                  const char* body, String* response){

  HTTP_DEBUG_PRINT("HTTP: connect\n");

  if(client.connect(host, port)){
    HTTP_DEBUG_PRINT("HTTP: connected\n");
    HTTP_DEBUG_PRINT("REQUEST: \n");
    // Make a HTTP request line:
    write(method);
    write(" ");
    write(path);
    write(" HTTP/1.0\r\n");
    for(int i=0; i&lt;num_headers; i++){
      write(headers[i]);
      write("\r\n");
    }
    write("Host: ");
    write(host);
    write("\r\n");
    write("Connection: close\r\n");

    if(body != NULL){
      char contentLength[30];
      sprintf(contentLength, "Content-Length: %d\r\n", strlen(body));
      write(contentLength);

      if(!contentTypeSet){
        write("Content-Type: application/x-www-form-urlencoded\r\n");
      }
    }

    write("\r\n");

    if(body != NULL){
      write(body);
      write("\r\n");
      write("\r\n");
    }

    //make sure you write all those bytes.
    delay(100);

    HTTP_DEBUG_PRINT("HTTP: call readResponse\n");
    int statusCode = readResponse(response);
    HTTP_DEBUG_PRINT("HTTP: return readResponse\n");

    //cleanup
    HTTP_DEBUG_PRINT("HTTP: stop client\n");
    num_headers = 0;
    client.stop();
    delay(50);
    HTTP_DEBUG_PRINT("HTTP: client stopped\n");

    return statusCode;
  }else{
    HTTP_DEBUG_PRINT("HTTP Connection failed\n");
    return 0;
  }
}

int RestClient::readResponse(String* response) {

  // an http request ends with a blank line
  boolean currentLineIsBlank = true;
  boolean httpBody = false;
  boolean inStatus = false;

  char statusCode[4];
  int i = 0;
  int code = 0;

  if(response == NULL){
    HTTP_DEBUG_PRINT("HTTP: NULL RESPONSE POINTER: \n");
  }else{
    HTTP_DEBUG_PRINT("HTTP: NON-NULL RESPONSE POINTER: \n");
  }

  HTTP_DEBUG_PRINT("HTTP: RESPONSE: \n");
  while (client.connected()) {
    HTTP_DEBUG_PRINT(".");
    if (client.available()) {
      HTTP_DEBUG_PRINT(",");

      char c = client.read();
      HTTP_DEBUG_PRINT(c);

      if(c == ' ' &amp;&amp; !inStatus){
        inStatus = true;
      }

      if(inStatus &amp;&amp; i &lt; 3 &amp;&amp; c != ' '){
        statusCode[i] = c;
        i++;
      }
      if(i == 3){
        statusCode[i] = '\0';
        code = atoi(statusCode);
      }

      //only write response if its not null
      if(httpBody){
        if(response != NULL) response-&gt;concat(c);
      }
      if (c == '\n' &amp;&amp; httpBody){
        HTTP_DEBUG_PRINT("HTTP: return readResponse2\n");
        return code;
      }
      if (c == '\n' &amp;&amp; currentLineIsBlank) {
        httpBody = true;
      }
      if (c == '\n') {
        // you're starting a new lineu
        currentLineIsBlank = true;
      }
      else if (c != '\r') {
        // you've gotten a character on the current line
        currentLineIsBlank = false;
      }
    }
  }

  HTTP_DEBUG_PRINT("HTTP: return readResponse3\n");
  return code;
}</code></pre> 
      <hr> 
      <h1>rest_client.h</h1> 
      <p></p>
      <pre><code class="cpp">/**
 ******************************************************************************
 * @file    rest_client.h
 * 
 * details: https://github.com/llad/spark-restclient
 * 
 * credit: https://github.com/csquared/arduino-restclient
 * 
 ******************************************************************************

*/


#include "application.h"

class RestClient {

  public:
    RestClient(const char* host);
    RestClient(const char* _host, int _port);

    //Client Setup
    void dhcp();
    int begin(byte*);

    //Generic HTTP Request
    int request(const char* method, const char* path,
                const char* body, String* response);
    // Set a Request Header
    void setHeader(const char*);
    // GET path
    int get(const char*);
    // GET path and response
    int get(const char*, String*);

    // POST path and body
    int post(const char* path, const char* body);
    // POST path and body and response
    int post(const char* path, const char* body, String*);

    // PUT path and body
    int put(const char* path, const char* body);
    // PUT path and body and response
    int put(const char* path, const char* body, String*);

    // DELETE path
    int del(const char*);
    // DELETE path and body
    int del(const char*, const char*);
    // DELETE path and response
    int del(const char*, String*);
    // DELETE path and body and response
    int del(const char*, const char*, String*);

  private:
    TCPClient client;
    int readResponse(String*);
    void write(const char*);
    const char* host;
    int port;
    int num_headers;
    const char* headers[10];
    boolean contentTypeSet;
};</code></pre> 
      <hr> 
      <h1>sample output</h1> 
      <p></p>
      <pre><code class="cpp">Response body from server: {"time":{"updated":"Jun 27, 2014 05:07:00 UTC","updatedISO":"2014-06-27T05:07:00+00:00","updateduk":"Jun 27, 2014 at 06:07 BST"},"disclaimer":"This data was produced from the CoinDesk Bitcoin Price Index (USD). Non-USD currency data converted using hourly conversion rate from openexchangerates.org","bpi":{"USD":{"code":"USD","rate":"580.6150","description":"United States Dollar","rate_float":580.615}}}

Parsed successfully.
Token 0, type: 1 size: 6 start: 0 end: 405
Token 1, type: 3 size: 0 start: 2 end: 6
Token 2, type: 1 size: 6 start: 8 end: 128
Token 3, type: 3 size: 0 start: 10 end: 17
Token 4, type: 3 size: 0 start: 20 end: 45
Token 5, type: 3 size: 0 start: 48 end: 58
Token 6, type: 3 size: 0 start: 61 end: 86
Token 7, type: 3 size: 0 start: 89 end: 98
Token 8, type: 3 size: 0 start: 101 end: 126
Token 9, type: 3 size: 0 start: 130 end: 140
Token 10, type: 3 size: 0 start: 143 end: 298
Token 11, type: 3 size: 0 start: 301 end: 304
Token 12, type: 1 size: 2 start: 306 end: 404
Token 13, type: 3 size: 0 start: 308 end: 311
Token 14, type: 1 size: 8 start: 313 end: 403
Token 15, type: 3 size: 0 start: 315 end: 319
Token 16, type: 3 size: 0 start: 322 end: 325
Token 17, type: 3 size: 0 start: 328 end: 332
Token 18, type: 3 size: 0 start: 335 end: 343
Token 19, type: 3 size: 0 start: 346 end: 357
Token 20, type: 3 size: 0 start: 360 end: 380
Token 21, type: 3 size: 0 start: 383 end: 393
Token 22, type: 0 size: 0 start: 395 end: 402

Token[17]: rate
Token[18]: 580.6150</code></pre> 
      <hr> 
      <h1>Web IDE file structure</h1> 
      <p><a href="http://i.imgur.com/w6YcCOf.png" target="_blank"><img src="http://i.imgur.com/w6YcCOf.png" width="690" height="206"></a></p> 
     </div> 
     <meta itemprop="interactionCount" content="UserLikes:6"> 
     <meta itemprop="interactionCount" content="UserComments:0"> 
     <meta itemprop="headline" content="Bitcoin Price Index JSON Parse TCP Client"> 
     <hr> 
     <a href="http://community.spark.io/t/arduinojson-for-the-web-ide/6897/2">ArduinoJson for the web IDE</a> 
     <hr> 
     <a href="http://community.spark.io/t/https-request-from-spark-core/5376/8">HTTPS Request from Spark Core?</a> 
     <hr> 
     <a href="https://community.spark.io/t/http-post-and-return-body-handle/9977/4">HTTP POST and return body handle</a> 
     <hr> 
     <a href="https://community.spark.io/t/transit-bus-beacon-code-help-please-to-make-it-better/9992">Transit bus beacon: Code help please to make it better</a> 
     <hr> 
    </div> 
    <div itemscope itemtype="http://schema.org/DiscussionForumPosting"> 
     <div class="creator"> 
      <span> <a href="/u/Dave"><b itemprop="author">Dave</b></a> <time datetime="2014-06-27T14:33:07Z" itemprop="datePublished"> 2014-06-27 14:33:07 UTC </time> </span> 
      <span itemprop="position">#2</span> 
     </div> 
     <div class="post" itemprop="articleBody"> 
      <p>That's awesome! JSON parsing, Rest clients all on the core, nice! <img src="//community.spark.io/images/emoji/emoji_one/smile.png" title=":smile:" class="emoji" alt="smile" width="20" height="20"> </p> 
     </div> 
     <meta itemprop="interactionCount" content="UserLikes:1"> 
     <meta itemprop="interactionCount" content="UserComments:0"> 
     <meta itemprop="headline" content="Bitcoin Price Index JSON Parse TCP Client"> 
     <hr> 
    </div> 
    <div itemscope itemtype="http://schema.org/DiscussionForumPosting"> 
     <div class="creator"> 
      <span> <a href="/u/Hootie81"><b itemprop="author">Hootie81</b></a> <time datetime="2014-06-27T20:05:15Z" itemprop="datePublished"> 2014-06-27 20:05:15 UTC </time> </span> 
      <span itemprop="position">#3</span> 
     </div> 
     <div class="post" itemprop="articleBody"> 
      <p>Very nice, heaps of little goodies in there!</p> 
     </div> 
     <meta itemprop="interactionCount" content="UserLikes:1"> 
     <meta itemprop="interactionCount" content="UserComments:0"> 
     <meta itemprop="headline" content="Bitcoin Price Index JSON Parse TCP Client"> 
     <hr> 
    </div> 
    <div itemscope itemtype="http://schema.org/DiscussionForumPosting"> 
     <div class="creator"> 
      <span> <a href="/u/hassaan22"><b itemprop="author">hassaan22</b></a> <time datetime="2014-06-27T20:13:41Z" itemprop="datePublished"> 2014-06-27 20:13:41 UTC </time> </span> 
      <span itemprop="position">#4</span> 
     </div> 
     <div class="post" itemprop="articleBody"> 
      <p>This is great! Thanks for doing this. However, I am having such a hard time understanding this, not because the code is confusing, but because I do not really know that basics of header and .cpp files. </p> 
      <p>What is the best way I can learn about and learn to utilize these files? Are there any recommended tutorials that I can reference?<br>Thanks! </p> 
     </div> 
     <meta itemprop="interactionCount" content="UserLikes:1"> 
     <meta itemprop="interactionCount" content="UserComments:0"> 
     <meta itemprop="headline" content="Bitcoin Price Index JSON Parse TCP Client"> 
     <hr> 
    </div> 
    <div itemscope itemtype="http://schema.org/DiscussionForumPosting"> 
     <div class="creator"> 
      <span> <a href="/u/BDub"><b itemprop="author">BDub</b></a> <time datetime="2014-06-27T20:57:30Z" itemprop="datePublished"> 2014-06-27 20:57:30 UTC </time> </span> 
      <span itemprop="position">#5</span> 
     </div> 
     <div class="post" itemprop="articleBody"> 
      <p><a class="mention" href="/users/hassaan22">@hassaan22</a>, basically these are two Libraries that I've included in my BitCoin application. Each library consists of a Class source file (.cpp) and Class definition file (.h), also referred to as the Implementation and Declaration respectively.</p> 
      <p>It's just a nice way to package up these functions to make them easier to use and extend, while at the same time compartmentalizing them which helps to protect certain functions and memory from being accessed accidentally.</p> 
      <p>Lots of resources on the web to help explain this:</p> 
      <p><a href="http://playground.arduino.cc/Code/Library" class="onebox" target="_blank">http://playground.arduino.cc/Code/Library</a></p> 
      <p><a href="http://www.learncpp.com/cpp-tutorial/19-header-files" class="onebox" target="_blank">http://www.learncpp.com/cpp-tutorial/19-header-files</a></p> 
      <p><a href="http://www.tutorialspoint.com/cprogramming/c_header_files.htm" class="onebox" target="_blank">http://www.tutorialspoint.com/cprogramming/c_header_files.htm</a></p> 
     </div> 
     <meta itemprop="interactionCount" content="UserLikes:3"> 
     <meta itemprop="interactionCount" content="UserComments:0"> 
     <meta itemprop="headline" content="Bitcoin Price Index JSON Parse TCP Client"> 
     <hr> 
    </div> 
    <!-- :preload-content --> 
    <footer> 
     <nav itemscope itemtype="http://schema.org/SiteNavigationElement"> 
      <a href="/">Home</a> 
      <a href="/categories">Categories</a> 
      <a href="/guidelines">FAQ/Guidelines</a> 
      <a href="/tos">Terms of Service</a> 
      <a href="/privacy">Privacy Policy</a> 
     </nav> 
    </footer> 
   </div> 
   <footer id="noscript-footer"> 
    <p>Powered by <a href="http://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p> 
   </footer> 
  </noscript> 
  <div id="top-navbar" class="container"> 
   <div class="wrap"> 
    <ul id="top-navbar-links"> 
     <li><a href="http://docs.particle.io">Docs</a></li> 
     <li><a href="https://www.particle.io/support">Support</a></li> 
     <li><a href="http://blog.particle.io/">Blog</a></li> 
     <li><a href="http://particle.hackster.io">Projects</a></li> 
     <li><a href="https://store.particle.io/">Store</a></li> 
     <li><a href="https://console.particle.io/">Console</a></li> 
     <li><a href="https://build.particle.io/build">IDE</a></li> 
    </ul> 
   </div> 
  </div> 
  <script>
function doLink(){
    var panel_list_items = $('.panel .icons li');
    if(panel_list_items==null){
        return;
    }
    if($('.login-button').length === 1) {
        if(panel_list_items.length>2){
            return;
        }
    } else if ($('.login-button').length === 0) {
        if(panel_list_items.length>3){
            return;
        }
    }
    /*
     store_base_url = 'https://store.particle.io?utm_source=sparkCommunity';
     var store_btn = '<li><a class="store-btn icon" target="_blank" href="'+ store_base_url +'">Buy Now</a></li>'
     $('.icons').prepend(store_btn);
     */

}

function addUTMContent() {
    var topic = location.href.split('/')[4];
    if(topic) {
      var utm_content = "&utm_content=" + topic;
      $('a[href^="https://store.particle.io"]').attr('href', store_base_url + utm_content);
    }
}

window.onload = function() {
    doLink();
    addUTMContent();
    var oldLocation = location.href;
    setInterval(function() {
      doLink();
      if(location.href != oldLocation) {
           addUTMContent();
           oldLocation = location.href
      }
    }, 1000); // check every second

}



</script> 
  <section id="main"> 
  </section> 
  <div id="offscreen-content"> 
  </div> 
  <form id="hidden-login-form" method="post" action="/login" style="display: none;"> 
   <input name="username" type="text" id="signin_username"> 
   <input name="password" type="password" id="signin_password"> 
   <input name="redirect" type="hidden"> 
   <input type="submit" id="signin-button" value="Log In"> 
  </form> 
  <script>
      (function() {
        var ps = require('preload-store').default;
          ps.store("site", {"default_archetype":"regular","notification_types":{"mentioned":1,"replied":2,"quoted":3,"edited":4,"liked":5,"private_message":6,"invited_to_private_message":7,"invitee_accepted":8,"posted":9,"moved_post":10,"linked":11,"granted_badge":12,"invited_to_topic":13,"custom":14,"group_mentioned":15,"group_message_summary":16,"watching_first_post":17},"post_types":{"regular":1,"moderator_action":2,"small_action":3,"whisper":4},"groups":[{"id":1,"name":"admins"},{"id":45,"name":"announcements"},{"id":44,"name":"beta"},{"id":47,"name":"champions"},{"id":54,"name":"e0_beta"},{"id":48,"name":"electronBeta"},{"id":41,"name":"elite"},{"id":0,"name":"everyone"},{"id":50,"name":"ideBeta"},{"id":46,"name":"ifttt"},{"id":2,"name":"moderators"},{"id":52,"name":"only-suda"},{"id":42,"name":"particle"},{"id":53,"name":"raspberrypi_beta"},{"id":3,"name":"staff"},{"id":49,"name":"Testing_group"},{"id":10,"name":"trust_level_0"},{"id":11,"name":"trust_level_1"},{"id":12,"name":"trust_level_2"},{"id":13,"name":"trust_level_3"},{"id":14,"name":"trust_level_4"}],"filters":["latest","unread","new","read","posted","bookmarks"],"periods":["all","yearly","quarterly","monthly","weekly","daily"],"top_menu_items":["latest","unread","new","read","posted","bookmarks","category","categories","top"],"anonymous_top_menu_items":["latest","top","categories","category","categories","top"],"uncategorized_category_id":12,"is_readonly":false,"disabled_plugins":[],"user_field_max_length":2048,"suppressed_from_homepage_category_ids":[],"post_action_types":[{"name_key":"bookmark","name":"Bookmark","description":"Bookmark this post","long_form":"bookmarked this post","is_flag":false,"icon":null,"id":1,"is_custom_flag":false},{"name_key":"like","name":"Like","description":"Like this post","long_form":"liked this","is_flag":false,"icon":"heart","id":2,"is_custom_flag":false},{"name_key":"off_topic","name":"Off-Topic","description":"This post is not relevant to the current discussion as defined by the title and first post, and should probably be moved elsewhere.","long_form":"flagged this as off-topic","is_flag":true,"icon":null,"id":3,"is_custom_flag":false},{"name_key":"inappropriate","name":"Inappropriate","description":"This post contains content that a reasonable person would consider offensive, abusive, or a violation of <a href=\"/guidelines\">our community guidelines<\/a>.","long_form":"flagged this as inappropriate","is_flag":true,"icon":null,"id":4,"is_custom_flag":false},{"name_key":"vote","name":"Vote","description":"Vote for this post","long_form":"voted for this post","is_flag":false,"icon":null,"id":5,"is_custom_flag":false},{"name_key":"spam","name":"Spam","description":"This post is an advertisement. It is not useful or relevant to the current topic, but promotional in nature.","long_form":"flagged this as spam","is_flag":true,"icon":null,"id":8,"is_custom_flag":false},{"name_key":"notify_user","name":"Send @{{username}} a message","description":"I want to talk to this person directly and privately about their post.","long_form":"messaged user","is_flag":true,"icon":null,"id":6,"is_custom_flag":true},{"name_key":"notify_moderators","name":"Something Else","description":"This post requires staff attention for another reason not listed above.","long_form":"flagged this for staff attention","is_flag":true,"icon":null,"id":7,"is_custom_flag":true}],"topic_flag_types":[{"name_key":"inappropriate","name":"Inappropriate","description":"This topic contains content that a reasonable person would consider offensive, abusive, or a violation of <a href=\"/guidelines\">our community guidelines<\/a>.","long_form":"flagged this as inappropriate","is_flag":true,"icon":null,"id":4,"is_custom_flag":false},{"name_key":"spam","name":"Spam","description":"This topic is an advertisement. It is not useful or relevant to this site, but promotional in nature.","long_form":"flagged this as spam","is_flag":true,"icon":null,"id":8,"is_custom_flag":false},{"name_key":"notify_moderators","name":"Something Else","description":"This topic requires general staff attention based on the <a href=\"/guidelines\">guidelines<\/a>, <a href=\"https://www.particle.io/tos\">TOS<\/a>, or for another reason not listed above.","long_form":"flagged this for moderator attention","is_flag":true,"icon":null,"id":7,"is_custom_flag":true}],"can_create_tag":false,"can_tag_topics":false,"topic_featured_link_allowed_category_ids":[12,23,18,19,20,11,25,28,5,35,24,15,17,33,14,29,27,38,36,39,37,16,31,30,9,7,34,3,4,26,22,8,10,13,2],"categories":[{"id":37,"name":"Jobs","color":"283890","text_color":"FFFFFF","slug":"jobs","topic_count":2,"post_count":7,"position":0,"description":"Welcome to Particle's <strong>Jobs<\/strong> Category!","description_text":"Welcome to Particle's Jobs Category!","topic_url":"/t/about-the-jobs-category/28317","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":12,"name":"uncategorized","color":"AB9364","text_color":"FFFFFF","slug":"uncategorized","topic_count":269,"post_count":2446,"position":2,"description":"Topics that don't need a category, or don't fit into any other existing category.","description_text":"","topic_url":"/t//","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":2,"name":"Cloud Software","color":"F7941D","text_color":"FFFFFF","slug":"cloud-software","topic_count":1187,"post_count":8704,"position":3,"description":"Questions and discussions regarding the Cloud, API and networking software.  ","description_text":"Questions and discussions regarding the Cloud, API and networking software.","topic_url":"/t/what-is-the-cloud-software-category/5","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":3,"name":"Firmware","color":"F7941D","text_color":"FFFFFF","slug":"firmware","topic_count":2149,"post_count":18773,"position":4,"description":"Questions and discussion about the system software that runs on the Particle device itself.","description_text":"Questions and discussion about the system software that runs on the Particle device itself.","topic_url":"/t/what-is-the-firmware-category/6","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":4,"name":"Hardware","color":"F1592A","text_color":"FFFFFF","slug":"hardware","topic_count":1389,"post_count":12121,"position":5,"description":"Questions and discussions about the hardware aspects of the Particle devices, shields and accessories.","description_text":"Questions and discussions about the hardware aspects of the Particle devices, shields and accessories.","topic_url":"/t/what-is-the-hardware-category/7","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":5,"name":"Kickstarter","color":"283890","text_color":"FFFFFF","slug":"kickstarter","topic_count":20,"post_count":189,"position":6,"description":"Kickstarter topics!<br>","description_text":"Kickstarter topics!","topic_url":"/t/what-is-the-kickstarter-category/8","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":7,"name":"Getting Started","color":"3AB54A","text_color":"FFFFFF","slug":"getting-started","topic_count":1039,"post_count":8794,"position":7,"description":"Getting started with using the Particle devices, making or programming","description_text":"Getting started with using the Particle devices, making or programming","topic_url":"/t/what-is-the-getting-started-category/10","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":8,"name":"Project Share","color":"92278F","text_color":"FFFFFF","slug":"project-share","topic_count":641,"post_count":7293,"position":8,"description":"Share ideas, code and stories about Particle based projects.","description_text":"Share ideas, code and stories about Particle based projects.","topic_url":"/t/what-is-the-project-share-category/11","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":9,"name":"General","color":"3AB54A","text_color":"FFFFFF","slug":"general","topic_count":2567,"post_count":20670,"position":9,"description":"When there is no other category, General is the way to go.","description_text":"When there is no other category, General is the way to go.","topic_url":"/t/what-is-the-general-category/16","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":13,"name":"Tutorials","color":"92278F","text_color":"FFFFFF","slug":"tutorials","topic_count":156,"post_count":2213,"position":10,"description":"This category is for how-tos and tutorials for the Particle devices and related projects.","description_text":"This category is for how-tos and tutorials for the Particle devices and related projects.","topic_url":"/t/category-definition-for-tutorials/659","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":10,"name":"Troubleshooting","color":"BF1E2E","text_color":"FFFFFF","slug":"troubleshooting","topic_count":5162,"post_count":45711,"position":11,"description":"If you're having trouble with your Particle device or the Particle Cloud, here's the place to get help.","description_text":"If you're having trouble with your Particle device or the Particle Cloud, here's the place to get help.","topic_url":"/t/category-definition-for-troubleshooting/546","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":14,"name":"Libraries","color":"F7941D","text_color":"FFFFFF","slug":"libraries","topic_count":740,"post_count":10299,"position":12,"description":"Use the Libraries category to discuss porting existing Arduino/Wiring libraries to the Particle device.  Be sure to put the name of the library in the topic title.  So that everyone can find the latest information on a particular library, try to keep one topic per library.","description_text":"Use the Libraries category to discuss porting existing Arduino/Wiring libraries to the Particle device.  Be sure to put the name of the library in the topic title.  So that everyone can find the latest information on a particular library, try to keep one topic per library.","topic_url":"/t/category-definition-for-libraries/934","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":36,"name":"Raspberry Pi","color":"BF1E2E","text_color":"FFFFFF","slug":"raspberry-pi","topic_count":92,"post_count":641,"position":15,"description":"This is a category of the Particle community forums reserved for conversation about Raspberry Pi compatibility with the Particle ecosystem!","description_text":"This is a category of the Particle community forums reserved for conversation about Raspberry Pi compatibility with the Particle ecosystem!","topic_url":"/t/about-the-raspberry-pi-category/27336","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":16,"name":"Meta","color":"BF1E2E","text_color":"652D90","slug":"meta","topic_count":42,"post_count":262,"position":16,"description":"Discussion about this forum, its organization, how it works, and how we can improve it.","description_text":"Discussion about this forum, its organization, how it works, and how we can improve it.","topic_url":"/t/category-definition-for-meta/2656","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":22,"name":"Product Creation","color":"283890","text_color":"FFFFFF","slug":"product-creation","topic_count":205,"post_count":1704,"position":19,"description":"From Prototype to Production: How to build a connected product using Particle OS as your connectivity and messaging platform. Particle OS is designed to scale with your project. Leverage our development kits for proof of concept and prototyping and as you being designing for production, move to our modules.","description_text":"From Prototype to Production: How to build a connected product using Particle OS as your connectivity and messaging platform. Particle OS is designed to scale with your project. Leverage our development kits for proof of concept and prototyping and as you being designing for production, move to our modules.","topic_url":"/t/about-the-product-creation-category/8388","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":23,"name":"IFTTT","color":"F7941D","text_color":"FFFFFF","slug":"ifttt","topic_count":101,"post_count":632,"position":20,"description":"Welcome to Particle + IFTTT! This category has been created to share ideas, feedback and recipes related to the IFTTT Particle Channel.","description_text":"Welcome to Particle + IFTTT! This category has been created to share ideas, feedback and recipes related to the IFTTT Particle Channel.","topic_url":"/t/about-the-ifttt-category/8571","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":26,"name":"Mobile","color":"F7941D","text_color":"FFFFFF","slug":"mobile","topic_count":240,"post_count":1464,"position":24,"description":"Discussions of iOS and Android applications for Particle, particularly those involving the Mobile SDK.","description_text":"Discussions of iOS and Android applications for Particle, particularly those involving the Mobile SDK.","topic_url":"/t/about-the-mobile-category/11257","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":27,"name":"Particle Updates","color":"00adef","text_color":"FFFFFF","slug":"particle-updates","topic_count":59,"post_count":585,"position":25,"description":"Any Particle announcements or special hangouts, such as Particle Matter and Particle Interactions, will be posted here.","description_text":"Any Particle announcements or special hangouts, such as Particle Matter and Particle Interactions, will be posted here.","topic_url":"/t/about-the-particle-updates-category/14322","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":28,"name":"Polls","color":"00adef","text_color":"FFFFFF","slug":"polls","topic_count":8,"post_count":176,"position":26,"description":"Particle will post a weekly poll in this category. It could be super whimsical, like your favorite color! It could be semi-serious, like your preferred programming language for microcontrollers!","description_text":"Particle will post a weekly poll in this category. It could be super whimsical, like your favorite color! It could be semi-serious, like your preferred programming language for microcontrollers!","topic_url":"/t/about-the-polls-category/14323","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":30,"name":"Community Resources","color":"12A89D","text_color":"FFFFFF","slug":"community-resources","topic_count":35,"post_count":192,"position":28,"description":"A place for the discussion of non-forum community resources, such as the <a href=\"http://docs.particle.io\">docs<\/a>, <a href=\"http://particle-collider.slack.com\">developer Slack<\/a>, <a href=\"http://trello.com/particledevelopers\">developer Trello<\/a>, IRC, and more.","description_text":"A place for the discussion of non-forum community resources, such as the docs, developer Slack, developer Trello, IRC, and more.","topic_url":"/t/about-the-resources-category/15515","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":34,"name":"Libs 2.0 Beta","color":"F7941D","text_color":"FFFFFF","slug":"libs2","topic_count":25,"post_count":180,"position":31,"description":"We have been hard at work on improvements to the Particle development tools.","description_text":"We have been hard at work on improvements to the Particle development tools.","topic_url":"/t/about-the-ide-2-0-category/25352","read_restricted":false,"permission":null,"parent_category_id":38,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":38,"name":"Beta","color":"AB9364","text_color":"FFFFFF","slug":"beta","topic_count":0,"post_count":0,"position":33,"description":"The beta category is a place where feedback and conversations about Particle beta programs occur. ","description_text":"The beta category is a place where feedback and conversations about Particle beta programs occur.","topic_url":"/t/about-the-beta-category/28473","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":true,"sort_order":"","sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":"latest","subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null}],"trust_levels":[{"id":0,"name":"new user"},{"id":1,"name":"basic user"},{"id":2,"name":"member"},{"id":3,"name":"regular"},{"id":4,"name":"leader"}],"archetypes":[{"id":"regular","name":"Regular Topic","options":[]},{"id":"banner","name":"Banner Topic","options":[]}],"user_fields":[{"id":1,"name":"Github","description":"List your Github username to get perks for PRs!","field_type":"text","editable":true,"required":false,"show_on_profile":true,"show_on_user_card":false,"position":0}]});
          ps.store("siteSettings", {"title":"Particle","contact_email":"will@particle.io","contact_url":"","logo_url":"https://s3.amazonaws.com/spark-website/particle-community.png","logo_small_url":"https://s3.amazonaws.com/spark-assets/spark-icon-75.png","mobile_logo_url":"","favicon_url":"https://s3.amazonaws.com/spark-assets/purple.ico","allow_user_locale":false,"suggested_topics":5,"track_external_right_clicks":false,"ga_universal_tracking_code":"","ga_universal_domain_name":"auto","ga_tracking_code":"UA-37038200-2","ga_domain_name":"community.particle.io","gtm_container_id":"","top_menu":"latest|new|unread|top|categories","post_menu":"like-count|like|share|flag|edit|bookmark|delete|admin|reply","post_menu_hidden_items":"flag|bookmark|edit|delete|admin","share_links":"twitter|facebook|email","desktop_category_page_style":"categories_and_latest_topics","category_colors":"BF1E2E|F1592A|F7941D|9EB83B|3AB54A|12A89D|25AAE2|0E76BD|652D90|92278F|ED207B|8C6238|231F20|808281|B3B5B4|283890","category_style":"bullet","enable_mobile_theme":true,"relative_date_duration":30,"fixed_category_positions":true,"fixed_category_positions_on_create":false,"enable_badges":true,"enable_badge_sql":false,"enable_whispers":false,"invite_only":false,"login_required":false,"must_approve_users":false,"enable_local_logins":true,"allow_new_registrations":true,"enable_signup_cta":true,"enable_google_oauth2_logins":false,"enable_yahoo_logins":false,"enable_twitter_logins":false,"enable_instagram_logins":false,"enable_facebook_logins":false,"enable_github_logins":false,"enable_sso":false,"sso_overrides_avatar":false,"min_username_length":3,"max_username_length":20,"min_password_length":10,"min_admin_password_length":15,"logout_redirect":"","full_name_required":false,"enable_names":true,"invites_per_page":40,"delete_user_max_post_age":60,"delete_all_posts_max":15,"show_email_on_profile":false,"prioritize_username_in_ux":true,"enable_user_directory":true,"allow_anonymous_posting":false,"anonymous_posting_min_trust_level":1,"hide_user_profiles_from_public":false,"enable_group_directory":true,"min_post_length":1,"min_first_post_length":20,"min_private_message_post_length":10,"max_post_length":32000,"topic_featured_link_enabled":true,"min_topic_title_length":15,"max_topic_title_length":255,"min_private_message_title_length":2,"allow_uncategorized_topics":false,"min_title_similar_length":10,"min_body_similar_length":15,"enable_private_messages":true,"edit_history_visible_to_public":true,"delete_removed_posts_after":24,"traditional_markdown_linebreaks":false,"allow_html_tables":false,"suppress_reply_directly_below":true,"suppress_reply_directly_above":true,"max_reply_history":1,"newuser_max_images":2,"newuser_max_attachments":2,"show_pinned_excerpt_mobile":true,"show_pinned_excerpt_desktop":true,"display_name_on_posts":false,"show_time_gap_days":7,"short_progress_text_threshold":10000,"default_code_lang":"auto","autohighlight_all_code":false,"highlighted_languages":"apache|bash|cs|cpp|css|coffeescript|diff|xml|http|ini|json|java|javascript|makefile|markdown|nginx|objectivec|ruby|perl|php|python|sql|handlebars","censored_words":"","censored_pattern":"","enable_emoji":true,"emoji_set":"emoji_one","code_formatting_style":"4-spaces-indent","allowed_href_schemes":"","email_time_window_mins":10,"disable_digest_emails":false,"email_in":false,"disable_emails":false,"bounce_score_threshold":4,"max_image_size_kb":3072,"max_attachment_size_kb":3072,"authorized_extensions":"jpg|jpeg|png|gif","max_image_width":690,"max_image_height":500,"prevent_anons_from_downloading_files":false,"enable_s3_uploads":false,"allow_profile_backgrounds":true,"allow_uploaded_avatars":true,"allow_animated_avatars":false,"default_avatars":"","external_system_avatars_enabled":true,"external_system_avatars_url":"/letter_avatar_proxy/v2/letter/{first_letter}/{color}/{size}.png","tl1_requires_read_posts":30,"tl3_links_no_follow":false,"use_admin_ip_whitelist":false,"max_oneboxes_per_post":50,"alert_admins_if_errors_per_minute":0,"alert_admins_if_errors_per_hour":0,"max_prints_per_hour_per_user":5,"enable_long_polling":true,"long_polling_base_url":"/","background_polling_interval":60000,"polling_interval":3000,"anon_polling_interval":15000,"flush_timings_secs":20,"verbose_localization":false,"max_new_topics":500,"tos_url":"https://www.particle.io/tos","privacy_policy_url":"https://www.particle.io/privacy","faq_url":"","maximum_backups":3,"min_search_term_length":3,"version_checks":true,"suppress_uncategorized_badge":true,"topic_views_heat_low":1000,"topic_views_heat_medium":2000,"topic_views_heat_high":5000,"topic_post_like_heat_low":0.5,"topic_post_like_heat_medium":1.0,"topic_post_like_heat_high":2.0,"history_hours_low":12,"history_hours_medium":24,"history_hours_high":48,"cold_age_days_low":14,"cold_age_days_medium":90,"cold_age_days_high":180,"global_notice":"","show_create_topics_notice":true,"bootstrap_mode_min_users":50,"bootstrap_mode_enabled":false,"automatically_unpin_topics":true,"read_time_word_count":500,"disable_mailing_list_mode":false,"default_topics_automatic_unpin":true,"tagging_enabled":false,"tag_style":"simple","max_tags_per_topic":5,"max_tag_length":20,"min_trust_level_to_tag_topics":0,"max_tag_search_results":5,"show_filter_by_tag":false,"tags_sort_alphabetically":false,"staff_tags":"","suppress_overlapping_tags_in_list":false,"poll_enabled":true,"poll_maximum_options":20,"solved_enabled":true,"allow_solved_on_all_topics":true,"accept_all_solutions_trust_level":4,"empty_box_on_unsolved":false,"data_explorer_enabled":true,"staff_notes_enabled":true,"details_enabled":true,"available_locales":"ar|bs_BA|cs|da|de|el|en|es|et|fa_IR|fi|fr|gl|he|id|it|ja|ko|nb_NO|nl|pl_PL|pt|pt_BR|ro|ru|sk|sq|sv|te|tr_TR|uk|ur|vi|zh_CN|zh_TW"});
          ps.store("customHTML", {"top":"\n\n\n","footer":"\n\n\n"});
          ps.store("banner", {"html":"<p><strong>Particle is hiring!<\/strong> Visit <a href=\"https://jobs.lever.co/particle/\">http://www.particle.io/jobs<\/a> for a list of open positions in marketing, sales, customer success, people operations, and engineering!<\/p>","key":21903,"url":"https://community.particle.io/t/particle-is-hiring/21903"});
          ps.store("customEmoji", [{"name":"doge","url":"/uploads/default/original/2X/0/058a58404ef68f23ffee028067af2bf8563d1cf7.png"},{"name":"particle","url":"/uploads/default/original/2X/3/3e88cec44c12fe9da9a3f0d95b6cb265d6526bb7.png"},{"name":"spark","url":"/uploads/default/original/2X/d/dc266b4fc14a1b9dec918e4d792f18fcd054d9ce.png"}]);
          ps.store("translationOverrides", {});
          ps.store("topic_5383", {"post_stream":{"posts":[{"id":29282,"name":"Brett Walach","username":"BDub","avatar_template":"/user_avatar/community.particle.io/bdub/{size}/5137_1.png","created_at":"2014-06-27T05:26:17.292Z","cooked":"<p><a href=\"http://coedmagazine.files.wordpress.com/2014/01/bitcoin.jpg?w=600&amp;h=350\" target=\"_blank\"><img src=\"http://coedmagazine.files.wordpress.com/2014/01/bitcoin.jpg?w=600&amp;h=350\" width=\"600\" height=\"350\"><\/a><\/p>\n\n<p>Here's a full example of a Bitcoin Price Index JSON parsing TCP Client.  The end result is the BPI value as a Double precision variable that you can work with.  Remember you have to open a serial terminal after you boot your Core, then press ENTER.  Successive presses of ENTER will perform another GET request.  Modify to suit your own needs for total world domination!<\/p>\n\n<p><em>Note: This is a unsecure HTTP request... do NOT use this code to buy or sell bitcoins.<\/em><br>Keep it fluffy people <img src=\"//community.spark.io/images/emoji/emoji_one/sparkles.png\" title=\":sparkles:\" class=\"emoji\" alt=\"sparkles\" width=\"20\" height=\"20\"> <img src=\"//community.spark.io/images/emoji/emoji_one/sparkling_heart.png\" title=\":sparkling_heart:\" class=\"emoji\" alt=\"sparkling_heart\" width=\"20\" height=\"20\"> <img src=\"//community.spark.io/images/emoji/emoji_one/spark.png\" title=\":spark:\" class=\"emoji\" alt=\"spark\" width=\"20\" height=\"20\"> <img src=\"//community.spark.io/images/emoji/emoji_one/rainbow.png\" title=\":rainbow:\" class=\"emoji\" alt=\"rainbow\" width=\"20\" height=\"20\">  <\/p>\n\n<h1>BitcoinPrice.ino<\/h1>\n\n<p><\/p><pre><code class=\"cpp\">/* \n * Bitcoin Price Index JSON Parsing TCP Client Example\n * BDub @ Technobly.com 6/27/2014\n * LICENSE: MIT (C) 2014 BDub\n *\n */\n\n#pragma SPARK_NO_PREPROCESSOR\n\n#include \"application.h\"\n#include \"rest_client.h\"\n#include \"jsmnSpark.h\"\n\n#define TOKEN_STRING(js, t, s) \\\n\t(strncmp(js+(t).start, s, (t).end - (t).start) == 0 \\\n\t&amp;&amp; strlen(s) == (t).end - (t).start)\n\n#define TOKEN_PRINT(t) \\\n\tSerial.print(\", type: \"); Serial.print((t).type); Serial.print(\" size: \"); Serial.print((t).size); \\\n\tSerial.print(\" start: \"); Serial.print((t).start); Serial.print(\" end: \"); Serial.println((t).end)\n\n/* IMPORTANT TO CHANGE THE NUMBER OF TOKENS TO MATCH YOUR DATA CLOSELY */\n#define NUM_TOKENS 23\n#define MAX_OBJ_SIZE 50\n#define HOSTNAME \"api.coindesk.com\"\n\nRestClient client = RestClient(HOSTNAME);\nString response;\n\nvoid setup() {\n  Serial.begin(9600); // Make sure serial terminal is closed before powering up Core\n  while(!Serial.available()) SPARK_WLAN_Loop(); // Open serial terminal now, and press ENTER\n}\n\nvoid loop() {\n  int i, r;\n  jsmn_parser p;\n  jsmntok_t tok[NUM_TOKENS];\n  char obj[MAX_OBJ_SIZE];\n\n  // Press ENTER in your serial terminal to continue...\n  if (!Serial.available())\n    return;\n\n  obj[0] = Serial.read(); // Flush the serial buffer to pause next time through\n\n  response = \"\"; // Clear the response String\n\n  // GET request\n  int statusCode = client.get(\"/v1/bpi/currentprice/USD.json\", &amp;response);\n\n  // Uncomment following line to force a test response, real response will not have all of these escaped characters\n  //response = \"{\\\"time\\\":{\\\"updated\\\":\\\"Jun 27, 2014 04:17:00 UTC\\\",\\\"updatedISO\\\":\\\"2014-06-27T04:17:00+00:00\\\",\\\"updateduk\\\":\\\"Jun 27, 2014 at 05:17 BST\\\"},\\\"disclaimer\\\":\\\"This data was produced from the CoinDesk Bitcoin Price Index (USD). Non-USD currency data converted using hourly conversion rate from openexchangerates.org\\\",\\\"bpi\\\":{\\\"USD\\\":{\\\"code\\\":\\\"USD\\\",\\\"rate\\\":\\\"577.6150\\\",\\\"description\\\":\\\"United States Dollar\\\",\\\"rate_float\\\":577.615}}}\";\n\n  if(statusCode != 200) {\n    Serial.print(\"Error code from server: \");\n    Serial.println(statusCode);\n    return;\n  }\n\n  Serial.print(\"Response body from server: \");\n  Serial.println(response);\n  Serial.println(\" \");\n\n  // Parse response from server\n  jsmn_init(&amp;p);\n  r = jsmn_parse(&amp;p, response.c_str(), tok, NUM_TOKENS);\n\n  // Determine status code\n  if (r == JSMN_SUCCESS) {\n    Serial.println(\"Parsed successfully.\");\n  }\n  else if(r == JSMN_ERROR_INVAL) {\n    Serial.println(\"Bad token, JSON string is corrupted!\");\n    return;\n  }\n  else if(r == JSMN_ERROR_NOMEM) {\n    Serial.println(\"Not enough tokens, JSON string is too large! Increase NUM_TOKENS.\");\n    return;\n  }\n  else if(r == JSMN_ERROR_PART) {\n    Serial.println(\"JSON string is too short, expecting more JSON data!\");\n    return;\n  }\n  else {\n    Serial.println(\"Parse failed! Unknown Error.\");\n    return;\n  }\n\n  // Print out a list of Tokens\n  for (i = 0; i &lt; NUM_TOKENS; i++) {\n    Serial.print(\"Token \");\n    Serial.print(i);\n    TOKEN_PRINT(tok[i]);\n    delay(10);\n  }\n\n  // Convert 17th token to string\n  i = 17;\n  strlcpy(obj, &amp;response.c_str()[tok[i].start], (tok[i].end - tok[i].start + 1));\n  Serial.print(\"\\nToken[\"); Serial.print(i); Serial.print(\"]: \");\n  Serial.println(obj);  // Print it out now just in case it's not the right one, \n                        // we'll get and idea of where we are in the object\n\n  // Does this token == \"rate\" ?\n  if ( TOKEN_STRING(response.c_str(), tok[i], \"rate\") )\n  {\n    // Convert next token to string\n    i++;\n\tstrlcpy(obj, &amp;response.c_str()[tok[i].start], (tok[i].end - tok[i].start + 1));\n\n\t// Convert string to double, contains numerical value of Bitcoin Price Index\n\tdouble bpi = strtod(obj, NULL);\n\n\t// Print double out to 4 decimal places\n\tSerial.print(\"Token[\"); Serial.print(i); Serial.print(\"]: \");\n\tSerial.println(bpi, 4);\n\n\t// Take control of the RGB LED\n\tRGB.control(true);\n\n\t// Change the RGB's color to GREEN\n\tRGB.color(0, 255, 0);\n\n\t// Delay for one second\n\tdelay(1000);\n\n\t// Release control of the RGB LED\n\tRGB.control(false);\n  }\n  else {\n    Serial.println(\"'rate' token not found\");\n  }\n}\n\n<\/code><\/pre>\n\n<hr>\n\n<h1>jsmnSpark.cpp<\/h1>\n\n<p><\/p><pre><code class=\"cpp\">#include \"application.h\"\n#include \"jsmnSpark.h\"\n\n/**\n * Allocates a fresh unused token from the token pull.\n */\n\nstatic jsmntok_t *jsmn_alloc_token(jsmn_parser *parser, \n\t\tjsmntok_t *tokens, size_t num_tokens) {\n\tjsmntok_t *tok;\n\tif (parser-&gt;toknext &gt;= num_tokens) {\n\t\treturn NULL;\n\t}\n\ttok = &amp;tokens[parser-&gt;toknext++];\n\ttok-&gt;start = tok-&gt;end = -1;\n\ttok-&gt;size = 0;\n#ifdef JSMN_PARENT_LINKS\n\ttok-&gt;parent = -1;\n#endif\n\treturn tok;\n}\n\n/**\n * Fills token type and boundaries.\n */\nstatic void jsmn_fill_token(jsmntok_t *token, jsmntype_t type, \n                            int start, int end) {\n\ttoken-&gt;type = type;\n\ttoken-&gt;start = start;\n\ttoken-&gt;end = end;\n\ttoken-&gt;size = 0;\n}\n\n/**\n * Fills next available token with JSON primitive.\n */\nstatic jsmnerr_t jsmn_parse_primitive(jsmn_parser *parser, const char *js,\n\t\tjsmntok_t *tokens, size_t num_tokens) {\n\tjsmntok_t *token;\n\tint start;\n\n\tstart = parser-&gt;pos;\n\n\tfor (; js[parser-&gt;pos] != '\\0'; parser-&gt;pos++) {\n\t\tswitch (js[parser-&gt;pos]) {\n#ifndef JSMN_STRICT\n\t\t\t/* In strict mode primitive must be followed by \",\" or \"}\" or \"]\" */\n\t\t\tcase ':':\n#endif\n\t\t\tcase '\\t' : case '\\r' : case '\\n' : case ' ' :\n\t\t\tcase ','  : case ']'  : case '}' :\n\t\t\t\tgoto found;\n\t\t}\n\t\tif (js[parser-&gt;pos] &lt; 32 || js[parser-&gt;pos] &gt;= 127) {\n\t\t\tparser-&gt;pos = start;\n\t\t\treturn JSMN_ERROR_INVAL;\n\t\t}\n\t}\n#ifdef JSMN_STRICT\n\t/* In strict mode primitive must be followed by a comma/object/array */\n\tparser-&gt;pos = start;\n\treturn JSMN_ERROR_PART;\n#endif\n\nfound:\n\ttoken = jsmn_alloc_token(parser, tokens, num_tokens);\n\tif (token == NULL) {\n\t\tparser-&gt;pos = start;\n\t\treturn JSMN_ERROR_NOMEM;\n\t}\n\tjsmn_fill_token(token, JSMN_PRIMITIVE, start, parser-&gt;pos);\n#ifdef JSMN_PARENT_LINKS\n\ttoken-&gt;parent = parser-&gt;toksuper;\n#endif\n\tparser-&gt;pos--;\n\treturn JSMN_SUCCESS;\n}\n\n/**\n * Filsl next token with JSON string.\n */\nstatic jsmnerr_t jsmn_parse_string(jsmn_parser *parser, const char *js,\n\t\tjsmntok_t *tokens, size_t num_tokens) {\n\tjsmntok_t *token;\n\n\tint start = parser-&gt;pos;\n\n\tparser-&gt;pos++;\n\n\t// Skip starting quote\n\tfor (; js[parser-&gt;pos] != '\\0'; parser-&gt;pos++) {\n\t\tchar c = js[parser-&gt;pos];\n\n\t\t// Quote: end of string\n\t\tif (c == '\\\"') {\n\t\t\ttoken = jsmn_alloc_token(parser, tokens, num_tokens);\n\t\t\tif (token == NULL) {\n\t\t\t\tparser-&gt;pos = start;\n\t\t\t\treturn JSMN_ERROR_NOMEM;\n\t\t\t}\n\t\t\tjsmn_fill_token(token, JSMN_STRING, start+1, parser-&gt;pos);\n#ifdef JSMN_PARENT_LINKS\n\t\t\ttoken-&gt;parent = parser-&gt;toksuper;\n#endif\n\t\t\treturn JSMN_SUCCESS;\n\t\t}\n\n\t\t// Backslash: Quoted symbol expected\n\t\tif (c == '\\\\') {\n\t\t\tparser-&gt;pos++;\n\t\t\tswitch (js[parser-&gt;pos]) {\n\t\t\t\t// Allowed escaped symbols\n\t\t\t\tcase '\\\"': case '/' : case '\\\\' : case 'b' :\n\t\t\t\tcase 'f' : case 'r' : case 'n'  : case 't' :\n\t\t\t\t\tbreak;\n\t\t\t\t// Allows escaped symbol \\uXXXX\n\t\t\t\tcase 'u':\n\t\t\t\t\tparser-&gt;pos++;\n\t\t\t\t\t//int i = 0;\n\t\t\t\t\tfor(int i = 0; i &lt; 4 &amp;&amp; js[parser-&gt;pos] != '\\0'; i++) {\n\t\t\t\t\t\t// If it isn't a hex character we have an error\n\t\t\t\t\t\tif(!((js[parser-&gt;pos] &gt;= 48 &amp;&amp; js[parser-&gt;pos] &lt;= 57) || // 0-9\n\t\t\t\t\t\t\t\t\t(js[parser-&gt;pos] &gt;= 65 &amp;&amp; js[parser-&gt;pos] &lt;= 70) || // A-F\n\t\t\t\t\t\t\t\t\t(js[parser-&gt;pos] &gt;= 97 &amp;&amp; js[parser-&gt;pos] &lt;= 102))) { // a-f\n\t\t\t\t\t\t\tparser-&gt;pos = start;\n\t\t\t\t\t\t\treturn JSMN_ERROR_INVAL;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparser-&gt;pos++;\n\t\t\t\t\t}\n\t\t\t\t\tparser-&gt;pos--;\n\t\t\t\t\tbreak;\n\t\t\t\t// Unexpected symbol\n\t\t\t\tdefault:\n\t\t\t\t\tparser-&gt;pos = start;\n\t\t\t\t\treturn JSMN_ERROR_INVAL;\n\t\t\t}\n\t\t}\n\n\t}\n\tparser-&gt;pos = start;\n\treturn JSMN_ERROR_PART;\n}\n\n/**\n * Parse JSON string and fill tokens.\n */\njsmnerr_t jsmn_parse(jsmn_parser *parser, const char *js, jsmntok_t *tokens, \n\t\tunsigned int num_tokens) {\n\tjsmnerr_t r;\n\tint i;\n\tjsmntok_t *token;\n\n\tfor (; js[parser-&gt;pos] != '\\0'; parser-&gt;pos++) {\n\t\tchar c;\n\t\tjsmntype_t type;\n\n\t\tc = js[parser-&gt;pos];\n\t\tswitch (c) {\n\t\t\tcase '{': case '[':\n\t\t\t\ttoken = jsmn_alloc_token(parser, tokens, num_tokens);\n\t\t\t\tif (token == NULL)\n\t\t\t\t\treturn JSMN_ERROR_NOMEM;\n\t\t\t\tif (parser-&gt;toksuper != -1) {\n\t\t\t\t\ttokens[parser-&gt;toksuper].size++;\n#ifdef JSMN_PARENT_LINKS\n\t\t\t\t\ttoken-&gt;parent = parser-&gt;toksuper;\n#endif\n\t\t\t\t}\n\t\t\t\ttoken-&gt;type = (c == '{' ? JSMN_OBJECT : JSMN_ARRAY);\n\t\t\t\ttoken-&gt;start = parser-&gt;pos;\n\t\t\t\tparser-&gt;toksuper = parser-&gt;toknext - 1;\n\t\t\t\tbreak;\n\t\t\tcase '}': case ']':\n\t\t\t\ttype = (c == '}' ? JSMN_OBJECT : JSMN_ARRAY);\n#ifdef JSMN_PARENT_LINKS\n\t\t\t\tif (parser-&gt;toknext &lt; 1) {\n\t\t\t\t\treturn JSMN_ERROR_INVAL;\n\t\t\t\t}\n\t\t\t\ttoken = &amp;tokens[parser-&gt;toknext - 1];\n\t\t\t\tfor (;;) {\n\t\t\t\t\tif (token-&gt;start != -1 &amp;&amp; token-&gt;end == -1) {\n\t\t\t\t\t\tif (token-&gt;type != type) {\n\t\t\t\t\t\t\treturn JSMN_ERROR_INVAL;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoken-&gt;end = parser-&gt;pos + 1;\n\t\t\t\t\t\tparser-&gt;toksuper = token-&gt;parent;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (token-&gt;parent == -1) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttoken = &amp;tokens[token-&gt;parent];\n\t\t\t\t}\n#else\n\t\t\t\tfor (i = parser-&gt;toknext - 1; i &gt;= 0; i--) {\n\t\t\t\t\ttoken = &amp;tokens[i];\n\t\t\t\t\tif (token-&gt;start != -1 &amp;&amp; token-&gt;end == -1) {\n\t\t\t\t\t\tif (token-&gt;type != type) {\n\t\t\t\t\t\t\treturn JSMN_ERROR_INVAL;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparser-&gt;toksuper = -1;\n\t\t\t\t\t\ttoken-&gt;end = parser-&gt;pos + 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t/* Error if unmatched closing bracket */\n\t\t\t\tif (i == -1) return JSMN_ERROR_INVAL;\n\t\t\t\tfor (; i &gt;= 0; i--) {\n\t\t\t\t\ttoken = &amp;tokens[i];\n\t\t\t\t\tif (token-&gt;start != -1 &amp;&amp; token-&gt;end == -1) {\n\t\t\t\t\t\tparser-&gt;toksuper = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n#endif\n\t\t\t\tbreak;\n\t\t\tcase '\\\"':\n\t\t\t\tr = jsmn_parse_string(parser, js, tokens, num_tokens);\n\t\t\t\tif (r &lt; 0) return r;\n\t\t\t\tif (parser-&gt;toksuper != -1)\n\t\t\t\t\ttokens[parser-&gt;toksuper].size++;\n\t\t\t\tbreak;\n\t\t\tcase '\\t' : case '\\r' : case '\\n' : case ':' : case ',': case ' ': \n\t\t\t\tbreak;\n#ifdef JSMN_STRICT\n\t\t\t/* In strict mode primitives are: numbers and booleans */\n\t\t\tcase '-': case '0': case '1' : case '2': case '3' : case '4':\n\t\t\tcase '5': case '6': case '7' : case '8': case '9':\n\t\t\tcase 't': case 'f': case 'n' :\n#else\n\t\t\t/* In non-strict mode every unquoted value is a primitive */\n\t\t\tdefault:\n#endif\n\t\t\t\tr = jsmn_parse_primitive(parser, js, tokens, num_tokens);\n\t\t\t\tif (r &lt; 0) return r;\n\t\t\t\tif (parser-&gt;toksuper != -1)\n\t\t\t\t\ttokens[parser-&gt;toksuper].size++;\n\t\t\t\tbreak;\n\n#ifdef JSMN_STRICT\n\t\t\t/* Unexpected char in strict mode */\n\t\t\tdefault:\n\t\t\t\treturn JSMN_ERROR_INVAL;\n#endif\n\n\t\t}\n\t}\n\n\tfor (i = parser-&gt;toknext - 1; i &gt;= 0; i--) {\n\t\t/* Unmatched opened object or array */\n\t\tif (tokens[i].start != -1 &amp;&amp; tokens[i].end == -1) {\n\t\t\treturn JSMN_ERROR_PART;\n\t\t}\n\t}\n\n\treturn JSMN_SUCCESS;\n}\n\n/**\n * Creates a new parser based over a given  buffer with an array of tokens \n * available.\n */\nvoid jsmn_init(jsmn_parser *parser) {\n\tparser-&gt;pos = 0;\n\tparser-&gt;toknext = 0;\n\tparser-&gt;toksuper = -1;\n}<\/code><\/pre>\n\n<hr>\n\n<h1>jsmnSpark.h<\/h1>\n\n<p><\/p><pre><code class=\"cpp\">#ifndef __JSMN_H_\n#define __JSMN_H_\n\n/**\n * JSON type identifier. Basic types are:\n * \to Object\n * \to Array\n * \to String\n * \to Other primitive: number, boolean (true/false) or null\n */\ntypedef enum {\n\tJSMN_PRIMITIVE = 0,\n\tJSMN_OBJECT = 1,\n\tJSMN_ARRAY = 2,\n\tJSMN_STRING = 3\n} jsmntype_t;\n\ntypedef enum {\n\t/* Not enough tokens were provided */\n\tJSMN_ERROR_NOMEM = -1,\n\t/* Invalid character inside JSON string */\n\tJSMN_ERROR_INVAL = -2,\n\t/* The string is not a full JSON packet, more bytes expected */\n\tJSMN_ERROR_PART = -3,\n\t/* Everything was fine */\n\tJSMN_SUCCESS = 0\n} jsmnerr_t;\n\n/**\n * JSON token description.\n * @param\t\ttype\ttype (object, array, string etc.)\n * @param\t\tstart\tstart position in JSON data string\n * @param\t\tend\t\tend position in JSON data string\n */\ntypedef struct {\n\tjsmntype_t type;\n\tint start;\n\tint end;\n\tint size;\n#ifdef JSMN_PARENT_LINKS\n\tint parent;\n#endif\n} jsmntok_t;\n\n/**\n * JSON parser. Contains an array of token blocks available. Also stores\n * the string being parsed now and current position in that string\n */\ntypedef struct {\n\tunsigned int pos; /* offset in the JSON string */\n\tunsigned int toknext; /* next token to allocate */\n\tint toksuper; /* superior token node, e.g parent object or array */\n} jsmn_parser;\n\n/**\n * Create JSON parser over an array of tokens\n */\nvoid jsmn_init(jsmn_parser *parser);\n\n/**\n * Run JSON parser. It parses a JSON data string into and array of tokens, each describing\n * a single JSON object.\n */\njsmnerr_t jsmn_parse(jsmn_parser *parser, const char *js, \n\t\tjsmntok_t *tokens, unsigned int num_tokens);\n\n#endif __JSMN_H_<\/code><\/pre>\n\n<hr>\n\n<h1>rest_client.cpp<\/h1>\n\n<p><\/p><pre><code class=\"cpp\">/**\n ******************************************************************************\n * @file    rest_client.cpp\n * \n * details: https://github.com/llad/spark-restclient\n * \n * credit: https://github.com/csquared/arduino-restclient\n * \n ******************************************************************************\n\n*/\n\n#include \"rest_client.h\"\n\n//#define HTTP_DEBUG\n\n#ifdef HTTP_DEBUG\n#define HTTP_DEBUG_PRINT(string) (Serial.print(string))\n#endif\n\n#ifndef HTTP_DEBUG\n#define HTTP_DEBUG_PRINT(string)\n#endif\n\nRestClient::RestClient(const char* _host){\n  host = _host;\n  port = 80;\n  num_headers = 0;\n  contentTypeSet = false;\n}\n\nRestClient::RestClient(const char* _host, int _port){\n  host = _host;\n  port = _port;\n  num_headers = 0;\n  contentTypeSet = false;\n}\n\n// GET path\nint RestClient::get(const char* path){\n  return request(\"GET\", path, NULL, NULL);\n}\n\n//GET path with response\nint RestClient::get(const char* path, String* response){\n  return request(\"GET\", path, NULL, response);\n}\n\n// POST path and body\nint RestClient::post(const char* path, const char* body){\n  return request(\"POST\", path, body, NULL);\n}\n\n// POST path and body with response\nint RestClient::post(const char* path, const char* body, String* response){\n  return request(\"POST\", path, body, response);\n}\n\n// PUT path and body\nint RestClient::put(const char* path, const char* body){\n  return request(\"PUT\", path, body, NULL);\n}\n\n// PUT path and body with response\nint RestClient::put(const char* path, const char* body, String* response){\n  return request(\"PUT\", path, body, response);\n}\n\n// DELETE path\nint RestClient::del(const char* path){\n  return request(\"DELETE\", path, NULL, NULL);\n}\n\n// DELETE path and response\nint RestClient::del(const char* path, String* response){\n  return request(\"DELETE\", path, NULL, response);\n}\n\n// DELETE path and body\nint RestClient::del(const char* path, const char* body ){\n  return request(\"DELETE\", path, body, NULL);\n}\n\n// DELETE path and body with response\nint RestClient::del(const char* path, const char* body, String* response){\n  return request(\"DELETE\", path, body, response);\n}\n\nvoid RestClient::write(const char* string){\n  HTTP_DEBUG_PRINT(string);\n  client.print(string);\n}\n\nvoid RestClient::setHeader(const char* header){\n  headers[num_headers] = header;\n  num_headers++;\n}\n\n// The mother- generic request method.\n//\nint RestClient::request(const char* method, const char* path,\n                  const char* body, String* response){\n\n  HTTP_DEBUG_PRINT(\"HTTP: connect\\n\");\n\n  if(client.connect(host, port)){\n    HTTP_DEBUG_PRINT(\"HTTP: connected\\n\");\n    HTTP_DEBUG_PRINT(\"REQUEST: \\n\");\n    // Make a HTTP request line:\n    write(method);\n    write(\" \");\n    write(path);\n    write(\" HTTP/1.0\\r\\n\");\n    for(int i=0; i&lt;num_headers; i++){\n      write(headers[i]);\n      write(\"\\r\\n\");\n    }\n    write(\"Host: \");\n    write(host);\n    write(\"\\r\\n\");\n    write(\"Connection: close\\r\\n\");\n\n    if(body != NULL){\n      char contentLength[30];\n      sprintf(contentLength, \"Content-Length: %d\\r\\n\", strlen(body));\n      write(contentLength);\n\n      if(!contentTypeSet){\n        write(\"Content-Type: application/x-www-form-urlencoded\\r\\n\");\n      }\n    }\n\n    write(\"\\r\\n\");\n\n    if(body != NULL){\n      write(body);\n      write(\"\\r\\n\");\n      write(\"\\r\\n\");\n    }\n\n    //make sure you write all those bytes.\n    delay(100);\n\n    HTTP_DEBUG_PRINT(\"HTTP: call readResponse\\n\");\n    int statusCode = readResponse(response);\n    HTTP_DEBUG_PRINT(\"HTTP: return readResponse\\n\");\n\n    //cleanup\n    HTTP_DEBUG_PRINT(\"HTTP: stop client\\n\");\n    num_headers = 0;\n    client.stop();\n    delay(50);\n    HTTP_DEBUG_PRINT(\"HTTP: client stopped\\n\");\n\n    return statusCode;\n  }else{\n    HTTP_DEBUG_PRINT(\"HTTP Connection failed\\n\");\n    return 0;\n  }\n}\n\nint RestClient::readResponse(String* response) {\n\n  // an http request ends with a blank line\n  boolean currentLineIsBlank = true;\n  boolean httpBody = false;\n  boolean inStatus = false;\n\n  char statusCode[4];\n  int i = 0;\n  int code = 0;\n\n  if(response == NULL){\n    HTTP_DEBUG_PRINT(\"HTTP: NULL RESPONSE POINTER: \\n\");\n  }else{\n    HTTP_DEBUG_PRINT(\"HTTP: NON-NULL RESPONSE POINTER: \\n\");\n  }\n\n  HTTP_DEBUG_PRINT(\"HTTP: RESPONSE: \\n\");\n  while (client.connected()) {\n    HTTP_DEBUG_PRINT(\".\");\n    if (client.available()) {\n      HTTP_DEBUG_PRINT(\",\");\n\n      char c = client.read();\n      HTTP_DEBUG_PRINT(c);\n\n      if(c == ' ' &amp;&amp; !inStatus){\n        inStatus = true;\n      }\n\n      if(inStatus &amp;&amp; i &lt; 3 &amp;&amp; c != ' '){\n        statusCode[i] = c;\n        i++;\n      }\n      if(i == 3){\n        statusCode[i] = '\\0';\n        code = atoi(statusCode);\n      }\n\n      //only write response if its not null\n      if(httpBody){\n        if(response != NULL) response-&gt;concat(c);\n      }\n      if (c == '\\n' &amp;&amp; httpBody){\n        HTTP_DEBUG_PRINT(\"HTTP: return readResponse2\\n\");\n        return code;\n      }\n      if (c == '\\n' &amp;&amp; currentLineIsBlank) {\n        httpBody = true;\n      }\n      if (c == '\\n') {\n        // you're starting a new lineu\n        currentLineIsBlank = true;\n      }\n      else if (c != '\\r') {\n        // you've gotten a character on the current line\n        currentLineIsBlank = false;\n      }\n    }\n  }\n\n  HTTP_DEBUG_PRINT(\"HTTP: return readResponse3\\n\");\n  return code;\n}<\/code><\/pre>\n\n<hr>\n\n<h1>rest_client.h<\/h1>\n\n<p><\/p><pre><code class=\"cpp\">/**\n ******************************************************************************\n * @file    rest_client.h\n * \n * details: https://github.com/llad/spark-restclient\n * \n * credit: https://github.com/csquared/arduino-restclient\n * \n ******************************************************************************\n\n*/\n\n\n#include \"application.h\"\n\nclass RestClient {\n\n  public:\n    RestClient(const char* host);\n    RestClient(const char* _host, int _port);\n\n    //Client Setup\n    void dhcp();\n    int begin(byte*);\n\n    //Generic HTTP Request\n    int request(const char* method, const char* path,\n                const char* body, String* response);\n    // Set a Request Header\n    void setHeader(const char*);\n    // GET path\n    int get(const char*);\n    // GET path and response\n    int get(const char*, String*);\n\n    // POST path and body\n    int post(const char* path, const char* body);\n    // POST path and body and response\n    int post(const char* path, const char* body, String*);\n\n    // PUT path and body\n    int put(const char* path, const char* body);\n    // PUT path and body and response\n    int put(const char* path, const char* body, String*);\n\n    // DELETE path\n    int del(const char*);\n    // DELETE path and body\n    int del(const char*, const char*);\n    // DELETE path and response\n    int del(const char*, String*);\n    // DELETE path and body and response\n    int del(const char*, const char*, String*);\n\n  private:\n    TCPClient client;\n    int readResponse(String*);\n    void write(const char*);\n    const char* host;\n    int port;\n    int num_headers;\n    const char* headers[10];\n    boolean contentTypeSet;\n};<\/code><\/pre>\n\n<hr>\n\n<h1>sample output<\/h1>\n\n<p><\/p><pre><code class=\"cpp\">Response body from server: {\"time\":{\"updated\":\"Jun 27, 2014 05:07:00 UTC\",\"updatedISO\":\"2014-06-27T05:07:00+00:00\",\"updateduk\":\"Jun 27, 2014 at 06:07 BST\"},\"disclaimer\":\"This data was produced from the CoinDesk Bitcoin Price Index (USD). Non-USD currency data converted using hourly conversion rate from openexchangerates.org\",\"bpi\":{\"USD\":{\"code\":\"USD\",\"rate\":\"580.6150\",\"description\":\"United States Dollar\",\"rate_float\":580.615}}}\n\nParsed successfully.\nToken 0, type: 1 size: 6 start: 0 end: 405\nToken 1, type: 3 size: 0 start: 2 end: 6\nToken 2, type: 1 size: 6 start: 8 end: 128\nToken 3, type: 3 size: 0 start: 10 end: 17\nToken 4, type: 3 size: 0 start: 20 end: 45\nToken 5, type: 3 size: 0 start: 48 end: 58\nToken 6, type: 3 size: 0 start: 61 end: 86\nToken 7, type: 3 size: 0 start: 89 end: 98\nToken 8, type: 3 size: 0 start: 101 end: 126\nToken 9, type: 3 size: 0 start: 130 end: 140\nToken 10, type: 3 size: 0 start: 143 end: 298\nToken 11, type: 3 size: 0 start: 301 end: 304\nToken 12, type: 1 size: 2 start: 306 end: 404\nToken 13, type: 3 size: 0 start: 308 end: 311\nToken 14, type: 1 size: 8 start: 313 end: 403\nToken 15, type: 3 size: 0 start: 315 end: 319\nToken 16, type: 3 size: 0 start: 322 end: 325\nToken 17, type: 3 size: 0 start: 328 end: 332\nToken 18, type: 3 size: 0 start: 335 end: 343\nToken 19, type: 3 size: 0 start: 346 end: 357\nToken 20, type: 3 size: 0 start: 360 end: 380\nToken 21, type: 3 size: 0 start: 383 end: 393\nToken 22, type: 0 size: 0 start: 395 end: 402\n\nToken[17]: rate\nToken[18]: 580.6150<\/code><\/pre>\n\n<hr>\n\n<h1>Web IDE file structure<\/h1>\n\n<p><a href=\"http://i.imgur.com/w6YcCOf.png\" target=\"_blank\"><img src=\"http://i.imgur.com/w6YcCOf.png\" width=\"690\" height=\"206\"><\/a><\/p>","post_number":1,"post_type":1,"updated_at":"2014-06-27T05:26:17.292Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":30,"incoming_link_count":256,"reads":128,"score":1482.1,"yours":false,"topic_id":5383,"topic_slug":"bitcoin-price-index-json-parse-tcp-client","display_username":"Brett Walach","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://i.imgur.com/w6YcCOf.png","internal":false,"reflection":false,"title":"w6YcCOf.png","clicks":13},{"url":"http://coedmagazine.files.wordpress.com/2014/01/bitcoin.jpg?w=600&h=350","internal":false,"reflection":false,"clicks":2},{"url":"http://community.spark.io/t/arduinojson-for-the-web-ide/6897/2","internal":true,"reflection":true,"title":"ArduinoJson for the web IDE","clicks":6},{"url":"http://community.spark.io/t/https-request-from-spark-core/5376/8","internal":true,"reflection":true,"title":"HTTPS Request from Spark Core?","clicks":4},{"url":"https://community.spark.io/t/http-post-and-return-body-handle/9977/4","internal":true,"reflection":true,"title":"HTTP POST and return body handle","clicks":3},{"url":"https://community.spark.io/t/transit-bus-beacon-code-help-please-to-make-it-better/9992","internal":true,"reflection":true,"title":"Transit bus beacon: Code help please to make it better","clicks":0}],"read":true,"user_title":"Particle Senior Embedded Hardware/Software Engineer","actions_summary":[{"id":2,"count":6}],"moderator":true,"admin":true,"staff":true,"user_id":148,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":29388,"name":"David","username":"Dave","avatar_template":"/user_avatar/community.particle.io/dave/{size}/181_1.png","created_at":"2014-06-27T14:33:07.055Z","cooked":"<p>That's awesome!  JSON parsing, Rest clients all on the core, nice! <img src=\"//community.spark.io/images/emoji/emoji_one/smile.png\" title=\":smile:\" class=\"emoji\" alt=\"smile\" width=\"20\" height=\"20\"> <\/p>","post_number":2,"post_type":1,"updated_at":"2014-06-27T14:33:07.055Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":15,"incoming_link_count":1,"reads":86,"score":37.95,"yours":false,"topic_id":5383,"topic_slug":"bitcoin-price-index-json-parse-tcp-client","display_username":"David","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":"Particle Senior Software Engineer","actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":223,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":29447,"name":"Chris","username":"Hootie81","avatar_template":"/user_avatar/community.particle.io/hootie81/{size}/2879_1.png","created_at":"2014-06-27T20:05:15.463Z","cooked":"<p>Very nice, heaps of little goodies in there!<\/p>","post_number":3,"post_type":1,"updated_at":"2014-06-27T20:05:15.463Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":13,"incoming_link_count":1,"reads":81,"score":36.85,"yours":false,"topic_id":5383,"topic_slug":"bitcoin-price-index-json-parse-tcp-client","display_username":"Chris","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1054,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":29450,"name":"Hassaan","username":"hassaan22","avatar_template":"/user_avatar/community.particle.io/hassaan22/{size}/2865_1.png","created_at":"2014-06-27T20:13:41.585Z","cooked":"<p>This is great! Thanks for doing this. However, I am having such a hard time understanding this, not because the code is confusing, but because I do not really know that basics of header and .cpp files. <\/p>\n\n<p>What is the best way I can learn about and learn to utilize these files? Are there any recommended tutorials that I can reference?<br>Thanks! <\/p>","post_number":4,"post_type":1,"updated_at":"2014-06-27T20:13:41.585Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":17,"incoming_link_count":5,"reads":77,"score":86.25,"yours":false,"topic_id":5383,"topic_slug":"bitcoin-price-index-json-parse-tcp-client","display_username":"Hassaan","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":2152,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false},{"id":29451,"name":"Brett Walach","username":"BDub","avatar_template":"/user_avatar/community.particle.io/bdub/{size}/5137_1.png","created_at":"2014-06-27T20:57:30.126Z","cooked":"<p><a class=\"mention\" href=\"/users/hassaan22\">@hassaan22<\/a>, basically these are two Libraries that I've included in my BitCoin application.  Each library consists of a Class source file (.cpp) and Class definition file (.h), also referred to as the Implementation and Declaration respectively.<\/p>\n\n<p>It's just a nice way to package up these functions to make them easier to use and extend, while at the same time compartmentalizing them which helps to protect certain functions and memory from being accessed accidentally.<\/p>\n\n<p>Lots of resources on the web to help explain this:<\/p>\n\n<p><a href=\"http://playground.arduino.cc/Code/Library\" class=\"onebox\" target=\"_blank\">http://playground.arduino.cc/Code/Library<\/a><\/p>\n\n<p><a href=\"http://www.learncpp.com/cpp-tutorial/19-header-files\" class=\"onebox\" target=\"_blank\">http://www.learncpp.com/cpp-tutorial/19-header-files<\/a><\/p>\n\n<p><a href=\"http://www.tutorialspoint.com/cprogramming/c_header_files.htm\" class=\"onebox\" target=\"_blank\">http://www.tutorialspoint.com/cprogramming/c_header_files.htm<\/a><\/p>","post_number":5,"post_type":1,"updated_at":"2014-06-27T20:57:36.437Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":18,"incoming_link_count":1,"reads":67,"score":124.3,"yours":false,"topic_id":5383,"topic_slug":"bitcoin-price-index-json-parse-tcp-client","display_username":"Brett Walach","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://playground.arduino.cc/Code/Library","internal":false,"reflection":false,"title":"Arduino Playground - Library Tutorial","clicks":6},{"url":"http://www.learncpp.com/cpp-tutorial/19-header-files","internal":false,"reflection":false,"title":"1.9  Header files  Learn C++","clicks":5},{"url":"http://www.tutorialspoint.com/cprogramming/c_header_files.htm","internal":false,"reflection":false,"title":"C - Header Files","clicks":1}],"read":true,"user_title":"Particle Senior Embedded Hardware/Software Engineer","actions_summary":[{"id":2,"count":3}],"moderator":true,"admin":true,"staff":true,"user_id":148,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":"","can_view_edit_history":true,"wiki":false,"can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false}],"stream":[29282,29388,29447,29450,29451]},"timeline_lookup":[[1,1194],[2,1193]],"id":5383,"title":"Bitcoin Price Index JSON Parse TCP Client","fancy_title":"Bitcoin Price Index JSON Parse TCP Client","posts_count":5,"created_at":"2014-06-27T05:26:17.099Z","views":1922,"reply_count":0,"participant_count":4,"like_count":12,"last_posted_at":"2014-06-27T20:57:30.126Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"bitcoin-price-index-json-parse-tcp-client","category_id":8,"word_count":2959,"deleted_at":null,"user_id":148,"draft":null,"draft_key":"topic_5383","draft_sequence":null,"unpinned":null,"pinned_globally":false,"pinned":false,"pinned_at":null,"pinned_until":null,"details":{"created_by":{"id":148,"username":"BDub","avatar_template":"/user_avatar/community.particle.io/bdub/{size}/5137_1.png"},"last_poster":{"id":148,"username":"BDub","avatar_template":"/user_avatar/community.particle.io/bdub/{size}/5137_1.png"},"participants":[{"id":148,"username":"BDub","avatar_template":"/user_avatar/community.particle.io/bdub/{size}/5137_1.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":223,"username":"Dave","avatar_template":"/user_avatar/community.particle.io/dave/{size}/181_1.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1054,"username":"Hootie81","avatar_template":"/user_avatar/community.particle.io/hootie81/{size}/2879_1.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2152,"username":"hassaan22","avatar_template":"/user_avatar/community.particle.io/hassaan22/{size}/2865_1.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"suggested_topics":[{"id":29389,"title":"Particle Remote Control","fancy_title":"Particle Remote Control","slug":"particle-remote-control","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"/uploads/default/optimized/2X/0/0fa9ca2231c54c0f9573412335d016c688d640ec_1_666x500.jpeg","created_at":"2017-02-18T19:31:03.340Z","last_posted_at":"2017-02-19T02:58:35.011Z","bumped":true,"bumped_at":"2017-02-19T02:58:35.011Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":6,"views":367,"category_id":8,"featured_link":null,"posters":[{"extras":null,"description":"Original Poster","user":{"id":2428,"username":"eely22","avatar_template":"/user_avatar/community.particle.io/eely22/{size}/4982_1.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1946,"username":"gusgonnet","avatar_template":"/user_avatar/community.particle.io/gusgonnet/{size}/11223_1.png"}}]},{"id":28640,"title":"Distributed Presence Data","fancy_title":"Distributed Presence Data","slug":"distributed-presence-data","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":null,"created_at":"2017-01-16T18:25:38.972Z","last_posted_at":"2017-01-16T21:52:56.123Z","bumped":true,"bumped_at":"2017-01-16T21:52:56.123Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":2,"views":485,"category_id":8,"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":4680,"username":"JumpMaster","avatar_template":"/user_avatar/community.particle.io/jumpmaster/{size}/6332_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":403,"username":"ScruffR","avatar_template":"/user_avatar/community.particle.io/scruffr/{size}/6952_1.png"}}]},{"id":29076,"title":"Daylight-simulating alarm clock","fancy_title":"Daylight-simulating alarm clock","slug":"daylight-simulating-alarm-clock","posts_count":1,"reply_count":0,"highest_post_number":1,"image_url":"/uploads/default/optimized/2X/b/b4546673bfa0aee3a7a62799a328da0fb2dc68c4_1_666x500.jpg","created_at":"2017-02-02T00:04:10.255Z","last_posted_at":"2017-02-02T00:04:10.310Z","bumped":true,"bumped_at":"2017-02-02T00:04:10.310Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":4,"views":359,"category_id":8,"featured_link":null,"posters":[{"extras":"latest single","description":"Original Poster, Most Recent Poster","user":{"id":2102,"username":"Dick","avatar_template":"/user_avatar/community.particle.io/dick/{size}/5681_1.png"}}]},{"id":27720,"title":"Photon Controlled LED plant light","fancy_title":"Photon Controlled LED plant light","slug":"photon-controlled-led-plant-light","posts_count":13,"reply_count":8,"highest_post_number":13,"image_url":null,"created_at":"2016-12-03T21:40:01.631Z","last_posted_at":"2017-08-13T00:29:22.439Z","bumped":true,"bumped_at":"2017-08-13T00:29:22.439Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":3,"views":862,"category_id":8,"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":5868,"username":"mikemoy","avatar_template":"/letter_avatar_proxy/v2/letter/m/34f0e0/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":4567,"username":"nrobinson2000","avatar_template":"/user_avatar/community.particle.io/nrobinson2000/{size}/14737_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":600,"username":"bko","avatar_template":"/user_avatar/community.particle.io/bko/{size}/1916_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":11723,"username":"maryzhu","avatar_template":"/letter_avatar_proxy/v2/letter/m/e99b99/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":13199,"username":"89delta","avatar_template":"/letter_avatar_proxy/v2/letter/8/e19b73/{size}.png"}}]},{"id":30747,"title":"MyPIR-Sensor activate analog RGB Stripe controlled by Photon","fancy_title":"MyPIR-Sensor activate analog RGB Stripe controlled by Photon","slug":"mypir-sensor-activate-analog-rgb-stripe-controlled-by-photon","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":null,"created_at":"2017-03-21T18:46:59.000Z","last_posted_at":"2017-04-20T22:52:37.372Z","bumped":true,"bumped_at":"2017-04-20T22:52:37.372Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":6,"views":253,"category_id":8,"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":11555,"username":"Postler","avatar_template":"/user_avatar/community.particle.io/postler/{size}/13693_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":10116,"username":"KyleG","avatar_template":"/user_avatar/community.particle.io/kyleg/{size}/11077_1.png"}}]}],"links":[{"url":"http://i.imgur.com/w6YcCOf.png","title":"w6YcCOf.png","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":13,"user_id":148,"domain":"i.imgur.com"},{"url":"http://community.spark.io/t/arduinojson-for-the-web-ide/6897/2","title":"ArduinoJson for the web IDE","fancy_title":null,"internal":true,"attachment":false,"reflection":true,"clicks":6,"user_id":1054,"domain":"community.spark.io"},{"url":"http://playground.arduino.cc/Code/Library","title":"Arduino Playground - Library Tutorial","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":6,"user_id":148,"domain":"playground.arduino.cc"},{"url":"http://www.learncpp.com/cpp-tutorial/19-header-files","title":"1.9  Header files  Learn C++","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":5,"user_id":148,"domain":"www.learncpp.com"},{"url":"http://community.spark.io/t/https-request-from-spark-core/5376/8","title":"HTTPS Request from Spark Core?","fancy_title":null,"internal":true,"attachment":false,"reflection":true,"clicks":4,"user_id":148,"domain":"community.spark.io"},{"url":"https://community.spark.io/t/http-post-and-return-body-handle/9977/4","title":"HTTP POST and return body handle","fancy_title":null,"internal":true,"attachment":false,"reflection":true,"clicks":3,"user_id":1054,"domain":"community.spark.io"},{"url":"http://coedmagazine.files.wordpress.com/2014/01/bitcoin.jpg?w=600&h=350","title":null,"fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":148,"domain":"coedmagazine.files.wordpress.com"},{"url":"http://www.tutorialspoint.com/cprogramming/c_header_files.htm","title":"C - Header Files","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":148,"domain":"www.tutorialspoint.com"},{"url":"https://community.spark.io/t/transit-bus-beacon-code-help-please-to-make-it-better/9992","title":"Transit bus beacon: Code help please to make it better","fancy_title":null,"internal":true,"attachment":false,"reflection":true,"clicks":0,"user_id":2377,"domain":"community.spark.io"}],"notification_level":1,"can_flag_topic":false},"highest_post_number":5,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":null,"featured_link":null,"topic_status_update":null});
      })();
      </script> 
  <script>
  Ember.RSVP.configure('onerror', function(e) {
    // Ignore TransitionAborted exceptions that bubble up
    if (e && e.message === "TransitionAborted") { return; }

    window.onerror(e && e.message, null,null,null,e);
  });


</script> 
  <script>

  (function() {
    var ps = require('preload-store').default;

    Discourse.CDN = '';
    Discourse.BaseUrl = 'community.particle.io'.replace(/:[\d]*$/,"");
    Discourse.BaseUri = '';
    Discourse.Environment = 'production';
    Discourse.SiteSettings = ps.get('siteSettings');
    Discourse.LetterAvatarVersion = '5_c5b31cccf5394499269817ee339a84bb';
    I18n.defaultLocale = 'en';
    Discourse.start();
    Discourse.set('assetVersion','ab5638542896a1cbb98c6efb65c15ffd');
    Discourse.Session.currentProp("disableCustomCSS", false);
    Discourse.HighlightJSPath = "/highlight-js/community.particle.io/133b1767dbeecf92cad6dfc38d42cde22195db05.js";
  })();
</script> 
  <script src="/assets/browser-update-f57286e74ddbc53aa899689b01ef467078911e4138050c561939955849af35dd.js"></script> 
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37038200-2']);

    _gaq.push(['_setDomainName', 'community.particle.io']);

  _gaq.push(['_setCustomVar', 1, 'Anonymous', true, 2]);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
  <link rel="stylesheet" type="text/css" href="//cloud.typography.com/6107112/665726/css/fonts.css"> 
  <script type="text/javascript" src="https://s3.amazonaws.com/redirect.particle.io/redirect-banner.js"></script> 
  <script>
/* StatusPage.io Widget */

function setupSystemStatus() {
    if (!StatusPage) {
        return;
    }
    createSystemStatusElement();
    updateSystemStatus();
    var minutes = 60 * 1000;
    var timer = setInterval( updateSystemStatus , 10 * minutes);
}

function createSystemStatusElement() {
    $('#main-outlet').prepend(
        '<div class="container">' +
        '  <div class="row">' +
        '    <a class="current-status-incidents green" href="http://status.particle.io/" target="_blank">' +
        '      <div class="alert">' +
        '        System Status: <span class="current-status-description">All systems operational</span>' +
        '        <span class="current-status-more-info">Check the status page for details</span>' +
        '      </div>' +
        '   </a>' +
        '  </div>' +
        '</div>'
    );
}

function updateSystemStatus() {
  var colorCodes = {
    none: 'green',
    minor: 'yellow',
    major: 'red',
    critical: 'red',
    maintenance: 'blue',
  };
  var sp = new StatusPage.page({ page : '8d849mp6fy12' });
  sp.summary({
    success: function (data) {
      var description = data.status.description;
      var color = colorCodes[data.status.indicator];
      var ongoingIncident = false;
      data.incidents.forEach(function (i) {
        if (i.status === "identified" || i.status === "investigating") {
          ongoingIncident = true;
        }
      });
      var scheduledMaintenance = false;
      data.scheduled_maintenances.forEach(function (m) {
        if (m.status === "in_progress") {
          scheduledMaintenance = true;
        }
      });
      if (color === 'green') {
        if (ongoingIncident) {
          color = 'yellow';
          description = 'Ongoing Incident';
        } else if (scheduledMaintenance) {
          color = 'blue';
          description = 'Scheduled maintenance';
        }
      }

      
      $('.current-status-description').text(description);
      $('.current-status-incidents').removeClass('green blue yellow red').addClass(color);
    }
  });
};

</script> 
  <script src="https://cdn.statuspage.io/se-v2.js" async onload="setupSystemStatus()"></script>   
 </body>
</html>