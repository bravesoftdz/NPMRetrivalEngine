<!doctype html>
<!--[if IE 8]><html class="ie8 lt-ie9" lang="en"><![endif]-->
<!--[if IE 9]><html class="ie9" lang="en"><![endif]-->
<!--[if (gte IE 9)|!(IE)]<!-->
<html lang="en">
 <!--<![endif]-->
 <!-- -->
 <!-- Added by HTTrack -->
 <head> 
  <meta http-equiv="content-type" content="text/html;charset=UTF-8"> 
  <!-- /Added by HTTrack -->
  <!--[if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/ie8/0.4.1/ie8.js" ></script><![endif]-->
  <script>
  /**
  * Creates and dispatches an event trigger
  * @param {String} evt - The name of the event
  */
  function sendCustomEvent(evt){
    if(document.createEvent && document.body.dispatchEvent){
      var event = document.createEvent('Event');
      event.initEvent(evt, true, true); //can bubble, and is cancellable
      document.body.dispatchEvent(event);
    } else if(window.CustomEvent && document.body.dispatchEvent) {
      var event = new CustomEvent(evt, {bubbles: true, cancelable: true});
      document.body.dispatchEvent(event);
    }
  }
    var digitalData = {"page":{"attributes":{"queryParameters":""},"category":{"contentType":"","contentSubType":"","keyPage":false,"keyPageType":"","pageType":"","primaryCategory":"","subCategories":[]},"pageInfo":{"breadCrumbs":[],"cms":"RHD CMS 8","destinationURL":"","errorMessage":"","errorType":"","language":"en","pageID":"14145","contentID":"14145","pageName":"","referringDomain":"","referringURL":"","syndicationIds":[],"sysEnv":"","title":"Building The User UI Using HTML5"},"listing":{"browseFilter":"","query":"","queryMethod":"","refinementType":"","refinementValue":"","resultCount":"","searchType":""}},"user":[{"profile":[{"profileInfo":{"accountID":"","daysSinceLastPurchase":"","daysSinceRegistration":"","eloquaGUID":"POPULATE ELOQUA ID","keyCloakID":"","loggedIn":false,"profileID":"","registered":false,"socialAccountsLinked":[],"subscriptionFrequency":"","subscriptionLevel":"","userAgent":""}}]}],"event":[]},
    relURL = window.location.href.replace(/https?:\/\//,'').replace('developer-drupal.web.prod.ext.phx2.redhat.com','').replace('developers.redhat.com','').replace(/\/$/,'');

  ( function( w, d, dd, undefined ) {
      var categoryObj = getCategories();

      function getCookie( name ) {
        var value = "; " + document.cookie;
        var parts = value.split( "; " + name + "=" );
        if ( parts.length == 2 ) {
          return parts.pop().split( ";" ).shift();
        }
      }

      function deleteCookie(name) {
        document.cookie = name + '=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;';
      };

      function getPageContentTypes(dd, primary, subs, query) {
        var pageType = '', contentType = '', contentSubType = '';
        switch (primary) {
          case 'home page':
            pageType = 'home';
            contentType = primary;
            break;
          case 'articles':
            pageType = 'article';
            contentType = 'article';
            break;
          case 'events':
            pageType = subs.length > 0 ? 'event' : 'events';
            contentType = subs.length > 0 ? subs[0] : 'event-list';
            break;
          case 'community':
            pageType = 'contributor';
            break;
          case 'forums':
            pageType = 'forum-list';
            contentType = 'forum-list';
            break;
          case 'about':
          case 'variants':
          case 'downloads':
          case 'stack-overflow':
          case 'ticket-monster':
          case 'terms-and-conditions':
          case 'vjbug':
            pageType = primary;
            break;
          case 'quickstarts':
          case 'boms':
          case 'archetypes':
          case 'demos':
          case 'promotions':
            pageType = primary.replace(/s$/,'');
            break;
          case 'products':
            pageType = primary;
            if(subs.length > 0) {
              pageType = pageType.replace(/s$/,'');
              contentType = subs[0];
              contentSubType = subs[1] ? subs[1] : '';
            }
            break;
          case 'video':
            pageType = primary;
            contentType = subs.length > 0 ? subs[0] : '';
            break;
          case 'topics':
            pageType = primary;
            if(subs.length > 0) {
              pageType = pageType.replace(/s$/,'');
              contentType = subs[0];
            }
            break;
          case 'resources':
          case 'search':
          case 'projects':
            pageType = 'search-results';
            contentType = primary;
            break;
        }

        dd.page.category.pageType = pageType;
        dd.page.category.contentType = contentType;
        dd.page.category.contentSubType = contentSubType;

        return dd;
      }

      function getQueryParams() {
        return relURL.split('?')[1] ? relURL.split('?')[1].replace(/=/g,':').split('&') : "";
      }

      function getCategories() {
        var categories = { primaryCategory: "", subCategories: [] },
          url = relURL.split('?')[0].split('#')[0].split(/\//);
        if (relURL === "") {
          categories.primaryCategory = "home page";
        } else {
          for(var i=1, l=url.length; i<l; i++) {
            if (i !== 1 && i <= 3) {
              categories.subCategories.push(url[i]);
            }

            if (i === 1) {
              categories.primaryCategory = url[i].length > 0 ? url[i] : "home page";
            }
          }
        }

        return categories;
      }

      function getPageName() {
        var splitURL = relURL.split('?')[0].split('#')[0].split(/\//),
          page = splitURL.pop();
        return page.length > 0 ? page : 'home page';
      }

      dd.page.attributes.queryParameters = getQueryParams();
      dd.page.category.primaryCategory = categoryObj.primaryCategory;
      dd.page.category.subCategories = categoryObj.subCategories;
      dd.page.pageInfo.destinationURL = window.location.href;
      dd.page.pageInfo.pageName = getPageName();
      dd.page.pageInfo.breadCrumbs = [categoryObj.primaryCategory, categoryObj.subCategories[0] || ""];
      dd = getPageContentTypes(dd, dd.page.category.primaryCategory, dd.page.category.subCategories, dd.page.attributes.queryParameters);

      var registered = getCookie("rhd_member");
      dd.user[0].profile[0].profileInfo.registered = registered ? true : false;

      if ( d.referrer ) {
        var a = d.createElement( "a" );
        a.href = d.referrer;

        dd.page.pageInfo.referringDomain = a.hostname;
        dd.page.pageInfo.referringURL = a.href;
      }

      dd.page.pageInfo.sysEnv = ( w.innerWidth <= 768 ) ? "tablet" : "desktop";

      var elqGUID = getCookie( "rh_elqCustomerGUID" );
      if ( elqGUID ) {
        dd.user[ 0 ].profile[ 0 ].profileInfo.eloquaGUID = elqGUID;
      }

      var slc = getCookie("rhd-slink-add");
      if(slc){
        sendSocialLinkEvent(slc);
        deleteCookie('rhd-slink-add');
      }

      function sendSocialLinkEvent(sprov){
        var ddSocialLinkEvent = {
          eventInfo: {
            eventAction: 'link',
            eventName: 'social account link',
            socialAccount: sprov,
            socialAccountsLinked: dd.user[0].profile[0].profileInfo.socialAccountsLinked,
            timeStamp: new Date(),
            processed: {
              adobeAnalytics: false
            }
          }
        };
        dd.event.push(ddSocialLinkEvent);
        sendCustomEvent('socialLinkEvent', ddSocialLinkEvent);
      }

      document.addEventListener('search-complete', function(e) {
        var ddSearchEvent = {
            eventInfo: {
              eventName: 'internal search',
              eventAction: 'search',
              listing: {
                browseFilter:  e.detail.filterStr || "internal search",
                query: e.detail.term,
                queryMethod: "system generated",
                resultCount: e.detail.results.hits.total,
                resultsShown: e.detail.limit + e.detail.from,
                searchType: digitalData.page.category.primaryCategory || "",
                refinement: []
              },
              timeStamp: new Date(),
              processed: {
                adobeAnalytics: false
              }
            }
          };
        digitalData.event.push(ddSearchEvent);
        digitalData.page.listing = ddSearchEvent.eventInfo.listing;
        sendCustomEvent('ajaxSearch');
      });

    } )( window, document, digitalData );
      </script>
  <script id="adobe_dtm" src="https://assets.adobedtm.com/2b327a0a54b320bf1bcdb5fa39a2b896027067d9/satelliteLib-9ec3c34e9d660fa2fcb85ced512c3a48dc09c0c5.js"></script>
  <!--TODO: metrics here-->
  <!--TODO: include Adobe A/B testing inline-->
  <meta charset="utf-8"> 
  <link rel="canonical" href="./"> 
  <meta name="title" content="Building The User UI Using HTML5 | Red Hat Developers"> 
  <meta property="og:type" content="page"> 
  <meta name="twitter:card" content="summary"> 
  <meta name="description" content="We’ve just implemented the business services of our application, and exposed them through RESTful endpoints. Now we need to implement a flexible user interface that can be easily used with both desktop and mobile clients. After reading this tutorial, you will understand our front-end design and the choices that we made in its implementation. Topics covered include:"> 
  <meta name="MobileOptimized" content="width"> 
  <meta name="HandheldFriendly" content="true"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <link rel="shortcut icon" href="../../themes/custom/rhd/favicon.ico" type="image/vnd.microsoft.icon"> 
  <meta charset="utf-8"> 
  <meta content="bxtQxPXTaA2g5bXw_buofCT53_Uwp1fGAu9uHSA0UWc" name="google-site-verification"> 
  <meta content="width=device-width, initial-scale=1.0" name="viewport"> 
  <title>Building The User UI Using HTML5 | Red Hat Developers</title> 
  <link rel="stylesheet" href="../../sites/default/files/css/css_VhWWLaTq07EH7s9WAWB76cbwzmcOOal8Ltuzvv2H2mw.css?ox8jqa" media="all"> 
  <link rel="stylesheet" href="../../sites/default/files/css/css_6zVkvq_Yjhi-vFPeMhHhMZtCTxNuMkF6uvqJFhwv4Z4.css?ox8jqa" media="all"> 
  <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js"></script>
  <script>Raven.config('https://c3d1750237a549fe91ac70c27793181b@sentry.io/69051', { environment: 'prod', whitelistUrls: [/redhat\.com/] }).install()</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.35.3/es6-shim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/4.1.0/es6-promise.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
  <script>if (!window.customElements) { document.write('<!--'); }</script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.0.1/custom-elements-es5-adapter.js"></script>
  <!--! do not remove -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.0.1/webcomponents-lite.js"></script>
  <!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]--> 
 </head> 
 <body class="ticket-monsteruserfrontend"> 
  <script type="text/javascript">
      dataLayer = [{'channel' : 'developer'}];
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
              'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-NJWS5L');
    </script>
  <noscript>
   <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L" height="0" width="0"></iframe>
  </noscript> 
  <div class="site-wrapper"> 
   <header class="main clearfix">
    <div class="row header-wrap"> 
     <nav class="accounts">
      <ul> 
       <li class="login"><a>Log In</a></li> 
       <li class="register"><a>Register</a></li> 
       <li class="logged-in"><a class="logged-in-name" href="#"></a></li> 
       <li class="logged-in"><a class="logout" href="#">Log Out</a></li> 
      </ul> 
      <div class="search-wrapper"> 
       <form class="search-bar" accept-charset="utf-8" action="../../search/" method="get" role="search" type="submit"> 
        <input class="user-search" type="text" placeholder="Enter your search term" id="search_list_text" name="q" maxlength="128" required>
        <button type="submit" id="search-button"> <i class="fa fa-search"></i> </button> 
       </form> 
      </div> 
     </nav>
     <div class="logo-wrap"> 
      <h1 class="logo"> 
       <!-- Do not remove the 'home-link' id from this 'a' tag --> <a id="home-link" href="../../" title="Red Hat Developers"><img alt="Red Hat Developers" src="../../images/design/RHD-logo.svg"></a> </h1> 
      <a class="nav-toggle" href="#">Menu<i class="fa fa-angle-down"></i></a> 
     </div> 
     <nav class="mega-menu">
      <ul> 
       <li class="has-sub-nav"> <a href="#" class="sub-nav-topics">Topics<i class="fa fa-angle-down "></i></a> 
        <div class="sub-nav" id="sub-nav-topics"> 
         <a href="../../topics/containers/">Containers</a> 
         <a href="../../topics/devops/">DevOps</a> 
         <a href="../../topics/enterprise-java/">Enterprise Java</a> 
         <a href="../../topics/iot/">Internet of Things</a> 
         <a href="../../topics/microservices/">Microservices</a> 
         <a href="../../topics/mobile/">Mobile</a> 
         <a href="../../topics/web-and-api-development/">Web and API Development</a> 
         <a href="../../topics/dotnet/">.NET Core</a> 
        </div> </li> 
       <li class="has-sub-nav"> <a href="#" class="sub-nav-products">Technologies<i class="fa fa-angle-down"></i></a> 
        <div class="sub-nav" id="sub-nav-technologies"> 
         <div class="sub-nav-group"> 
          <a class="heading" href="../../products/#development_and_management">Accelerated Development and Management</a> 
          <a class="hide-on-mobile" href="../../products/datagrid/overview/">Red Hat JBoss Data Grid</a> 
          <a class="hide-on-mobile" href="../../products/eap/overview/">Red Hat JBoss Enterprise Application Platform</a> 
          <a class="hide-on-mobile" href="../../products/webserver/overview/">Red Hat JBoss Web Server</a> 
         </div> 
         <div class="sub-nav-group"> 
          <a class="heading" href="../../products/#developer_tools">Developer Tools</a> 
          <a class="hide-on-mobile" href="../../products/rhamt/overview/">Red Hat Application Migration Toolkit</a> 
          <a class="hide-on-mobile" href="../../products/cdk/overview/">Red Hat Container Development Kit</a> 
          <a class="hide-on-mobile" href="../../products/devsuite/overview/">Red Hat Development Suite</a> 
          <a class="hide-on-mobile" href="../../products/developertoolset/overview/">Red Hat Developer Toolset</a> 
          <a class="hide-on-mobile" href="../../products/devstudio/overview/">Red Hat JBoss Developer Studio</a> 
         </div> 
         <div class="sub-nav-group"> 
          <a class="heading" href="../../products/#infrastructure">Infrastructure</a> 
          <a class="hide-on-mobile" href="../../products/rhel/overview/">Red Hat Enterprise Linux</a> 
          <a class="hide-on-mobile" href="../../products/softwarecollections/overview/">Red Hat Software Collections</a> 
         </div> 
         <div class="sub-nav-group"> 
          <a class="heading" href="../../products/#integration_and_automation">Integration and Automation</a> 
          <a class="hide-on-mobile" href="../../products/amq/overview/">Red Hat JBoss AMQ</a> 
          <a class="hide-on-mobile" href="../../products/datavirt/overview/">Red Hat JBoss Data Virtualization</a> 
          <a class="hide-on-mobile" href="../../products/fuse/overview/">Red Hat JBoss Fuse</a> 
          <a class="hide-on-mobile" href="../../products/bpmsuite/overview/">Red Hat JBoss BPM Suite</a> 
          <a class="hide-on-mobile" href="../../products/brms/overview/">Red Hat JBoss BRMS</a> 
         </div> 
         <div class="sub-nav-group"> 
          <a class="heading" href="../../products/#mobile">Mobile</a> 
          <a class="hide-on-mobile" href="../../products/mobileplatform/overview/">Red Hat Mobile Application Platform</a> 
         </div> 
         <div class="sub-nav-group"> 
          <a class="heading" href="../../products/#cloud">Cloud</a> 
          <a class="hide-on-mobile" href="../../products/rhoar/overview/">Red Hat OpenShift Application Runtimes</a> 
          <a class="hide-on-mobile" href="../../products/openshift/overview/">Red Hat OpenShift Container Platform</a> 
         </div> 
         <div class="sub-nav-group"> 
          <a class="heading" href="../../products/#runtimes">Runtimes</a> 
          <a class="hide-on-mobile" href="../../products/openjdk/overview/">OpenJDK</a> 
          <a class="hide-on-mobile" href="../../products/dotnet/overview/">.NET Core</a> 
         </div> 
        </div> </li> 
       <li class="has-sub-nav"> <a href="#" class="sub-nav-community">Community<i class="fa fa-angle-down"></i></a> 
        <div class="sub-nav pull-right" id="sub-nav-community"> 
         <a href="https://developers.redhat.com/blog">Developers Blog<span class="page-description">Insights &amp; news on Red Hat developer tools, platforms and more</span></a> 
         <a href="../../events/">Events<span class="page-description">Find the latest conferences, meetups, and virtual seminars</span></a> 
         <div class="sub-nav-group"> 
          <a href="../../projects/">Open Source Communities<span class="page-description">Community Projects that Red Hat participates in</span></a> 
         </div> 
         <a href="../../community/contributor/">Content Contributors<span class="page-description">Share your knowledge. Contribute content to Red Hat Developers.</span></a> 
        </div> </li> 
       <li class="has-sub-nav"> <a href="#" class="sub-nav-help">Help<i class="fa fa-angle-down"></i></a> 
        <div class="sub-nav pull-right" id="sub-nav-help"> 
         <a href="../../resources/">Resources<span class="page-description">Important technical resources for you in all shapes and sizes: blogs, books, code, videos and more.</span></a> 
         <a href="../../forums/">Forums<span class="page-description">We've extended our popular JBoss.org forums to cover our entire Red Hat portfolio for you.</span></a> 
         <a href="../../stack-overflow/">Stack Overflow Q&amp;A<span class="page-description">You already use Stack Overflow, so we'll help you use it to find your best answers.</span></a> 
        </div> </li> 
       <li><a href="../../downloads/" class="sub-nav-downloads">Downloads </a></li> 
      </ul>
     </nav> 
    </div> 
   </header>
   <div class="wrapper clearfix"> 
    <div class="content-wrapper"> 
     <div id="page-wrapper"> 
      <div id="page"> 
       <div id="main-wrapper"> 
        <div class="region region-content"> 
         <div id="block-rhd-content" data-block-plugin-id="system_main_block" class="block block-system block-system-main-block"> 
          <article data-history-node-id="14145" role="article" about="/ticket-monster/userfrontend" typeof="schema:WebPage" class="node node--type-page node--view-mode-full">
           <span property="schema:name" content="Building The User UI Using HTML5" class="rdf-meta hidden"></span> 
           <div class="node__content"> 
            <div property="schema:text" class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item"> 
             <noscript>
              <meta name="DCP:WebpageSearchExclude" content="true">
             </noscript> 
             <div class="row">
              <h2 class="large-title" id="developer-materials">Developer Materials</h2>
             </div> 
             <div class="row" itemscope itemtype="http://schema.org/Article"> 
              <div class="collapse large-24"> 
               <h2 class="divider" id="start" itemprop="name">Building The User UI Using HTML5</h2> 
               <div class="gsi-meta" data-searchisko-type="jbossdeveloper_example" data-searchisko-id="4e385af0">
                <ul> 
                 <li><strong>Author: <span><span class="name"><a href="https://developer.jboss.org/people/marius.bogoevici" itemprop="author" class="external-link">Marius Bogoevici</a></span><span class="hide"></span></span></strong></li> 
                 <li><strong>Contributors: <span><span class="name">Vineet.Reynolds@gmail.com</span></span>, <span><span class="name">pmuir@bleepbleep.org.uk</span></span>, <span><span class="name">lightguard.jp@gmail.com</span></span>, <span><span class="name">rafabene@gmail.com</span></span>, <span><span class="name">emmanuel@hibernate.org</span></span>, <span><span class="name">marius.bogoevici@gmail.com</span></span></strong></li> 
                 <li><strong>Published: <span itemprop="dateModified">Jan 15, 2015</span></strong></li> 
                </ul>
               </div> 
              </div> 
              <div class="row content">
               <div class="columns large-24"> 
                <div class="columns medium-4"> 
                 <ul class="toc gsi-nav"> 
                  <li><a href="#_what_will_you_learn_here">What Will You Learn Here?</a></li> 
                  <li><a href="#_first_the_basics">First, the basics</a></li> 
                  <li><a href="#_setting_up_the_structure">Setting up the structure</a></li> 
                  <li><a href="#_setting_up_the_initial_views">Setting up the initial views</a></li> 
                  <li><a href="#_displaying_events">Displaying Events</a></li> 
                  <li><a href="#_viewing_a_single_event">Viewing a single event</a></li> 
                  <li><a href="#_creating_bookings">Creating Bookings</a></li> 
                  <li><a href="#_mobile_view">Mobile view</a></li> 
                 </ul> 
                 <br> 
                </div> 
                <div class="columns medium-16 gsi"> 
                 <div class="sect1"> 
                  <h2 id="_what_will_you_learn_here"> <a class="anchor" href="#_what_will_you_learn_here"></a>What Will You Learn Here?</h2> 
                  <div class="sectionbody"> 
                   <div class="paragraph"> 
                    <p>We’ve just implemented the business services of our application, and exposed them through RESTful endpoints. Now we need to implement a flexible user interface that can be easily used with both desktop and mobile clients. After reading this tutorial, you will understand our front-end design and the choices that we made in its implementation. Topics covered include:</p> 
                   </div> 
                   <div class="ulist"> 
                    <ul> 
                     <li> <p>Creating single-page applications using HTML5, JavaScript and JSON</p> </li> 
                     <li> <p>Using JavaScript frameworks for invoking RESTful endpoints and manipulating page content</p> </li> 
                     <li> <p>Feature and device detection</p> </li> 
                     <li> <p>Implementing a version of the user interface that is optimized for mobile clients using JavaScript frameworks such as jQuery mobile</p> </li> 
                    </ul> 
                   </div> 
                   <div class="paragraph"> 
                    <p>The tutorial will show you how to perform all these steps in JBoss Developer Studio, including screenshots that guide you through.</p> 
                   </div> 
                  </div> 
                 </div> 
                 <div class="sect1"> 
                  <h2 id="_first_the_basics"> <a class="anchor" href="#_first_the_basics"></a>First, the basics</h2> 
                  <div class="sectionbody"> 
                   <div class="paragraph"> 
                    <p>In this tutorial, we will build a single-page application. All the necessary code: HTML, CSS and JavaScript is retrieved within a single page load. Rather than refreshing the page every time the user changes a view, the content of the page will be redrawn by manipulating the DOM in JavaScript. The application uses REST calls to retrieve data from the server.</p> 
                   </div> 
                   <div id="single-page-app_image" class="imageblock"> 
                    <div class="content"> 
                     <img src="https://static.jboss.org/rhd/images/_ticket-monster_tutorial_gfx_single-page-app-4.png" alt=" ticket monster tutorial gfx single page app 4"> 
                    </div> 
                    <div class="title">
                     Figure 1. Single page application
                    </div> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_client_side_mvc_support"> <a class="anchor" href="#_client_side_mvc_support"></a>Client-side MVC Support</h3> 
                    <div class="paragraph"> 
                     <p>Because this is a moderately complex example, which involves multiple views and different types of data, we will use a client-side MVC framework to structure the application, which provides amongst others:</p> 
                    </div> 
                    <div class="ulist"> 
                     <ul> 
                      <li> <p>routing support within the single page application;</p> </li> 
                      <li> <p>event-driven interaction between views and data;</p> </li> 
                      <li> <p>simplified CRUD invocations on RESTful services.</p> </li> 
                     </ul> 
                    </div> 
                    <div class="paragraph"> 
                     <p>In this application we use the client-side MVC framework "backbone.js".</p> 
                    </div> 
                    <div id="use-of-backbone_image" class="imageblock"> 
                     <div class="content"> 
                      <img src="https://static.jboss.org/rhd/images/_ticket-monster_tutorial_gfx_backbone-usage-4.png" alt=" ticket monster tutorial gfx backbone usage 4"> 
                     </div> 
                     <div class="title">
                      Figure 2. Backbone architecture
                     </div> 
                    </div> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_modularity"> <a class="anchor" href="#_modularity"></a>Modularity</h3> 
                    <div class="paragraph"> 
                     <p>In order to provide good separation of concerns, we split the JavaScript code into modules. Ensuring that all the modules of the application are loaded properly at runtime becomes a complex task, as the application size increases. To conquer this complexity, we use the Asynchronous Module Definition mechanism as implemented by the "require.js" library.</p> 
                    </div> 
                    <div class="admonitionblock tip"> 
                     <table>
                      <tbody>
                       <tr> 
                        <td class="icon"> 
                         <div class="title">
                          Tip
                         </div> </td> 
                        <td class="content"> 
                         <div class="title">
                          Asynchronous Module Definition
                         </div> 
                         <div class="paragraph"> 
                          <p>The Asynchronous Module Definition (AMD) API specifies a mechanism for defining modules such that the module, and its dependencies, can be asynchronously loaded. This is particularly well suited for the browser where synchronous loading of modules incurs performance, usability, debugging, and cross-domain access problems.</p> 
                         </div> </td> 
                       </tr>
                      </tbody>
                     </table> 
                    </div> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_templating"> <a class="anchor" href="#_templating"></a>Templating</h3> 
                    <div class="paragraph"> 
                     <p>Instead of manipulating the DOM directly, and mixing up HTML with the JavaScript code, we create HTML markup fragments separately as templates which are applied when the application views are rendered.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>In this application we use the templating support provided by "underscore.js".</p> 
                    </div> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_mobile_and_desktop_versions"> <a class="anchor" href="#_mobile_and_desktop_versions"></a>Mobile and desktop versions</h3> 
                    <div class="paragraph"> 
                     <p>The page flow and structure, as well as feature set, are slightly different for mobile and desktop, and therefore we will build two variants of the single-page-application, one for desktop and one for mobile. As the application variants are very similar, we will cover the desktop version of the application first, and then we will explain what is different in the mobile version.</p> 
                    </div> 
                   </div> 
                  </div> 
                 </div> 
                 <div class="sect1"> 
                  <h2 id="_setting_up_the_structure"> <a class="anchor" href="#_setting_up_the_structure"></a>Setting up the structure</h2> 
                  <div class="sectionbody"> 
                   <div class="paragraph"> 
                    <p>Before we start developing the user interface, we need to set up the general application structure and add the JavaScript libraries. First, we create the directory structure:</p> 
                   </div> 
                   <div id="ui-directory-structure" class="imageblock"> 
                    <div class="content"> 
                     <img src="https://static.jboss.org/rhd/images/_ticket-monster_tutorial_gfx_ui-file-structure-4.png" alt=" ticket monster tutorial gfx ui file structure 4"> 
                    </div> 
                    <div class="title">
                     Figure 3. File structure for our web application
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>We put stylesheets in <code>resources/css</code> folder, images in <code>resources/img</code>, and HTML view templates in <code>resources/templates</code>. <code>resources/js</code> contains the JavaScript code, split between <code>resources/js/libs</code> - which contains the libraries used by the application, <code>resources/js/app</code> - which contains the application code, and <code>resources/js/configurations</code> which contains module definitions for the different versions of the application - i.e. mobile and desktop. The <code>resources/js/app</code> folder will contain the application modules, in subsequent subdirectories, for models, collections, routers and views.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>The first step in implementing our solution is adding the stylesheets and JavaScript libraries to the <code>resources/css</code> and <code>resources/js/libs</code>:</p> 
                   </div> 
                   <div class="dlist"> 
                    <dl> 
                     <dt class="hdlist1">
                      require.js
                     </dt> 
                     <dd> 
                      <p>AMD support, along with the plugin:</p> 
                      <div class="ulist"> 
                       <ul> 
                        <li> <p>text - for loading text files, in our case the HTML templates</p> </li> 
                       </ul> 
                      </div> 
                     </dd> 
                     <dt class="hdlist1">
                      jQuery
                     </dt> 
                     <dd> 
                      <p>general purpose library for HTML traversal and manipulation</p> 
                     </dd> 
                     <dt class="hdlist1">
                      Underscore
                     </dt> 
                     <dd> 
                      <p>JavaScript utility library (and a dependency of Backbone)</p> 
                     </dd> 
                     <dt class="hdlist1">
                      Backbone
                     </dt> 
                     <dd> 
                      <p>Client-side MVC framework</p> 
                     </dd> 
                     <dt class="hdlist1">
                      Bootstrap
                     </dt> 
                     <dd> 
                      <p>UI components and stylesheets for page structuring</p> 
                     </dd> 
                     <dt class="hdlist1">
                      Modernizr
                     </dt> 
                     <dd> 
                      <p>JavaScript library for HTML5 and CSS3 feature detection</p> 
                     </dd> 
                    </dl> 
                   </div> 
                   <div class="paragraph"> 
                    <p>You can copy these libraries (with associated stylesheets) from the project sources. You can also copy the CSS stylesheet in <code>screen.css</code>, since we’ll include this stylesheet in the HTML. Addtionally, copy the images from the <code>src/main/webapp/resources/img</code> directory in the project sources to the equivalent one in your workspace.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>Now, we create the main page of the application (which is the URL loaded by the browser):</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-html" data-lang="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Ticket Monster&lt;/title&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"/&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0"/&gt;

    &lt;script type="text/javascript" src="resources/js/libs/modernizr-2.8.3.min.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" src="resources/js/libs/require.js"
            data-main="resources/js/configurations/loader"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>As you can see, the page does not contain much. It loads Modernizr (for HTML5 and CSS3 feature detection) and RequireJS (for loading JavaScript modules in an asynchronous manner). Once RequireJS is loaded by the browser, it will configure itself to use a <code>baseUrl</code> of <code>resources/js/configurations</code> (specified via the <code>data-main</code> attribute on the <code>script</code> tag). All scripts loaded by RequireJS will use this <code>baseUrl</code> unless specified otherwise.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>RequireJS will then load a script having a module ID of <code>loader</code> (again, specified via the <code>data-main</code> attribute):</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/js/configurations/loader.js
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-javascript" data-lang="javascript">//detect the appropriate module to load
define(function () {

    /*
     A simple check on the client. For touch devices or small-resolution screens)
     show the mobile client. By enabling the mobile client on a small-resolution screen
     we allow for testing outside a mobile device (like for example the Mobile Browser
     simulator in JBoss Tools and JBoss Developer Studio).
     */

    var environment;

    if (Modernizr.touch || Modernizr.mq("only all and (max-width: 480px)")) {
        environment = "mobile"
    } else {
        environment = "desktop"
    }

    require([environment]);
});</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>This script detects the current client (mobile or desktop) based on its capabilities (touch or not) and loads another JavaScript module (<code>desktop</code> or <code>mobile</code>) defined in the <code>resources/js/configurations</code> folder (aka the <code>baseUrl</code>) depending on the detected features. In the case of the desktop client, the code is loaded from <code>resources/js/configurations/desktop.js</code>.</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/js/configurations/desktop.js
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * Shortcut alias definitions - will come in handy when declaring dependencies
 * Also, they allow you to keep the code free of any knowledge about library
 * locations and versions
 */
requirejs.config({
    baseUrl: "resources/js",
    paths: {
        jquery:'libs/jquery-2.0.3',
        underscore:'libs/underscore',
        text:'libs/text',
        bootstrap: 'libs/bootstrap',
        backbone: 'libs/backbone',
        utilities: 'app/utilities',
        router:'app/router/desktop/router'
    },
    // We shim Backbone.js and Underscore.js since they don't declare AMD modules
    shim: {
        'backbone': {
            deps: ['jquery', 'underscore'],
            exports: 'Backbone'
        },

        'underscore': {
            exports: '_'
        }
    }
});

define("initializer", ["jquery"],
    function ($) {
    // Configure jQuery to append timestamps to requests, to bypass browser caches
    // Important for MSIE
    $.ajaxSetup({cache:false});
    $('head').append('&lt;link rel="stylesheet" href="resources/css/bootstrap.css" type="text/css" media="all"/&gt;');
    $('head').append('&lt;link rel="stylesheet" href="resources/css/bootstrap-theme.css" type="text/css" media="all"/&gt;');
    $('head').append('&lt;link rel="stylesheet" href="resources/css/screen.css" type="text/css" media="all"/&gt;');
    $('head').append('&lt;link href="http://fonts.googleapis.com/css?family=Rokkitt" rel="stylesheet" type="text/css"&gt;');
});

// Now we load the dependencies
// This loads and runs the 'initializer' and 'router' modules.
require([
    'initializer',
    'router'
], function(){
});

define("configuration", {
    baseUrl : ""
});</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>The module loads all the utility libraries, converting them to AMD modules where necessary (like it is the case for Backbone). It also defines two modules of its own - an initializer that loads the application stylesheets for the page, and the <code>configuration</code> module that allows customizing the REST service URLs (this will become in handy in a further tutorial).</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>We also define some utility JavaScript functions that are used in the rest of the front-end in a <code>utilities</code> module (also referenced in the <code>desktop</code> module above). For convenience, copy the <code>utilities.js</code> file from the <code>src/main/webapp/resources/js/app/</code> directory in the project sources.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>Before we add any functionality, let us create a first landing page. We will begin by setting up a critical piece of the application, the router.</p> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_routing"> <a class="anchor" href="#_routing"></a>Routing</h3> 
                    <div class="paragraph"> 
                     <p>The router allows for navigation in our application via bookmarkable URLs, and we will define it as follows:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/router/desktop/router.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * A module for the router of the desktop application
 */
define("router", [
    'jquery',
    'underscore',
    'configuration',
    'utilities',
    'text!../templates/desktop/main.html'
],function ($,
            _,
            config,
            utilities,
            MainTemplate) {

    $(document).ready(new function() {
       utilities.applyTemplate($('body'), MainTemplate)
    })

    /**
     * The Router class contains all the routes within the application -
     * i.e. URLs and the actions that will be taken as a result.
     *
     * @type {Router}
     */

    var Router = Backbone.Router.extend({
        initialize: function() {
            //Begin dispatching routes
            Backbone.history.start();
        },
        routes:{
        }
    });

    // Create a router instance
    var router = new Router();

    return router;
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Remember, this is a single page application. You can either navigate using urls such as <code><a href="http://localhost:8080/ticket-monster/#events" class="bare external-link">http://localhost:8080/ticket-monster/#events</a></code> or using relative urls (from within the application, this being exactly what the main menu does). The fragment after the hash sign represents the url within the single page, on which the router will act, according to the mappings set up in the <code>routes</code> property.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>During the router set up, we load the page template for the entire application. TicketMonster uses a templating library in order to separate application logic from it’s actual graphical content. The actual HTML is described in template files, which are applied by the application, when necessary, on a DOM element - effectively populating it’s content. So the general content of the page, as described in the <code>body</code> element is described in a template file too. Let us define it.</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/desktop/main.html
                     </div> 
                     <div class="content"> 
                      <pre>&lt;!--
    The main layout of the page - contains the menu and the 'content' &amp;lt;div/&amp;gt; in which all the
    views will render the content.
--&gt;
&lt;div id="logo"&gt;&lt;div class="wrap"&gt;&lt;h1&gt;Ticket Monster&lt;/h1&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div id="container"&gt;
    &lt;div id="menu"&gt;
        &lt;div class="navbar"&gt;
            &lt;!-- Toggle get grouped for better mobile display --&gt;
            &lt;div class="navbar-header"&gt;
                &lt;button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-items"&gt;
                    &lt;span class="sr-only"&gt;Toggle navigation&lt;/span&gt;
                    &lt;span class="icon-bar"&gt;&lt;/span&gt;
                    &lt;span class="icon-bar"&gt;&lt;/span&gt;
                    &lt;span class="icon-bar"&gt;&lt;/span&gt;
                &lt;/button&gt;
            &lt;/div&gt;

            &lt;!-- Collect the nav links, forms, and other content for toggling --&gt;
            &lt;div id="navbar-items" class="collapse navbar-collapse"&gt;
                &lt;ul class="nav navbar-nav"&gt;
                    &lt;li&gt;&lt;a href="#about"&gt;About&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href="#events"&gt;Events&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href="#venues"&gt;Venues&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href="#bookings"&gt;Bookings&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href="#monitor"&gt;Monitor&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href="admin"&gt;Administration&lt;/a&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div id="content" class="container"&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;footer style=""&gt;
    &lt;div style="text-align: center;"&gt;&lt;img src="resources/img/rhjb_eap_logo.png" alt="HTML5"/&gt;&lt;/div&gt;
&lt;/footer&gt;</pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>The actual HTML code of the template contains a menu definition which will be present on all the pages, as well as an empty element named <code>content</code>, which is the placeholder for the application views. When a view is displayed, it will apply a template and populate the <code>content</code> element.</p> 
                    </div> 
                   </div> 
                  </div> 
                 </div> 
                 <div class="sect1"> 
                  <h2 id="_setting_up_the_initial_views"> <a class="anchor" href="#_setting_up_the_initial_views"></a>Setting up the initial views</h2> 
                  <div class="sectionbody"> 
                   <div class="paragraph"> 
                    <p>Let us complete our application setup by creating an initial landing page. The first thing that we will need to do is to add a view component.</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/resources/js/app/views/desktop/home.js
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * The About view
 */
define([
    'utilities',
    'text!../../../../templates/desktop/home.html'
], function (utilities, HomeTemplate) {

    var HomeView = Backbone.View.extend({
        render:function () {
            utilities.applyTemplate($(this.el),HomeTemplate,{});
            return this;
        }
    });

    return HomeView;
});</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>Functionally, this is a very basic component - it only renders the splash page of the application, but it helps us introduce a new concept that will be heavily used throughout the application views. One main role of a view is to describe the logic for manipulating the page content. It will do so by defining a function named <code>render</code> which will be invoked by the application. In this very simple case, all that the view does is to create the content of the splash page. You can proceed by copying the content of <code>src/main/webapp/resources/templates/desktop/home.html</code> to your project.</p> 
                   </div> 
                   <div class="admonitionblock tip"> 
                    <table>
                     <tbody>
                      <tr> 
                       <td class="icon"> 
                        <div class="title">
                         Tip
                        </div> </td> 
                       <td class="content"> 
                        <div class="title">
                         Backbone Views
                        </div> 
                        <div class="paragraph"> 
                         <p>Views are logical representations of user interface elements that can interact with data components, such as models in an event-driven fashion. Apart from defining the logical structure of your user interface, views handle events resulting from the user interaction (e.g. clicking a DOM element or selecting an element into a list), translating them into logical actions inside the application.</p> 
                        </div> </td> 
                      </tr>
                     </tbody>
                    </table> 
                   </div> 
                   <div class="paragraph"> 
                    <p>Once we defined a view, we must tell the router to navigate to it whenever requested. We will add the following dependency and mapping to the router:</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/js/app/router/desktop/router.js
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * A module for the router of the desktop application
 */
define("router", [
    'jquery',
    'underscore',
    'configuration',
    'utilities',
    'app/views/desktop/home',
    'text!../templates/desktop/main.html'
],function ($,
            _,
            config,
            utilities,
            HomeView,
            MainTemplate) {

    ...
    var Router = Backbone.Router.extend({
        ...
        routes : {
            "":"home",
            "about":"home"
        },
        home : function () {
            utilities.viewManager.showView(new HomeView({el:$("#content")}));
        }
    });
    ...</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>We have just told the router to invoke the <code>home</code> function whenever the user navigates to the root of the application or uses a <code>#about</code> hash. The method will simply cause the <code>HomeView</code> defined above to render.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>Now you can navigate to <code><a href="http://localhost:8080/ticket-monster/#about" class="bare external-link">http://localhost:8080/ticket-monster/#about</a></code> or <code><a href="http://localhost:8080/ticket-monster" class="bare external-link">http://localhost:8080/ticket-monster</a></code> and see the results.</p> 
                   </div> 
                  </div> 
                 </div> 
                 <div class="sect1"> 
                  <h2 id="_displaying_events"> <a class="anchor" href="#_displaying_events"></a>Displaying Events</h2> 
                  <div class="sectionbody"> 
                   <div class="paragraph"> 
                    <p>The first use case that we implement is event navigation. The users will be able to view the list of events and select the one that they want to attend. After doing so, they will select a venue, and will be able to choose a performance date and time.</p> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_the_event_model"> <a class="anchor" href="#_the_event_model"></a>The Event model</h3> 
                    <div class="paragraph"> 
                     <p>We define a Backbone model for holding event data. Nearly all domain entities (booking, event, venue) are represented by a corresponding Backbone model:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/models/event.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * Module for the Event model
 */
define([
    'configuration',
    'backbone'
], function (config) {
    /**
     * The Event model class definition
     * Used for CRUD operations against individual events
     */
    var Event = Backbone.Model.extend({
        urlRoot: config.baseUrl + 'rest/events' // the URL for performing CRUD operations
    });
    // export the Event class
    return Event;
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>The <code>Event</code> model can perform CRUD operations against the REST services we defined earlier.</p> 
                    </div> 
                    <div class="admonitionblock tip"> 
                     <table>
                      <tbody>
                       <tr> 
                        <td class="icon"> 
                         <div class="title">
                          Tip
                         </div> </td> 
                        <td class="content"> 
                         <div class="title">
                          Backbone Models
                         </div> 
                         <div class="paragraph"> 
                          <p>Backbone models contain data as well as much of the logic surrounding it: conversions, validations, computed properties, and access control. They also perform CRUD operations with the REST service.</p> 
                         </div> </td> 
                       </tr>
                      </tbody>
                     </table> 
                    </div> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_the_events_collection"> <a class="anchor" href="#_the_events_collection"></a>The Events collection</h3> 
                    <div class="paragraph"> 
                     <p>We define a Backbone collection for handling groups of events (like the events list):</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/collections/events.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * Module for the Events collection
 */
define([
    // The collection element type and configuration are dependencies
    'app/models/event',
    'configuration'
], function (Event, config) {
    /**
     *  Here we define the Bookings collection
     *  We will use it for CRUD operations on Bookings
     */
    var Events = Backbone.Collection.extend({
        url: config.baseUrl + "rest/events", // the URL for performing CRUD operations
        model: Event,
        id:"id", // the 'id' property of the model is the identifier
        comparator:function (model) {
            return model.get('category').id;
        }
    });
    return Events;
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>By mapping the model and collection to a REST endpoint you can perform CRUD operations without having to invoke the services explicitly. You will see how that works a bit later.</p> 
                    </div> 
                    <div class="admonitionblock tip"> 
                     <table>
                      <tbody>
                       <tr> 
                        <td class="icon"> 
                         <div class="title">
                          Tip
                         </div> </td> 
                        <td class="content"> 
                         <div class="title">
                          Backbone Collections
                         </div> 
                         <div class="paragraph"> 
                          <p>Collections are ordered sets of models. They can handle events which are fired as a result of a change to a individual member, and can perform CRUD operations for syncing up contents against RESTful services.</p> 
                         </div> </td> 
                       </tr>
                      </tbody>
                     </table> 
                    </div> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_the_eventsview_view"> <a class="anchor" href="#_the_eventsview_view"></a>The EventsView view</h3> 
                    <div class="paragraph"> 
                     <p>Now that we have implemented the data components of the example, we need to create the view that displays them.</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/views/desktop/events.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">define([
    'utilities',
    'bootstrap',
    'text!../../../../templates/desktop/events.html'
], function (
    utilities,
    bootstrap,
    eventsTemplate) {

    var EventsView = Backbone.View.extend({
        events:{
            "click a":"update"
        },
        render:function () {
            var categories = _.uniq(
                _.map(this.model.models, function(model){
                    return model.get('category')
                }), false, function(item){
                    return item.id
                });
            utilities.applyTemplate($(this.el), eventsTemplate, {categories:categories, model:this.model})
            $(this.el).find('.item:first').addClass('active');
            $(".carousel").carousel();
            $("a[rel='popover']").popover({trigger:'hover',container:'body'});
            return this;
        },
        update:function () {
            $("a[rel='popover']").popover('hide')
        }
    });

    return  EventsView;
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>As we explained, earlier, the view is attached to a DOM element (the <code>el</code> property). When the <code>render</code> method is invoked, it manipulates the DOM and renders the view. We could have achieved this by writing these instructions directly in the method, but that would make it hard to change the page design later on. Instead, we create a template and apply it, thus separating the HTML view code from the view implementation. Note the dependency on the Bootstrap module - we initialize the Bootstrap carousel and popover components when this view is rendered.</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/desktop/events.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="row"&gt;
    &lt;div class="col-md-3 col-md-offset-1"&gt;
        &lt;div class="panel" id="itemMenu"&gt;

            &lt;%
            _.each(categories, function (category) {
            %&gt;
            &lt;div class="panel panel-default"&gt;
                &lt;div class="panel-heading"&gt;
                    &lt;a class="panel-toggle"
                       data-target="#category-&lt;%=category.id%&gt;-collapsible" data-toggle="collapse"
                       data-parent="#itemMenu"&gt;&lt;%= category.description %&gt;&lt;/a&gt;
                &lt;/div&gt;
                &lt;div id="category-&lt;%=category.id%&gt;-collapsible" class="panel-collapse collapse"&gt;
                    &lt;div id="category-&lt;%- category.id%&gt;" class="panel-body"&gt;

                        &lt;%
                        _.each(model.models, function (model) {
                        if (model.get('category').id == category.id) {
                        %&gt;
                        &lt;p&gt;&lt;a href="#events/&lt;%- model.attributes.id%&gt;" rel="popover"
                              data-content="&lt;%- model.attributes.description%&gt;"
                              data-original-title="&lt;%- model.attributes.name%&gt;"&gt;&lt;%=model.attributes.name%&gt;&lt;/a&gt;&lt;/p&gt;
                        &lt;% }
                        });
                        %&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;% }); %&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;div id='itemSummary' class="col-md-8 hidden-sm hidden-xs"&gt;
        &lt;div class="carousel-container"&gt;
            &lt;div id="eventCarousel" class="carousel slide"&gt;
                &lt;!-- Carousel items --&gt;
                &lt;div class="carousel-inner"&gt;
                    &lt;%_.each(model.models, function(model) {
                        if( model.get('mediaItem')) {
                    %&gt;
                    &lt;div class="item"&gt;
                        &lt;img src='rest/media/&lt;%=model.attributes.mediaItem.id%&gt;'/&gt;

                        &lt;div class="carousel-caption"&gt;
                            &lt;div class="row"&gt;
                                &lt;div class="col-md-9"&gt;
                                    &lt;h4&gt;&lt;%=model.attributes.name%&gt;&lt;/h4&gt;
                                    &lt;p&gt;&lt;%=model.attributes.description%&gt;&lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class="col-md-2"&gt;
                                    &lt;a class="btn btn-danger action" href="#events/&lt;%=model.id%&gt;"&gt;Book tickets&lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;%
                        }
                     });
                    %&gt;
                &lt;/div&gt;
                &lt;!-- Carousel nav --&gt;
                &lt;a class="carousel-control left" href="#eventCarousel" data-slide="prev"&gt;
                    &lt;span class="glyphicon glyphicon-chevron-left"&gt;&lt;/span&gt;
                &lt;/a&gt;
                &lt;a class="carousel-control right" href="#eventCarousel" data-slide="next"&gt;
                    &lt;span class="glyphicon glyphicon-chevron-right"&gt;&lt;/span&gt;
                &lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>As well as applying the template and preparing the data that will be used to fill it in (the <code>categories</code> and <code>model</code> entries in the map), the <code>render</code> method also performs the JavaScript calls that are required to initialize the UI components (in this case the Bootstrap carousel and popover).</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>A view can also listen to events fired by the children of it’s root element (<code>el</code>). In this case, the <code>update</code> method is configured to listen to clicks on anchors. The configuration occurs within the <code>events</code> property of the class.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Now that the views are in place, we need to add another routing rule to the application.</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/router/desktop/router.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * A module for the router of the desktop application
 */
define("router", [
    ...
    'utilities',
    'app/collections/events',
    'app/views/desktop/home',
    'app/views/desktop/events',
    ...
    'text!../templates/desktop/main.html'
],function ($,
            ...
            utilities,
            Events,
            HomeView,
            EventsView,
            ...
            MainTemplate) {

    var Router = Backbone.Router.extend({
        ...
        routes : {
            ...,
            "events":"events"
        },
        ...,
        events:function () {
            var events = new Events();
            var eventsView = new EventsView({model:events, el:$("#content")});
            events.on("reset",
                function () {
                    utilities.viewManager.showView(eventsView);
                }).fetch({
                    reset : true,
                    error : function() {
                        utilities.displayAlert("Failed to retrieve events from the TicketMonster server.");
                    }
                });
        }
    });</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>The <code>events</code> function handles the <code>#events</code> fragment and will retrieve the events in our application via a REST call. We don’t manually perform the REST call as it is triggered the by invocation of <code>fetch</code> on the <code>Events</code> collection, as discussed earlier.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>The <code>reset</code> event on the collection is invoked when the data from the server is received, and the collection is populated. This triggers the rendering of the events view (which is bound to the <code>#content</code> div).</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>The whole process is event orientated - the models, views and controllers interact through events.</p> 
                    </div> 
                   </div> 
                  </div> 
                 </div> 
                 <div class="sect1"> 
                  <h2 id="_viewing_a_single_event"> <a class="anchor" href="#_viewing_a_single_event"></a>Viewing a single event</h2> 
                  <div class="sectionbody"> 
                   <div class="paragraph"> 
                    <p>With the events list view now in place, we can add a view to display the details of each individual event, allowing the user to select a venue and performance time.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>We already have the models in place so all we need to do is to create the additional view and expand the router. First, we’ll implement the view:</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/js/app/views/desktop/event-detail.js
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-javascript" data-lang="javascript">define([
    'utilities',
    'require',
    'text!../../../../templates/desktop/event-detail.html',
    'text!../../../../templates/desktop/media.html',
    'text!../../../../templates/desktop/event-venue-description.html',
    'configuration',
    'bootstrap'
], function (
    utilities,
    require,
    eventDetailTemplate,
    mediaTemplate,
    eventVenueDescriptionTemplate,
    config,
    Bootstrap) {

    var EventDetail = Backbone.View.extend({

        events:{
            "click input[name='bookButton']":"beginBooking",
            "change select[id='venueSelector']":"refreshShows",
            "change select[id='dayPicker']":"refreshTimes"
        },

        render:function () {
            $(this.el).empty()
            utilities.applyTemplate($(this.el), eventDetailTemplate, this.model.attributes);
            $("#bookingOption").hide();
            $("#venueSelector").attr('disabled', true);
            $("#dayPicker").empty();
            $("#dayPicker").attr('disabled', true)
            $("#performanceTimes").empty();
            $("#performanceTimes").attr('disabled', true)
            var self = this
            $.getJSON(config.baseUrl + "rest/shows?event=" + this.model.get('id'), function (shows) {
                self.shows = shows
                $("#venueSelector").empty().append("&lt;option value='0' selected&gt;Select a venue&lt;/option&gt;");
                $.each(shows, function (i, show) {
                    $("#venueSelector").append("&lt;option value='" + show.id + "'&gt;" + show.venue.address.city + " : " + show.venue.name + "&lt;/option&gt;")
                });
                $("#venueSelector").removeAttr('disabled')
            })
            return this;
        },
        beginBooking:function () {
            require("router").navigate('/book/' + $("#venueSelector option:selected").val() + '/' + $("#performanceTimes").val(), true)
        },
        refreshShows:function (event) {
            event.stopPropagation();
            $("#dayPicker").empty();

            var selectedShowId = event.currentTarget.value;

            if (selectedShowId != 0) {
                var selectedShow = _.find(this.shows, function (show) {
                    return show.id == selectedShowId
                });
                this.selectedShow = selectedShow;
                utilities.applyTemplate($("#eventVenueDescription"), eventVenueDescriptionTemplate, {venue:selectedShow.venue});
                var times = _.uniq(_.sortBy(_.map(selectedShow.performances, function (performance) {
                    return (new Date(performance.date).withoutTimeOfDay()).getTime()
                }), function (item) {
                    return item
                }));
                utilities.applyTemplate($("#venueMedia"), mediaTemplate, selectedShow.venue)
                $("#dayPicker").removeAttr('disabled')
                $("#performanceTimes").removeAttr('disabled')
                _.each(times, function (time) {
                    var date = new Date(time)
                    $("#dayPicker").append("&lt;option value='" + date.toYMD() + "'&gt;" + date.toPrettyStringWithoutTime() + "&lt;/option&gt;")
                });
                this.refreshTimes()
                $("#bookingWhen").show(100)
            } else {
                $("#bookingWhen").hide(100)
                $("#bookingOption").hide()
                $("#dayPicker").empty()
                $("#venueMedia").empty()
                $("#eventVenueDescription").empty()
                $("#dayPicker").attr('disabled', true)
                $("#performanceTimes").empty()
                $("#performanceTimes").attr('disabled', true)
            }

        },
        refreshTimes:function () {
            var selectedDate = $("#dayPicker").val();
            $("#performanceTimes").empty()
            if (selectedDate) {
                $.each(this.selectedShow.performances, function (i, performance) {
                    var performanceDate = new Date(performance.date);
                    if (_.isEqual(performanceDate.toYMD(), selectedDate)) {
                        $("#performanceTimes").append("&lt;option value='" + performance.id + "'&gt;" + performanceDate.getHours().toZeroPaddedString(2) + ":" + performanceDate.getMinutes().toZeroPaddedString(2) + "&lt;/option&gt;")
                    }
                })
            }
            $("#bookingOption").show()
        }

    });

    return  EventDetail;
});</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>This view is more complex than the global events view, as portions of the page need to be updated when the user chooses a venue.</p> 
                   </div> 
                   <div id="ui-event-detail" class="imageblock"> 
                    <div class="content"> 
                     <img src="https://static.jboss.org/rhd/images/_ticket-monster_tutorial_gfx_ui-event-details-4.png" alt=" ticket monster tutorial gfx ui event details 4"> 
                    </div> 
                    <div class="title">
                     Figure 4. On the event details page some fragments are re-rendered when the user selects a venue
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>The view responds to three different events:</p> 
                   </div> 
                   <div class="ulist"> 
                    <ul> 
                     <li> <p>changing the current venue triggers a reload of the venue details and the venue image, as well as the performance times. The application retrieves the performance times through a REST call.</p> </li> 
                     <li> <p>changing the day of the performance causes the performance time selector to reload.</p> </li> 
                     <li> <p>once the venue and performance date and time have been selected, the user can navigate to the booking page.</p> </li> 
                    </ul> 
                   </div> 
                   <div class="paragraph"> 
                    <p>The corresponding templates for the three fragments rendered above are:</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/templates/desktop/event-detail.html
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="row"&gt;
    &lt;h2 class="page-header special-title light-font"&gt;&lt;%=name%&gt;&lt;/h2&gt;
&lt;/div&gt;
&lt;div class="row"&gt;
    &lt;div class="col-md-4"&gt;
        &lt;div class="well"&gt;
            &lt;div class="row"&gt;
                &lt;h3 class="page-header col-md-6"&gt;What?&lt;/h3&gt;
                &lt;% if(mediaItem) { %&gt;&lt;img width="100" src='rest/media/&lt;%=mediaItem.id%&gt;'/&gt;&lt;% } %&gt;
            &lt;/div&gt;
            &lt;div class="row top5"&gt;
                &lt;div class="col-md-12"&gt;&lt;%= description %&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="col-md-4"&gt;
        &lt;div class="well"&gt;
            &lt;div class="row"&gt;
                &lt;h3 class="page-header col-md-6"&gt;Where?&lt;/h3&gt;
                &lt;div class="col-md-6" id='venueMedia'/&gt;
            &lt;/div&gt;
            &lt;div class="row top5"&gt;
                &lt;div class="col-md-12"&gt;
                    &lt;select id="venueSelector" class="form-control"/&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="row top5"&gt;
                &lt;div class="col-md-12"&gt;
                    &lt;div id="eventVenueDescription"/&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div id='bookingWhen' style="display: none;" class="col-md-4"&gt;
        &lt;div class="well"&gt;
            &lt;div class="row"&gt;
                &lt;h3 class="page-header col-md-6"&gt;When?&lt;/h3&gt;
            &lt;/div&gt;

            &lt;div class="row top5"&gt;
                &lt;div class="col-md-12"&gt;
                    &lt;select class="form-control" id="dayPicker"/&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="row top5"&gt;
                &lt;div class="col-md-12"&gt;
                    &lt;select class="form-control" id="performanceTimes"/&gt;
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div id="bookingOption" class="row top5"&gt;
                &lt;div class="col-md-6"&gt;
                    &lt;input name="bookButton" class="btn btn-primary" type="button" value="Order tickets"&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre> 
                    </div> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/templates/desktop/event-venue-description.html
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-html" data-lang="html">&lt;address&gt;
    &lt;p&gt;&lt;%= venue.description %&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Address:&lt;/strong&gt;&lt;/p&gt;
    &lt;p&gt;&lt;%= venue.address.street %&gt;&lt;/p&gt;
    &lt;p&gt;&lt;%= venue.address.city %&gt;, &lt;%= venue.address.country %&gt;&lt;/p&gt;
&lt;/address&gt;</code></pre> 
                    </div> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/templates/desktop/media.html
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-html" data-lang="html">&lt;%if (mediaItem) { %&gt;&lt;img width="100" src='rest/media/&lt;%=mediaItem.id%&gt;'/&gt;&lt;% } %&gt;</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>Now that the view exists, we add it to the router:</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/js/app/router/desktop/router.js
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * A module for the router of the desktop application
 */
define("router", [
    ...
    'app/models/event',
	...,
    'app/views/desktop/event-detail',
    ...
],function (
			...
            Event,
            ...
            EventDetailView,
            ...) {

    var Router = Backbone.Router.extend({
        ...
        routes:{
            ...
            "events/:id":"eventDetail",
        },
        ...
        eventDetail:function (id) {
            var model = new Event({id:id});
            var eventDetailView = new EventDetailView({model:model, el:$("#content")});
            model.on("change",
                function () {
                    utilities.viewManager.showView(eventDetailView);
                }).fetch({
                    error : function() {
                        utilities.displayAlert("Failed to retrieve the event from the TicketMonster server.");
                    }
                });
        }
    }
    ...
);</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>As you can see, this is very similar to the previous view and route, except that now the application can accept parameterized URLs (e.g. <code><a href="http://localhost:8080/ticket-monster/index#events/1" class="bare external-link">http://localhost:8080/ticket-monster/index#events/1</a></code>). This URL can be entered directly into the browser, or it can be navigated to as a relative path (e.g. <code>#events/1</code>) from within the applicaton.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>With this in place, all that remains is to implement the final view of this use case, creating the bookings.</p> 
                   </div> 
                  </div> 
                 </div> 
                 <div class="sect1"> 
                  <h2 id="_creating_bookings"> <a class="anchor" href="#_creating_bookings"></a>Creating Bookings</h2> 
                  <div class="sectionbody"> 
                   <div class="paragraph"> 
                    <p>The user has chosen the event, the venue and the performance time, and must now create the booking. Users can select one of the available sections for the show’s venue, and then enter the number of tickets required for each category available for this show (Adult, Child, etc.). They then add the tickets to the current order, which causes the summary view to be updated. Users can also remove tickets from the order. When the order is complete, they enter their contact information (e-mail address) and submit the order to the server.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>First, we add the new view:</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/js/app/views/desktop/create-booking.js
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-javascript" data-lang="javascript">define([
    'utilities',
    'require',
    'configuration',
    'text!../../../../templates/desktop/booking-confirmation.html',
    'text!../../../../templates/desktop/create-booking.html',
    'text!../../../../templates/desktop/ticket-categories.html',
    'text!../../../../templates/desktop/ticket-summary-view.html',
    'bootstrap'
],function (
    utilities,
    require,
    config,
    bookingConfirmationTemplate,
    createBookingTemplate,
    ticketEntriesTemplate,
    ticketSummaryViewTemplate){


    var TicketCategoriesView = Backbone.View.extend({
        id:'categoriesView',
        intervalDuration : 100,
        formValues : [],
        events:{
            "change input":"onChange"
        },
        render:function () {
            if (this.model != null) {
                var ticketPrices = _.map(this.model, function (item) {
                    return item.ticketPrice;
                });
                utilities.applyTemplate($(this.el), ticketEntriesTemplate, {ticketPrices:ticketPrices});
            } else {
                $(this.el).empty();
            }
            this.watchForm();
            return this;
        },
        onChange:function (event) {
            var value = event.currentTarget.value;
            var ticketPriceId = $(event.currentTarget).data("tm-id");
            var modifiedModelEntry = _.find(this.model, function (item) {
                return item.ticketPrice.id == ticketPriceId
            });
            // update model
            if ($.isNumeric(value) &amp;&amp; value &gt; 0) {
                modifiedModelEntry.quantity = parseInt(value);
            }
            else {
                delete modifiedModelEntry.quantity;
            }
            // display error messages
            if (value.length &gt; 0 &amp;&amp;
                   (!$.isNumeric(value)  // is a non-number, other than empty string
                        || value &lt;= 0 // is negative
                        || parseFloat(value) != parseInt(value))) { // is not an integer
                $("#error-input-"+ticketPriceId).empty().append("Please enter a positive integer value");
                $("#ticket-category-fieldset-"+ticketPriceId).addClass("error");
            } else {
                $("#error-input-"+ticketPriceId).empty();
                $("#ticket-category-fieldset-"+ticketPriceId).removeClass("error");
            }
            // are there any outstanding errors after this update?
            // if yes, disable the input button
            if (
               $("div[id^='ticket-category-fieldset-']").hasClass("error") ||
                   _.isUndefined(modifiedModelEntry.quantity) ) {
              $("input[name='add']").attr("disabled", true)
            } else {
              $("input[name='add']").removeAttr("disabled")
            }
        },
        watchForm: function() {
            if($("#sectionSelectorPlaceholder").length) {
                var self = this;
                $("input[name*='tickets']").each( function(index,element) {
                    if(element.value !== self.formValues[element.name]) {
                        self.formValues[element.name] = element.value;
                        $("input[name='"+element.name+"']").change();
                    }
                });
                this.timerObject = setTimeout(function() {
                    self.watchForm();
                }, this.intervalDuration);
            } else {
                this.onClose();
            }
        },
        onClose: function() {
            if(this.timerObject) {
                clearTimeout(this.timerObject);
                delete this.timerObject;
            }
        }
    });

    var TicketSummaryView = Backbone.View.extend({
        tagName:'tr',
        events:{
            "click i":"removeEntry"
        },
        render:function () {
            var self = this;
            utilities.applyTemplate($(this.el), ticketSummaryViewTemplate, this.model.bookingRequest);
        },
        removeEntry:function () {
            this.model.bookingRequest.tickets.splice(this.model.index, 1);
        }
    });

    var CreateBookingView = Backbone.View.extend({

        intervalDuration : 100,
        formValues : [],
        events:{
            "click input[name='submit']":"save",
            "change select[id='sectionSelect']":"refreshPrices",
            "keyup #email":"updateEmail",
            "change #email":"updateEmail",
            "click input[name='add']":"addQuantities",
            "click i":"updateQuantities"
        },
        render:function () {

            var self = this;
            $.getJSON(config.baseUrl + "rest/shows/" + this.model.showId, function (selectedShow) {

                self.currentPerformance = _.find(selectedShow.performances, function (item) {
                    return item.id == self.model.performanceId;
                });

                var id = function (item) {return item.id;};
                // prepare a list of sections to populate the dropdown
                var sections = _.uniq(_.sortBy(_.pluck(selectedShow.ticketPrices, 'section'), id), true, id);
                utilities.applyTemplate($(self.el), createBookingTemplate, {
                    sections:sections,
                    show:selectedShow,
                    performance:self.currentPerformance});
                self.ticketCategoriesView = new TicketCategoriesView({model:{}, el:$("#ticketCategoriesViewPlaceholder") });
                self.ticketSummaryView = new TicketSummaryView({model:self.model, el:$("#ticketSummaryView")});
                self.show = selectedShow;
                self.ticketCategoriesView.render();
                self.ticketSummaryView.render();
                $("#sectionSelector").change();
                self.watchForm();
            });
            return this;
        },
        refreshPrices:function (event) {
            var ticketPrices = _.filter(this.show.ticketPrices, function (item) {
                return item.section.id == event.currentTarget.value;
            });
            var sortedTicketPrices = _.sortBy(ticketPrices, function(ticketPrice) {
                return ticketPrice.ticketCategory.description;
            });
            var ticketPriceInputs = new Array();
            _.each(sortedTicketPrices, function (ticketPrice) {
                ticketPriceInputs.push({ticketPrice:ticketPrice});
            });
            this.ticketCategoriesView.model = ticketPriceInputs;
            this.ticketCategoriesView.render();
        },
        save:function (event) {
            var bookingRequest = {ticketRequests:[]};
            var self = this;
            bookingRequest.ticketRequests = _.map(this.model.bookingRequest.tickets, function (ticket) {
                return {ticketPrice:ticket.ticketPrice.id, quantity:ticket.quantity}
            });
            bookingRequest.email = this.model.bookingRequest.email;
            bookingRequest.performance = this.model.performanceId
            $("input[name='submit']").attr("disabled", true)
            $.ajax({url: (config.baseUrl + "rest/bookings"),
                data:JSON.stringify(bookingRequest),
                type:"POST",
                dataType:"json",
                contentType:"application/json",
                success:function (booking) {
                    this.model = {}
                    $.getJSON(config.baseUrl +'rest/shows/performance/' + booking.performance.id, function (retrievedPerformance) {
                        utilities.applyTemplate($(self.el), bookingConfirmationTemplate, {booking:booking, performance:retrievedPerformance })
                    });
                }}).error(function (error) {
                    if (error.status == 400 || error.status == 409) {
                        var errors = $.parseJSON(error.responseText).errors;
                        _.each(errors, function (errorMessage) {
                            $("#request-summary").append('&lt;div class="alert alert-error"&gt;&lt;a class="close" data-dismiss="alert"&gt;×&lt;/a&gt;&lt;strong&gt;Error!&lt;/strong&gt; ' + errorMessage + '&lt;/div&gt;')
                        });
                    } else {
                        $("#request-summary").append('&lt;div class="alert alert-error"&gt;&lt;a class="close" data-dismiss="alert"&gt;×&lt;/a&gt;&lt;strong&gt;Error! &lt;/strong&gt;An error has occured&lt;/div&gt;')
                    }
                    $("input[name='submit']").removeAttr("disabled");
                })

        },
        addQuantities:function () {
            var self = this;
            _.each(this.ticketCategoriesView.model, function (model) {
                if (model.quantity != undefined) {
                    var found = false;
                    _.each(self.model.bookingRequest.tickets, function (ticket) {
                        if (ticket.ticketPrice.id == model.ticketPrice.id) {
                            ticket.quantity += model.quantity;
                            found = true;
                        }
                    });
                    if (!found) {
                        self.model.bookingRequest.tickets.push({ticketPrice:model.ticketPrice, quantity:model.quantity});
                    }
                }
            });
            this.ticketCategoriesView.model = null;
            $('option:selected', 'select').removeAttr('selected');
            this.ticketCategoriesView.render();
            this.updateQuantities();
        },
        updateQuantities:function () {
            // make sure that tickets are sorted by section and ticket category
            this.model.bookingRequest.tickets.sort(function (t1, t2) {
                if (t1.ticketPrice.section.id != t2.ticketPrice.section.id) {
                    return t1.ticketPrice.section.id - t2.ticketPrice.section.id;
                }
                else {
                    return t1.ticketPrice.ticketCategory.id - t2.ticketPrice.ticketCategory.id;
                }
            });

            this.model.bookingRequest.totals = _.reduce(this.model.bookingRequest.tickets, function (totals, ticketRequest) {
                return {
                    tickets:totals.tickets + ticketRequest.quantity,
                    price:totals.price + ticketRequest.quantity * ticketRequest.ticketPrice.price
                };
            }, {tickets:0, price:0.0});

            this.ticketSummaryView.render();
            this.setCheckoutStatus();
        },
        updateEmail:function (event) {
            if ($(event.currentTarget).is(':valid')) {
                this.model.bookingRequest.email = event.currentTarget.value;
                $("#error-email").empty();
            } else {
                $("#error-email").empty().append("Please enter a valid e-mail address");
                delete this.model.bookingRequest.email;
            }
            this.setCheckoutStatus();
        },
        setCheckoutStatus:function () {
            if (this.model.bookingRequest.totals != undefined &amp;&amp; this.model.bookingRequest.totals.tickets &gt; 0 &amp;&amp; this.model.bookingRequest.email != undefined &amp;&amp; this.model.bookingRequest.email != '') {
                $('input[name="submit"]').removeAttr('disabled');
            }
            else {
                $('input[name="submit"]').attr('disabled', true);
            }
        },
        watchForm: function() {
            if($("#email").length) {
                var self = this;
                var element = $("#email");
                if(element.val() !== self.formValues["email"]) {
                    self.formValues["email"] = element.val();
                    $("#email").change();
                }
                this.timerObject = setTimeout(function() {
                    self.watchForm();
                }, this.intervalDuration);
            } else {
                this.onClose();
            }
        },
        onClose: function() {
            if(this.timerObject) {
                clearTimeout(this.timerObject);
                delete this.timerObject;
            }
            this.ticketCategoriesView.close();
        }
    });

    return CreateBookingView;
});</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>The code above may be surprising! After all, we said that we were going to add a single view, but instead, we added three! This view makes use of two subviews (<code>TicketCategoriesView</code> and <code>TicketSummaryView</code>) for re-rendering parts of the main view. Whenever the user changes the current section, the list of available tickets is updated. Whenever the user adds the tickets to the booking, the booking summary is re-rendered. Changes in quantities or the target email may enable or disable the submission button - the booking is validated whenever changes to it are made. We do not create separate modules for the subviews, since they are not referenced outside the module itself.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>The booking submission is handled by the <code>save</code> method which constructs a JSON object, as required by a POST to <code><a href="http://localhost:8080/ticket-monster/rest/bookings" class="bare external-link">http://localhost:8080/ticket-monster/rest/bookings</a></code>, and performs the AJAX call. In case of a successful response, a confirmation view is rendered. On failure, a warning is displayed and the user may continue to edit the form.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>The corresponding templates for the views above are shown below:</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/templates/desktop/booking-confirmation.html
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="row"&gt;
    &lt;h2 class="special-title light-font"&gt;Booking #&lt;%=booking.id%&gt; confirmed!&lt;/h2&gt;
&lt;/div&gt;
&lt;div class="row"&gt;
    &lt;div class="col-md-6"&gt;
        &lt;div class="well"&gt;
            &lt;h4 class="page-header"&gt;Checkout information&lt;/h4&gt;
            &lt;p&gt;&lt;strong&gt;Email: &lt;/strong&gt;&lt;%= booking.contactEmail %&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Event: &lt;/strong&gt; &lt;%= performance.event.name %&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Venue: &lt;/strong&gt;&lt;%= performance.venue.name %&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Date: &lt;/strong&gt;&lt;%= new Date(booking.performance.date).toPrettyString() %&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Created on: &lt;/strong&gt;&lt;%= new Date(booking.createdOn).toPrettyString() %&gt;&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="col-md-6"&gt;
        &lt;div class="well"&gt;
            &lt;h4 class="page-header"&gt;Ticket allocations&lt;/h4&gt;
            &lt;table class="table table-striped table-bordered" style="background-color: #fffffa;"&gt;
                &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th&gt;Ticket #&lt;/th&gt;
                    &lt;th&gt;Category&lt;/th&gt;
                    &lt;th&gt;Section&lt;/th&gt;
                    &lt;th&gt;Row&lt;/th&gt;
                    &lt;th&gt;Seat&lt;/th&gt;
                &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
            &lt;% $.each(_.sortBy(booking.tickets, function(ticket) {return ticket.id}), function (i, ticket) { %&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;%= ticket.id %&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;%=ticket.ticketCategory.description%&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;%=ticket.seat.section.name%&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;%=ticket.seat.rowNumber%&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;%=ticket.seat.number%&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;% }) %&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row" style="padding-bottom:30px;"&gt;
    &lt;div class="col-md-2"&gt;&lt;a href="#" class="highlight-link"&gt;Home&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;</code></pre> 
                    </div> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/templates/desktop/create-booking.html
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="row"&gt;
    &lt;div class="col-md-12"&gt;
        &lt;h2 class="special-title light-font"&gt;&lt;%=show.event.name%&gt;
            &lt;small&gt;&lt;%=show.venue.name%&gt;, &lt;%=new Date(performance.date).toPrettyString()%&gt;&lt;/p&gt;&lt;/small&gt;
        &lt;/h2&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class="row"&gt;
    &lt;div class="col-md-4"&gt;
        &lt;div class="well"&gt;
            &lt;h3 class="page-header"&gt;Select tickets&lt;/h3&gt;
            &lt;form class="form-horizontal"&gt;
                &lt;div id="sectionSelectorPlaceholder"&gt;
                    &lt;div class="form-group"&gt;
                        &lt;label class="col-md-3 control-label" for="sectionSelect"&gt;&lt;strong&gt;Section&lt;/strong&gt;&lt;/label&gt;
                        &lt;div class="col-md-9"&gt;
                            &lt;select id="sectionSelect" class="form-control"&gt;
                                &lt;option value="-1" selected="true"&gt;Choose a section&lt;/option&gt;
                                &lt;% _.each(sections, function(section) { %&gt;
                                &lt;option value="&lt;%=section.id%&gt;"&gt;&lt;%=section.name%&gt; - &lt;%=section.description%&gt;&lt;/option&gt;
                                &lt;% }) %&gt;
                            &lt;/select&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/form&gt;
            &lt;div id="ticketCategoriesViewPlaceholder"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div id="request-summary" class="col-md-5 col-md-offset-1"&gt;
        &lt;div class="well"&gt;
            &lt;h3 class="page-header"&gt;Order summary&lt;/h3&gt;
            &lt;div id="ticketSummaryView" class="row"/&gt;
            &lt;h3 class="page-header"&gt;Checkout&lt;/h3&gt;
            &lt;div class="row"&gt;
                &lt;div class="col-md-12"&gt;
                    &lt;form&gt;
                        &lt;div class="form-group"&gt;
                            &lt;input type='email' id="email" class="form-control" placeholder="Email" required/&gt;
                            &lt;p class="help-block error-notification"  id="error-email"&gt;&lt;/p&gt;
                        &lt;/div&gt;
                        &lt;div class="form-group"&gt;
                            &lt;input type='button' class="btn btn-primary" name="submit" value="Checkout"
                                   disabled="true"/&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre> 
                    </div> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/templates/desktop/ticket-categories.html
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-html" data-lang="html">&lt;% if (ticketPrices.length &gt; 0) { %&gt;
&lt;form class="form-horizontal"&gt;
    &lt;% _.each(ticketPrices, function(ticketPrice) { %&gt;
    &lt;div class="form-group" id="ticket-category-fieldset-&lt;%=ticketPrice.id%&gt;"&gt;
        &lt;label class="col-md-3 control-label"&gt;&lt;strong&gt;&lt;%=ticketPrice.ticketCategory.description%&gt;&lt;/strong&gt;&lt;/label&gt;

        &lt;div class="col-md-9"&gt;
            &lt;div class="input-group"&gt;
                &lt;input class="form-control col-md-6" rel="tooltip" title="Enter value"
                       data-tm-id="&lt;%=ticketPrice.id%&gt;"
                       placeholder="Number of tickets"
                       name="tickets-&lt;%=ticketPrice.ticketCategory.id%&gt;"/&gt;
                &lt;span class="input-group-addon"&gt;@ $&lt;%=ticketPrice.price%&gt;&lt;/span&gt;

                &lt;p class="help-block" id="error-input-&lt;%=ticketPrice.id%&gt;"&gt;&lt;/p&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;% }) %&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;div class="form-group"&gt;
    &lt;div class="col-md-offset-2"&gt;
        &lt;input type="button" class="btn btn-primary" disabled="true" name="add" value="Add tickets"/&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/form&gt;
&lt;% } %&gt;</code></pre> 
                    </div> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/templates/desktop/ticket-summary-view.html
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="col-md-12"&gt;
    &lt;% if (tickets.length&gt;0) { %&gt;
    &lt;table class="table table-bordered table-condensed" style="background-color: #fffffa;"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
            &lt;th colspan="7"&gt;&lt;strong&gt;Requested tickets&lt;/strong&gt;&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;th&gt;Section&lt;/th&gt;
            &lt;th&gt;Category&lt;/th&gt;
            &lt;th&gt;Quantity&lt;/th&gt;
            &lt;th&gt;Price&lt;/th&gt;
            &lt;th&gt;&lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody id="ticketRequestSummary"&gt;
        &lt;% _.each(tickets, function (ticketRequest, index, tickets) { %&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;%= ticketRequest.ticketPrice.section.name %&gt;&lt;/td&gt;
            &lt;td&gt;&lt;%= ticketRequest.ticketPrice.ticketCategory.description %&gt;&lt;/td&gt;
            &lt;td&gt;&lt;%= ticketRequest.quantity %&gt;&lt;/td&gt;
            &lt;td&gt;$&lt;%=ticketRequest.ticketPrice.price%&gt;&lt;/td&gt;
            &lt;td&gt;&lt;span class="glyphicon glyphicon-trash" data-index='&lt;%= index %&gt;'/&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;% }); %&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;p/&gt;
    &lt;div class="row"&gt;
        &lt;div class="col-md-5"&gt;&lt;strong&gt;Total ticket count:&lt;/strong&gt; &lt;%= totals.tickets %&gt;&lt;/div&gt;
        &lt;div class="col-md-5"&gt;&lt;strong&gt;Total price:&lt;/strong&gt; $&lt;%=totals.price%&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;% } else { %&gt;
    No tickets requested.
    &lt;% } %&gt;
&lt;/div&gt;</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>Finally, once the view is available, we can add it’s corresponding routing rule:</p> 
                   </div> 
                   <div class="listingblock"> 
                    <div class="title">
                     src/main/webapp/resources/js/app/router/desktop/router.js
                    </div> 
                    <div class="content"> 
                     <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * A module for the router of the desktop application
 */
define("router", [
    ...
    'app/views/desktop/create-booking',
	...
],function (
			...
            CreateBookingView,
            ...
            ) {

    var Router = Backbone.Router.extend({
        ...
        routes:{
            ...
            "book/:showId/:performanceId":"bookTickets",
        },
        ...
        bookTickets:function (showId, performanceId) {
            var createBookingView =
                new CreateBookingView({
                    model:{ showId:showId,
                            performanceId:performanceId,
                            bookingRequest:{tickets:[]}},
                            el:$("#content")
                           });
            utilities.viewManager.showView(createBookingView);
        }
    }
    ...
);</code></pre> 
                    </div> 
                   </div> 
                   <div class="paragraph"> 
                    <p>This concludes the implementation of the booking use case. We started by listing the available events, continued by selecting a venue and performance time, and ended by choosing tickets and completing the order.</p> 
                   </div> 
                   <div class="paragraph"> 
                    <p>The other use cases: a booking starting from venues and view existing bookings are conceptually similar, so you can just copy the logic for the following routes from <code>src/main/webapp/resources/js/app/routers/desktop/router.js</code>:</p> 
                   </div> 
                   <div class="ulist"> 
                    <ul> 
                     <li> <p><code>venues</code></p> </li> 
                     <li> <p><code>venues/:id</code></p> </li> 
                     <li> <p><code>bookings</code></p> </li> 
                     <li> <p><code>bookings/:id</code></p> </li> 
                    </ul> 
                   </div> 
                   <div class="paragraph"> 
                    <p>Finally, copy the following files in the <code>src/main/webapp/resources/js/app/models</code>, <code>src/main/webapp/resources/js/app/collections</code>, <code>src/main/webapp/resources/js/app/views/desktop</code> and <code>src/main/webapp/resources/templates</code>:</p> 
                   </div> 
                   <div class="ulist"> 
                    <ul> 
                     <li> <p><code>src/main/webapp/resources/js/app/models/booking.js</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/js/app/models/venue.js</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/js/app/collections/bookings.js</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/js/app/collections/venues.js</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/js/app/views/desktop/bookings.js</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/js/app/views/desktop/booking-detail.js</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/js/app/views/desktop/venues.js</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/js/app/views/desktop/venue-detail.js</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/templates/desktop/booking-details.html</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/templates/desktop/booking-table.html</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/templates/desktop/venues.html</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/templates/desktop/venue-detail.html</code></p> </li> 
                     <li> <p><code>src/main/webapp/resources/templates/desktop/venue-event-description.html</code></p> </li> 
                    </ul> 
                   </div> 
                  </div> 
                 </div> 
                 <div class="sect1"> 
                  <h2 id="_mobile_view"> <a class="anchor" href="#_mobile_view"></a>Mobile view</h2> 
                  <div class="sectionbody"> 
                   <div class="paragraph"> 
                    <p>The mobile version of the application uses approximately the same architecture as the desktop version. Any differences are due to the functional changes in the mobile version and the use of jQuery mobile.</p> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_setting_up_the_structure_2"> <a class="anchor" href="#_setting_up_the_structure_2"></a>Setting up the structure</h3> 
                    <div class="paragraph"> 
                     <p>The first step in implementing our solution is to copy the CSS and JavaScript libraries to <code>resources/css</code> and <code>resources/js/libs</code>:</p> 
                    </div> 
                    <div class="dlist"> 
                     <dl> 
                      <dt class="hdlist1">
                       require.js
                      </dt> 
                      <dd> 
                       <p>AMD support, along with the plugin:</p> 
                       <div class="ulist"> 
                        <ul> 
                         <li> <p>text - for loading text files, in our case the HTML templates</p> </li> 
                        </ul> 
                       </div> 
                      </dd> 
                      <dt class="hdlist1">
                       jQuery
                      </dt> 
                      <dd> 
                       <p>general purpose library for HTML traversal and manipulation</p> 
                      </dd> 
                      <dt class="hdlist1">
                       Underscore
                      </dt> 
                      <dd> 
                       <p>JavaScript utility library (and a dependency of Backbone)</p> 
                      </dd> 
                      <dt class="hdlist1">
                       Backbone
                      </dt> 
                      <dd> 
                       <p>Client-side MVC framework</p> 
                      </dd> 
                      <dt class="hdlist1">
                       jQuery Mobile
                      </dt> 
                      <dd> 
                       <p>user interface system for mobile devices;</p> 
                      </dd> 
                     </dl> 
                    </div> 
                    <div class="paragraph"> 
                     <p>(If you have already built the desktop application, some files may already be in place.)</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>For mobile clients, the main page will display the mobile version of the application, by loading the mobile AMD module of the application. Let us create it.</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/configurations/mobile.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * Shortcut alias definitions - will come in handy when declaring dependencies
 * Also, they allow you to keep the code free of any knowledge about library
 * locations and versions
 */
require.config({
    baseUrl:"resources/js",
    paths: {
        jquery:'libs/jquery-2.0.3',
        jquerymobile:'libs/jquery.mobile-1.4.2',
        text:'libs/text',
        underscore:'libs/underscore',
        backbone: 'libs/backbone',
        utilities: 'app/utilities',
        router:'app/router/mobile/router'
    },
    // We shim Backbone.js and Underscore.js since they don't declare AMD modules
    shim: {
        'backbone': {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        },

        'underscore': {
            exports: '_'
        }
    }
});

define("configuration", function() {
    if (window.TicketMonster != undefined &amp;&amp; TicketMonster.config != undefined) {
        return {
            baseUrl: TicketMonster.config.baseRESTUrl
        };
    } else {
        return {
            baseUrl: ""
        };
    }
});

define("initializer", [
    'jquery',
    'utilities',
    'text!../templates/mobile/main.html'
], function ($,
             utilities,
             MainTemplate) {
    // Configure jQuery to append timestamps to requests, to bypass browser caches
    // Important for MSIE
    $.ajaxSetup({cache:false});
    $('head').append('&lt;link rel="stylesheet" href="resources/css/jquery.mobile-1.4.2.css"/&gt;');
    $('head').append('&lt;link rel="stylesheet" href="resources/css/m.screen.css"/&gt;');
    // Bind to mobileinit before loading jQueryMobile
    $(document).bind("mobileinit", function () {
        // Prior to creating and starting the router, we disable jQuery Mobile's own routing mechanism
        $.mobile.hashListeningEnabled = false;
        $.mobile.linkBindingEnabled = false;
        $.mobile.pushStateEnabled = false;

        // Fix jQueryMobile header and footer positioning issues for iOS.
        // See: https://github.com/jquery/jquery-mobile/issues/4113 and
        // https://github.com/jquery/jquery-mobile/issues/5532
        $(document).on('blur', 'input, textarea, select', function() {
            setTimeout(function() {
            window.scrollTo(document.body.scrollLeft, document.body.scrollTop);
            }, 0);
        });

        utilities.applyTemplate($('body'), MainTemplate);
    });
    // Then (load jQueryMobile and) start the router to finally start the app
    require(['router']);
});

// Now we declare all the dependencies
// This loads and runs the 'initializer' module.
require(['initializer']);</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>In this application, we combine Backbone and jQuery Mobile. Each framework has its own strengths; jQuery Mobile provides UI components and touch support, whilst Backbone provides MVC support. There is some overlap between the two, as jQuery Mobile provides its own navigation mechanism which we disable.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>We also define a <code>configuration</code> module which allows the customization of the base URLs for RESTful invocations. This module does not play any role in the mobile web version. We will come to it, however, when discussing hybrid applications.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>We also define a special initializer module (<code>initializer</code>) that, when loaded, adds the stylesheets and applies the template for the general structure of the page in the <code>body</code> element. In the initializer module we make customizations in order to get the two frameworks working together - disabling the jQuery Mobile navigation. Let us add the template definition for the template loaded by the initializer module.</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/mobile/main.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;!--
    The main layout of the page - contains the menu and the 'content' &amp;lt;div/&amp;gt; in which all the
    views will render the content.
--&gt;
&lt;div id="container" data-role="page" data-ajax="false"&gt;&lt;/div&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Copy over the <code>m.screen.css</code> file referenced in the <code>initializer</code> module, from the project sources, to the appropriate location in the workspace.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Next, we create the application router.</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/router/mobile/router.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * A module for the router of the mobile application.
 *
 */
define("router",[
    'jquery',
    'jquerymobile',
    'underscore',
    'utilities'
],function ($,
            jqm,
            _,
            utilities) {

    /**
     * The Router class contains all the routes within the application - i.e. URLs and the actions
     * that will be taken as a result.
     *
     * @type {Router}
     */
    var Router = Backbone.Router.extend({
        initialize: function() {
            //Begin dispatching routes
            Backbone.history.start();
        },
        execute : function(callback, args) {
            $.mobile.loading("show");
            window.setTimeout(function() {
                if (callback) {
                    callback.apply(this, args);
                }
                $.mobile.loading("hide");
            }, 300);
        }
    });

    // Create a router instance
    var router = new Router();

    return router;
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>In the router code we add the <code>execute</code> method to the router for handling transitions between routes. Here, we will display the jQuery Mobile loader widget before displaying any Backbone view, and then hide it once the view is rendered.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Next, we need to create a first page.</p> 
                    </div> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_the_landing_page"> <a class="anchor" href="#_the_landing_page"></a>The landing page</h3> 
                    <div class="paragraph"> 
                     <p>The first page in our application is the landing page. First, we add the template for it:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/mobile/home-view.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;div data-role="header"&gt;
    &lt;h3&gt;Ticket Monster&lt;/h3&gt;
&lt;/div&gt;
&lt;div class="ui-content"&gt;
    &lt;img src="resources/img/rhjb_eap_logo.png" /&gt;
    &lt;h4&gt;Find events&lt;/h4&gt;
    &lt;ul data-role="listview"&gt;
        &lt;li&gt;
            &lt;a href="#events"&gt;By Category&lt;/a&gt;
        &lt;/li&gt;
        &lt;li&gt;
            &lt;a href="#venues"&gt;By Location&lt;/a&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Now we have to add the page to the router:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/router/mobile/router.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * A module for the router of the mobile application.
 *
 */
define("router",[
    ...
    'text!../templates/mobile/home-view.html'
],function (
		...
        HomeViewTemplate) {

	...
    var Router = Backbone.Router.extend({
        ...
        routes:{
            "":"home"
        },
        ...
        home:function () {
            utilities.applyTemplate($("#container"), HomeViewTemplate);
            $("#container").enhanceWithin();
    	}
    });
    ...
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Because jQuery Mobile navigation is disabled, we must tell jQuery Mobile explicitly to enhance the page content in order to create the mobile view. Here, we enhance the page using the <code>enhanceWithin</code> method, to ensure that the page gets the appropriate look and feel.</p> 
                    </div> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_the_events_view"> <a class="anchor" href="#_the_events_view"></a>The events view</h3> 
                    <div class="paragraph"> 
                     <p>First, we display a list of events (just as in the desktop view). Since mobile interfaces are more constrained, we will just show a simple list view:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/views/mobile/events.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">define([
    'utilities',
    'text!../../../../templates/mobile/events.html'
], function (
    utilities,
    eventsView) {

    var EventsView = Backbone.View.extend({
        render:function () {
            var categories = _.uniq(
                _.map(this.model.models, function(model){
                    return model.get('category');
                }), false, function(item){
                    return item.id;
                });
            utilities.applyTemplate($(this.el), eventsView,  {categories:categories, model:this.model});
            $(this.el).enhanceWithin();
            return this;
        }
    });

    return EventsView;
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>As you can see, the view is very similar to the desktop view, the main difference being the explicit hint to jQuery mobile through the <code>pagecreate</code> event invocation.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Next, we add the template for rendering the view:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/mobile/events.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;div data-role="header"&gt;
    &lt;a href="#" class="ui-btn ui-icon-home ui-btn-icon-left"&gt;Home&lt;/a&gt;
    &lt;h3&gt;Categories&lt;/h3&gt;
&lt;/div&gt;
&lt;div class="ui-content"&gt;
    &lt;div id="itemMenu" data-role="collapsible-set" data-inset="false"&gt;
        &lt;%
        _.each(categories, function (category) {
        %&gt;
        &lt;div data-role="collapsible"&gt;
            &lt;h2&gt;&lt;%= category.description %&gt;&lt;/h2&gt;
            &lt;ul id="categoryMenu" data-role="listview" data-inset="true"&gt;
            &lt;%
            _.each(model.models, function (model) {
                if (model.get('category').id == category.id) {
                %&gt;
                &lt;li&gt;
                    &lt;a href="#events/&lt;%=model.attributes.id%&gt;"&gt;&lt;%=model.attributes.name%&gt;&lt;/a&gt;
                &lt;/li&gt;
                &lt;% }
            });
            %&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
        &lt;% }); %&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>And finally, we need to instruct the router to invoke the page:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/router/mobile/router.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * A module for the router of the desktop application.
 *
 */
define("router",[
    ...
	'app/collections/events',
	...
	'app/views/mobile/events'
	...
],function (
	...,
	Events,
	...,
	EventsView,
	...) {

	...
    var Router = Backbone.Router.extend({
        ...
        routes:{
        	...
            "events":"events"
            ...
        },
        ...
        events:function () {
            var events = new Events;
            var eventsView = new EventsView({model:events, el:$("#container")});
            events.on("reset", function() {
                utilities.viewManager.showView(eventsView);
            }).fetch({
                reset : true,
                error : function() {
                    utilities.displayAlert("Failed to retrieve events from the TicketMonster server.");
                }
            });
        }
        ...
    });
    ...
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Just as in the case of the desktop application, the list of events will be accessible at <code>#events</code> (i.e. <code><a href="http://localhost:8080/ticket-monster/#events" class="bare external-link">http://localhost:8080/ticket-monster/#events</a></code>).</p> 
                    </div> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_displaying_an_individual_event"> <a class="anchor" href="#_displaying_an_individual_event"></a>Displaying an individual event</h3> 
                    <div class="paragraph"> 
                     <p>Now, we create the view to display an event:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/views/mobile/event-detail.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">define([
    'utilities',
    'require',
    'configuration',
    'text!../../../../templates/mobile/event-detail.html',
    'text!../../../../templates/mobile/event-venue-description.html'
], function (
    utilities,
    require,
    config,
    eventDetail,
    eventVenueDescription) {

    var EventDetailView = Backbone.View.extend({
        events:{
            "click a[id='bookButton']":"beginBooking",
            "change select[id='showSelector']":"refreshShows",
            "change select[id='performanceTimes']":"performanceSelected",
            "change select[id='dayPicker']":'refreshTimes'
        },
        render:function () {
            $(this.el).empty()
            utilities.applyTemplate($(this.el), eventDetail, _.extend({}, this.model.attributes, config));
            $(this.el).enhanceWithin();
            $("#bookButton").addClass("ui-disabled");
            var self = this;
            $.getJSON(config.baseUrl + "rest/shows?event=" + this.model.get('id'), function (shows) {
                self.shows = shows;
                $("#showSelector").empty().append("&lt;option data-placeholder='true'&gt;Choose a venue ...&lt;/option&gt;");
                $.each(shows, function (i, show) {
                    $("#showSelector").append("&lt;option value='" + show.id + "'&gt;" + show.venue.address.city + " : " + show.venue.name + "&lt;/option&gt;");
                });
                $("#showSelector").selectmenu('refresh', true)
                $("#dayPicker").selectmenu('disable')
                $("#dayPicker").empty().append("&lt;option data-placeholder='true'&gt;Choose a show date ...&lt;/option&gt;")
                $("#performanceTimes").selectmenu('disable')
                $("#performanceTimes").empty().append("&lt;option data-placeholder='true'&gt;Choose a show time ...&lt;/option&gt;")
            });
            $("#dayPicker").empty();
            $("#dayPicker").selectmenu('disable');
            $("#performanceTimes").empty();
            $("#performanceTimes").selectmenu('disable');
            $(this.el).enhanceWithin();
            return this;
        },
        performanceSelected:function () {
            if ($("#performanceTimes").val() != 'Choose a show time ...') {
                $("#bookButton").removeClass("ui-disabled")
            } else {
                $("#bookButton").addClass("ui-disabled")
            }
        },
        beginBooking:function () {
            require('router').navigate('book/' + $("#showSelector option:selected").val() + '/' + $("#performanceTimes").val(), true)
        },
        refreshShows:function (event) {

            var selectedShowId = event.currentTarget.value;

            if (selectedShowId != 'Choose a venue ...') {
                var selectedShow = _.find(this.shows, function (show) {
                    return show.id == selectedShowId
                });
                this.selectedShow = selectedShow;
                var times = _.uniq(_.sortBy(_.map(selectedShow.performances, function (performance) {
                    return (new Date(performance.date).withoutTimeOfDay()).getTime()
                }), function (item) {
                    return item
                }));
                utilities.applyTemplate($("#eventVenueDescription"), eventVenueDescription, _.extend({},{venue:selectedShow.venue},config));
                $("#detailsCollapsible").show()
                $("#dayPicker").removeAttr('disabled')
                $("#performanceTimes").removeAttr('disabled')
                $("#dayPicker").empty().append("&lt;option data-placeholder='true'&gt;Choose a show date ...&lt;/option&gt;")
                _.each(times, function (time) {
                    var date = new Date(time)
                    $("#dayPicker").append("&lt;option value='" + date.toYMD() + "'&gt;" + date.toPrettyStringWithoutTime() + "&lt;/option&gt;")
                });
                $("#dayPicker").selectmenu('refresh')
                $("#dayPicker").selectmenu('enable')
                this.refreshTimes()
            } else {
                $("#detailsCollapsible").hide()
                $("#eventVenueDescription").empty()
                $("#dayPicker").empty()
                $("#dayPicker").selectmenu('disable')
                $("#performanceTimes").empty()
                $("#performanceTimes").selectmenu('disable')
            }


        },
        refreshTimes:function () {
            var selectedDate = $("#dayPicker").val();
            $("#performanceTimes").empty().append("&lt;option data-placeholder='true'&gt;Choose a show time ...&lt;/option&gt;")
            if (selectedDate) {
                $.each(this.selectedShow.performances, function (i, performance) {
                    var performanceDate = new Date(performance.date);
                    if (_.isEqual(performanceDate.toYMD(), selectedDate)) {
                        $("#performanceTimes").append("&lt;option value='" + performance.id + "'&gt;" + performanceDate.getHours().toZeroPaddedString(2) + ":" + performanceDate.getMinutes().toZeroPaddedString(2) + "&lt;/option&gt;")
                    }
                })
                $("#performanceTimes").selectmenu('enable')
            }
            $("#performanceTimes").selectmenu('refresh')
            this.performanceSelected()
        }

    });

    return EventDetailView;
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Once again, this is very similar to the desktop version. Now we add the page templates:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/mobile/event-detail.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;div data-role="header" data-position="fixed"&gt;
    &lt;a href="#" class="ui-btn ui-icon-home ui-btn-icon-left"&gt;Home&lt;/a&gt;
    &lt;h3&gt;Book tickets&lt;/h3&gt;
&lt;/div&gt;
&lt;div class="ui-content"&gt;
    &lt;h3&gt;&lt;%=name%&gt;&lt;/h3&gt;
    &lt;img width='100px' src='&lt;%=baseUrl%&gt;rest/media/&lt;%=mediaItem.id%&gt;'/&gt;
    &lt;p&gt;&lt;%=description%&gt;&lt;/p&gt;
    &lt;div class="ui-field-contain"&gt;
        &lt;label for="showSelector"&gt;&lt;strong&gt;Where&lt;/strong&gt;&lt;/label&gt;
        &lt;select id='showSelector' data-mini='true'/&gt;
    &lt;/div&gt;

    &lt;div data-role="collapsible" data-content-theme="c" style="display: none;"
         id="detailsCollapsible"&gt;
        &lt;h3&gt;Venue details&lt;/h3&gt;

        &lt;div id="eventVenueDescription"&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;div data-role='fieldcontain'&gt;
        &lt;fieldset data-role='controlgroup'&gt;
            &lt;legend&gt;&lt;strong&gt;When&lt;/strong&gt;&lt;/legend&gt;
            &lt;label for="dayPicker"&gt;When:&lt;/label&gt;
            &lt;select id='dayPicker' data-mini='true'/&gt;

            &lt;label for="performanceTimes"&gt;When:&lt;/label&gt;
            &lt;select id="performanceTimes" data-mini='true'/&gt;

        &lt;/fieldset&gt;
    &lt;/div&gt;

&lt;/div&gt;
&lt;div data-role="footer" data-position="fixed"&gt;
    &lt;div class="ui-grid-b"&gt;
        &lt;div class="ui-block-a"&gt;&lt;/div&gt;
        &lt;div class="ui-block-b"&gt;&lt;/div&gt;
        &lt;div class="ui-block-c"&gt;
            &lt;a id='bookButton' class="ui-btn ui-btn-b ui-icon-check ui-btn-icon-left block-btn"&gt;Book&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/mobile/event-venue-description.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;img width="100" src="&lt;%=baseUrl%&gt;rest/media/&lt;%=venue.mediaItem.id%&gt;"/&gt;&lt;/p&gt;
&lt;%= venue.description %&gt;
&lt;address&gt;
    &lt;p&gt;&lt;strong&gt;Address:&lt;/strong&gt;&lt;/p&gt;
    &lt;p&gt;&lt;%= venue.address.street %&gt;&lt;/p&gt;
    &lt;p&gt;&lt;%= venue.address.city %&gt;, &lt;%= venue.address.country %&gt;&lt;/p&gt;
&lt;/address&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Finally, we add this to the router, explicitly indicating to jQuery Mobile that a transition has to take place after the view is rendered - in order to allow the page to render correctly after it has been invoked from the listview.</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/router/mobile/router.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * A module for the router of the desktop application.
 *
 */
define("router",[
    ...
	'app/models/event',
	...
	'app/views/mobile/event-detail'
	...
],function (
	...,
	Event,
	...,
	EventDetailView,
	...) {

	...
    var Router = Backbone.Router.extend({
        ...
        routes:{
        	...
            "events/:id":"eventDetail",
            ...
        },
        ...
        eventDetail:function (id) {
            var model = new Event({id:id});
            var eventDetailView = new EventDetailView({model:model, el:$("#container")});
            model.on("change",
                function () {
                    utilities.viewManager.showView(eventDetailView);
                    $("body").pagecontainer("change", "#container", {transition:'slide', changeHash:false});
                }).fetch({
                    error : function() {
                        utilities.displayAlert("Failed to retrieve the event from the TicketMonster server.");
                    }
                });
        }
        ...
    });
    ...
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Just as the desktop version, the mobile event detail view allows users to choose a venue and a performance time. The next step is to allow the user to book some tickets.</p> 
                    </div> 
                   </div> 
                   <div class="sect2"> 
                    <h3 id="_booking_tickets"> <a class="anchor" href="#_booking_tickets"></a>Booking tickets</h3> 
                    <div class="paragraph"> 
                     <p>The views to book tickets are simpler than the desktop version. Users can select a section and enter the number of tickets for each category however, there is no way to add or remove tickets from an order. Once the form is filled out, the user can only submit it.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>First, we create the views:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/views/mobile/create-booking.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">define([
    'utilities',
    'configuration',
    'require',
    'text!../../../../templates/mobile/booking-details.html',
    'text!../../../../templates/mobile/create-booking.html',
    'text!../../../../templates/mobile/confirm-booking.html',
    'text!../../../../templates/mobile/ticket-entries.html',
    'text!../../../../templates/mobile/ticket-summary-view.html'
], function (
    utilities,
    config,
    require,
    bookingDetailsTemplate,
    createBookingTemplate,
    confirmBookingTemplate,
    ticketEntriesTemplate,
    ticketSummaryViewTemplate) {

    var TicketCategoriesView = Backbone.View.extend({
        id:'categoriesView',
        events:{
            "change input":"onChange"
        },
        render:function () {
            var views = {};

            if (this.model != null) {
                var ticketPrices = _.map(this.model, function (item) {
                    return item.ticketPrice;
                });
                utilities.applyTemplate($(this.el), ticketEntriesTemplate, {ticketPrices:ticketPrices});
            } else {
                $(this.el).empty();
            }
            return this;
        },
        onChange:function (event) {
            var value = event.currentTarget.value;
            var ticketPriceId = $(event.currentTarget).data("tm-id");
            var modifiedModelEntry = _.find(this.model, function(item) { return item.ticketPrice.id == ticketPriceId});
            if ($.isNumeric(value) &amp;&amp; value &gt; 0) {
                modifiedModelEntry.quantity = parseInt(value);
            }
            else {
                delete modifiedModelEntry.quantity;
            }
        }
    });

     var TicketSummaryView = Backbone.View.extend({
        render:function () {
            utilities.applyTemplate($(this.el), ticketSummaryViewTemplate, this.model.bookingRequest)
        }
    });

    var CreateBookingView = Backbone.View.extend({

        currentView: "CreateBooking",
        intervalDuration : 100,
        formValues : [],
        events:{
            "click a[id='confirmBooking']":"checkout",
            "change select":"refreshPrices",
            "change input[type='number']":"updateForm",
            "change input[name='email']":"updateForm",
            "click a[id='saveBooking']":"saveBooking",
            "click a[id='goBack']":"back",
            "click a[data-action='delete']":"deleteBooking"
        },
        render: function() {
            if (this.currentView === "CreateBooking") {
                this.renderCreateBooking();
            } else if(this.currentView === "ConfirmBooking") {
                this.renderConfirmBooking();
            }
            return this;
        },
        renderCreateBooking:function () {

            var self = this;

            $.getJSON(config.baseUrl + "rest/shows/" + this.model.showId, function (selectedShow) {
                self.model.performance = _.find(selectedShow.performances, function (item) {
                    return item.id == self.model.performanceId;
                });
                self.model.email = self.model.email || "";
                var id = function (item) {return item.id;};
                // prepare a list of sections to populate the dropdown
                var sections = _.uniq(_.sortBy(_.pluck(selectedShow.ticketPrices, 'section'), id), true, id);

                utilities.applyTemplate($(self.el), createBookingTemplate, { show:selectedShow,
                    performance:self.model.performance,
                    sections:sections,
                    email:self.model.email});
                $(self.el).enhanceWithin();
                self.ticketCategoriesView = new TicketCategoriesView({model:{}, el:$("#ticketCategoriesViewPlaceholder") });
                self.model.show = selectedShow;
                self.ticketCategoriesView.render();
                $('a[id="confirmBooking"]').addClass('ui-disabled');
                $("#sectionSelector").change();
                self.watchForm();
            });

        },
        refreshPrices:function (event) {
            if (event.currentTarget.value != "Choose a section") {
                var ticketPrices = _.filter(this.model.show.ticketPrices, function (item) {
                    return item.section.id == event.currentTarget.value;
                });
                var ticketPriceInputs = new Array();
                _.each(ticketPrices, function (ticketPrice) {
                    var model = {};
                    model.ticketPrice = ticketPrice;
                    ticketPriceInputs.push(model);
                });
                $("#ticketCategoriesViewPlaceholder").show();
                this.ticketCategoriesView.model = ticketPriceInputs;
                this.ticketCategoriesView.render();
                $(this.el).enhanceWithin();
            } else {
                $("#ticketCategoriesViewPlaceholder").hide();
                this.ticketCategoriesView.model = new Array();
                this.updateForm();
            }
        },
        checkout:function () {
            var savedTicketRequests = this.model.bookingRequest.tickets = this.model.bookingRequest.tickets || [];
            _.each(this.ticketCategoriesView.model, function(newTicketRequest){
                var matchingRequest = _.find(savedTicketRequests, function(ticketRequest) {
                    return ticketRequest.ticketPrice.id == newTicketRequest.ticketPrice.id;
                });
                if(newTicketRequest.quantity) {
                    if(matchingRequest) {
                        matchingRequest.quantity += newTicketRequest.quantity;
                    } else {
                        savedTicketRequests.push(newTicketRequest);
                    }
                }
            });
            this.model.bookingRequest.totals = this.computeTotals(this.model.bookingRequest.tickets);
            this.currentView = "ConfirmBooking";
            this.render();
        },
        updateForm:function () {
            var valid = true;
            this.model.email = $("input[type='email']").val();
            $("input[type='number']").each(function(idx,element) {
                var quantity = $(this).val();
                if(quantity.length &gt; 0 &amp;&amp;
                    (!$.isNumeric(quantity)  // is a non-number, other than empty string
                        || quantity &lt;= 0 // is negative
                        || parseFloat(quantity) != parseInt(quantity))) {
                    $("#error-" + element.id).empty().append("Should be a positive number.");
                    valid = false;
                } else {
                    $("#error-" + element.id).empty();
                }
            });
            try {
                var validElements = document.querySelectorAll(":valid");
                var $email = $("#email");
                var emailElem = $email.get(0);
                var validEmail = false;
                for (var ctr=0; ctr &lt; validElements.length; ctr++) {
                    if (emailElem === validElements[ctr]) {
                        validEmail = true;
                    }
                }
                if(validEmail) {
                    this.model.email = $email.val();
                    $("#error-email").empty();
                } else {
                    $("#error-email").empty().append("Please enter a valid e-mail address");
                    delete this.model.email;
                    valid = false;
                }
            }
            catch(e) {
                // For browsers like IE9 that do fail on querySelectorAll for CSS pseudo selectors,
                // we use the regex defined in the HTML5 spec.
                var emailRegex = new RegExp("[a-zA-Z0-9.!#$%&amp;'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*");
                var emailValue = $("#email").val();
                if(emailRegex.test(emailValue)) {
                    this.model.email = emailValue;
                    $("#error-email").empty();
                } else {
                    $("#error-email").empty().append("Please enter a valid e-mail address");
                    delete this.model.email;
                    valid = false;
                }
            }
            var totals = this.computeTotals(this.ticketCategoriesView.model);
            if (totals.tickets &gt; 0 &amp;&amp; valid) {
                $('a[id="confirmBooking"]').removeClass('ui-disabled');
            } else {
                $('a[id="confirmBooking"]').addClass('ui-disabled');
            }
        },
        computeTotals: function(ticketRequestCollection) {
            var totals = _.reduce(ticketRequestCollection, function (partial, model) {
                if (model.quantity != undefined) {
                    partial.tickets += model.quantity;
                    partial.price += model.quantity * model.ticketPrice.price;
                    return partial;
                } else {
                    return partial;
                }
            }, {tickets:0, price:0.0});
            return totals;
        },
        renderConfirmBooking:function () {
            utilities.applyTemplate($(this.el), confirmBookingTemplate, this.model);
            this.ticketSummaryView = new TicketSummaryView({model:this.model, el:$("#ticketSummaryView")});
            this.ticketSummaryView.render();
            $(this.el).enhanceWithin();
            if (this.model.bookingRequest.totals.tickets &gt; 0) {
                $('a[id="saveBooking"]').removeClass('ui-disabled');
            } else {
                $('a[id="saveBooking"]').addClass('ui-disabled');
            }
            return this;
        },
        back:function () {
            this.currentView = "CreateBooking";
            this.render();
        },
        saveBooking:function (event) {
            var bookingRequest = {ticketRequests:[]};
            var self = this;
            _.each(this.model.bookingRequest.tickets, function (model) {
                if (model.quantity != undefined) {
                    bookingRequest.ticketRequests.push({ticketPrice:model.ticketPrice.id, quantity:model.quantity})
                }
            });

            bookingRequest.email = this.model.email;
            bookingRequest.performance = this.model.performanceId;
            $.ajax({url:(config.baseUrl + "rest/bookings"),
                data:JSON.stringify(bookingRequest),
                type:"POST",
                dataType:"json",
                contentType:"application/json",
                success:function (booking) {
                    utilities.applyTemplate($(self.el), bookingDetailsTemplate, booking);
                    $(self.el).enhanceWithin();
                }}).error(function (error) {
                    try {
                        var response = JSON.parse(error.responseText);
                        var displayMessage = "";
                        if(response &amp;&amp; response.errors) {
                            var errors = response.errors;
                            for(var idx = 0; idx &lt; errors.length; idx++) {
                                displayMessage += errors[idx] + "\n";
                            }
                            alert(displayMessage);
                        } else {
                            alert("Failed to perform the bookng.");
                        }
                    } catch (e) {
                        alert("Failed to perform the bookng.");
                    }
                });
        },
        deleteBooking: function(event) {
            var deletedIdx = $(event.currentTarget).data("ticketpriceid");
            this.model.bookingRequest.tickets = _.reject(this.model.bookingRequest.tickets, function(ticketRequest) {
                return ticketRequest.ticketPrice.id == deletedIdx;
            });
            this.model.bookingRequest.totals = this.computeTotals(this.model.bookingRequest.tickets);
            this.renderConfirmBooking();
            return false;
        },
        watchForm: function() {
            if($("#sectionSelect").length) {
                var self = this;
                $("input").each( function(index,element) {
                    if(element.value !== self.formValues[element.id]) {
                        self.formValues[element.id] = element.value;
                        $("input[id='"+element.id+"']").change();
                    }
                });
                this.timerObject = setTimeout(function() {
                    self.watchForm();
                }, this.intervalDuration);
            } else {
                this.onClose();
            }
        },
        onClose: function() {
            if(this.timerObject) {
                clearTimeout(this.timerObject);
                delete this.timerObject;
            }
        }
    });
    return CreateBookingView;
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>The views follow the structure the desktop application, except that the summary view is not rendered inline but after a page transition.</p> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Next, we create the page fragment templates. First, the actual page:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/mobile/create-booking.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;div data-role="header" data-position="fixed"&gt;
    &lt;a href="#" class="ui-btn ui-icon-home ui-btn-icon-left"&gt;Home&lt;/a&gt;
    &lt;h1&gt;Book tickets&lt;/h1&gt;
&lt;/div&gt;
&lt;div class="ui-content"&gt;
    &lt;p&gt;
       &lt;h3&gt;&lt;%=show.event.name%&gt;&lt;/h3&gt;
    &lt;/p&gt;
    &lt;p&gt;
      &lt;%=show.venue.name%&gt;
    &lt;p&gt;

    &lt;p&gt;
      &lt;small&gt;&lt;%=new Date(performance.date).toPrettyString()%&gt;&lt;/small&gt;
    &lt;/p&gt;
    &lt;div id="sectionSelectorPlaceholder"&gt;
        &lt;div class="ui-field-contain"&gt;
            &lt;label for="sectionSelect"&gt;Section&lt;/label&gt;
            &lt;select id="sectionSelect"&gt;
                &lt;option value="-1" selected&gt;Choose a section&lt;/option&gt;
                &lt;% _.each(sections, function(section) { %&gt;
                &lt;option value="&lt;%=section.id%&gt;"&gt;&lt;%=section.name%&gt; - &lt;%=section.description%&gt;&lt;/option&gt;
                &lt;% }) %&gt;
            &lt;/select&gt;
        &lt;/div&gt;

    &lt;/div&gt;
    &lt;div id="ticketCategoriesViewPlaceholder" style="display:none;"&gt;&lt;/div&gt;

    &lt;div class="fieldcontain"&gt;
        &lt;label&gt;Contact email&lt;/label&gt;
        &lt;input type='email' id='email' name='email' required placeholder="Email" value="&lt;%=email%&gt;" /&gt;
        &lt;span id="error-email" class="error" /&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div data-role="footer" data-position="fixed"&gt;
    &lt;div class="ui-grid-a"&gt;
        &lt;div class="ui-block-a"&gt;&lt;a href="#" class="ui-btn ui-icon-delete ui-btn-icon-left block-btn"&gt;Cancel&lt;/a&gt;&lt;/div&gt;
        &lt;div class="ui-block-b"&gt;&lt;a id="confirmBooking" class="ui-btn ui-btn-b ui-icon-check ui-btn-icon-left block-btn" disabled&gt;Checkout&lt;/a&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Next, the fragment that contains the input form for tickets, which is re-rendered whenever the section is changed:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/mobile/ticket-entries.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;% if (ticketPrices.length &gt; 0) { %&gt;
    &lt;form name="ticketCategories" id="ticketCategories"&gt;
    &lt;h4&gt;Select tickets by category&lt;/h4&gt;
    &lt;% _.each(ticketPrices, function(ticketPrice) { %&gt;
      &lt;div id="ticket-category-input-&lt;%=ticketPrice.id%&gt;"/&gt;

      &lt;fieldset class="ui-field-contain"&gt;
         &lt;label for="ticket-&lt;%=ticketPrice.id%&gt;"&gt;&lt;%=ticketPrice.ticketCategory.description%&gt;($&lt;%=ticketPrice.price%&gt;)&lt;/label&gt;
         &lt;input id="ticket-&lt;%=ticketPrice.id%&gt;" data-tm-id="&lt;%=ticketPrice.id%&gt;" type="number" min="0" placeholder="Enter value"
               name="tickets"/&gt;
         &lt;span id="error-ticket-&lt;%=ticketPrice.id%&gt;" class="error" /&gt;
      &lt;/fieldset&gt;
   &lt;% }) %&gt;
   &lt;/form&gt;
&lt;% } %&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Before submitting the request to the server, the order is confirmed:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/mobile/confirm-booking.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;div data-role="header" data-position="fixed"&gt;
    &lt;a href="#" class="ui-btn ui-icon-home ui-btn-icon-left"&gt;Home&lt;/a&gt;
    &lt;h1&gt;Confirm order&lt;/h1&gt;
&lt;/div&gt;
&lt;div class="ui-content"&gt;
    &lt;h3&gt;&lt;%=show.event.name%&gt;&lt;/h3&gt;
    &lt;p&gt;&lt;%=show.venue.name%&gt;&lt;/p&gt;
    &lt;p&gt;&lt;small&gt;&lt;%=new Date(performance.date).toPrettyString()%&gt;&lt;/small&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Buyer:&lt;/strong&gt;  &lt;emphasis&gt;&lt;%=email%&gt;&lt;/emphasis&gt;&lt;/p&gt;
    &lt;div id="ticketSummaryView"/&gt;

&lt;/div&gt;

&lt;div data-role="footer" data-position="fixed"&gt;
    &lt;div class="ui-grid-b"&gt;
        &lt;div class="ui-block-a"&gt;&lt;a id="cancel" href="#" class="ui-btn ui-icon-delete ui-btn-icon-left block-btn"&gt;Cancel&lt;/a&gt;&lt;/div&gt;
        &lt;div class="ui-block-b"&gt;&lt;a id="goBack" class="ui-btn ui-icon-back ui-btn-icon-left block-btn"&gt;Back&lt;/a&gt;&lt;/div&gt;
        &lt;div class="ui-block-c"&gt;&lt;a id="saveBooking" class="ui-btn ui-btn-b ui-icon-check ui-btn-icon-left block-btn"&gt;Buy!&lt;/a&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>The confirmation page contains a summary subview:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/mobile/ticket-summary-view.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;ul data-role="listview" data-split-icon="delete" data-split-theme="c" data-inset="true"&gt;
    &lt;% _.each(tickets, function(model) { %&gt;
    &lt;li&gt;
        &lt;a class="readonly-listview"&gt;
            &lt;p&gt;&lt;strong&gt;Section&lt;/strong&gt; &lt;%= model.ticketPrice.section.name %&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Category&lt;/strong&gt; &lt;%= model.ticketPrice.ticketCategory.description %&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Price&lt;/strong&gt; &lt;%= model.ticketPrice.price %&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Quantity&lt;/strong&gt; &lt;%= model.quantity %&gt;&lt;/p&gt;
        &lt;/a&gt;
        &lt;a href="#" data-action="delete" data-ticketpriceid="&lt;%= model.ticketPrice.id %&gt;"&gt;&lt;/a&gt;
    &lt;/li&gt;
    &lt;% }); %&gt;
&lt;/ul&gt;
&lt;div&gt;
    &lt;h4&gt;Totals&lt;/h4&gt;
    &lt;p&gt;&lt;strong&gt;Total tickets: &lt;/strong&gt;&lt;%= totals.tickets %&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Total price: $ &lt;/strong&gt;&lt;%= totals.price %&gt;&lt;/p&gt;
&lt;/div&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>Finally, we create the page that displays the booking confirmation:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/templates/mobile/booking-details.html
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-html" data-lang="html">&lt;div data-role="header" data-position="fixed"&gt;
    &lt;a href="#" class="ui-btn ui-icon-home ui-btn-icon-left"&gt;Home&lt;/a&gt;
    &lt;h1&gt;Booking complete&lt;/h1&gt;
&lt;/div&gt;
&lt;div class="ui-content"&gt;
    &lt;table id="confirm_tbl"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
            &lt;td colspan="5" align="center"&gt;&lt;strong&gt;Booking &lt;%=id%&gt;&lt;/strong&gt;&lt;/td&gt;
        &lt;tr&gt;
        &lt;tr&gt;
            &lt;th&gt;Ticket #&lt;/th&gt;
            &lt;th&gt;Category&lt;/th&gt;
            &lt;th&gt;Section&lt;/th&gt;
            &lt;th&gt;Row&lt;/th&gt;
            &lt;th&gt;Seat&lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
        &lt;% $.each(_.sortBy(tickets, function(ticket) {return ticket.id}), function (i, ticket) { %&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;%= ticket.id %&gt;&lt;/td&gt;
            &lt;td&gt;&lt;%=ticket.ticketCategory.description%&gt;&lt;/td&gt;
            &lt;td&gt;&lt;%=ticket.seat.section.name%&gt;&lt;/td&gt;
            &lt;td&gt;&lt;%=ticket.seat.rowNumber%&gt;&lt;/td&gt;
            &lt;td&gt;&lt;%=ticket.seat.number%&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;% }) %&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;&lt;/div&gt;
&lt;div data-role="footer" data-position="fixed"&gt;

    &lt;div class="ui-block-b"&gt;
        &lt;a id="back" href="#" class="ui-btn ui-icon-back ui-btn-icon-left block-btn"&gt;Back&lt;/a&gt;
    &lt;/div&gt;

&lt;/div&gt;</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>The last step is registering the view with the router:</p> 
                    </div> 
                    <div class="listingblock"> 
                     <div class="title">
                      src/main/webapp/resources/js/app/router/mobile/router.js
                     </div> 
                     <div class="content"> 
                      <pre class="highlight"><code class="language-javascript" data-lang="javascript">/**
 * A module for the router of the desktop application
 */
define("router", [
	...
    'app/views/mobile/create-booking',
    ...
],function (
			...
            CreateBookingView
            ...) {

    var Router = Backbone.Router.extend({
        ...
        routes:{
            ...
            "book/:showId/:performanceId":"bookTickets",
            ...
        },
        ...
        bookTickets:function (showId, performanceId) {
            var createBookingView = new CreateBookingView({model:{showId:showId, performanceId:performanceId, bookingRequest:{tickets:[]}}, el:$("#container")});
            utilities.viewManager.showView(createBookingView);
        },
        ...
        });
    ...
});</code></pre> 
                     </div> 
                    </div> 
                    <div class="paragraph"> 
                     <p>The other use case: a booking starting from venues is conceptually similar, so you can just copy the rest of the logic from <code>src/main/webapp/resources/js/app/routers/mobile/router.js</code>, and the rest of the files files in the <code>src/main/webapp/resources/js/app/views/mobile</code> and <code>src/main/webapp/resources/templates/mobile</code> directories.</p> 
                    </div> 
                   </div> 
                  </div> 
                 </div> 
                 <h3 class="divider" id="changelog">Recent Changelog</h3> 
                 <ul class="commit-log"> 
                  <li>Jan 15, 2015(<span class="contributor" data-sys-contributor="Vineet Reynolds <Vineet.Reynolds@gmail.com>">Vineet Reynolds</span>):Added tutorials for jboss.org</li> 
                  <li>Jan 15, 2015(<span class="contributor" data-sys-contributor="Vineet Reynolds <Vineet.Reynolds@gmail.com>">Vineet Reynolds</span>):Prepare for 2.7.0.Final release</li> 
                  <li>Jan 15, 2015(<span class="contributor" data-sys-contributor="Vineet Reynolds <Vineet.Reynolds@gmail.com>">Vineet Reynolds</span>):Prepare for development of 2.7.0 SNAPSHOT</li> 
                  <li>Jan 15, 2015(<span class="contributor" data-sys-contributor="Vineet Reynolds <Vineet.Reynolds@gmail.com>">Vineet Reynolds</span>):Prepare for 2.7.0.Final release</li> 
                  <li>Nov 28, 2014(<span class="contributor" data-sys-contributor="Vineet Reynolds <Vineet.Reynolds@gmail.com>">Vineet Reynolds</span>):Prepare for development of 2.7.0 SNAPSHOT</li> 
                  <li>Nov 28, 2014(<span class="contributor" data-sys-contributor="Vineet Reynolds <Vineet.Reynolds@gmail.com>">Vineet Reynolds</span>):Prepare for 2.7.0.ER2 release</li> 
                  <li>Nov 17, 2014(<span class="contributor" data-sys-contributor="Vineet Reynolds <Vineet.Reynolds@gmail.com>">Vineet Reynolds</span>):WFK2 793 Fix booking validation for mobiles</li> 
                  <li>Oct 28, 2014(<span class="contributor" data-sys-contributor="Vineet Reynolds <Vineet.Reynolds@gmail.com>">Vineet Reynolds</span>):Prepare for development of 2.7.0 SNAPSHOT</li> 
                  <li>Oct 28, 2014(<span class="contributor" data-sys-contributor="Vineet Reynolds <Vineet.Reynolds@gmail.com>">Vineet Reynolds</span>):Prepare for 2.7.0.ER1 release</li> 
                  <li>Oct 24, 2014(<span class="contributor" data-sys-contributor="Vineet Reynolds <Vineet.Reynolds@gmail.com>">Vineet Reynolds</span>):WFK2 698 Use a jQuery Loader widget before displaying views</li> 
                 </ul> 
                 <div id="disqus_thread"></div> 
                 <script type="text/javascript">
<!--//--><![CDATA[// ><!--

            var disqus_shortname = 'jdf';
            var disqus_url = "";
            var disqus_developer = null;
            var disqus_identifier = "";
            (function() {
              var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
              dsq.src = "http://jdf.disqus.com/embed.js";
              (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
            })();
            
//--><!]]>
</script>
                 <noscript>
                  Please enable JavaScript to view the 
                  <a href="http://disqus.com/?ref_noscript=jdf" class="external-link">comments powered by Disqus.</a> 
                 </noscript> 
                </div> 
                <div class="columns large-4"> 
                 <div class="row">
                  <div class="columns large-24">
                   <a class="button" href="https://github.com/jboss-developer/ticket-monster/archive/2.7.0.Final-with-tutorials.zip">Download <i class="fa fa-download"></i></a>
                  </div>
                 </div> 
                 <div class="row">
                  <div class="columns large-24">
                   <a href="https://github.com/jboss-developer/ticket-monster/tree/2.7.0.Final-with-tutorials"><i class="fa fa-github"></i>&nbsp; View on GitHub<br></a>
                  </div>
                 </div> 
                 <div class="row">
                  <div class="columns large-24">
                   <div id="rating-section" data-searchisko-id="jbossdeveloper_example-4e385af0"> 
                    <div id="avg-rating">
                     Avg:
                    </div> 
                    <div id="your-rating">
                     Your Rating:
                     <i class="fa fa-star-o rating" id="rate-1" data-rating="1"></i>
                     <i class="fa fa-star-o rating" id="rate-2" data-rating="2"></i>
                     <i class="fa fa-star-o rating" id="rate-3" data-rating="3"></i>
                     <i class="fa fa-star-o rating" id="rate-4" data-rating="4"></i>
                     <i class="fa fa-star-o rating" id="rate-5" data-rating="5"></i> 
                    </div> 
                   </div>
                  </div>
                 </div> 
                </div> 
               </div>
              </div> 
             </div> 
            </div> 
           </div> 
          </article> 
         </div> 
        </div> 
       </div> 
       <!-- /#main, /#main-wrapper --> 
      </div> 
     </div> 
     <!-- /#page, /#page-wrapper --> 
    </div> 
   </div> 
   <footer class="bottom">
    <div class="row"> 
     <div class="large-5 columns"> 
      <a href="https://www.redhat.com/" target="_blank" rel="noopener noreferrer"><img alt="Red Hat" class="rh-logo" src="../../images/branding/RHLogo_white.svg"></a> 
     </div> 
     <div class="large-5 columns"> 
      <h3>Helpful Links</h3> 
      <ul class="quick-links"> 
       <li><a class="report-an-issue" href="#" id="rhdCustomTrigger">Report a website issue</a></li> 
       <li><a href="https://access.redhat.com/security/team/contact/" target="_blank" rel="noopener noreferrer">Report a security problem</a></li> 
       <li><a href="http://www.redhat.com/en/services/consulting" target="_blank" rel="noopener noreferrer">Consulting solutions</a></li> 
       <li><a href="http://www.redhat.com/en/services/training" target="_blank" rel="noopener noreferrer">Training</a></li> 
      </ul> 
     </div> 
     <div class="large-5 columns"> 
      <h3>Related Sites</h3> 
      <ul class="quick-links"> 
       <li><a href="https://www.redhat.com/" target="_blank" rel="noopener noreferrer">Red Hat Corporate</a></li> 
       <li><a href="https://access.redhat.com/" target="_blank" rel="noopener noreferrer">Customer Portal</a></li> 
       <li><a href="https://www.openshift.com/" target="_blank" rel="noopener noreferrer">OpenShift</a></li> 
      </ul> 
     </div> 
     <div class="large-9 columns"> 
      <h3>Red Hat Developers</h3> 
      <p>We provide a complete experience to enable enterprise developers and software builders to envision, create and maintain high-value enterprise software.</p> 
      <div class="row"> 
       <div class="large-12 columns"> 
        <ul class="inline-list"> 
         <li><a href="../../about/">About us</a></li> 
         <li><a href="mailto:developers@redhat.com">Contact us</a></li> 
        </ul> 
       </div> 
       <div class="large-12 columns"> 
        <ul class="social-nav"> 
         <li><a href="https://plus.google.com/103877536668756379905/posts" target="_blank" rel="noopener noreferrer"><i class="fa fa-google-plus"></i></a></li> 
         <li><a href="https://www.youtube.com/channel/UC7noUdfWp-ukXUlAsJnSm-Q" target="_blank" rel="noopener noreferrer"><i class="fa fa-youtube"></i></a></li> 
         <li><a href="https://www.facebook.com/RedHatDeveloperProgram" target="_blank" rel="noopener noreferrer"><i class="fa fa-facebook"></i></a></li> 
         <li> <a href="https://twitter.com/rhdevelopers" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter"></i></a> </li> 
        </ul> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="row legal"> 
     <div class="large-5 medium-24 right columns"> 
      <a class="devnation-logo" href="http://www.devnation.org/" target="_blank" rel="noopener noreferrer"><img src="../../images/design/logo_devnation_footer.png" alt="Red Hat Summit"></a>
      <a class="summit-logo" href="http://www.redhat.com/summit/" target="_blank" rel="noopener noreferrer"><img src="../../images/design/logo-summit.png" alt="Red Hat Summit"></a> 
     </div> 
     <div class="large-19 columns"> 
      <ul class="inline-list"> 
       <li><a class="copyright">Copyright © 2017 Red Hat Inc.</a></li> 
       <li><a href="http://www.redhat.com/en/about/privacy-policy" target="_blank" rel="noopener noreferrer">Privacy statement &nbsp;&nbsp;|</a></li> 
       <li><a href="http://www.redhat.com/en/about/terms-use" target="_blank" rel="noopener noreferrer">Terms of use &nbsp;&nbsp;|</a></li> 
       <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" target="_blank" rel="noopener noreferrer">All policies and guidelines</a></li> 
      </ul> 
     </div> 
    </div> 
   </footer> 
  </div> 
  <div class="overlay"> 
   <div class="overlay-wrap"> 
    <div class="overlay-inner"> 
     <a class="overlay-close">×</a> 
     <div class="overlay-content row"> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div id="fb-root"></div> 
  <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/14145","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","ajax":[],"user":{"uid":0,"permissionsHash":"b80bc17dbe26e3134eaef310c9f14645c31c37e0d59620fcbaf2296987d127d0"},"rhd":{"urls":{"base_url":"developer-drupal.web.prod.ext.phx2.redhat.com","final_base_url":"developers.redhat.com"},"downloadManager":{"baseUrl":"https:\/\/developers.redhat.com"},"dcp":{"baseProtocolRelativeUrl":"https:\/\/dcp2.jboss.org:443"},"keycloak":{"accountUrl":"https:\/\/developers.redhat.com\/auth\/realms\/rhd\/account\/","authUrl":"https:\/\/developers.redhat.com\/auth\/"},"templates":{"book":"\u003Cli class=\u0022book columns large-6\u0022 data-isbn=\u0022\u003C!=isbn!\u003E\u0022\u003E\n    \u003Ca href=\u0022\u003C!=preview_link!\u003E\u0022 class=\u0022book-preview\u0022 target=\u0022_blank\u0022 rel=\u0022noopener noreferrer\u0022\u003EPreview\u003C\/a\u003E\n    \u003Cimg src=\u0022\u003C!=thumbnail!\u003E\u0022 alt=\u0022Cover Image\u0022\u003E\n    \u003Ch4\u003E\u003C!=sys_title!\u003E\u003C\/h4\u003E\n    \u003Cp\u003E\u003C!=authors!\u003E\u003C\/p\u003E\n    \u003Cp\u003E\u003C!=published!\u003E\u003C\/p\u003E\n    \u003Cdiv class=\u0022rating\u0022\u003E\u003C!=average_rating!\u003E\u003C\/div\u003E\n    \u003Cp class=\u0022desc\u0022\u003E\u003C!=sys_description!\u003E\u003C\/p\u003E\n    \u003Ca href=\u0022\u003C!=sys_url_view!\u003E\u0022 class=\u0022button\u0022\u003EPurchase\u003Ci class=\u0022fa fa-external-link\u0022\u003E\u003C\/i\u003E\u003C\/a\u003E\u003C\/li\u003E\n","miniBuzz":"\u003Cdiv class=\u0022large-12 column\u0022\u003E\n    \u003Cdiv class=\u0022update updatemobile\u0022\u003E\n        \u003Cdiv class=\u0022update-meta\u0022\u003E\n            \u003Ch5\u003E\u003Ca href=\u0022\u003C!=permanentLink!\u003E\u0022 class=\u0022external-link\u0022\u003E\u003C!=sys_title!\u003E\u003C\/a\u003E\u003C\/h5\u003E\n            \u003Cdiv class=\u0022row\u0022\u003E\n                \u003Cdiv class=\u0022small-12 medium-14 column\u0022\u003E\n                    \u003Cdiv class=\u0022update-source\u0022\u003E\u003C!=authorName!\u003E\u003C\/div\u003E\n                \u003C\/div\u003E\n                \u003Cdiv class=\u0022small-12 medium-10 column\u0022\u003E\n                    \u003Cdiv class=\u0022update-timestamp\u0022\u003E\u003C!=updatedDate!\u003E\u003C\/div\u003E\n                \u003C\/div\u003E\n            \u003C\/div\u003E\n        \u003C\/div\u003E\n        \u003Cdiv class=\u0022update-body\u0022\u003E\n            \u003Cp\u003E\u003C!=sys_description!\u003E\u003C\/p\u003E\n        \u003C\/div\u003E\n        \u003Cdiv class=\u0022update-meta\u0022\u003E\n            \u003Cdiv class=\u0022share-this\u0022\u003E\n                \u003Cp\u003E\u003Ci class=\u0022fa fa-share\u0022\u003EShare This\u003C\/i\u003E\u003C\/p\u003E\n                \u003Cul class=\u0022share-this-buttons social-buttons cf\u0022\u003E\n                    \u003Cli\u003E\u003Ca href=\u0022https:\/\/twitter.com\/share\u0022 class=\u0022socialite twitter-share\u0022 data-text=\u0022\u003C!=sys_title!\u003E\u0022\n                           data-url=\u0022\u003C!=sys_url_view!\u003E\u0022 rel=\u0022noopener noreferrer nofollow\u0022 target=\u0022_blank\u0022\u003E\u003Cspan\n                                    class=\u0022vhidden\u0022\u003ETweet\u003C\/span\u003E\u003C\/a\u003E\u003C\/li\u003E\n                    \u003Cli\u003E\u003Ca href=\u0022http:\/\/www.facebook.com\/sharer.php?u=\u003C!=sys_url_view!\u003E\u0026t=\u003C!=sys_title!\u003E\u0022\n                           class=\u0022socialite facebook-share\u0022 data-href=\u0022\u003C!=sys_url_view!\u003E\u0022 data-send=\u0022false\u0022\n                           data-type=\u0022button_count\u0022\n                           data-width=\u002260\u0022 data-show-faces=\u0022false\u0022 rel=\u0022noopener noreferrer nofollow\u0022 target=\u0022_blank\u0022\u003E\u003Cspan class=\u0022vhidden\u0022\u003EShare on Facebook\u003C\/span\u003E\u003C\/a\u003E\n                    \u003C\/li\u003E\n                    \u003Cli\u003E\u003Ca href=\u0022https:\/\/plus.google.com\/share?url=\u003C!=sys_url_view!\u003E\u0022 class=\u0022socialite googleplus-one\u0022\n                           data-size=\u0022tall\u0022\n                           data-annotation=\u0022inline\u0022 data-width=\u002260\u0022 data-href=\u0022\u003C!=sys_url_view!\u003E\u0022 rel=\u0022noopener noreferrer nofollow\u0022\n                           target=\u0022_blank\u0022\u003E\u003Cspan\n                                    class=\u0022vhidden\u0022\u003EShare on Google+\u003C\/span\u003E\u003C\/a\u003E\u003C\/li\u003E\n                    \u003Cli\u003E\n                        \u003Ca href=\u0022http:\/\/www.linkedin.com\/shareArticle?mini=true\u0026url=\u003C!=sys_url_view!\u003E\u0026title=\u003C!=sys_title!\u003E\u0022\n                           class=\u0022socialite linkedin-share\u0022 data-url=\u0022\u003C!=sys_url_view!\u003E\u0022 data-counter=\u0022right\u0022\n                           rel=\u0022noopener noreferrer nofollow\u0022\n                           target=\u0022_blank\u0022\u003E\u003Cspan class=\u0022vhidden\u0022\u003EShare on LinkedIn\u003C\/span\u003E\u003C\/a\u003E\u003C\/li\u003E\n                \u003C\/ul\u003E\n            \u003C\/div\u003E\n        \u003C\/div\u003E\n    \u003C\/div\u003E\n\u003C\/div\u003E\n","productBuzz":"    \u003Cdiv class=\u0022buzz-product-update\u0022\u003E\n        \u003Cdiv class=\u0022update\u0022\u003E\n            \u003Cdiv class=\u0022update-meta\u0022\u003E\n                \u003Ca href=\u0022\u003C!=permanentLink!\u003E\u0022 class=\u0022update-source\u0022\u003E\u003Ch5\u003E\u003C!=sys_title!\u003E\u003C\/h5\u003E\u003C\/a\u003E\n                \u003Ca href=\u0022\u003C!=permanentLink!\u003E\u0022 class=\u0022update-source\u0022\u003E\u003C!=authorName!\u003E\u003C\/a\u003E\n                \u003Ca href=\u0022\u003C!=permanentLink!\u003E\u0022 class=\u0022update-timestamp\u0022\u003E\u003C!=updatedDate!\u003E\u003C\/a\u003E\n            \u003C\/div\u003E\n        \u003C\/div\u003E\n        \u003Cdiv class=\u0022update-body\u0022\u003E\n            \u003Cp\u003E\u003C!=sys_description!\u003E\u003C\/p\u003E\n        \u003C\/div\u003E\n    \u003C\/div\u003E\n","buzz":"\u003Cdiv class=\u0022buzz-product-update\u0022\u003E\n    \u003Cdiv class=\u0022update\u0022\u003E\n        \u003Cdiv class=\u0022update-meta\u0022\u003E\n            \u003Ca href=\u0022\u003C!=permanentLink!\u003E\u0022 class=\u0022update-source\u0022\u003E\u003Ch5\u003E\u003C!=sys_title!\u003E\u003C\/h5\u003E\u003C\/a\u003E\n            \u003Ca href=\u0022\u003C!=permanentLink!\u003E\u0022 class=\u0022update-source\u0022\u003E\u003C!=authorName!\u003E\u003C\/a\u003E\n            \u003Ca href=\u0022\u003C!=permanentLink!\u003E\u0022 class=\u0022update-timestamp\u0022\u003E\u003C!=updatedDate!\u003E\u003C\/a\u003E\n        \u003C\/div\u003E\n        \u003Cdiv class=\u0022update-body\u0022\u003E\n            \u003Cp\u003E\u003C!=sys_description!\u003E\u003C\/p\u003E\n        \u003C\/div\u003E\n    \u003C\/div\u003E\n\u003C\/div\u003E\n","termsConditions":"\u003Cdiv class=\u0022downloadthankyou\u0022 id=\u0022tacBanner\u0022\u003E\n    You joined the Red Hat Developer Program on\n    \u003Cspan id=\u0022tcWhenSigned\u0022\u003E\u003C!=acceptanceTimestamp!\u003E\u003C\/span\u003E.\n    Your subscription to the Red Hat Developer Program ends in\n    \u003Cspan id=\u0022tcEndsIn\u0022\u003E\u003C!=daysRemaining!\u003E\u003C\/span\u003E days.\n\u003C\/div\u003E\n","connector":"\u003Cli class=\u0022connector\u0022\u003E\n    \u003Ca href=\u0022#\u0022 class=\u0022fn-open-connector\u0022\u003E\u003Cimg src=\u0022\u003C!=img_path_thumb!\u003E\u0022 alt=\u0022logo\u0022 class=\u0022connector-logo\u0022\u003E\u003C\/a\u003E\n    \u003Ch3\u003E\u003Ca href=\u0022#\u0022 class=\u0022fn-open-connector\u0022\u003E\u003C!=sys_title!\u003E\u003C\/a\u003E\u003C\/h3\u003E\n    \u003Cp\u003E\u003C!=sys_description!\u003E\u003C\/p\u003E\n    \u003Cdiv class=\u0022connector-overlay-content\u0022\u003E\n        \u003Cdiv class=\u0022row\u0022\u003E\n            \u003Cdiv class=\u0022large-7 columns\u0022\u003E\n                \u003Cimg src=\u0022\u003C!=img_path_thumb!\u003E\u0022 alt=\u0022Logo\u0022 class=\u0022connector-logo\u0022 onerror=\u0022\u003C!=fallback_img!\u003E\u0022\u003E\n            \u003C\/div\u003E\n            \u003Cdiv class=\u0022large-17 columns\u0022\u003E\n                \u003Cp\u003E\u003C!=sys_content!\u003E\u003C\/p\u003E\n                \u003Cdiv class=\u0022connector-a\u0022\u003E\n                    \u003Ch4\u003EConnector A\n                        \u003Cdiv class=\u0022copy-to-clipboard\u0022\u003E\n                            \u003Cobject data=\u0022\u0022 type=\u0022\u0022 classid=\u0022clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\u0022 width=\u0022110\u0022\n                                    height=\u002214\u0022 id=\u0022clippy\u0022\u003E\n                                \u003Cparam name=\u0022movie\u0022 value=\u0022\/\/static.jboss.org\/ffe\/0\/www\/vendor\/clippy\/clippy.swf\u0022\u003E\n                                \u003Cparam name=\u0022allowScriptAccess\u0022 value=\u0022always\u0022\u003E\n                                \u003Cparam name=\u0022quality\u0022 value=\u0022high\u0022\u003E\n                                \u003Cparam name=\u0022scale\u0022 value=\u0022noscale\u0022\u003E\n                                \u003Cparam name=\u0022\u0022 value=\u0022text=\u003C!=code_snippet_1!\u003E\u0022\u003E\n                                \u003Cparam name=\u0022bgcolor\u0022 value=\u0022#FFFFFF\u0022\u003E\n                                \u003Cembed src=\u0022\/\/static.jboss.org\/ffe\/0\/www\/vendor\/clippy\/clippy.swf\u0022\n                                       type=\u0022application\/x-shockwave-flash\u0022\n                                       width=\u0022110\u0022 height=\u002214\u0022 name=\u0022clippy\u0022 quality=\u0022high\u0022 allowScriptAccess=\u0022always\u0022\n                                       pluginspage=\u0022http:\/\/www.macromedia.com\/go\/getflashplayer\u0022\n                                       FlashVars=\u0022text=#{page.text}\u0022\n                                       bgcolor=\u0022#FFFFFF\u0022\u003E\n                            \u003C\/object\u003E\n                        \u003C\/div\u003E\n                    \u003C\/h4\u003E\n                    \u003Cinput type=\u0022text\u0022 class=\u0022snippet-value\u0022 value=\u0022\u003C!=code_snippet_1!\u003E\u0022\u003E\n                \u003C\/div\u003E\n                \u003Cdiv class=\u0022connector-b\u0022\u003E\n                    \u003Ch4\u003EConnector B\u003C\/h4\u003E\n                    \u003Cdiv class=\u0022copy-to-clipboard\u0022\u003E\n                        \u003Cobject data=\u0022\u0022 type=\u0022\u0022 classid=\u0022clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\u0022 width=\u0022110\u0022\n                                height=\u002214\u0022 id=\u0022clippy\u0022\u003E\n                            \u003Cparam name=\u0022movie\u0022 value=\u0022\/\/static.jboss.org\/ffe\/0\/www\/vendor\/clippy\/clippy.swf\u0022\u003E\n                            \u003Cparam name=\u0022allowScriptAccess\u0022 value=\u0022always\u0022\u003E\n                            \u003Cparam name=\u0022quality\u0022 value=\u0022high\u0022\u003E\n                            \u003Cparam name=\u0022scale\u0022 value=\u0022noscale\u0022\u003E\n                            \u003Cparam name=\u0022FlashVars\u0022 value=\u0022text=\u003C!=code_snippet_2!\u003E\u0022\u003E\n                            \u003Cparam name=\u0022bgcolor\u0022 value=\u0022#FFFFFF\u0022\u003E\n                            \u003Cembed src=\u0022\/\/static.jboss.org\/ffe\/0\/www\/vendor\/clippy\/clippy.swf\u0022\n                                   type=\u0022application\/x-shockwave-flash\u0022 width=\u0022110\u0022 height=\u002214\u0022 name=\u0022clippy\u0022\n                                   quality=\u0022high\u0022 allowScriptAccess=\u0022always\u0022\n                                   pluginspage=\u0022http:\/\/www.macromedia.com\/go\/getflashplayer\u0022\n                                   FlashVars=\u0022text=#{page.text}\u0022 bgcolor=\u0022#FFFFFF\u0022\u003E\n                        \u003C\/object\u003E\n                    \u003C\/div\u003E\n                    \u003Cdiv class=\u0022copy-to-clipboard\u0022\u003E\n                        \u003Cobject data=\u0022\u0022 type=\u0022\u0022 classid=\u0022clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\u0022 width=\u0022110\u0022\n                                height=\u002214\u0022 id=\u0022clippy\u0022\u003E\n                            \u003Cparam name=\u0022movie\u0022 value=\u0022\/\/static.jboss.org\/ffe\/0\/www\/vendor\/clippy\/clippy.swf\u0022\u003E\n                            \u003Cparam name=\u0022allowScriptAccess\u0022 value=\u0022always\u0022\u003E\n                            \u003Cparam name=\u0022quality\u0022 value=\u0022high\u0022\u003E\n                            \u003Cparam name=\u0022scale\u0022 value=\u0022noscale\u0022\u003E\n                            \u003Cparam name=\u0022\u0022 value=\u0022text=\u003C!=code_snippet_2!\u003E\u0022\u003E\n                            \u003Cparam name=\u0022bgcolor\u0022 value=\u0022#FFFFFF\u0022\u003E\n                            \u003Cembed src=\u0022\/\/static.jboss.org\/ffe\/0\/www\/vendor\/clippy\/clippy.swf\u0022\n                                   type=\u0022application\/x-shockwave-flash\u0022\n                                   width=\u0022110\u0022 height=\u002214\u0022 name=\u0022clippy\u0022 quality=\u0022high\u0022 allowScriptAccess=\u0022always\u0022\n                                   pluginspage=\u0022http:\/\/www.macromedia.com\/go\/getflashplayer\u0022\n                                   FlashVars=\u0022text=#{page.text}\u0022\n                                   bgcolor=\u0022#FFFFFF\u0022\u003E\n                        \u003C\/object\u003E\n                    \u003C\/div\u003E\n\n                    \u003Cinput type=\u0022text\u0022 class=\u0022snippet-value\u0022 value=\u0022\u003C!=code_snippet_2!\u003E\u0022\u003E\n                \u003C\/div\u003E\n                \u003Cp class=\u0022link_1_text\u0022\u003E\n                    \u003Ca href=\u0022\u003C!=link_1_url!\u003E\u0022 class=\u0022link_1\u0022\u003E\u003C!=link_1_text!\u003E\u003C\/a\u003E\n                    \u003Cbr\u003E\n                    \u003Ca href=\u0022\u003C!=link_2_url!\u003E\u0022 class=\u0022link_2\u0022\u003E\u003C!=link_2_text!\u003E\u003C\/a\u003E\n                \u003C\/p\u003E\n                \u003Cp class=\u0022docs-link-text\u0022\u003EFor more details, view the \u003Ca href=\u0022\u003C!=more_details_url!\u003E\u0022 class=\u0022docs-link\u0022\u003EProduct\n                        Documentation\u003C\/a\u003E\u003C\/p\u003E\n            \u003C\/div\u003E\n        \u003C\/div\u003E\n    \u003C\/div\u003E\n\u003C\/li\u003E\n","productStackoverflowTemplate":"\u003Cdiv class=\u0022stackoverflow-product-update\u0022\u003E\n    \u003Cdiv class=\u0022update\u0022\u003E\n        \u003Cdiv class=\u0022update-meta\u0022\u003E\n            \u003Cdiv class=\u0022row\u0022\u003E\n                \u003Cdiv class=\u0022large-24 columns\u0022\u003E\u003Ca class=\u0022update-source\u0022 href=\u0022\u003C!=sys_url_view!\u003E\u0022 target=\u0022_blank\u0022 rel=\u0022noopener noreferrer\u0022\u003E\n                        \u003Ch5 class=\u0022qtn-title\u0022\u003EQ: \u003C!=sys_title!\u003E\u003C\/h5\u003E\u003C\/a\u003E\u003C\/div\u003E\n                \u003Cdiv class=\u0022large-12 columns\u0022\u003E\u003Cp\u003E\u003C!=up_vote_count!\u003E votes | \u003C!=answer_count!\u003E answers | \u003C!=view_count!\u003E\n                        views\u003C\/p\u003E\u003C\/div\u003E\n                \u003Cdiv class=\u0022large-12 columns\u0022\u003E\u003Cspan class=\u0022right\u0022\u003E\u003Cp\u003E\u003C!=dateCreated!\u003E\u003C\/p\u003E\u003C\/span\u003E\u003C\/div\u003E\n            \u003C\/div\u003E\n        \u003C\/div\u003E\n    \u003C\/div\u003E\n\u003C\/div\u003E\n","searchPageTemplate":"\u003Cdiv class=\u0022searchpage-update\u0022\u003E\n    \u003Cdiv class=\u0022update\u0022\u003E\n        \u003Cdiv class=\u0022update-meta\u0022\u003E\u003Ca class=\u0022update-source\u0022 href=\u0022\u003C!=searchLink!\u003E\u0022\u003E\u003Ch5\u003E\u003C!=sys_title!\u003E\u003C\/h5\u003E\u003C\/a\u003E\u003Ca\n                    class=\u0022update-source\u0022 href=\u0022\u003C!=searchLink!\u003E\u0022\u003E\u003C!=sys_type!\u003E\u003C\/a\u003E\u003C\/div\u003E\n        \u003Cdiv class=\u0022update-body\u0022\u003E\u003Cp\u003E\u003C!=sys_description!\u003E\u003C\/p\u003E\u003C\/div\u003E\n    \u003C\/div\u003E\n\u003C\/div\u003E\n","stackoverflowTemplate":"\u003Cdiv class=\u0022stackoverflow-update\u0022\u003E\n    \u003Cdiv class=\u0022update\u0022\u003E\n        \u003Cdiv class=\u0022update-meta\u0022\u003E\n            \u003Cdiv class=\u0022row\u0022\u003E\n                \u003Cdiv class=\u0022large-6 columns qtn-stats\u0022\u003E\u003Cspan class=\u0022votes-count\u0022\u003E\u003Ch4\u003E\u003C!=up_vote_count!\u003E\u003C\/h4\u003E\u003Cp\u003EVotes\u003C\/p\u003E\u003C\/span\u003E\u003Cspan\n                            class=\u0022answer-count \u003C!=qtnAccepted!\u003E\u0022\u003E\u003Ch4\u003E\u003C!=answer_count!\u003E\u003C\/h4\u003E\u003Cp\u003E\n                            Answers\u003C\/p\u003E\u003C\/span\u003E\u003Cspan class=\u0022views-count\u0022\u003E\u003Ch4\u003E\u003C!=view_count!\u003E\u003C\/h4\u003E\u003Cp\u003EViews\u003C\/p\u003E\u003C\/span\u003E\n                \u003C\/div\u003E\n                \u003Cdiv class=\u0022large-18 columns\u0022\u003E\u003Ca class=\u0022update-source\u0022 href=\u0022\u003C!=sys_url_view!\u003E\u0022 target=\u0022_blank\u0022 rel=\u0022noopener noreferrer\u0022\u003E\n                        \u003Ch5 class=\u0022qtn-title\u0022\u003E\u003C!=sys_title!\u003E\u003C\/h5\u003E\u003C\/a\u003E\n                    \u003Cp class=\u0022qtn-content\u0022\u003E\u003C!=qtnContent!\u003E\u003C\/p\u003E\n                    \u003Cdiv class=\u0022callout qtn-answer \u0026lt;!=displayAnswr!\u0026gt;\u0022\u003E\u003Cp\u003E\u003C!=answer!\u003E\u003C\/p\u003E\u003Ca\n                                href=\u0022\u003C!=sys_url_view!\u003E\u0022 target=\u0022_blank\u0022 rel=\u0022noopener noreferrer\u0022\u003ERead full question at Stack Overflow\u0026nbsp;\u003Ci\n                                    class=\u0022fa fa-angle-right\u0022\u003E\u003C\/i\u003E\u003C\/a\u003E\u003C\/div\u003E\n                    \u003Cp\u003E\u003Cspan class=\u0022so-tags\u0022\u003E\u003Cstrong\u003ETags:\u0026nbsp;\u003C\/strong\u003E\u003C!=tags!\u003E\u003C\/span\u003E\u003Cspan class=\u0022so-author\u0022\u003E\u003C!=dateCreated!\u003E | \u003C!=authorName!\u003E\u003C\/span\u003E\n                    \u003C\/p\u003E\u003C\/div\u003E\n            \u003C\/div\u003E\n        \u003C\/div\u003E\n    \u003C\/div\u003E\n\u003C\/div\u003E\n"}}}</script>
  <script src="../../sites/default/files/js/js_INpRD3BpdPyldDdsjULW70T3eHJrYos09s51BERpBgA.js"></script>
  <script type="text/javascript" src="https://issues.jboss.org/s/36fcee7e2c47b82293b8ffd249c9132e-T/-bdgec2/72005/38e4585ff05eb2dd95a30399b8504050/2.0.22/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&amp;collectorId=03f305bd">
  </script>
  <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script>   
 </body>
</html>