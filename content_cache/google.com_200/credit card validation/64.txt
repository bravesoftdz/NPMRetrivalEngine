<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr" xmlns:fb="http://ogp.me/ns/fb#" xmlns:og="http://ogp.me/ns#" xmlns:article="http://ogp.me/ns/article#" xmlns:book="http://ogp.me/ns/book#" xmlns:profile="http://ogp.me/ns/profile#" xmlns:video="http://ogp.me/ns/video#" xmlns:product="http://ogp.me/ns/product#">
 <head profile="http://www.w3.org/1999/xhtml/vocab"> 
  <meta name="HandheldFriendly" content="true"> 
  <meta name="viewport" content="width=device-width"> 
  <meta name="MobileOptimized" content="width"> 
  <!--[if IE]><![endif]--> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
  <link rel="dns-prefetch" href="//www.google-analytics.com"> 
  <link rel="preconnect" href="//fonts.googleapis.com"> 
  <link rel="dns-prefetch" href="//fonts.googleapis.com"> 
  <link rel="dns-prefetch" href="//fonts.gstatic.com"> 
  <link rel="preconnect" href="//fonts.gstatic.com" crossorigin=""> 
  <link rel="preconnect" href="//www.google-analytics.com"> 
  <link rel="preconnect" href="//stats.g.doubleclick.net"> 
  <link rel="dns-prefetch" href="//stats.g.doubleclick.net"> 
  <meta name="description" content="One of the advantages with Stripe is that theoretically, the credit card number doesn't have to go through the merchant's less secure web server. The current implementation of uc_stripe uses the default payment gateway functionality of ubercart and the credit card does have to pass through the merchant's drupal installation and get stored in a session. One way around this is to do what uc_authorize_simdpm does and create another payment method that by-passes Ubercarts less secure payment gateway feature. The DPM method in that module"> 
  <meta name="generator" content="Drupal 7 (http://drupal.org)"> 
  <link rel="canonical" href="https://www.drupal.org/node/1467886"> 
  <link rel="shortlink" href="https://www.drupal.org/node/1467886"> 
  <meta property="og:site_name" content="Drupal.org"> 
  <meta property="og:type" content="article"> 
  <meta property="og:url" content="https://www.drupal.org/node/1467886"> 
  <meta property="og:title" content="PCI-DSS compliance using stripe.js"> 
  <meta property="og:description" content="One of the advantages with Stripe is that theoretically, the credit card number doesn't have to go through the merchant's less secure web server. The current implementation of uc_stripe uses the default payment gateway functionality of ubercart and the credit card does have to pass through the merchant's drupal installation and get stored in a session. One way around this is to do what uc_authorize_simdpm does and create another payment method that by-passes Ubercarts less secure payment gateway feature. The DPM method in that module"> 
  <meta property="og:updated_time" content="2015-11-09T18:12:42+00:00"> 
  <meta property="article:published_time" content="2012-03-04T16:55:10+00:00"> 
  <meta property="article:modified_time" content="2015-11-09T18:12:42+00:00"> 
  <title>PCI-DSS compliance using stripe.js [#1467886] | Drupal.org</title> 
  <link type="text/css" rel="stylesheet" href="https://www.drupal.org/files/advagg_css/css__ualMppNgjkIEsR5ulS958ndcdZmzdaYk_shb0kpB6O4__7jzDdNWtsmxG6-kZloM_QVWguJsTr_DIhZrL-y35M4s__zGbh0Vkd6-Upw_meABdy9qwehpIxfCh8fKwHkW793IE.css" media="all"> 
  <link type="text/css" rel="stylesheet" href="https://www.drupal.org/files/advagg_css/css__QPp1snPjYt_xYr0c_V0IORcEElkIUBBBrvOB4ZE0Gnw__hXy1oF8aT5TT8LFgVrxMScM6H_b4HWBbm_9KU9xJz2o__zGbh0Vkd6-Upw_meABdy9qwehpIxfCh8fKwHkW793IE.css" media="all"> 
  <script type="text/javascript">
<!--//--><![CDATA[//><!--
var preconnect_support = false; try {if (document.createElement("link").relList.supports("preconnect")) {preconnect_support = true;}} catch (e) {} if (!preconnect_support) { var prefetch = document.createElement("link"); prefetch.href = "https://stats.g.doubleclick.net/robots.txt"; prefetch.rel="prefetch"; document.getElementsByTagName("head")[0].appendChild(prefetch);}
//--><!]]>
</script> 
 </head> 
 <body class="html not-front not-logged-in two-sidebars page-node page-node- page-node-1467886 node-type-project-issue drupalorg-site-main no-panels-layout"> 
  <div id="skip-link"> 
   <a class="element-invisible element-focusable" href="#content">Skip to main content</a> 
   <a class="element-invisible element-focusable skip-link-search" href="#search-block-form">Skip to search</a> 
  </div> 
  <div id="nav-header"> 
   <div class="menu-nav"> 
    <a class="nav-btn" id="nav-open-btn" href="#block-system-main-menu"><img src="/sites/all/themes/bluecheese/images/icon-w-menu.svg" alt="Main menu"></a> 
   </div> 
   <nav id="navigation-inner" class="container-12" role="navigation"> 
    <div class="region region-navigation"> 
     <div id="block-system-main-menu" class="block block-system block-menu"> 
      <div class="block-inner"> 
       <div class="content"> 
        <div class="menu-block">
         <ul class="menu">
          <li class="first leaf"><a href="/home" title="Drupal.org home page">Drupal.org home</a></li> 
          <li class="leaf"><a href="/download" title="Download and Extend Drupal">Download &amp; Extend</a></li> 
          <li class="leaf"><a href="/community" title="Drupal Community">Community</a></li> 
          <li class="leaf"><a href="/documentation" title="Drupal Documentation">Documentation</a></li> 
          <li class="leaf"><a href="/support" title="Support for using Drupal">Support</a></li> 
          <li class="leaf"><a href="https://jobs.drupal.org/" title="Drupal Jobs">Jobs</a></li> 
          <li class="leaf"><a href="/drupal-services" title="Buy Drupal Products and Services">Marketplace</a></li> 
          <li class="last leaf"><a href="/about" title="">About</a></li> 
         </ul>
        </div>
        <a class="close-btn" id="nav-close-btn" href="#top">Return to Content</a> 
       </div> 
      </div> 
     </div> 
     <div id="block-search-form" class="block block-search"> 
      <div class="block-inner"> 
       <div class="content"> 
        <form action="/node/1467886" method="post" id="search-block-form" accept-charset="UTF-8">
         <div>
          <div class="container-inline"> 
           <h2 class="element-invisible">Search form</h2> 
           <div class="form-item form-type-textfield form-item-search-block-form"> 
            <label class="element-invisible" for="edit-search-block-form--2">Search </label> 
            <input placeholder="Search…" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text"> 
           </div> 
           <div class="form-actions form-wrapper" id="edit-actions">
            <input alt="Search" type="image" id="edit-submit" name="submit" value="Search" src="/sites/all/themes/bluecheese/images/icon-w-search.svg" class="form-submit">
           </div>
           <input type="hidden" name="form_build_id" value="form-d13XdO5wnL_t-b0BNfdT4gSJDGIsmagtBK459_7aJL0"> 
           <input type="hidden" name="form_id" value="search_block_form"> 
          </div> 
         </div>
        </form> 
       </div> 
      </div> 
     </div> 
     <div id="block-system-user-menu" class="block block-system block-menu"> 
      <div class="block-inner"> 
       <div class="content"> 
        <div class="menu-block">
         <ul class="menu">
          <li class="button default"><a href="#block-system-user-menu"><img src="https://www.drupal.org/sites/all/themes/bluecheese/images/icon-w-user.svg" alt="Log in, view profile, and more"></a>
           <ul>
            <li class="first leaf"><a href="/user/login?destination=node/1467886" title="">Log in</a></li> 
            <li class="last leaf"><a href="/user/register?destination=node/1467886" title="">Create account</a></li> 
           </ul></li>
         </ul>
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </nav> 
  </div> 
  <!-- /#nav-header --> 
  <div id="header" class="clearfix"> 
   <div id="header-screen" class="clearfix"> 
    <div id="header-inner" class="container-12 clearfix"> 
     <div id="header-content"> 
      <div id="header-left"> 
       <div id="header-left-inner"> 
        <div id="site-name">
         <a href="/" title="Drupal"><img src="https://www.drupal.org/files/drupal-wordmark.svg" alt="Drupal"></a>
        </div> 
       </div> 
       <!-- /#header-left-inner --> 
      </div> 
      <!-- /#header-left --> 
      <div id="header-right"> 
       <div id="header-right-inner" role="search"> 
       </div> 
       <!-- /#header-right-inner --> 
      </div> 
      <!-- /#header-right --> 
     </div> 
     <!-- /#header-content --> 
    </div> 
    <!-- /#header-inner --> 
   </div> 
  </div> 
  <!-- /#header --> 
  <div id="banner"> 
   <div class="region region-banner"> 
    <div id="block-drupalorg-announcements" class="block block-drupalorg"> 
     <div class="block-inner"> 
      <div class="content"> 
       <p class="announcement"><img class="icon" src="https://www.drupal.org/files/announcements/icon-certificate-2.svg" alt="Announcement icon" title="Announcement icon">Support Drupal as a member, we'll say thanks with a certificate.</p> 
       <div class="cta">
        <a href="https://www.drupal.org/association/campaign/certificate-2017?utm_source=drupalorg&amp;utm_medium=banner&amp;utm_campaign=membership-campaign-2017-09-20" class="membership2017sept">I'm joining today</a>
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div id="page" class="clearfix"> 
   <div id="page-heading"> 
    <div id="page-title-tools" class="container-12 clearfix" role="navigation"> 
     <div class="page-title-wrapper"> 
      <div id="page-title" class="h2">
       Download &amp; Extend
      </div> 
     </div> 
    </div> 
    <!-- /#page-title-tools --> 
    <div id="nav-content" class="container-12"> 
     <ul class="links">
      <li class="core first"><a href="/project/drupal">Drupal Core</a></li> 
      <li class="distributions"><a href="/project/project_distribution">Distributions</a></li> 
      <li class="modules active"><a href="/project/project_module" class="active">Modules</a></li> 
      <li class="themes last"><a href="/project/project_theme">Themes</a></li> 
     </ul> 
    </div> 
    <!-- /#nav-content --> 
    <div class="breadbox">
     <nav class="breadcrumb container-12">
      <span><a href="/project/uc_stripe">Ubercart Stripe</a></span>
      <span><a href="/project/issues/uc_stripe">Issues</a></span>
     </nav>
    </div> 
    <h1 id="page-subtitle" class="container-12">PCI-DSS compliance using stripe.js</h1> 
   </div> 
   <!-- /#page-heading --> 
   <div class="container-12 page-inner"> 
    <div id="sidebar-first" role="complementary"> 
     <div id="sidebar-first-region"> 
      <div class="region region-sidebar-first"> 
       <div id="block-project-issue-issue-metadata" class="block block-project-issue"> 
        <div class="block-inner"> 
         <div class="content"> 
          <div class="field field-name-field-issue-status field-type-list-integer field-label-hidden field-issue-status-7">
           <div class="field-items">
            <div class="field-item even">
             Closed (fixed)
            </div>
           </div>
          </div>
          <div class="field field-name-field-project field-type-entityreference field-label-inline clearfix">
           <div class="field-label">
            Project:&nbsp;
           </div>
           <div class="field-items">
            <div class="field-item even">
             Ubercart Stripe
            </div>
           </div>
          </div>
          <div class="field field-name-field-issue-version field-type-list-text field-label-inline clearfix">
           <div class="field-label">
            Version:&nbsp;
           </div>
           <div class="field-items">
            <div class="field-item even">
             7.x-2.x-dev
            </div>
           </div>
          </div>
          <div class="field field-name-field-issue-component field-type-list-text field-label-inline clearfix">
           <div class="field-label">
            Component:&nbsp;
           </div>
           <div class="field-items">
            <div class="field-item even">
             Miscellaneous
            </div>
           </div>
          </div>
          <div class="field field-name-field-issue-priority field-type-list-integer field-label-inline clearfix">
           <div class="field-label">
            Priority:&nbsp;
           </div>
           <div class="field-items">
            <div class="field-item even">
             Major
            </div>
           </div>
          </div>
          <div class="field field-name-field-issue-category field-type-list-integer field-label-inline clearfix">
           <div class="field-label">
            Category:&nbsp;
           </div>
           <div class="field-items">
            <div class="field-item even">
             Feature request
            </div>
           </div>
          </div>
          <div class="field field-name-field-issue-assigned field-type-entityreference field-label-inline clearfix">
           <div class="field-label">
            Assigned:&nbsp;
           </div>
           <div class="field-items">
            <div class="field-item even">
             Unassigned
            </div>
           </div>
          </div>
          <div class="field field-name-project-issue-created-by field-type-list-text field-label-inline clearfix">
           <div class="field-label">
            Reporter:&nbsp;
           </div>
           <div class="field-items">
            <div class="field-item even">
             <a href="/user/1408788" title="View user profile." data-uid="1408788" class="username">potatophysics</a> 
            </div>
           </div>
          </div>
          <div class="field field-name-project-issue-created field-type-list-text field-label-inline clearfix">
           <div class="field-label">
            Created:&nbsp;
           </div>
           <div class="field-items">
            <div class="field-item even">
             4 Mar 2012 at 16:55 UTC
            </div>
           </div>
          </div>
          <div class="field field-name-project-issue-updated field-type-list-text field-label-inline clearfix">
           <div class="field-label">
            Updated:&nbsp;
           </div>
           <div class="field-items">
            <div class="field-item even">
             9 Nov 2015 at 18:12 UTC
            </div>
           </div>
          </div> 
          <div class="issue-update"> 
           <div class="update-link">
            <a href="/user/login?destination=node/1467886">Log in</a> or 
            <a href="/user/register?destination=node/1467886">register</a> to update this issue
           </div> 
          </div> 
          <div id="project-issue-jumplinks">
            Jump to comment: 
           <a href="/node/1467886#comment-10546996" class="active">Most recent</a>, 
           <a href="/node/1467886#comment-10393923" class="active">Most recent file</a>
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <!-- /#column-right-region-first --> 
    </div> 
    <!-- /#column-right-first --> 
    <div id="main" role="main"> 
     <div id="content" class="clearfix"> 
      <div id="content-inner" class="clearfix"> 
       <div class="region region-content"> 
        <div id="block-system-main" class="block block-system"> 
         <div class="block-inner"> 
          <div class="content"> 
           <div id="node-1467886" class="node node-project-issue node-content-1467886 clearfix"> 
            <div class="content"> 
             <div class="field field-name-body field-type-text-with-summary field-label-hidden">
              <div class="field-items">
               <div class="field-item even">
                <p>One of the advantages with Stripe is that theoretically, the credit card number doesn't have<br> to go through the merchant's less secure web server. The current implementation of uc_stripe<br> uses the default payment gateway functionality of ubercart and the credit card does have to<br> pass through the merchant's drupal installation and get stored in a session.</p> 
                <p>One way around this is to do what uc_authorize_simdpm does and create another payment method<br> that by-passes Ubercarts less secure payment gateway feature. The DPM method in that module<br> is a great example of what uc_stripe could do. It would be awesome if uc_stripe<br> could implement this method because then the merchant's would qualify for SAQ-A and not need<br> all the expensive security scanning and auditing. As it is, the system needs all the auditing that<br> any other payment gateway like Authorize.net AIM would require.</p>
               </div>
              </div>
             </div>
             <div class="field field-name-field-issue-files field-type-file field-label-hidden">
              <div class="field-items">
               <div class="field-item even">
                <table id="extended-file-field-table-field-issue-files"> 
                 <thead>
                  <tr>
                   <th name="extended-file-field-table-header-cid" class="extended-file-field-table-header">Comment</th>
                   <th name="extended-file-field-table-header-filename" class="extended-file-field-table-header">File</th>
                   <th name="extended-file-field-table-header-filesize" class="extended-file-field-table-header">Size</th>
                   <th name="extended-file-field-table-header-uid" class="extended-file-field-table-header">Author</th> 
                  </tr>
                 </thead> 
                 <tbody> 
                  <tr class="extended-file-field-table-row odd" name="issue-file-summary-table-row-5360361">
                   <td name="extended-file-field-table-cid-5360361" class="extended-file-field-table-cid"><a href="/node/1467886#comment-10393923" class="active">#78</a></td>
                   <td name="extended-file-field-table-filename-5360361" class="extended-file-field-table-filename"><span class="file"> <a href="https://www.drupal.org/files/issues/uc_stripe-convert-to-cents-1467886-78.patch" type="text/x-diff; length=1681">uc_stripe-convert-to-cents-1467886-78.patch</a></span></td>
                   <td name="extended-file-field-table-filesize-5360361" class="extended-file-field-table-filesize">1.64 KB</td>
                   <td name="extended-file-field-table-uid-5360361" class="extended-file-field-table-uid"><a href="/u/nhero" title="View user profile." data-uid="183378" class="username">nhero</a></td> 
                  </tr> 
                  <tr class="extended-file-field-table-row even" name="issue-file-summary-table-row-5298499">
                   <td name="extended-file-field-table-cid-5298499" class="extended-file-field-table-cid"><a href="/node/1467886#comment-10196819" class="active">#68</a></td>
                   <td name="extended-file-field-table-filename-5298499" class="extended-file-field-table-filename"><span class="file"> <a href="https://www.drupal.org/files/issues/uc_stripe-convert-to-cents-1467886-68.patch" type="text/x-diff; length=437">uc_stripe-convert-to-cents-1467886-68.patch</a></span></td>
                   <td name="extended-file-field-table-filesize-5298499" class="extended-file-field-table-filesize">437 bytes</td>
                   <td name="extended-file-field-table-uid-5298499" class="extended-file-field-table-uid"><a href="/u/owenbush" title="View user profile." data-uid="2765259" class="username">owenbush</a></td> 
                  </tr> 
                  <tr class="extended-file-field-table-row odd" name="issue-file-summary-table-row-5254238">
                   <td name="extended-file-field-table-cid-5254238" class="extended-file-field-table-cid"><a href="/node/1467886#comment-10067770" class="active">#54</a></td>
                   <td name="extended-file-field-table-filename-5254238" class="extended-file-field-table-filename"><span class="file"> <a href="https://www.drupal.org/files/issues/uc_stripe_1467886_form_alter.patch" type="text/x-diff; length=1631">uc_stripe_1467886_form_alter.patch</a></span></td>
                   <td name="extended-file-field-table-filesize-5254238" class="extended-file-field-table-filesize">1.59 KB</td>
                   <td name="extended-file-field-table-uid-5254238" class="extended-file-field-table-uid"><a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a></td> 
                  </tr> 
                  <tr class="extended-file-field-table-row even" name="issue-file-summary-table-row-5204626">
                   <td name="extended-file-field-table-cid-5204626" class="extended-file-field-table-cid"><a href="/node/1467886#comment-9917758" class="active">#40</a></td>
                   <td name="extended-file-field-table-filename-5204626" class="extended-file-field-table-filename"><span class="file"> <a href="https://www.drupal.org/files/issues/uc_stripe_1467886_d7.patch" type="text/x-diff; length=8252">uc_stripe_1467886_d7.patch</a></span></td>
                   <td name="extended-file-field-table-filesize-5204626" class="extended-file-field-table-filesize">8.06 KB</td>
                   <td name="extended-file-field-table-uid-5204626" class="extended-file-field-table-uid"><a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a></td> 
                  </tr> 
                  <tr class="extended-file-field-table-row odd" name="issue-file-summary-table-row-4235752">
                   <td name="extended-file-field-table-cid-4235752" class="extended-file-field-table-cid"><a href="/node/1467886#comment-6182092" class="active">#12</a></td>
                   <td name="extended-file-field-table-filename-4235752" class="extended-file-field-table-filename"><span class="file"> <a href="https://www.drupal.org/files/uc_stripe_1467886_stripe.js_12.patch" type="text/x-diff; length=7715">uc_stripe_1467886_stripe.js_12.patch</a></span></td>
                   <td name="extended-file-field-table-filesize-4235752" class="extended-file-field-table-filesize">7.53 KB</td>
                   <td name="extended-file-field-table-uid-4235752" class="extended-file-field-table-uid"><a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a></td> 
                  </tr> 
                 </tbody> 
                </table> 
               </div>
              </div>
             </div>
             <a href="https://www.drupal.org/association/campaign/value-2017?utm_source=dci-sponsorship&amp;utm_campaign=drupalci-membership-campaign-2017-08-14" class="ci-ad">Members fund testing for the Drupal project. <img src="https://www.drupal.org/files/styles/grid-2/public/drupal-association-logo-rgb.png" alt="Drupal Association"> <strong>Learn more</strong></a> 
            </div> 
           </div> 
           <section class="comments comment-wrapper"> 
            <h2 class="title">Comments</h2> 
            <a id="comment-5839332"></a> 
            <div class="comment comment-content-5839332 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-5839332" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#1</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-04-06T23:55:07+00:00">6 April 2012 at 23:55</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Yeah, or just implement <a href="https://stripe.com/docs/stripe.js" rel="nofollow">Stripe.js</a>, in which case using a credit card gateway module is hardly a necessity at all.</p> 
                 <p>Not sure if the other approach would be needed as a fallback if JS is disabled, though...I don't really see how it could be done securely, so probably best just to require JS even though some people dislike that.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-5903726"></a> 
            <div class="comment comment-content-5903726 clearfix"> 
             <a href="/u/mailvictorquinn.com" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/default-avatar.png?itok=qMUyWcaa" width="80" height="80" alt="mail@victorquinn.com’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-5903726" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#2</a></h3> 
              <a href="/u/mailvictorquinn.com" title="View user profile." data-uid="367196" class="username">mail@victorquinn.com</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> mail@victorquinn.com</span></span> commented 
              <time pubdate datetime="2012-04-22T22:54:51+00:00">22 April 2012 at 22:54</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>For the curious, I went about it this way using the Stripe PHP libraries instead of using Stripe.js because it fit in more with the Ubercart way of doing things. All the rest of the major Ubercart payment processing modules (as far as I could tell anyway) are done in a similar manner, using PHP libraries and doing the processing server-side. Doing it in JS client-side would indeed be very cool, but then things would have to be written a bit differently to make everything flow. Since this was my first Ubercart payment module though, I didn't feel comfortable trying to do something entirely different from the other payment modules.</p> 
                 <p>However, I've been talking with some of the Stripe devs and they are pushing to move toward Stripe.js so we're trying to figure out a way to get us there in the not too distant future.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-5972878"></a> 
            <div class="comment comment-content-5972878 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-5972878" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#3</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-05-09T02:13:56+00:00">9 May 2012 at 02:13</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-field-changes"> 
                  <tbody> 
                   <tr class="odd">
                    <td class="nodechanges-label">Version: </td>
                    <td class="nodechanges-old">6.x-1.0 </td>
                    <td class="nodechanges-new">» 6.x-1.x-dev</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I've been thinking about this and had 2 ideas. One is to create an intermediary callback to which the form submits, kind of like uc_paypal, but on the user's own site instead. That callback would receive the token Stripe.js generated, handle the payment processing, and then redirect back to the site itself with success or failure. Of course, uc_credit already has that kind of thing built-in, and I notice that Commerce Stripe simply submits empty form values and uses JS to populate the Stripe token.</p> 
                 <p>I think the latter approach would make more sense if it's possible since it basically <em>is</em> a credit card gateway; it just uses a token instead of a credit card number.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-5976658"></a> 
            <div class="comment comment-content-5976658 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-5976658" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#4</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-05-09T19:45:19+00:00">9 May 2012 at 19:45</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Hm. After backporting <a href="http://drupal.org/project/stripe" rel="nofollow">Stripe</a>, I'm a little discouraged; it feels like my backport is going to wind up diverging from the Drupal 7 version a fair amount (because I fix things along the way), and I'm not sure what I think about that.</p> 
                 <p>I'm going to Stripe Office Hours tonight and will make the call whether I just implement stuff straight in uc_stripe (because Stripe's API is already pretty abstracted and easy-to-use) or whether I use my backport of the Stripe module.</p> 
                 <p>Main benefits of Stripe module is that it has a working implementation of Stripe.js and that it collects all of the API keys on its own configuration screen, not just the secret key. But it would not be hard to copy-paste the good parts of that code, hence my uncertainty. It doesn't even really have any abstraction of the actual Stripe operations (wrapper functions). Seems like it might be better to start by using the library directly in uc_stripe, but abstract things out so that the API parts could potentially turn into a D6 version of Stripe organically rather than trying to fit a round peg into a square hole, cuz that's what this is currently feeling like to me (even though I was so for it before).</p> 
                 <p>Any comments either way to sway my decision are welcome. Either way, I'm shooting to solve this problem tonight! :)</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-5977370"></a> 
            <div class="comment comment-content-5977370 clearfix"> 
             <a href="/u/mailvictorquinn.com" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/default-avatar.png?itok=qMUyWcaa" width="80" height="80" alt="mail@victorquinn.com’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-5977370" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#5</a></h3> 
              <a href="/u/mailvictorquinn.com" title="View user profile." data-uid="367196" class="username">mail@victorquinn.com</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> mail@victorquinn.com</span></span> commented 
              <time pubdate datetime="2012-05-09T22:42:17+00:00">9 May 2012 at 22:42</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Hey wizeonesolutions, for sure, any info/guidance you can get from them on this would be great. </p> 
                 <p>I wish I had the time to do it myself, but unfortunately I'm insanely busy as of late with no signs of it letting up. </p> 
                 <p>Again, I think we're all in agreement that the Stripe JS library is the way to go, I just wasn't sure how to reconcile the round peg square hole issue you highlighted. Particularly when working within the bounds of Ubercart, it was trick to figure out how to mash that together with a JS payment library like this. </p> 
                 <p>It's certainly possible and would ultimately be far slicker but it's a non-trivial task..</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-5977374"></a> 
            <div class="comment comment-content-5977374 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-5977374" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#6</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-05-09T22:43:53+00:00">9 May 2012 at 22:43</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Appreciate you taking a bit of time to reply all the same! I understand busy. If I get something together though will you be able to commit it or hook me up with co-maintainership (even temporarily) so I can, if it meets your vision and whatnot.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-5979042"></a> 
            <div class="comment comment-content-5979042 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-5979042" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#7</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-05-10T09:47:08+00:00">10 May 2012 at 09:47</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Realized the office hours are tomorrow, so just dug into the code a bit tonight. Looks like I have to understand how the magic of uc_credit works. At a glance, though, all I have to do is add a bit to the checkout form alter so that Stripe.js sticks a token in a separate, named field instead of sensitive data. And then I will tell the charge function to use that instead of the CC number. Stripe's API works fine with a token.</p> 
                 <p>I'm not going to try integrating this with my backport of the Stripe module at this point...I see no real gain. I'll just add a couple fields for the publishable keys, use the same JS in a uc_stripe.js file, and we'll be off to the races.</p> 
                 <p>Fingers crossed for some good news tomorrow night.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-5983810"></a> 
            <div class="comment comment-content-5983810 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-5983810" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#8</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-05-11T08:25:56+00:00">11 May 2012 at 08:25</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>OK, so I've finally started to get some traction on this. Not done yet, but getting there. So what will happen is that the form elements start disabled (via form alter) and then JS is used to enable them and remove the name attributes. This ensures that CC data doesn't hit the server even if JS is disabled and prevents PCI compliance requirements being introduced. Next is to bypass validation somehow and get it to stop complaining about the credit card number and such (since we validate with Stripe client-side). I probably have to change the form validation handler. I have to add a hidden field to store the token Stripe.js sends us back and make sure that goes into <code class="language-php">$order-&gt;payment_details</code>.</p> 
                 <p>The charge logic shouldn't need much tweaking, other than making it use the Stripe.js token instead of the CC number. And on that note, I have to add the publishable keys to the settings form.</p> 
                 <p>Then edge cases like making sure the server ignores/unsets the CC data even if it somehow makes it through (which shouldn't be possible, but I'm not sure if Firebug can be used with JS off or not.</p> 
                 <p>I want to get this done for use on my own site, so hopefully I'll have a patch to submit soon.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-6046498"></a> 
            <div class="comment comment-content-6046498 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-6046498" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#9</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-05-27T08:38:59+00:00">27 May 2012 at 08:38</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>No joke on this being a non-trivial task. I worked on it more today though. Main issue now is how to get the JS in there at the right time...I basically need to respond to Ubercart being done with loading the payment form and inject uc_stripe.js and the publishable key setting. Tricky stuff since the payment form is retrieved with AJAX. I need to look into something like <a href="http://drupal.org/project/ajax_load" rel="nofollow">ajax_load</a> or at least how it does it. I could probably get away with generating the JS for the publishable key in PHP if I absolutely must, at least to start (if ajax_load can't also do JS settings). We'll see next time I tinker at this.</p> 
                 <p>It's definitely getting somewhere though, which is good.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-6049434"></a> 
            <div class="comment comment-content-6049434 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-6049434" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#10</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-05-28T10:06:51+00:00">28 May 2012 at 10:06</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>OK, I managed to get the JavaScript in there. I'm not proud of <em>how</em> I did it, but improvements can always be made later. I basically shoehorned it in with the credit card theming function. I could have added markup to the form_alter, but I would have had to output it in the overridden theme function anyway, which isn't much better.</p> 
                 <p>Anyway, I just have to override the validation so it doesn't check for credit card info (it isn't there) and check that the token is set instead. And then I can just tweak the charge function a bit, and I'll hopefully have it working!</p> 
                 <p>I may or may not fix the administration form side of things (manually entering a payment). If it's not too hard, I just will. But I might just leave it out of eagerness to get something going.</p> 
                 <p>Patch should be coming this week...</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-6181864"></a> 
            <div class="comment comment-content-6181864 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-6181864" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#11</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-07-01T00:18:16+00:00">1 July 2012 at 00:18</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-field-changes"> 
                  <tbody> 
                   <tr class="odd">
                    <td class="nodechanges-label">Assigned: </td>
                    <td class="nodechanges-old">Unassigned </td>
                    <td class="nodechanges-new">» <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a></td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>OK, it's later than "next week" but at a Stripe hackathon now and hoping to bust out something today.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-6182092"></a> 
            <div class="comment comment-content-6182092 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-6182092" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#12</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-07-01T04:05:39+00:00">1 July 2012 at 04:05</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-field-changes"> 
                  <tbody> 
                   <tr class="odd">
                    <td class="nodechanges-label">Assigned: </td>
                    <td class="nodechanges-old"><a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> </td>
                    <td class="nodechanges-new">» Unassigned</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                 <table class="nodechanges-file-changes"> 
                  <thead>
                   <tr>
                    <th>File</th>
                    <th>Size</th> 
                   </tr>
                  </thead> 
                  <tbody> 
                   <tr class="nodechanges-file-changes nodechanges-file-status-new pift-file-info odd">
                    <td class="nodechanges-file-link"><span class="file"> <a href="https://www.drupal.org/files/uc_stripe_1467886_stripe.js_12.patch" type="text/x-diff; length=7715" title="uc_stripe_1467886_stripe.js_12.patch">uc_stripe_1467886_stripe.js_12.patch</a></span></td>
                    <td class="nodechanges-file-size">7.53 KB</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>By request, posting what I have so far. NOT done. But wrapping up for now. I figured out that I need to use <code class="language-php">hook_payment_method_alter()</code> to change the validation callback for <code class="language-php">uc_credit_payment_method()</code>. We need to write our own...that thing makes too many assumptions. Eventually, uc_stripe shouldn't even use uc_credit. But one thing at a time.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-6418470"></a> 
            <div class="comment comment-content-6418470 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-6418470" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#13</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2012-08-31T05:08:05+00:00">31 August 2012 at 05:08</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Pushed work so far to 6.x-1.x-1467886 on <a href="http://drupal.org/sandbox/wizonesolutions/1764778" rel="nofollow">http://drupal.org/sandbox/wizonesolutions/1764778</a> (so I can get to it from elsewhere later and continue it - not ready to roll a patch yet).</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-7000530"></a> 
            <div class="comment comment-content-7000530 clearfix"> 
             <a href="/u/bitcookie" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-2420282-1437750156.jpg?itok=9pERhOlO" width="80" height="80" alt="bitcookie’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-7000530" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#14</a></h3> 
              <a href="/u/bitcookie" title="View user profile." data-uid="2420282" class="username">bitcookie</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> bitcookie</span></span> commented 
              <time pubdate datetime="2013-01-29T21:55:37+00:00">29 January 2013 at 21:55</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Okay,</p> 
                 <p>So I've got something working. Unfortunately I couldn't access wizeonesolution's code dump, so I had to start from the beginning. I pretty much re-wrote all of uc_stripe.</p> 
                 <p>Basically the way this works is by hiding ubercart's normal card entry form, inserting bogus test values into it, and creating a faux collection form for stripe.js. A token gets inserted into a hidden field and picked up during the _charge callback to use instead of the user's credit card number.</p> 
                 <p>Also, this module uses on-site subscription management for uc_recurring instead of setting up a stripe subscription.</p> 
                 <p>I've only used this in a test environment and not a production environment. I don't know if ubercart will accept 4242424242424242 as a card number when the gateway is live.</p> 
                 <p>Anyway, enough of this explanation nonsense. Here's a link to the bleeding edge code. I'll update this blog article as I continue to build out the gateway and eventually do my live testing.</p> 
                 <p><a href="http://bitcookie.com/blog/ubercart-and-stripe-js" rel="nofollow">http://bitcookie.com/blog/ubercart-and-stripe-js</a></p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-7023976"></a> 
            <div class="comment comment-content-7023976 clearfix"> 
             <a href="/u/restyler" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/default-avatar.png?itok=qMUyWcaa" width="80" height="80" alt="restyler’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-7023976" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#15</a></h3> 
              <a href="/u/restyler" title="View user profile." data-uid="24628" class="username">restyler</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> restyler</span></span> commented 
              <time pubdate datetime="2013-02-04T03:39:35+00:00">4 February 2013 at 03:39</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Hi Bitcookie,</p> 
                 <p>thank you for your work!<br> we are really interested in using javascript powered approach, too.<br> Did you have a chance to test your code in production?</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-7023982"></a> 
            <div class="comment comment-content-7023982 clearfix"> 
             <a href="/u/restyler" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/default-avatar.png?itok=qMUyWcaa" width="80" height="80" alt="restyler’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-7023982" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#16</a></h3> 
              <a href="/u/restyler" title="View user profile." data-uid="24628" class="username">restyler</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> restyler</span></span> commented 
              <time pubdate datetime="2013-02-04T03:47:56+00:00">4 February 2013 at 03:47</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>(we don't really need subscription stuff, just regular payments)</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-8879103"></a> 
            <div class="comment comment-content-8879103 clearfix"> 
             <a href="/u/wizonesolutions" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-739994-1504952918.jpg?itok=aWG3MteA" width="80" height="80" alt="wizonesolutions’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-8879103" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#17</a></h3> 
              <a href="/u/wizonesolutions" title="View user profile." data-uid="739994" class="username">wizonesolutions</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> wizonesolutions</span></span> commented 
              <time pubdate datetime="2014-06-13T21:55:14+00:00">13 June 2014 at 21:55</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-field-changes"> 
                  <tbody> 
                   <tr class="odd">
                    <td class="nodechanges-label">Issue summary: </td>
                    <td class="nodechanges-changed" colspan="2"><a href="/node/1467886/revisions/view/5733461/7346427">View changes</a></td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Bitcookie's post was moved to <a href="http://bitcookie.com/blog/pci-compliant-ubercart-and-stripe-js" rel="nofollow">http://bitcookie.com/blog/pci-compliant-ubercart-and-stripe-js</a></p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-8939559"></a> 
            <div class="comment comment-content-8939559 clearfix"> 
             <a href="/u/rickmanelius" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-680072-1400198420.jpg?itok=Rs6k3OM0" width="80" height="80" alt="rickmanelius’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-8939559" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#18</a></h3> 
              <a href="/u/rickmanelius" title="View user profile." data-uid="680072" class="username">rickmanelius</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rickmanelius</span></span> commented 
              <time pubdate datetime="2014-07-04T02:42:45+00:00">4 July 2014 at 02:42</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>This is an extremely important issue. As stated in the summary, the primary benefit of using Stripe is to prevent the credit card from passing through the merchant server. Given that someone evaluating this module (particularly site builders that might not look under the hood) would expect this to be implemented in a shared-management approach, it should be noted on the project page until this patch is committed.</p> 
                 <p>And FWIW, even when this is updated, a direct post method like Stripe will now be considered SAQ A-EP. See the next draft of the PCI compliance white paper for details.<br><a href="https://github.com/rickmanelius/drupalpcicompliance/blob/ver_1_1/DrupalPCICompliance.md" rel="nofollow">https://github.com/rickmanelius/drupalpcicompliance/blob/ver_1_1/DrupalP...</a></p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9035345"></a> 
            <div class="comment comment-content-9035345 clearfix"> 
             <a href="/u/mikedavis" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-2660157-1467743307.jpg?itok=XgQRQSCW" width="80" height="80" alt="mike.davis’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9035345" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#19</a></h3> 
              <a href="/u/mikedavis" title="View user profile." data-uid="2660157" class="username">mike.davis</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> mike.davis at <a href="/deeson">Deeson</a></span></span> commented 
              <time pubdate datetime="2015-10-02T10:11:32+00:00">2 October 2015 at 10:11</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Hi @Bitcookie, I am interested in using Stripe with Ubercart on a site, but when I have tried your code it didn't seem to take any payment. I can see it making a request for the card token but this doesn't seem to get set correctly and the payment is not made with Stripe. Is this a working version?</p> 
                 <p>I have also tried the patch from @wizonesolutions but this just generates an error after when trying to review the order due to card number being entered.</p> 
                 <p>Is this still very much a work in progress? I am only interested in taking payments at the moment, but would be interested in the recurring payments in the future.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9685933"></a> 
            <div class="comment comment-content-9685933 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9685933" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#20</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-03-04T17:26:34+00:00">4 March 2015 at 17:26</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-field-changes"> 
                  <tbody> 
                   <tr class="odd">
                    <td class="nodechanges-label">Title: </td>
                    <td class="nodechanges-old">No credit card storage through direct post. </td>
                    <td class="nodechanges-new">» uc_stripe is not PCI-DSS compliant and it should and can be</td> 
                   </tr> 
                   <tr class="even">
                    <td class="nodechanges-label">Priority: </td>
                    <td class="nodechanges-old">Normal </td>
                    <td class="nodechanges-new">» Major</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Changing title and priority to reflect the importance of this issue. Stripe goes so far toward relieving the PCI problem, and this module currently doesn't use that great framework. </p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9685957"></a> 
            <div class="comment comment-content-9685957 clearfix"> 
             <a href="/u/rickmanelius" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-680072-1400198420.jpg?itok=Rs6k3OM0" width="80" height="80" alt="rickmanelius’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9685957" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#21</a></h3> 
              <a href="/u/rickmanelius" title="View user profile." data-uid="680072" class="username">rickmanelius</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rickmanelius</span></span> commented 
              <time pubdate datetime="2015-03-04T17:30:09+00:00">4 March 2015 at 17:30</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>It's important to note that the gap between the number of controls one has to meet with this module in its current state versus what it could be is huge.</p> 
                 <p>Right now, being that the credit card goes to the Drupal application, that now puts us into PCI SAQ D for version 3.0 of the standard. Based on stripe now using an iframe, that could put this to SAQ A (see <a href="https://support.stripe.com/questions/what-about-pci-dss-3-0" rel="nofollow">https://support.stripe.com/questions/what-about-pci-dss-3-0</a>). This means you go from 300+ security controls to ~15.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9689267"></a> 
            <div class="comment comment-content-9689267 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9689267" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#22</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-03-05T16:17:21+00:00">5 March 2015 at 16:17</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I turned this off on our site when I realized it wasn't meeting the promise, but really want to have a workable solution.</p> 
                 <p>I am experimenting with <a href="http://bitcookie.com/blog/pci-compliant-ubercart-and-stripe-js" rel="nofollow">@Bitcookie's published version</a>, and find that it actually works, but needs some more work:</p> 
                 <ul>
                  <li>The CC form injected for Stripe is supposed to *not* have name attributes, to prevent a POST or accidental post from happening. CC form is also ugly, and shows even when credit card is not the selected payment type.</li> 
                  <li>Recurring actually works, but only if uc_recurring has automatic triggering set. In other words, it does not use Stripe's subscriptions at all, which is not necessarily a bad thing.</li> 
                  <li>Failures of local CC validation result in a broken form (reload is required - the submit button never gets re-enabled.</li> 
                  <li>@Bitcookie changed the names of the variables that handle the private/public keys. This is easily adjusted with a hook_update_N() or other approach</li> 
                  <li>Needs to be updated to stripe v2, but it seems this works with no trouble</li> 
                 </ul>
                 <p>I'm not completely convinced that I can solve these without getting sidetracked, but @Bitcookie's code definitely has potential. If you've updated since your post, @Bitcookie, could we get it onto Github or a sandbox?</p> 
                 <p>It's also worth considering using the approach suggested in the OP, creating a different payment method and not using the CC payment method.</p> 
                 <p>However, of the problems I list, only the first requires significant work. So maybe there's potential here. Should this go as a 6.x-2.x version? It doesn't look like the named maintainers are active here any more, or are they? </p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9698541"></a> 
            <div class="comment comment-content-9698541 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9698541" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#23</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-03-08T20:23:00+00:00">8 March 2015 at 20:23</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>OK, I built a 6.x-2.x version which should be PCI-compliant, using stripe.js based on @BitCookie's work, with quite a lot of extra effort. </p> 
                 <p>As far as I can tell, it works fine in a number of contexts. I'd love review.</p> 
                 <p>I'm also willing to maintain this module, as it looks like I'm stuck with it for some time. So @victorquinn, @cweagans... let me have access if you're willing. Otherwise I'll have to maintain a fork, which is a lousy deal.</p> 
                 <p>This version does *not* use stripe subscriptions. Instead it uses uc_recurring. The v1 implementation here does not seem to implement the webhooks that would be required to know if there was a charge made on a subscription, so that doesn't work very well. And keeping the recurring management within the Drupal site works fine.</p> 
                 <p>The provided hook_update_N() updates from Stripe subscriptions to putting recurring fees local. However, it does *not* delete your Stripe subscriptions. I'll build a tool for that... since I have to have it.</p> 
                 <p>I would dearly appreciate review both from the basic code side and the PCI compliance side. I've gone to a lot of effort to make sure that card details do not ever get to the Drupal server. </p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9698545"></a> 
            <div class="comment comment-content-9698545 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9698545" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#24</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-03-08T20:23:45+00:00">8 March 2015 at 20:23</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-field-changes"> 
                  <tbody> 
                   <tr class="odd">
                    <td class="nodechanges-label">Status: </td>
                    <td class="nodechanges-old">Active </td>
                    <td class="nodechanges-new">» Needs review</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9698615"></a> 
            <div class="comment comment-content-9698615 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9698615" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#25</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-03-08T21:09:53+00:00">8 March 2015 at 21:09</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>@cweagans gave me commit access, so this is now in 6.x-2.x here. The 6.x-2.x-dev version is out there for your review. </p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9700291"></a> 
            <div class="comment comment-content-9700291 clearfix"> 
             <a href="/u/rickmanelius" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-680072-1400198420.jpg?itok=Rs6k3OM0" width="80" height="80" alt="rickmanelius’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9700291" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#26</a></h3> 
              <a href="/u/rickmanelius" title="View user profile." data-uid="680072" class="username">rickmanelius</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rickmanelius</span></span> commented 
              <time pubdate datetime="2015-03-09T13:00:58+00:00">9 March 2015 at 13:00</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Hi @rfay. I'd be happy to review for PCI compliance considerations.</p> 
                 <p>For anyone else following the thread, this can provide inspiration as to why this is a very important discussion <a href="http://drupalpcicompliance.org/" rel="nofollow">http://drupalpcicompliance.org/</a>. If we get an iframe solution in place for Ubercart, it would be a huge win for the community.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9700337"></a> 
            <div class="comment comment-content-9700337 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9700337" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#27</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-03-09T13:17:40+00:00">9 March 2015 at 13:17</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-field-changes"> 
                  <tbody> 
                   <tr class="odd">
                    <td class="nodechanges-label">Title: </td>
                    <td class="nodechanges-old">uc_stripe is not PCI-DSS compliant and it should and can be </td>
                    <td class="nodechanges-new">» PCI-DSS compliance using stripe.js</td> 
                   </tr> 
                   <tr class="even">
                    <td class="nodechanges-label">Version: </td>
                    <td class="nodechanges-old">6.x-1.x-dev </td>
                    <td class="nodechanges-new">» 6.x-2.x-dev</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Updating title and version. Thanks for your review @rickmanelius</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9713203"></a> 
            <div class="comment comment-content-9713203 clearfix"> 
             <a href="/u/robertmaynord" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/default-avatar.png?itok=qMUyWcaa" width="80" height="80" alt="robertmaynord’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9713203" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#28</a></h3> 
              <a href="/u/robertmaynord" title="View user profile." data-uid="271330" class="username">robertmaynord</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> robertmaynord</span></span> commented 
              <time pubdate datetime="2015-03-12T15:43:38+00:00">12 March 2015 at 15:43</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I have been waiting and hoping for some form of dependable iframe solution for Drupal. I currently have an Authorize.net DPM account, and must upgrade shortly. It seems to me that many small businesses do not realize how much the transition from SAQ-A to SAQ-EP will cost. My merchant bank is working on a "cost saving" plan that will be priced around $5000 per year, including penetrations tests (not including server upgrades). For me, $5000 is still a prohibitive sum.</p> 
                 <p>Anyway, hats off to all the Drupal folks working on a solution! (I run Ubercart version 7)</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9714095"></a> 
            <div class="comment comment-content-9714095 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9714095" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#29</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-03-12T19:09:28+00:00">12 March 2015 at 19:09</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>With proper use of stripe.js, you shouldn't need the iframe route to get the same level of compliance, because all data is submitted directly to Stripe without ever touching the Drupal-site server. You get the same level of direct communication to Stripe as you'd get with an iframe, but without having to use frames.</p> 
                 <p>Or have I missed something?</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9714115"></a> 
            <div class="comment comment-content-9714115 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9714115" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#30</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-03-12T19:13:20+00:00">12 March 2015 at 19:13</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>The 6.x-2.x implementation uses stripe.js, which does not involve an iframe.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9714117"></a> 
            <div class="comment comment-content-9714117 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9714117" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#31</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-03-12T19:15:23+00:00">12 March 2015 at 19:15</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>&gt;&gt; The 6.x-2.x implementation uses stripe.js, which does not involve an iframe.</p> 
                 <p>Exactly.</p> 
                 <p>Whereas robertmaynord, comment #28 in this thread, is specifically looking for an iframe solution, and I was wondering what made that necessary that couldn't be achieved in the way your work-in-progress is being built.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9714777"></a> 
            <div class="comment comment-content-9714777 clearfix"> 
             <a href="/u/robertmaynord" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/default-avatar.png?itok=qMUyWcaa" width="80" height="80" alt="robertmaynord’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9714777" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#32</a></h3> 
              <a href="/u/robertmaynord" title="View user profile." data-uid="271330" class="username">robertmaynord</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> robertmaynord</span></span> commented 
              <time pubdate datetime="2015-03-12T22:17:19+00:00">12 March 2015 at 22:17</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Well, I am open to all solutions. However, the PCI DSS specifically lists iframes as qualifying for SAQ-A (<a href="https://www.pcisecuritystandards.org/documents/Understanding_SAQs_PCI_DSS_v3.pdf" rel="nofollow">https://www.pcisecuritystandards.org/documents/Understanding_SAQs_PCI_DS...</a> PAGE 5). Direct Payment Methods such as Authorize.net's DPM no longer qualify. There are other SAQ-A possibilities such as Paypal and Authorize.net's SIM, but they take the customer away from the store site (to the credit card web site) for all the processing. This is thought to be less than optimal - it scares the customers away. An iframe allows the customer to stay on the store web site to complete the transaction. </p> 
                 <p>According to Stripe: "We’ve been working with our Qualified Security Assessor and others to update Stripe.js to meet the new requirements and security constraints, while still keeping it simple to use. The new version of Stripe.js meets these criteria by performing all transmission of sensitive cardholder data within an iframe served off of a stripe.com domain controlled by Stripe. This in turn allows our customers to continue to be eligible for SAQ-A (the older questionnaire) in most cases."</p> 
                 <p>With DPM, no data ever sees my website - I have no access to it. But according to my bank, DPM could be vulnerable to a "man in the middle attack", so it is no longer acceptable. My bank recommends that I convert to authorize.net's CIM program. But it MUST be the "Hosted" version (their web site), and the Drupal CIM is only for the non-hosted version of CIM. </p> 
                 <p>Perhaps this new implementation you are working on is secure in the same way an iframe is. I am just wondering about the qualifications for SAQ-A --- what they will accept or not. </p> 
                 <p>Again, I am open to all new possibilities....</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9714787"></a> 
            <div class="comment comment-content-9714787 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9714787" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#33</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-03-12T22:18:39+00:00">12 March 2015 at 22:18</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Thanks for explaining, and bringing me up to date with the latest requirements.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9714993"></a> 
            <div class="comment comment-content-9714993 clearfix"> 
             <a href="/u/rickmanelius" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-680072-1400198420.jpg?itok=Rs6k3OM0" width="80" height="80" alt="rickmanelius’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9714993" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#34</a></h3> 
              <a href="/u/rickmanelius" title="View user profile." data-uid="680072" class="username">rickmanelius</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rickmanelius</span></span> commented 
              <time pubdate datetime="2015-03-12T23:02:13+00:00">12 March 2015 at 23:02</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>DPM is vulnerable to keyloggers, for example, whereas an iframe adds an additional level of protection around the credit card form element within the iframe.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9731947"></a> 
            <div class="comment comment-content-9731947 clearfix"> 
             <a href="/u/rickmanelius" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-680072-1400198420.jpg?itok=Rs6k3OM0" width="80" height="80" alt="rickmanelius’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9731947" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#35</a></h3> 
              <a href="/u/rickmanelius" title="View user profile." data-uid="680072" class="username">rickmanelius</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rickmanelius</span></span> commented 
              <time pubdate datetime="2015-03-18T03:12:49+00:00">18 March 2015 at 03:12</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I really apologize for not providing a review at this time (between having a sick baby and some work deadlines, I've been slammed). That said, if this goes through and does offer card on file support, it'll be added to the PCI white paper as a recommend SAQ A gateway. Tracking here =&gt; <a href="https://github.com/rickmanelius/drupalpcicompliance/issues/39" rel="nofollow">https://github.com/rickmanelius/drupalpcicompliance/issues/39</a></p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9894889"></a> 
            <div class="comment comment-content-9894889 clearfix"> 
             <a href="/u/rickmanelius" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-680072-1400198420.jpg?itok=Rs6k3OM0" width="80" height="80" alt="rickmanelius’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9894889" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#36</a></h3> 
              <a href="/u/rickmanelius" title="View user profile." data-uid="680072" class="username">rickmanelius</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rickmanelius</span></span> commented 
              <time pubdate datetime="2015-05-06T03:43:45+00:00">6 May 2015 at 03:43</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>@rfay. I apologize for not reviewing this sooner. At my company, we actually have a client that was using the D7 version of this and we got budget approval to review this. Unfortunately, it looks like your work is on the D6 version, which also appears to be considerably different than the D7 version. This is not to say that I won't still review this, but it's just going to be harder to see this through as I'd prefer to focus on the D7 branch given that it'll have a greater impact as D6 moves towards EOL.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9895923"></a> 
            <div class="comment comment-content-9895923 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9895923" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#37</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-05-06T12:00:00+00:00">6 May 2015 at 12:00</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>We're porting warmshowers.org to D7 now, so you should see a D7 version in the next couple of months.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9917300"></a> 
            <div class="comment comment-content-9917300 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9917300" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#38</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-05-13T10:03:40+00:00">13 May 2015 at 10:03</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Looking forward to that, @rfay.</p> 
                 <p>I had a go at porting the D6 uc_stripe (6.x-2.x) to D7. I changed some of the hooks that had changed name, and a few other D6-&gt;D7 breaking changes. I got stuck at the jQuery function (or $()) seemingly not being available ot the uc_stripe_clean_cc_form() function in uc_stripe.js.</p> 
                 <p>I think I'll have to wait until you are able to upload the port you're working on, then help out at the testing stage once most of the wrinkles have been ironed out.</p> 
                 <p>One thing I was unclear on. Why is the module (as it stands) using client-side Javascript to remove the name attribute from the CC fields, rather than doing it directly in the hook_form_FORMID_alter implementation which is already being called? We'd still need to disable the submit button until we know Javascript is able to re-enable it, but I can't see why anything else needs altering client-side.</p> 
                 <p>Anyway - thanks for your work on this. I'm following this issue, and will gladly help out reviewing draft code once you've got such.</p> 
                 <p>(I don't need UC subscriptions to work, so if you get to the point where the rest of the module is written, I'll be able to review the rest of it while you work on recurring payments)</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9917684"></a> 
            <div class="comment comment-content-9917684 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9917684" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#39</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-05-13T13:04:55+00:00">13 May 2015 at 13:04</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Removing the name attribute makes it impossible for the form field to be submitted. If the form were accidentally submitted, even if we were deliberately not handling the fields, the CC info would end up in session info, etc. </p> 
                 <p>Letting the regular credit card handling module provide the form fields, on the other hand (and not removing them) allows for standard theming and such. The JS could provide the form fields, but they'd have to be separately themed. </p> 
                 <p>It would be great if you'd upload your partial D7 patch or better, provide a link to a github or sandbox repo where your work is. It might help us.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9917758"></a> 
            <div class="comment comment-content-9917758 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9917758" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#40</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-05-13T13:40:07+00:00">13 May 2015 at 13:40</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-file-changes"> 
                  <thead>
                   <tr>
                    <th>File</th>
                    <th>Size</th> 
                   </tr>
                  </thead> 
                  <tbody> 
                   <tr class="nodechanges-file-changes nodechanges-file-status-new pift-file-info odd">
                    <td class="nodechanges-file-link"><span class="file"> <a href="https://www.drupal.org/files/issues/uc_stripe_1467886_d7.patch" type="text/x-diff; length=8252">uc_stripe_1467886_d7.patch</a></span></td>
                    <td class="nodechanges-file-size">8.06 KB</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <blockquote>
                  <p>Removing the name attribute makes it impossible for the form field to be submitted. If the form were accidentally submitted, even if we were deliberately not handling the fields, the CC info would end up in session info, etc. </p>
                 </blockquote> 
                 <p>I'm clear on why the name attributes need removing.</p> 
                 <p>I was more asking why they had to be removed using client-side javascript, rather than a server-side hook.</p> 
                 <blockquote>
                  <p>It would be great if you'd upload your partial D7 patch or better, provide a link to a github or sandbox repo where your work is. It might help us.</p>
                 </blockquote> 
                 <p>I'm afraid I'm not using a git repo of any kind - maybe I could set that up at some point. But, for now, I'll attach a patch. If you like, ignore the lines that are simply removing the uc_recurring functionality. I took those out to simplify my migration task for my use-case, and I wanted a module that worked. But the other modifications in the patch file will show you where I had got to.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9918440"></a> 
            <div class="comment comment-content-9918440 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9918440" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#41</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-05-13T17:20:17+00:00">13 May 2015 at 17:20</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Thanks @JamesOakley - I don't believe there's any way to convince the form API to get rid of the fundamental name attribute. If you know of one, let me know, because I think it would be reasonable. </p> 
                 <p>Here's to hoping your patch will help push the port along. Thanks for putting it up!</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9918610"></a> 
            <div class="comment comment-content-9918610 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9918610" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#42</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-05-13T18:16:43+00:00">13 May 2015 at 18:16</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Here's to hoping, indeed.</p> 
                 <p>I said one point I got stuck - I couldn't use the jQuery function ($) within uc_stripe_clean_cc_form()</p> 
                 <p>The other was that I tried disabling all javascript first, to check that the "submit" button was being properly disabled, but that line didn't seem to be working either. I did some debugging, and tried a few changes to that line, but none of them work.</p> 
                 <p>If you, in your development, overcome those hurdles, feel free to post your patch back up here, and I'll happily download a fresh copy to try again from there.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9918680"></a> 
            <div class="comment comment-content-9918680 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9918680" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#43</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-05-13T18:28:48+00:00">13 May 2015 at 18:28</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>You'll want to read the whole D7 Javascript page, but especially the part about <a href="https://www.drupal.org/node/756722#using-jquery" rel="nofollow">Using jQuery</a>. It's easy, but not obvious at first.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-9918794"></a> 
            <div class="comment comment-content-9918794 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-9918794" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#44</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-05-13T18:57:56+00:00">13 May 2015 at 18:57</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Thanks - I tried that namespace adjustment, and was still getting that both $ and $(document) were "undefined".</p> 
                 <p>I'm sure I've missed something obvious, and it'll either come to me when I'm looking at something else, or someone else will solve it and I can resume working on the rest of the module.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10051566"></a> 
            <div class="comment comment-content-10051566 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10051566" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#45</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-06-23T20:42:12+00:00">23 June 2015 at 20:42</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-field-changes"> 
                  <tbody> 
                   <tr class="odd">
                    <td class="nodechanges-label">Version: </td>
                    <td class="nodechanges-old">6.x-2.x-dev </td>
                    <td class="nodechanges-new">» 7.x-2.x-dev</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>OK, the 7.x-2.x branch is ready for your review, and the 7.x-2.x-dev release is out there, <a href="https://www.drupal.org/node/2510952" rel="nofollow">https://www.drupal.org/node/2510952</a></p> 
                 <p>Hoping all can look at it. I'll be able to respond to issues in the next week, but then will be gone for a couple of months. But this will get deployed on the site that forced it in the fall, so there's lots of energy to make it right.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10054422"></a> 
            <div class="comment comment-content-10054422 clearfix"> 
             <a href="/u/rickmanelius" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-680072-1400198420.jpg?itok=Rs6k3OM0" width="80" height="80" alt="rickmanelius’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10054422" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#46</a></h3> 
              <a href="/u/rickmanelius" title="View user profile." data-uid="680072" class="username">rickmanelius</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rickmanelius</span></span> commented 
              <time pubdate datetime="2015-06-24T15:38:43+00:00">24 June 2015 at 15:38</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Excellent :) I have a client that's been really looking forward to this. Posting to them so we can test this and get to an RBTC. Thank you @rfay!</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10067180"></a> 
            <div class="comment comment-content-10067180 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10067180" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#47</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-06-29T12:10:08+00:00">29 June 2015 at 12:10</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Hmm... I'm having trouble getting this to work, but I'm leaving it at "Needs Review" in case it's me</p> 
                 <p>An order goes through to the "Review Order" screen, but clicking the "Submit Order" button gives the error "We were unable to process your credit card payment. Please verify your details and try again. If the problem persists, contact us to complete your order."</p> 
                 <p>I can see in my Stripe logs a successful POST request to /v1/tokens.</p> 
                 <p>The uc_stripe_clean_cc_form javascript function doesn't appear to be firing. The cc-number field still has its name attribute. I've tried putting an alert() line at the top of that function, but I never get that pop up in the browser either.</p> 
                 <p>Having said that, if it's not firing, I'm unclear how I'm able to pass through to the Review Order stage at all. The "Continue" button is supposed to be disabled until uc_stripe_clean_cc_form re-enables it.</p> 
                 <p>Have I missed some key step in getting this module set up?</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10067216"></a> 
            <div class="comment comment-content-10067216 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10067216" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#48</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-06-29T12:23:44+00:00">29 June 2015 at 12:23</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>On the "review" page you'll use the PHP api to continue (it uses your token). If you get to the review page, it means (as you pointed out) that the token was captured successfully. The token is then used by the PHP api.</p> 
                 <p>Please make sure you've looked in the watchdog logs for errors (admin/reports/dblog) and also looked at the requirements page to see if there are any complaints (admin/reports/status). I'll also be happy to spend some time with you on the phone or skype to see if we can sort this, because I'd love to see more users. </p> 
                 <p>Note that this requires version 2.2.0 of the PHP API, which is quite a lot changed from earlier version. I'm sure you already read the README.txt and stepped through the requirements there, but just need to make sure.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10067516"></a> 
            <div class="comment comment-content-10067516 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10067516" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#49</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-06-29T13:27:27+00:00">29 June 2015 at 13:27</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>OK, I've made some progress. I think I was experiencing two distinct issues, and I've overcome one of them.</p> 
                 <p>The first was the payment failing. I'd made two mistakes. First, my Stripe PHP library (which is 2.2.0), was in sites/all/libraries/stripe-php, rather than in sites/all/libraries/stripe. That's my fault - the README had the correct path. I was working too hastily, and blinded by (a) the fact that when you untar the library, its containing directory is named stripe-php-{version}, and (b) when configuring Stripe on a different kind of website altogether, stripe-php was the correct name.</p> 
                 <p>My second mistake was not putting anything in the live token fields. It wouldn't charge in test mode unless there was something in those fields - even if it was random text.</p> 
                 <p>I then managed to go the whole way through an order. One gotcha was that the default Stripe currency was USD, whereas my store is in GBP, so the order amount (£2.45) got charged as $2.45. That's editable in the payment gateway settings, but ideally the default Stripe currency would be whatever the store currency is.</p> 
                 <p>So to my second issue: The CC fields still have names, the clean_cc function is not firing, and the continue button is not being disabled by PHP so that the JS can enable it later.</p> 
                 <p>I've put loads of watchdog calls into uc_stripe_form_uc_cart_checkout_form_alter and they fire the whole way down that function. The JS and CSS includes are being processed correctly. But I don't get 1px.png or .uc_stripe_messages being added to the checkout form. (If I search the browser source HTML for the checkout page, they're not there at all). That explains why onload() never fires on 1px.png. It also explains why I don't see the "Test mode is ON" message - the div it goes in is missing.</p> 
                 <p>I can't see why uc_cart_checkout_form_alter is running through, is adding JS and CSS, but is not successfully modifying the checkout form. Stuck again.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10067564"></a> 
            <div class="comment comment-content-10067564 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10067564" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#50</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-06-29T13:37:42+00:00">29 June 2015 at 13:37</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Do you know how to use the Chrome or Firefox js debugger, so you can step through the js code? If not, please give a quick google and give it a try. You'll also be much happier in life if you get a PHP debugger going - like the excellent PHPStorm. There are lots of tutorials around for it.</p> 
                 <p>Please make sure you have css and js aggregation turned off at this point, so you can see clearly what's happening with those.</p> 
                 <p>IRC or something else is probably better to support you, I'm rfay on #drupal-contribute, you can use d.o PM to send an email, etc. I'm randyfay on Skype.</p> 
                 <p>The normal reason that a form-alter fails is that it attempts to alter the wrong element, so the correct element goes right on unchanged. That's hard to see without a debugger. A second reason that a form-alter can fail is another module changes the form *again* after the one you're studying has altered it.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10067656"></a> 
            <div class="comment comment-content-10067656 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10067656" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#51</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-06-29T13:53:52+00:00">29 June 2015 at 13:53</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>A quick test says to me that the form-alter is failing, the image load is failing, etc. as you described. I'll work on that probably tomorrow.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10067694"></a> 
            <div class="comment comment-content-10067694 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10067694" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#52</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-06-29T13:59:20+00:00">29 June 2015 at 13:59</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I've found one bug. $form['continue'] should be $form['actions']['continue']</p> 
                 <p>That then disables the "continue" button as it should.</p> 
                 <p>The dummy image is the next thing to work on. If I get anywhere I'll update this. (Unless you know of any PHP debuggers that work when you're running your dev site on a remote server, I'm limited to putting debug code - print_r, watchdog, etc - into the module itself).</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10067706"></a> 
            <div class="comment comment-content-10067706 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10067706" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#53</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-06-29T14:03:51+00:00">29 June 2015 at 14:03</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I failed to properly port the use of #markup, which changed in D7. I just pushed a commit to fix that, which will be in the next dev package (it's done every 12 hours). </p> 
                 <p>Although the form is now being altered correctly with respect to adding the image and the messages, I still don't see the clean_cc_form() being fired, so will work further on that.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10067770"></a> 
            <div class="comment comment-content-10067770 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10067770" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#54</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-06-29T14:17:12+00:00">29 June 2015 at 14:17</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-file-changes"> 
                  <thead>
                   <tr>
                    <th>File</th>
                    <th>Size</th> 
                   </tr>
                  </thead> 
                  <tbody> 
                   <tr class="nodechanges-file-changes nodechanges-file-status-new pift-file-info odd">
                    <td class="nodechanges-file-link"><span class="file"> <a href="https://www.drupal.org/files/issues/uc_stripe_1467886_form_alter.patch" type="text/x-diff; length=1631">uc_stripe_1467886_form_alter.patch</a></span></td>
                    <td class="nodechanges-file-size">1.59 KB</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I cloned the repository, and can confirm that we now get the 1px.png image appearing OK.</p> 
                 <p>The same alteration needed making for the message alerting when Stripe is in test mode; I've rolled that, and my comment from #52, into a patch - attached.</p> 
                 <p>I can also confirm that the JS is not firing to remove the name attributes etc.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10067878"></a> 
            <div class="comment comment-content-10067878 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10067878" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#55</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-06-29T14:36:32+00:00">29 June 2015 at 14:36</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Committed your patch from <a href="#comment-10067770" rel="nofollow">#54</a>, with slight alterations. Thanks!</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10067882"></a> 
            <div class="comment comment-content-10067882 system-message committed clearfix"> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10067882" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#56</a></h3> 
              <time pubdate datetime="2015-06-29T14:36:59+00:00">29 June 2015 at 14:36</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <div class="item-list"> 
                  <ul class="versioncontrol-project-commits">
                   <li class="first last"><a href="/u/rfay" title="View user profile." data-uid="30906" class="username" rel="nofollow">rfay</a> committed <a href="/commitlog/commit/29968/29b8aa46e3e07dc403669360c5d00695a8e90c70" class="revision" rel="nofollow">29b8aa4</a> on <strong>7.x-2.x</strong> authored by <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username" rel="nofollow">JamesOakley</a> <pre>Issue #1467886-54 by JamesOakley - fix another #markup failure
</pre></li> 
                  </ul>
                 </div>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10068016"></a> 
            <div class="comment comment-content-10068016 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10068016" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#57</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-06-29T15:00:30+00:00">29 June 2015 at 15:00</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>The problem is seen in the js console in the browser:</p> 
                 <p><code class="language-php">Uncaught ReferenceError: uc_stripe_clean_cc_form is not defined</code></p> 
                 <p>It's a result of moving the function inside the jquery closure. Should be easy to solve.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10073516"></a> 
            <div class="comment comment-content-10073516 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10073516" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#58</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-06-30T21:40:24+00:00">30 June 2015 at 21:40</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I can't say how much I appreciate your careful review and testing, @JamesOakley - you caught some super important stuff.</p> 
                 <p>I've got several things both fixed and the js is improved and sorted out of the markup. I still have trouble triggering Ubercart's ajax behaviors on the cart/checkout page, which is different from how it worked in D6. Working on it.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10076730"></a> 
            <div class="comment comment-content-10076730 system-message committed clearfix"> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10076730" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#59</a></h3> 
              <time pubdate datetime="2015-07-01T19:27:59+00:00">1 July 2015 at 19:27</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <div class="item-list"> 
                  <ul class="versioncontrol-project-commits">
                   <li class="first"><a href="/u/rfay" title="View user profile." data-uid="30906" class="username" rel="nofollow">rfay</a> committed <a href="/commitlog/commit/29968/544c362b174fa7435782bf0fda3753fa33243225" class="revision" rel="nofollow">544c362</a> on <strong>7.x-2.x</strong> <pre>Issue #1467886: Make form submission play nicely with ajax and Drupal...</pre></li> 
                   <li><a href="/u/rfay" title="View user profile." data-uid="30906" class="username" rel="nofollow">rfay</a> committed <a href="/commitlog/commit/29968/78cdf2dfdb14a335f59d093e2c7b47a5bb7abb25" class="revision" rel="nofollow">78cdf2d</a> on <strong>7.x-2.x</strong><br><pre>Issue #1467886: Remove unnecessary image onload behavior
</pre></li> 
                   <li><a href="/u/rfay" title="View user profile." data-uid="30906" class="username" rel="nofollow">rfay</a> committed <a href="/commitlog/commit/29968/ab95d66d0f97f45fe3cc293344063be42691efde" class="revision" rel="nofollow">ab95d66</a> on <strong>7.x-2.x</strong><br><pre>Issue #1467886: Improve hook_requirements()

It was impossible to detect...</pre></li> 
                   <li><a href="/u/rfay" title="View user profile." data-uid="30906" class="username" rel="nofollow">rfay</a> committed <a href="/commitlog/commit/29968/ecead9022e8fcb1930bcbe33e189df694b55398f" class="revision" rel="nofollow">ecead90</a> on <strong>7.x-2.x</strong><br><pre>Issue #1467886: Improve js and form alter to separate their functions
</pre></li> 
                   <li class="last"><a href="/u/rfay" title="View user profile." data-uid="30906" class="username" rel="nofollow">rfay</a> committed <a href="/commitlog/commit/29968/ef6dc14e052743c5c2b66038ef83e5daa7c401c7" class="revision" rel="nofollow">ef6dc14</a> on <strong>7.x-2.x</strong><br><pre>Issue #1467886: Link to edit stripe settings was not quite right
</pre></li> 
                  </ul>
                 </div>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10076752"></a> 
            <div class="comment comment-content-10076752 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10076752" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#60</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-07-01T19:35:20+00:00">1 July 2015 at 19:35</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Added several commits that respond to @JamesOakley's excellent review, testing, and debugging. I also discovered that with the way Libraries works the way I was checking for install didn't work if you hadn't already had a stripe library installed, so made that gentler.</p> 
                 <p>Would appreciate review and testing.</p> 
                 <p>If you are able to look at this today or tomorrow, I will probably be able to respond. I will be traveling from Friday afternoon for most of July and August, and unable to help with much.</p> 
                 <p>Thanks!</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10079314"></a> 
            <div class="comment comment-content-10079314 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10079314" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#61</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-07-02T13:57:05+00:00">2 July 2015 at 13:57</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>OK - my debugging time today is limited, but I've done some.</p> 
                 <p>On the positive side, the name fields are now successfully removed from the card number fields, and the submit button is being re-enabled with Javascript successfully. Ha!</p> 
                 <p>However three problems.</p> 
                 <p>1. I've got two orders to go through successfully. On one, when I clicked "review order", a red message box appeared at the bottom of the screen that "a network error occurred - you have not been charged", before the final review page appeared as normal. Clicking submit order led to the order processing as normal. On the second time, I didn't get that error.</p> 
                 <p>That could be a local problem on my computer (given the initial checkout screen only uses Javascript to call Stripe from the browser), however the red message appearing on the checkout page suggests something happened server-side to trigger that.</p> 
                 <p>2. I'm having trouble with putting in <a href="https://stripe.com/docs/testing" rel="nofollow">valid card numbers</a> only to get the messages at the top of the screen "You have entered an invalid credit card number. You have entered an invalid CVV number." If it starts deciding valid card numbers are invalid, nothing seems to get it unstuck. The only solution seems to be to clear caches and start checkout again.</p> 
                 <p>In case it's reproducible, I placed an order with 5555555555554444 and a 3 digit CVV, and it went through. I added a product to cart, and checked out with 378282246310005 and a 4 digit CVV, and it rejected the card number. I then put 5555555555554444 back again, and it still rejected it. So it's not the test card number as such, but the site deciding it doesn't like any card number.</p> 
                 <p>I then tried toggling the "Validate credit card numbers at checkout" setting. Having turned that from on to off, I was able to place an order. I then wondered if not validating card numbers was ironically making Ubercart report an invalid card number, and so this setting needs to be "on". But then my next attempted order failed with "invalid card number".</p> 
                 <p>This is a nuisance, as intermittent problems are the hardest to reproduce and to debug.</p> 
                 <p>3. With "validate" turned on, when I went to checkout the second time, Ubercart thought it knew my card number from last time. The "card number" field was pre-populated simply with the string "(last 4)" (with no actual digits supplied). I only mention that in case it's related.</p> 
                 <p>4. Payment currency is always USD. But my store prices are in GBP. I've tried to find where in the UI this is changed, but can't. The PayPal Payments Pro tab has a currency drop-down, but the Stripe tab does not.</p> 
                 <p>Sorry I've not got time to debug these further today, but I offer these experiences in the hope they help.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10079360"></a> 
            <div class="comment comment-content-10079360 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10079360" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#62</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-07-02T14:06:00+00:00">2 July 2015 at 14:06</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Thanks! </p> 
                 <p>I think you'll want to have the "validate card" setting turned off, as Stripe does the validation and it doesn't make sense for uc_credit to do it as well. Also, uc_credit never ever sees the real credit card number, so validating it is crazy.</p> 
                 <p>I have only used testing cards at this point (<a href="https://stripe.com/docs/testing" rel="nofollow">https://stripe.com/docs/testing</a>)</p> 
                 <p>It's nearly time for us to spin off additional issues (like currency selection) into new issues.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10079468"></a> 
            <div class="comment comment-content-10079468 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10079468" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#63</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-07-02T14:29:48+00:00">2 July 2015 at 14:29</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I, too, am only using Stripe's test card numbers.</p> 
                 <p>I've turned off validation. (TODO: Add to README)</p> 
                 <p>I'm still only able to process one order after clearing Drupal caches. A second order, with the same card number, reports that it's an invalid card number. Clearing Drupal caches then allows that second order to go through on the next attempt (but the order after will report an invalid card number, until the caches are cleared, etc.)</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10080556"></a> 
            <div class="comment comment-content-10080556 system-message committed clearfix"> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10080556" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#64</a></h3> 
              <time pubdate datetime="2015-07-02T19:12:58+00:00">2 July 2015 at 19:12</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <div class="item-list"> 
                  <ul class="versioncontrol-project-commits">
                   <li class="first last"><a href="/u/rfay" title="View user profile." data-uid="30906" class="username" rel="nofollow">rfay</a> committed <a href="/commitlog/commit/29968/410aca361b1a0b34649cb57b63948e8eb13aed65" class="revision" rel="nofollow">410aca3</a> on <strong></strong> <pre>Issue #1467886: Support the order's currency type
</pre></li> 
                  </ul>
                 </div>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10080640"></a> 
            <div class="comment comment-content-10080640 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10080640" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#65</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-07-02T19:30:22+00:00">2 July 2015 at 19:30</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I pushed a commit supporting the order's currency type. It seems to work.</p> 
                 <p>I can't recreate the problem you're having with repeated orders, and have no idea why that would have to do with the cache. </p> 
                 <p>It seems the <a href="http://stackoverflow.com/questions/27058997/stripe-payment-issue-network-error-you-have-not-been-charged" rel="nofollow">text about "network error"</a> probably came from stripe, but most likely involved a network error.</p> 
                 <p>Please make sure to check admin/reports/dblog every time an error occurs, and report what it says. The description of the problem should be there.</p> 
                 <p>uc_stripe should definitely never know your card number - but it does get the last 4. When we re-fill the card number for Drupal's use, it's 424242424242 + the actual last 4. But uc_credit truncates *that* and it's the one that puts "Last 4" there, which isn't a function of uc_stripe.</p> 
                 <p>Also, installing uc_stripe does in fact turn off the uc_credit_validate_numbers variable at install - see uc_stripe_install(): </p> 
                 <pre class="codeblock"><code class="language-php">function uc_stripe_install() {
  // This turns ON the uc_recurring cron task to renew. We want this
  // ON because the renewal payments are handled by uc_recurring and NOT the stripe gateway
  variable_set('uc_recurring_trigger_renewals', TRUE);

  // Stripe does cc validation, so uc_credit must not... especially because
  // uc_credit gets a bogus cc number.
  variable_set('uc_credit_validate_numbers', FALSE);
}
</code></pre>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10080644"></a> 
            <div class="comment comment-content-10080644 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10080644" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#66</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-07-02T19:31:49+00:00">2 July 2015 at 19:31</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>@JamesOakley: If you'd disable, uninstall, and reinstall your uc_stripe, it would be much appreciated. We may have some issues with how many iterations of uc_stripe you've had that in there.</p> 
                 <p>Also, please report the watchdog error any time you have an error.</p> 
                 <p>Thanks!</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10192642"></a> 
            <div class="comment comment-content-10192642 clearfix"> 
             <a href="/u/owenbush" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-2765259-1495082124.jpg?itok=NDMnYf_N" width="80" height="80" alt="owenbush’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10192642" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#67</a></h3> 
              <a href="/u/owenbush" title="View user profile." data-uid="2765259" class="username">owenbush</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> owenbush</span></span> commented 
              <time pubdate datetime="2015-08-07T15:18:52+00:00">7 August 2015 at 15:18</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I've been testing with the following:</p> 
                 <p>drupal 7.38<br> uc_stripe 7.x-2.x-dev<br> libraries 7.x-2.2<br> stripe PHP library 3.0.0</p> 
                 <p>I'm encountering an issue with minimum spend. I have added a product which is $25 to my cart and when I proceed through checkout I get the following error:</p> 
                 <p>"We were unable to process your credit card payment. Please verify your details and try again. If the problem persists, contact us to complete your order."</p> 
                 <p>Looking in the watchdog reveals the following additional information:</p> 
                 <p>"Payment failed for order 2727: Stripe Charge Failed for order 2727: Amount must be at least 50 cents"</p> 
                 <p>One piece of information which may (or may not) be related is that the products being sold allow the customers to specify the amount they wish to pay (this is a donation site). So the actual cost/price of the products in Ubercart is zero. I suspected maybe that value was being sent to Stripe, but when the Stripe\Charge object is created the correct amount is being set. So I'm a little confused.</p> 
                 <p>I've tried to debug this through the Stripe PHP Library but I feel like I'm going down a rabbit hole.</p> 
                 <p>In Ubercart the order details page shows that the order is worth $25.</p> 
                 <p>Any clues, or can you point me in the right direction for working this out?</p> 
                 <p>Edit 1: I just did another order worth $125 and it was successfully processed by Stripe, which is good. However the value in the Stripe dashboard was listed as $1.25. So this seems to be some disconnect between passing the value in cents versus dollars I'd assume. I'll continue to play around and see what comes of it.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10196819"></a> 
            <div class="comment comment-content-10196819 clearfix"> 
             <a href="/u/owenbush" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-2765259-1495082124.jpg?itok=NDMnYf_N" width="80" height="80" alt="owenbush’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10196819" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#68</a></h3> 
              <a href="/u/owenbush" title="View user profile." data-uid="2765259" class="username">owenbush</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> owenbush</span></span> commented 
              <time pubdate datetime="2015-08-07T15:49:35+00:00">7 August 2015 at 15:49</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-file-changes"> 
                  <thead>
                   <tr>
                    <th>File</th>
                    <th>Size</th> 
                   </tr>
                  </thead> 
                  <tbody> 
                   <tr class="nodechanges-file-changes nodechanges-file-status-new pift-file-info odd">
                    <td class="nodechanges-file-link"><span class="file"> <a href="https://www.drupal.org/files/issues/uc_stripe-convert-to-cents-1467886-68.patch" type="text/x-diff; length=437">uc_stripe-convert-to-cents-1467886-68.patch</a></span></td>
                    <td class="nodechanges-file-size">437 bytes</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Patch attached to convert amount to cents before sending over to Stripe.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10197279"></a> 
            <div class="comment comment-content-10197279 clearfix"> 
             <a href="/u/jamesoakley" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-349037-1401530480.png?itok=35m2ewRC" width="80" height="80" alt="JamesOakley’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10197279" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#69</a></h3> 
              <a href="/u/jamesoakley" title="View user profile." data-uid="349037" class="username">JamesOakley</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> JamesOakley</span></span> commented 
              <time pubdate datetime="2015-08-07T18:10:46+00:00">7 August 2015 at 18:10</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I don't know, @owenbush. I've not had time to look at your patch. When I was testing this module I hit a few snags, but when payments did go through they were never out by a factor of 100. If there's an edge case when the price needs multiplying by 100, we need to determine what that edge case is, otherwise we get all other payments 100x too large.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10197587"></a> 
            <div class="comment comment-content-10197587 clearfix"> 
             <a href="/u/owenbush" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-2765259-1495082124.jpg?itok=NDMnYf_N" width="80" height="80" alt="owenbush’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10197587" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#70</a></h3> 
              <a href="/u/owenbush" title="View user profile." data-uid="2765259" class="username">owenbush</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> owenbush</span></span> commented 
              <time pubdate datetime="2015-08-07T19:47:53+00:00">7 August 2015 at 19:47</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>That is strange if it is an edge-case, I couldn't get a single payment to go through at the right amount, every single one was a factor of 100x to small. The other thing that raised an eyebrow for me was the comment above the line I changed which states:</p> 
                 <p><code class="language-php">// Format the amount in cents, which is what Stripe wants</code></p> 
                 <p>But the uc_currency_format() function doesn't convert a dollar amount to cents, it just formats it with a currency symbol and thousand dividers etc (all of which in this case are FALSE). Which is why I thought maybe it was an oversight and the values were not converted to cents at all.</p> 
                 <p>I may of course be wrong and I'm happy to help test any patches or re-work mine if it looks like it is just a weird edge case.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10210689"></a> 
            <div class="comment comment-content-10210689 clearfix"> 
             <a href="/u/owenbush" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-2765259-1495082124.jpg?itok=NDMnYf_N" width="80" height="80" alt="owenbush’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10210689" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#71</a></h3> 
              <a href="/u/owenbush" title="View user profile." data-uid="2765259" class="username">owenbush</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> owenbush</span></span> commented 
              <time pubdate datetime="2015-08-11T23:11:11+00:00">11 August 2015 at 23:11</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I'd be interested to see what others have seen because there are several reasons now after further digging that makes me think that the $amount should be multiplied by 100.</p> 
                 <p>uc_stripe.module:457 - function uc_stripe_charge()<br><code class="language-php">$formatted_amount = $amount / 100;</code></p> 
                 <p>I am not sure why the amount would be divided here to display in a formatted message for the customer if it was never converted to cents in the first place.</p> 
                 <p>uc_stripe.module:532 - function uc_stripe_renew()<br><code class="language-php">$amount = $amount * 100;</code></p> 
                 <p>For recurring payments the amount is multiplied by 100 to get it into cents, but this is not done in uc_stripe_charge()</p> 
                 <p>At the moment without my patch I cannot get a payment to go through at the right amount.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10210953"></a> 
            <div class="comment comment-content-10210953 clearfix"> 
             <a href="/u/rickmanelius" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-680072-1400198420.jpg?itok=Rs6k3OM0" width="80" height="80" alt="rickmanelius’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10210953" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#72</a></h3> 
              <a href="/u/rickmanelius" title="View user profile." data-uid="680072" class="username">rickmanelius</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rickmanelius</span></span> commented 
              <time pubdate datetime="2015-08-12T02:37:26+00:00">12 August 2015 at 02:37</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I agree with @owenbush. There are two places where a card is charged with the following call: </p> 
                 <pre class="codeblock"><code class="language-php">    $charge = \Stripe\Charge::create(array(
        "amount" =&gt; $amount,
        "currency" =&gt; strtolower($order-&gt;currency),
        "customer" =&gt; $stripe_customer_id
      )
    );
</code></pre>
                 <p> There are two functions that call this:</p> 
                 <ul>
                  <li>uc_stripe_renew()</li> 
                  <li>uc_stripe_charge()</li> 
                 </ul>
                 <p>In uc_stripe_charge(), we see the following:</p> 
                 <pre class="codeblock"><code class="language-php">  // Format the amount in cents, which is what Stripe wants
  $amount = uc_currency_format($amount, FALSE, FALSE, FALSE);
</code></pre>
                 <p> Unfortunately, uc_currency_format() doesn't do anything in the sense of formatting into cents. So if $amount is in dollars, then it's not being passed to stripe correctly.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10210955"></a> 
            <div class="comment comment-content-10210955 clearfix"> 
             <a href="/u/rickmanelius" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-680072-1400198420.jpg?itok=Rs6k3OM0" width="80" height="80" alt="rickmanelius’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10210955" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#73</a></h3> 
              <a href="/u/rickmanelius" title="View user profile." data-uid="680072" class="username">rickmanelius</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rickmanelius</span></span> commented 
              <time pubdate datetime="2015-08-12T02:41:23+00:00">12 August 2015 at 02:41</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>In terms of $amount, we can see that the test_gateway_charge() uses dollars.<br><a href="http://www.drupalcontrib.org/api/drupal/contributions%21ubercart%21payment%21uc_credit%21test_gateway.module/function/test_gateway_charge/6" rel="nofollow">http://www.drupalcontrib.org/api/drupal/contributions%21ubercart%21payme...</a></p> 
                 <pre class="codeblock"><code class="language-php">$amount == 12.34
</code></pre>
                 <p> So $amount is dollars, and the uc_stripe_charge() doesn't convert into cents. Hence the need for the patch.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10262171"></a> 
            <div class="comment comment-content-10262171 clearfix"> 
             <a href="/u/rickmanelius" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-680072-1400198420.jpg?itok=Rs6k3OM0" width="80" height="80" alt="rickmanelius’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10262171" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#74</a></h3> 
              <a href="/u/rickmanelius" title="View user profile." data-uid="680072" class="username">rickmanelius</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rickmanelius</span></span> commented 
              <time pubdate datetime="2015-08-26T21:20:12+00:00">26 August 2015 at 21:20</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Just a quick followup. We've tested the patch in #68 and will be moving forward with applying it for a client site. That said, we'd love to see it a part of the official module.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10262363"></a> 
            <div class="comment comment-content-10262363 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10262363" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#75</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-08-26T22:04:03+00:00">26 August 2015 at 22:04</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I'll look at this in the near term. However, I'd like to have all issues of this type as new issues please, rather than continuing here.</p> 
                 <p>Glad to hear it's working for you @rickmanelius !</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10267029"></a> 
            <div class="comment comment-content-10267029 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10267029" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#76</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-08-27T23:55:51+00:00">27 August 2015 at 23:55</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-field-changes"> 
                  <tbody> 
                   <tr class="odd">
                    <td class="nodechanges-label">Status: </td>
                    <td class="nodechanges-old">Needs review </td>
                    <td class="nodechanges-new">» Fixed</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>I just tested with actual products (in test mode) and both the initial charge and a recurring fee charge and renewal and both were for the correct, configured amount, so I'm skeptical about the patch in <a href="#comment-10196819" rel="nofollow">#68</a> - Please do these things:</p> 
                 <p>1. Describe a path to demonstrate the problem.<br> 2. Open a new issue with it.</p> 
                 <p>I absolutely want to get problems resolved, but if I can't demonstrate them I can't debug them.</p> 
                 <p>I'm going to take this issue to fixed, as it's run its course. Thanks to all of you for your participation!</p> 
                 <p>Note that <span class="project-issue-issue-link project-issue-status-info project-issue-status-7"><a href="/node/2540152" title="Status: Closed (fixed)">#2540152: _uc_stripe_get_customer_id does not load the user account correctly</a></span>, which could have affected renewals, went in today.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10316903"></a> 
            <div class="comment comment-content-10316903 system-message closed clearfix"> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10316903" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#77</a></h3> 
              <time pubdate datetime="2015-09-11T00:04:59+00:00">11 September 2015 at 00:04</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-field-changes"> 
                  <tbody> 
                   <tr class="odd">
                    <td class="nodechanges-label">Status: </td>
                    <td class="nodechanges-old">Fixed </td>
                    <td class="nodechanges-new">» Closed (fixed)</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>Automatically closed - issue fixed for 2 weeks with no activity.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10393923"></a> 
            <div class="comment comment-content-10393923 clearfix"> 
             <a href="/u/nhero" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/default-avatar.png?itok=qMUyWcaa" width="80" height="80" alt="nhero’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10393923" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#78</a></h3> 
              <a href="/u/nhero" title="View user profile." data-uid="183378" class="username">nhero</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> nhero</span></span> commented 
              <time pubdate datetime="2015-09-30T18:11:23+00:00">30 September 2015 at 18:11</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-field-issue-changes field-type-nodechanges-revision-diff field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <table class="nodechanges-file-changes"> 
                  <thead>
                   <tr>
                    <th>File</th>
                    <th>Size</th> 
                   </tr>
                  </thead> 
                  <tbody> 
                   <tr class="nodechanges-file-changes nodechanges-file-status-new pift-file-info odd">
                    <td class="nodechanges-file-link"><span class="file"> <a href="https://www.drupal.org/files/issues/uc_stripe-convert-to-cents-1467886-78.patch" type="text/x-diff; length=1681">uc_stripe-convert-to-cents-1467886-78.patch</a></span></td>
                    <td class="nodechanges-file-size">1.64 KB</td> 
                   </tr> 
                  </tbody> 
                 </table> 
                </div>
               </div>
              </div>
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>To demonstrate the problem go to admin/store/settings/store and under Currency Format select 0 or 1 for Number of Decimal Places. The amount returned by uc_currency_format decreases when the decimals are decreased. For example, a $30 transaction with 2 decimal places gets returned a value of 3000, with 1 decimal it gets set to 300 and with 0 it gets set to 30. </p> 
                 <p>Patch attached with new function to convert amount to cents before sending over to Stripe.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10393935"></a> 
            <div class="comment comment-content-10393935 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10393935" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#79</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-09-30T18:16:21+00:00">30 September 2015 at 18:16</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>@nhero your input and patch are very much appreciated, but could you please open a new issue for this? This one is marked closed(fixed)</p> 
                 <p>Please describe the problem completely there, and repeat your instructions.</p> 
                 <p>This will help us get this fixed *soon*.</p> 
                 <p>Thanks,<br> -Randy</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10409899"></a> 
            <div class="comment comment-content-10409899 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10409899" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#80</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-10-04T22:20:34+00:00">4 October 2015 at 22:20</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>@nhero I moved your issue over to <span class="project-issue-issue-link project-issue-status-info project-issue-status-13"><a href="/node/2580025" title="Status: Needs work">#2580025: Stripe must charge in "smallest currency unit" - currently biased toward dollars/cents</a></span> - It's an important issue. I'd be interested in knowing exactly what your use case is and how you ran into this. Are you using a zero-decimal currency? Please reply and interact over in <span class="project-issue-issue-link project-issue-status-info project-issue-status-13"><a href="/node/2580025" title="Status: Needs work">#2580025: Stripe must charge in "smallest currency unit" - currently biased toward dollars/cents</a></span> .</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
            <a id="comment-10546996"></a> 
            <div class="comment comment-content-10546996 clearfix"> 
             <a href="/u/rfay" title="View user profile." class="picture"><img src="https://www.drupal.org/files/styles/drupalorg_user_picture/public/user-pictures/picture-30906-1411511320.jpg?itok=V7NlvCTh" width="80" height="80" alt="rfay’s picture"></a> 
             <h3></h3> 
             <div class="submitted"> 
              <h3 class="permalink-wrapper"><a href="/node/1467886#comment-10546996" class="permalink active" rel="bookmark"><span class="element-invisible">Comment </span>#81</a></h3> 
              <a href="/u/rfay" title="View user profile." data-uid="30906" class="username">rfay</a> 
              <span class="attribution-label">Credit<span class="attribution element-invisible"><strong>Attribution:</strong> rfay</span></span> commented 
              <time pubdate datetime="2015-11-09T18:12:42+00:00">9 November 2015 at 18:12</time> 
             </div> 
             <div class="content"> 
              <div class="field field-name-comment-body field-type-text-long field-label-hidden">
               <div class="field-items">
                <div class="field-item even">
                 <p>For those of you who were interested in the different multiplier options in uc_stripe (to make cents out of dollars/cents) the followup issue with patch is <span class="project-issue-issue-link project-issue-status-info project-issue-status-13"><a href="/comment/10546976#comment-10546976" title="Status: Needs work">#2580025-04: Stripe must charge in "smallest currency unit" - currently biased toward dollars/cents</a></span>. It also removes the magical use of 100 as a multiplier, and the inappropriate use of uc_currency_format(). Your review is appreciated.</p>
                </div>
               </div>
              </div> 
             </div> 
             <ul class="links inline">
              <li class="comment_forbidden first last"><span><a href="/user/login?destination=comment/reply/1467886%23comment-form">Log in</a> or <a href="/user/register?destination=comment/reply/1467886%23comment-form">register</a> to post comments</span></li> 
             </ul>
            </div> 
           </section> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <!-- /#content --> 
    </div> 
    <!-- /#column-left --> 
    <div id="aside" role="complementary"> 
     <div id="aside-region"> 
      <div class="region region-sidebar-second"> 
       <div id="block-views-e84165300884f34464eebe80f5010454" class="block block-views"> 
        <div class="block-inner"> 
         <div class="content"> 
          <div class="view view-project-issue-issue-relations view-id-project_issue_issue_relations view-display-id-block_child_issues view-dom-id-89209bb0d11ee632910c5f981dedb0fa"> 
           <div class="view-footer"> 
            <a href="/node/add/project-issue/uc_stripe?field_issue_parent=1467886">Add child issue</a>, 
            <a href="/node/add/project-issue/uc_stripe?title=PCI-DSS%20compliance%20using%20stripe.js&amp;field_issue_parent=1467886&amp;clone_body=1&amp;categories=3&amp;priorities=300&amp;status=7&amp;version=7.x-2.x-dev&amp;component=Miscellaneous&amp;assigned=0&amp;tags=">clone issue</a> 
           </div> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <!-- /#column-right-region --> 
    </div> 
    <!-- /#column-right --> 
   </div> 
  </div> 
  <!-- /#page --> 
  <div id="footer" role="contentinfo"> 
   <div class="region region-footer"> 
    <div id="block-drupalorg-crosssite-drupalorg-footer" class="block block-drupalorg-crosssite"> 
     <div class="block-inner"> 
      <div class="content"> 
       <h4 class="element-invisible">News items</h4>
       <ul class="drupal-news">
        <li class="0 first"><a href="https://www.drupal.org/news">News</a></li> 
        <li class="1"><a href="https://www.drupal.org/planet" title="News from Drupal community members">Planet Drupal</a></li> 
        <li class="2"><a href="https://www.drupal.org/social-media" title="Drupal on social media">Social media directory</a></li> 
        <li class="3"><a href="https://www.drupal.org/security" title="Advisories from the security team">Security announcements</a></li> 
        <li class="4 last"><a href="https://jobs.drupal.org/" title="Drupal Jobs">Jobs</a></li> 
       </ul>
       <h4 class="element-invisible">Our community</h4>
       <ul class="community">
        <li class="0 first"><a href="https://drupal.org/community">Community</a></li> 
        <li class="1"><a href="https://drupal.org/getting-involved" title="Learn how to contribute to the Drupal project">Getting involved</a></li> 
        <li class="2"><span><a href="https://drupal.org/drupal-services" title="People and organizations offering Drupal services">Services</a>, <a href="https://drupal.org/training" title="People and organizations offering Drupal training">Training</a> &amp; <a href="https://drupal.org/hosting" title="Organizations offering Drupal hosting">Hosting</a></span></li> 
        <li class="3"><a href="https://groups.drupal.org/groups" title="groups.drupal.org">Groups &amp; Meetups</a></li> 
        <li class="4"><a href="https://events.drupal.org" title="Upcoming and past DrupalCons">DrupalCon</a></li> 
        <li class="5 last"><a href="https://drupal.org/dcoc" title="Drupal code of conduct">Code of conduct</a></li> 
       </ul>
       <h4 class="element-invisible">Documentation</h4>
       <ul class="get-started">
        <li class="0 first"><a href="https://drupal.org/documentation" title="Documentation for working with Drupal">Documentation</a></li> 
        <li class="1"><a href="https://www.drupal.org/docs/8">Drupal 8 docs</a></li> 
        <li class="2"><a href="https://www.drupal.org/docs/7">Drupal 7 docs</a></li> 
        <li class="3"><a href="https://www.drupal.org/documentation/develop">Developer docs</a></li> 
        <li class="4 last"><a href="https://api.drupal.org/" title="Drupal API reference">api.drupal.org</a></li> 
       </ul>
       <h4 class="element-invisible">Drupal code base</h4>
       <ul class="download-extend">
        <li class="0 first"><a href="https://drupal.org/download">Download &amp; Extend</a></li> 
        <li class="1"><a href="https://drupal.org/project/drupal" title="Download the latest version of the Drupal software">Drupal core</a></li> 
        <li class="2"><a href="https://drupal.org/project/project_module" title="Download add-on features and functionality">Modules</a></li> 
        <li class="3"><a href="https://drupal.org/project/project_theme" title="Download pre-designed styles for Drupal">Themes</a></li> 
        <li class="4 last"><a href="https://drupal.org/project/project_distribution" title="Download a pre-packaged Drupal site">Distributions</a></li> 
       </ul>
       <h4 class="element-invisible">Governance of community</h4>
       <ul class="about">
        <li class="0 first"><a href="https://drupal.org/about">About</a></li> 
        <li class="1"><a href="https://drupal.org/about/accessibility" title="Our committment to accessibility">Web accessibility</a></li> 
        <li class="2"><a href="https://drupal.org/association" title="About the Drupal Association">The Drupal Association</a></li> 
        <li class="3"><a href="https://drupal.org/drupalorg" title="About Drupal.org">About Drupal.org</a></li> 
        <li class="4"><a href="https://drupal.org/terms" title="Drupal.org terms of service">Terms of service</a></li> 
        <li class="5 last"><a href="https://drupal.org/privacy" title="Drupal.org privacy policy">Privacy policy</a></li> 
       </ul> 
      </div> 
     </div> 
    </div> 
    <div id="block-block-77" class="block block-block"> 
     <div class="block-inner"> 
      <div class="content"> 
       <p>Drupal is a <a href="http://drupal.com/trademark" rel="nofollow">registered trademark</a> of <a href="https://dri.es" rel="nofollow">Dries Buytaert</a>.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <!--[if lte IE 9]>
<script type="text/javascript" src="https://www.drupal.org/files/advagg_js/js__79M6UrZjAw3oNGnUjsWip12JsvnUZmJGA3h9LI0kuzE__LqE6uSZqCOZhJYW910TDw_HTQzBKUPTZxunfaWkalq8__zGbh0Vkd6-Upw_meABdy9qwehpIxfCh8fKwHkW793IE.js#ie9-" onload="if(jQuery.isFunction(jQuery.holdReady)){jQuery.holdReady(true);}"></script>
<![endif]--> 
  <!--[if gt IE 9]>
<script type="text/javascript" src="https://www.drupal.org/files/advagg_js/js__79M6UrZjAw3oNGnUjsWip12JsvnUZmJGA3h9LI0kuzE__LqE6uSZqCOZhJYW910TDw_HTQzBKUPTZxunfaWkalq8__zGbh0Vkd6-Upw_meABdy9qwehpIxfCh8fKwHkW793IE.js#ie10+" defer="defer" onload="if(jQuery.isFunction(jQuery.holdReady)){jQuery.holdReady(true);}"></script>
<![endif]--> 
  <!--[if !IE]><!--> 
  <script type="text/javascript" src="https://www.drupal.org/files/advagg_js/js__79M6UrZjAw3oNGnUjsWip12JsvnUZmJGA3h9LI0kuzE__LqE6uSZqCOZhJYW910TDw_HTQzBKUPTZxunfaWkalq8__zGbh0Vkd6-Upw_meABdy9qwehpIxfCh8fKwHkW793IE.js" defer onload="if(jQuery.isFunction(jQuery.holdReady)){jQuery.holdReady(true);}"></script> 
  <!--<![endif]--> 
  <script type="text/javascript" src="https://www.drupal.org/files/advagg_js/js__H5AFmq1RrXKsrazzPq_xPQPy4K0wUKqecPjczzRiTgQ__ZHqvWr-79k4Y5DRTd0KcuNHgFp9UJZlb3B0Bi5eGu3M__zGbh0Vkd6-Upw_meABdy9qwehpIxfCh8fKwHkW793IE.js" defer onload="
function advagg_mod_1() {
  // Count how many times this function is called.
  advagg_mod_1.count = ++advagg_mod_1.count || 1;
  try {
    if (advagg_mod_1.count <= 40) {
      init_drupal_core_settings();

      // Set this to 100 so that this function only runs once.
      advagg_mod_1.count = 100;
    }
  }
  catch(e) {
    if (advagg_mod_1.count >= 40) {
      // Throw the exception if this still fails after running 40 times.
      throw e;
    }
    else {
      // Try again in 1 ms.
      window.setTimeout(advagg_mod_1, 1);
    }
  }
}
function advagg_mod_1_check() {
  if (window.init_drupal_core_settings &amp;&amp; window.jQuery &amp;&amp; window.Drupal) {
    advagg_mod_1();
  }
  else {
    window.setTimeout(advagg_mod_1_check, 1);
  }
}
advagg_mod_1_check();"></script> 
  <script type="text/javascript" src="https://www.drupal.org/files/advagg_js/js__W3HVetagCYpKE0fh-1m9ldkYrnM7EKUfayUOkYfG5ns__zvhQC45y1YkSDNGwJnF9rLdIUVh8wr2htBb32__TNEk__zGbh0Vkd6-Upw_meABdy9qwehpIxfCh8fKwHkW793IE.js" defer></script> 
  <script type="text/javascript" defer async src="//www.google-analytics.com/analytics.js?ox8zf3"></script> 
  <script type="text/javascript" src="https://www.drupal.org/files/advagg_js/js__dTRSuW27RiJte-z_L4Px_rno5dZsdWKiU3HtuBiTSmc__RPUH1Pa_09kAZ8D2-aMQ-HwAGT4k3LEND1qRE2SEZHM__zGbh0Vkd6-Upw_meABdy9qwehpIxfCh8fKwHkW793IE.js" defer></script> 
  <script type="text/javascript" src="https://www.drupal.org/files/advagg_js/js__vG6RHS6N0uNCG-Ua5onkpo_G8HnQ8Rh8jc4Yfq29S_g__oAQqav5sFoue6LJVoW9s05hGLBgNISrHUXmekkbqITA__zGbh0Vkd6-Upw_meABdy9qwehpIxfCh8fKwHkW793IE.js" defer></script> 
  <script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create", "UA-2360451-1", {"cookieDomain":"auto"});ga("set", "dimension3", "anonymous user");ga("set", "dimension4", "Issue");ga("set", "dimension2", "downloads");ga("send", "pageview");
//--><!]]>
</script> 
  <script type="text/javascript">
<!--//--><![CDATA[//><!--
function init_drupal_core_settings() {jQuery.extend(Drupal.settings,{"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"bluecheese","theme_token":"mEkAo3kaPTDzxZCV7UxLZLyChdIT26FuHiG0bXJubGA"},"jcarousel":{"ajaxPath":"\/jcarousel\/ajax\/views"},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"urlIsAjaxTrusted":{"\/node\/1467886":true}});
if(jQuery.isFunction(jQuery.holdReady)){jQuery.holdReady(false);}} if(window.jQuery && window.Drupal){init_drupal_core_settings();}
//--><!]]>
</script>   
 </body>
</html>