<!doctype html>
<html lang="en-US">
 <head> 
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,requiresActiveX=false"> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <title>Troubleshooting Kerberos Authentication problems – Name resolution issues | Ask the Directory Services Team</title> 
  <meta name="description" content="Microsoft's official enterprise support blog for AD DS and more"> 
  <link rel="profile" href="http://gmpg.org/xfn/11"> 
  <link rel="pingback" href="https://blogs.technet.microsoft.com/askds/xmlrpc.php"> 
  <!-- Move Favicons To Child Theme Functions --> 
  <!--<link rel="shortcut icon" href="https://blogs.technet.microsoft.com/askds/wp-content/themes/cloud-platform/images/favicon.ico" />--> 
  <meta name="msvalidate.01" content="01EEB8C34FE4A6AA047F3FA8A590C583"> 
  <link rel="dns-prefetch" href="//s.w.org"> 
  <link rel="alternate" type="application/rss+xml" title="Ask the Directory Services Team » Feed" href="https://blogs.technet.microsoft.com/askds/feed/"> 
  <link rel="alternate" type="application/rss+xml" title="Ask the Directory Services Team » Comments Feed" href="https://blogs.technet.microsoft.com/askds/comments/feed/"> 
  <link rel="alternate" type="application/rss+xml" title="Ask the Directory Services Team » Troubleshooting Kerberos Authentication problems – Name resolution issues Comments Feed" href="https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/feed/"> 
  <meta property="og:type" content="article"> 
  <meta property="og:title" content="Troubleshooting Kerberos Authentication problems – Name resolution issues"> 
  <meta property="og:url" content="https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/"> 
  <meta property="og:description" content=""> 
  <meta name="twitter:card" content="summary"> 
  <meta name="twitter:title" content="Troubleshooting Kerberos Authentication problems – Name resolution issues"> 
  <meta name="twitter:url" content="https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/"> 
  <meta name="twitter:description" content=""> 
  <script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/blogs.technet.microsoft.com\/askds\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.5"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script> 
  <style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style> 
  <link rel="stylesheet" id="wds_msdn-parent-style-css" href="https://blogs.technet.microsoft.com/askds/wp-content/themes/msdn-network-parent/style.min.css?ver=12272016" type="text/css" media="all"> 
  <link rel="stylesheet" id="wds_cloud_platform-child-style-css" href="https://blogs.technet.microsoft.com/askds/wp-content/themes/cloud-platform/style.min.css?ver=12052016" type="text/css" media="all"> 
  <script type="text/javascript" src="https://blogs.technet.microsoft.com/askds/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script> 
  <script type="text/javascript" src="https://blogs.technet.microsoft.com/askds/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script> 
  <link rel="https://api.w.org/" href="https://blogs.technet.microsoft.com/askds/wp-json/"> 
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://blogs.technet.microsoft.com/askds/xmlrpc.php?rsd"> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://blogs.technet.microsoft.com/askds/wp-includes/wlwmanifest.xml"> 
  <link rel="canonical" href="https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/"> 
  <link rel="shortlink" href="https://blogs.technet.microsoft.com/askds/?p=7010"> 
  <link rel="alternate" type="application/json+oembed" href="https://blogs.technet.microsoft.com/askds/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblogs.technet.microsoft.com%2Faskds%2F2008%2F05%2F14%2Ftroubleshooting-kerberos-authentication-problems-name-resolution-issues%2F"> 
  <link rel="alternate" type="text/xml+oembed" href="https://blogs.technet.microsoft.com/askds/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblogs.technet.microsoft.com%2Faskds%2F2008%2F05%2F14%2Ftroubleshooting-kerberos-authentication-problems-name-resolution-issues%2F&amp;format=xml"> 
  <script>
		if(window.document.referrer.indexOf('login.live.com') !== -1) {
			// redefine ga function to prevent referrer data collected by google analytics
			window.ga = function(){};
		}
	</script> 
  <script type="text/javascript">
jQuery( window ).load( function() {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    if (typeof mscc === 'undefined' || (!mscc || mscc.hasConsent())) {
                ga('require', 'linkid');
                ga('create', 'UA-65691138-1', 'auto');
                ga('send', 'pageview');
            }
} );
</script> 
  <!-- Begin Custom CSS -->
  <style type="text/css" id="wds-custom-css">
			.entry-content blockquote {
    border: 0;
    padding: 0 0 0 0px;
    margin: 0 0 15px 20px;
}
.entry-content blockquote p {
    font-size: 14px;
    line-height: 1.5;
}.home .blog-title {
  margin: 10px 0 20px;
  font-size: 29px;
}

.network-home-highlights-wrapper {
  font-size: 14px;
  font-family: WOL_Reg, 'Segoe UI', Tahoma, Arial, sans-serif;
}
.network-home-highlights-wrapper .entry-title {
  font-size: 16px;
}
.network-home-highlights-wrapper .blog-source {
  font-size: 12px;
}

.widget .widget-title {
  color: #2a2a2a;
  font-size: 16px;
}

.widget-link-list {
  list-style-type: none;
  margin: 0 0 30px 0;
  padding: 0;
}
.widget-link-list li {
  margin: 0 0 7px 0;
  padding: 0;
}

.widget-link-list img {
	margin: 0; 
	padding: 0;
}

.widget .widget-rss-link {
  position: relative;
}
.widget .widget-rss-link a {
  display: block;
  position: absolute;
  top: -39px;
  right: 0;
  width: 14px;
  height: 14px;
}
.widget .widget-rss-link a img {
  padding: 0;
}

/*Main Navigation*/
.main-navigation {
	font-size: 13px;
}
.main-navigation ul {
	/* subnav adjacent item gap - allows subnav to not appear connected to adjacent menu items */
	display: block;
	table-layout: auto;
}

.main-navigation ul li {
	display: block; /* subnav adjacent item gap */
}

.main-navigation ul,
.main-navigation li {
	background: #00368a;
	margin: 0;
}
.main-navigation ul li {
	padding: 0;
}
.main-navigation li a {
	height: 60px;
	padding: 5px 30px 6px 10px;
}

.main-navigation .menu > .menu-item {
	border-bottom: 1px solid #fff; /* subnav adjacent item gap */
}
.main-navigation .menu > .menu-item.active {
	background: #01265f;
	border-bottom-color: #01265f;
}

.main-navigation li:hover {
  background: #01265f;
}

.main-navigation ul .sub-menu {
	margin-top: 1px; /* subnav adjacent item gap */
}

.main-navigation li .sub-menu li a {
	line-height: 1.3em;
}

.sub-menu.active li {
	background: #01265f;
}

.sub-menu.active li:hover{
  background: #00368a;
}
/*End Main Navigation*/

.child-level-below-nav .blog-title a {
  color: #00368a;
}

a:visited,
h2.entry-title a:visited {
  color: #969696;
}

a:hover,
h2.entry-title a:hover {
  color: #004185;
}

.child-level-below-nav .blog-title {
  font-size: 3.9rem;
}

h1.entry-title {
  font-size: 2.6rem;
  margin-bottom: 8px;
}
h2.entry-title {
  font-size: 2rem;
  margin-bottom: 8px;
}
h2.entry-title a {
  color: #0072c6;
}

.entry-meta {
  margin-bottom: 8px;
}

.post-info {
  margin-bottom: 0;
}

.entry-summary {
  margin-top: 0;
}

.social-icons-wrap ul {
  margin-top: 12px;
}

.wds-ratings-stars.current-rating,
.wds-ratings-stars.current-rating.wds-ratings-active,
.wds-ratings-stars.wds-ratings-active {
  color: #f4b93f;
}

/* Begin tabs and container for sxp */
	.layout-region.content .sxp-title {font-size: 1.333em/*16px*/;}
	.sxp-feed p.sxp-time-author-comments {margin: 4px 0 -8px;}
	.sxp-feed {margin-top: 30px;}
  .right-sidebar .sxp-feed {margin: 0 0 15px 0;}
	.sxp-feed:first-child {margin-top: 0;}
	.sxp-feed p {margin: 12px 0 0;}
  .right-sidebar .sxp-feed p {margin: 0;}
	.sxp-feed .sxp-time {color: #707070;}
	.sxp-feed .sxp-comments {margin-left: 21px; padding-left: 16px; background: url('https://msdnshared.blob.core.windows.net/media/TNBlogsFS/prod.evol.blogs.technet.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/94/25/7282.icon-comments.png') 0 4px no-repeat;}
	.sxp-container {padding: 0 20px;}
  .right-sidebar .sxp-container {padding: 0;}
	#sxp-feed-container-all {}
	#sxp-feed-container-news {display: none;}  
	#sxp-feed-container ul {padding: 0 0 0 15px;}
	#sxp-feed-container-parent {position: relative; border: solid 1px #ccc; border-width: 0 1px 1px; padding: 0 0 20px;}
	#sxp-tabs {margin: 0 0 30px; width: 100%; background: #00368a; height: 32px; padding: 0 !important; border-bottom: solid 1px #ccc; font-size: 14px;}
	#sxp-tabs li {list-style-type: none; height: 32px; position: relative; float: left; border: solid #CCC; border-width: 0 1px 1px 0;}
	#sxp-tabs a {color: #fff; background: #00368a; height: 100%; line-height: 34px; padding: 0 20px; display: block; margin-left: 0;}
	#sxp-tabs a:hover {text-decoration: none;}
	#sxp-tabs a:first-child + a {left: -3px;}
	#sxp-tabs a:hover {background: #01265f;}
	#sxp-tabs .selected {margin-top: -4px; height: 36px;}
	#sxp-tabs .selected a, #sxp-tabs .selected a:hover {background: #01265f;}
	#sxp-tabs .selected span {z-index: 805; position: absolute; bottom: -7px; width: 100%; height: 7px; background: transparent url('https://msdnshared.blob.core.windows.net/media/2015/11/jj157208.server-management-selected-tail(en-us,MSDN.10).png') no-repeat 50% 0;}
	#all-rss-link {float: right; margin: 0 15px 0 0; padding: 0 15px 0 0; position: relative; top: -21px; }
	#all-rss-link span {margin: 0 0 0 4px; display: inline-block; background: url('https://msdnshared.blob.core.windows.net/media/TNBlogsFS/prod.evol.blogs.technet.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/94/25/2110.metroRSS.png') 0 0; height: 14px; width: 14px;}
  #all-rss-link a { font-size: 13px; color: #00749e; }
  #all-rss-link a:hover { text-decoration: underline; }
  #all-rss-link a:visited { color: #707070; }
	.feedPager {border-top: solid 1px #ccc; margin: 30px 0 20px; padding: 12px 0;}
	.feedPager a.pagerLink.currentPage {font-weight: bold; color: #000;}
	.feedPager a.pagerLink.currentPage:hover {cursor: default;}
	.feedPager a.pagerLink {margin-left: 15px;}
	.feedPager a.pagerLink:first-child {margin-left: 0;}
	.content-fragment.raw-html:first-child .user-defined-markup {overflow: visible;}
/* End tabs and container for sxp */

/*Social Tile links*/
.sidebar-tiles {
  clear: both;
    list-style: none;
    margin: 0;
    overflow: hidden;
    padding: 0
}
.sidebar-tiles li {
  float: left;
  margin: 0 5px 5px 0;
  padding: 0;
}
.sidebar-tiles a {
    background: #424242;
    color: #fff;
    display: block;
    font-size: 11px;
    margin: 0;
    padding: 54px 10px 0 5px;
    width: 70px;
    height: 70px;
    text-decoration: none;
    line-height: 13px;
    width: 65px;
}
.sidebar-tiles a.sidebar-tile-subscribe {
  background: #ea700d url('https://msdnshared.blob.core.windows.net/media/TNBlogsFS/prod.evol.blogs.technet.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/94/25/0045.icon-tile-rss.png') 50% 50% no-repeat;
}
.sidebar-tiles a.sidebar-tile-twitter {
  background: #55acee url('https://msdnshared.blob.core.windows.net/media/TNBlogsFS/prod.evol.blogs.technet.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/94/25/twitter-tile.png') 50% 50% no-repeat;
}
.sidebar-tiles a.sidebar-tile-facebook {
  background: #3b5998 url('https://msdnshared.blob.core.windows.net/media/TNBlogsFS/prod.evol.blogs.technet.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/94/25/2055.facebook.png') 50% 50% no-repeat;
}
.sidebar-tiles a.sidebar-tile-comments {
  background: #006bc2 url('https://msdnshared.blob.core.windows.net/media/TNBlogsFS/prod.evol.blogs.technet.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/94/25/5415.icon-comments-large.png') 50% 50% no-repeat;
}
.sidebar-tiles a.sidebar-tile-contact {
  background: #00368a url('https://msdnshared.blob.core.windows.net/media/TNBlogsFS/prod.evol.blogs.technet.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/94/25/5340.icon-email-large.png') 50% 50% no-repeat;
}
.sidebar-tiles a.sidebar-tile-home {
  background: #00368a url('https://msdnshared.blob.core.windows.net/media/TNBlogsFS/prod.evol.blogs.technet.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/94/25/5417.home.png') 50% 50% no-repeat;
}
.sidebar-tiles a:hover {
  color: #fff;
  background-color: #01265f;
}

@media (min-width:37.5em){ /*medium*/
  .home .blog-title {
    margin: -10px 0 20px;
    font-size: 39px;
  }
  .main-navigation ul {
  	height: 121px;
  }
}
@media (min-width:60em){ /*large*/
  .main-navigation ul {
  	height: 58px;
  }
}	

/*Child specific styles*/

.child-level-below-nav h2.blog-title {
  margin: 10px 0 8px;
  padding: 0;
  font-size: 29px;
}

.child-level-below-nav .child-below-nav-right img {
  float: none;
  top: auto;
  margin: 23px 0 0;
}
.site-content {
  margin: 2rem auto 0; /* need space after site logo */
}

.sidebar-btn {
  margin: 0 0 13px 0;
  color: #fff;
}
.sidebar-btn-purple {
  background-color: #68217a;
}
.sidebar-btn-green {
  background-color: #009E49;
}
.sidebar-btn-cyan {
  background-color: #0072C6;
}
.sidebar-btn a {
  line-height: 34px; 
  font-family: 'Segoe UI Semibold','Segoe UI',Tahoma,Helvetica,Sans-Serif;
  padding: 0 30px 0 35px;
  display: table-cell;
  vertical-align: middle;
  background: url('http://cdn3.visualstudio.com/Areas/VisualStudio/Themes/VStudio/Content/Images/arrowWhite.png') no-repeat right center;
  border-right: 10px solid transparent; 
  color: #fff;
}
.sidebar-btn a:hover {
  text-decoration: underline;
  color: #fff;
}


@media (min-width:37.5em){ 
  .child-level-below-nav h2.blog-title {
    margin: 10px 0 8px;
    padding: 0;
    font-size: 39px;
  }
}
@media (min-width:48.125em){
  .child-level-below-nav .child-below-nav-right img {
    float: none;
    top: auto;
    margin: 23px 0 0;
  }
  #secondary {
      float: right;
      width: 23.5492%;
  }
  #tag-wrap,
  .comments-area {
      clear: left;
      width: 74.5164%;
  }
  .comments-area .comment-list {
      clear: left;
  }
}
@media (min-width:60em){ 

}			</style>
  <!-- End Custom CSS --> 
  <link rel="shortcut icon" href="https://blogs.technet.microsoft.com/askds/wp-content/themes/cloud-platform/images/favicon-technet.png"> 
  <meta property="Search.Network" name="Search.Network" content="ceblognetwork"> 
 </head> 
 <body class="post-template-default single single-post postid-7010 single-format-standard msdn-2188 group-blog"> 
  <div id="top-link"></div> 
  <div class="site-header-wrap"> 
   <header id="masthead" class="site-header" role="banner"> 
    <div class="top-breadcrumb-wrap-child"> 
     <div class="top-breadcrumbs">
      <a href="https://blogs.technet.microsoft.com/serverandtools">Server &amp; Tools Blogs</a> &gt; 
      <a href="https://blogs.technet.microsoft.com/server-management">Server &amp; Management Blogs</a> &gt; Ask the Directory Services Team
     </div> 
     <div class="utility-breadcrumbs"> 
      <nav id="site-utility-navigation" class="utility-navigation" role="navigation"> 
       <div class="menu-utility-nav-container"> 
        <ul id="menu-utility-nav" class="menu"> 
         <li class="menu-item"><a href="https://blogs.technet.microsoft.com/wp-login.php?aadsso_action=login">Sign in</a></li> 
        </ul> 
       </div> 
      </nav> 
     </div> 
    </div> 
    <a href="#togglemenu" class="header-mobile-dropdown-toggle-child">Menu</a> 
    <div class="header-mobile-dropdown-child-level"> 
     <nav id="site-navigation" class="main-navigation" role="navigation"> 
      <a class="skip-link screen-reader-text" href="#content"> Skip to content </a> 
      <div class="menu-server-and-management-blogs-main-menu-container">
       <ul id="menu-server-and-management-blogs-main-menu-1" class="menu">
        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-33"><a href="#">All About Windows Server</a> 
         <ul class="sub-menu"> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-113"><a href="https://blogs.technet.microsoft.com/windowsserver/">Windows Server</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-685"><a href="https://blogs.technet.microsoft.com/nanoserver/">Nano Server</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-123"><a href="https://blogs.technet.microsoft.com/sbs/">Windows Server Essentials</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-143"><a href="https://blogs.technet.microsoft.com/askperf/">Ask the Performance Team</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-153"><a href="https://blogs.technet.microsoft.com/askpfeplat/">Ask Premier Field Engineering (PFE) Platforms</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-652"><a href="https://blogs.technet.microsoft.com/askcore/">Ask the Core Team</a></li> 
         </ul> </li> 
        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-43"><a href="#">Cloud Platform Blogs</a> 
         <ul class="sub-menu"> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-223"><a href="https://blogs.technet.microsoft.com/hybridcloud/">Hybrid Cloud</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-661"><a href="https://azure.microsoft.com/blog/">Microsoft Azure</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-214"><a href="https://blogs.technet.microsoft.com/privatecloud/">Building Clouds</a></li> 
         </ul> </li> 
        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-53"><a href="#">Datacenter Management</a> 
         <ul class="sub-menu"> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-233"><a href="https://blogs.technet.microsoft.com/hybridcloud/">Hybrid Cloud</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-653"><a href="https://blogs.technet.microsoft.com/msoms/">Operations Management Suite (OMS)</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-243"><a href="https://blogs.technet.microsoft.com/scvmm/">System Center Virtual Machine Manager</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-253"><a href="https://blogs.technet.microsoft.com/servicemanager/">System Center Service Manager</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-263"><a href="https://blogs.technet.microsoft.com/momteam/">System Center Operations Manager</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-283"><a href="https://blogs.technet.microsoft.com/orchestrator/">System Center Orchestrator</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-695"><a href="https://blogs.technet.microsoft.com/dpm/">System Center Data Protection Manager</a></li> 
         </ul> </li> 
        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-63"><a href="#">Client Management</a> 
         <ul class="sub-menu"> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-293"><a href="https://blogs.technet.microsoft.com/configurationmgr/">System Center Configuration Manager</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-675"><a href="https://blogs.technet.microsoft.com/enterprisemobility/?product=system-center-configuration-manager">Configuration Manager Team</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-303"><a href="https://blogs.technet.microsoft.com/servicemanager/">System Center Service Manager</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-313"><a href="https://blogs.technet.microsoft.com/mmpc/">Malware Protection Center</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-323"><a href="https://blogs.technet.microsoft.com/enterprisemobility/?product=microsoft-intune">Microsoft Intune</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-333"><a href="https://blogs.technet.microsoft.com/sus/">Server Update Services</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-343"><a href="https://blogs.technet.microsoft.com/enterprisemobility/">Enterprise Mobility</a></li> 
         </ul> </li> 
        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-73"><a href="#">Virtualization, VDI &amp; Remote Desktop</a> 
         <ul class="sub-menu"> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-353"><a href="https://blogs.technet.microsoft.com/virtualization/">Virtualization Team</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-363"><a href="http://blogs.msdn.microsoft.com/virtual_pc_guy/">Ben Armstrong’s Virtualization</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-374"><a href="https://blogs.technet.microsoft.com/enterprisemobility/?product=windows-server-remote-desktop-services">Remote Desktop Services</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-394"><a href="https://blogs.technet.microsoft.com/askcore/tag/hyper-v/">Ask the Core Team on Hyper-V</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-403"><a href="https://blogs.technet.microsoft.com/enterprisemobility/">Enterprise Mobility</a></li> 
         </ul> </li> 
        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-83"><a href="#">File &amp; Storage &amp; High Availability</a> 
         <ul class="sub-menu"> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-404"><a href="https://blogs.technet.microsoft.com/filecab/">File &amp; Storage</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-414"><a href="https://blogs.technet.microsoft.com/askcore/tag/failover-cluster/">Ask the Core Team on Failover Cluster</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-423"><a href="http://blogs.msdn.microsoft.com/clustering/">Clustering &amp; High Availability</a></li> 
         </ul> </li> 
        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-93"><a href="#">Windows Server Management</a> 
         <ul class="sub-menu"> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-433"><a href="http://blogs.msdn.microsoft.com/powershell/">PowerShell</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-443"><a href="https://blogs.technet.microsoft.com/heyscriptingguy/">Hey Scripting Guy (PowerShell)</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-463"><a href="https://blogs.technet.microsoft.com/networking/">Networking</a></li> 
         </ul> </li> 
        <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-103"><a href="#">Identity, Access &amp; Security</a> 
         <ul class="sub-menu"> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-666"><a href="https://blogs.technet.microsoft.com/datacentersecurity/">Datacenter and Private Cloud Security</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-483"><a href="https://blogs.technet.microsoft.com/enterprisemobility/?product=azure-active-directory">Active Directory</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-493"><a href="https://blogs.technet.microsoft.com/enterprisemobility/">Enterprise Mobility</a></li> 
          <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-473"><a href="https://blogs.technet.microsoft.com/askds/">Ask Directory Services</a></li> 
         </ul> </li> 
       </ul>
      </div> 
     </nav> 
     <!-- #site-navigation --> 
    </div> 
    <div class="child-level-below-nav"> 
     <div class="child-below-nav-wrapper"> 
      <div class="child-below-nav-left"> 
       <div class="blog-name"> 
        <div class="inner-name-wrapper"> 
         <h2 class="blog-title"><a href="https://blogs.technet.microsoft.com/askds">Ask the Directory Services Team</a></h2> 
        </div> 
       </div> 
       <p class="blog-description">Microsoft's official enterprise support blog for AD DS and more </p> 
      </div> 
      <div class="child-below-nav-right"> 
      </div> 
     </div> 
    </div> 
   </header> 
   <!-- #masthead --> 
  </div> 
  <div id="content" class="site-content"> 
   <div id="primary" class="content-area"> 
    <main id="main" class="site-main" role="main"> 
     <article id="post-7010" class="post-7010 post type-post status-publish format-standard hentry category-uncategorized tag-authentication tag-kerberos tag-rob-greene"> 
      <header class="entry-header"> 
       <h1 class="entry-title">Troubleshooting Kerberos Authentication problems – Name resolution issues</h1> 
       <div class="rating-wrap"> 
        <div id="star-rating-7010" class="wds-ratings" data-rating="5" data-userrating="0" data-postid="7010" data-container="body" data-toggle="tooltip" title="1 user(s) rated"> 
         <div class="wds-ratings-inner-wrap"> 
          <div> 
           <div aria-label="Select 5 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5">
            <span aria-hidden="true" class="star-1"><span>?</span></span>
            <span aria-hidden="true" class="star-2"><span>?</span></span>
            <span aria-hidden="true" class="star-3"><span>?</span></span>
            <span aria-hidden="true" class="star-4"><span>?</span></span>
            <span aria-hidden="true" class="star-5"><span>?</span></span>
           </div>
           <div aria-label="Select 4 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4">
            <span aria-hidden="true" class="star-1"><span>?</span></span>
            <span aria-hidden="true" class="star-2"><span>?</span></span>
            <span aria-hidden="true" class="star-3"><span>?</span></span>
            <span aria-hidden="true" class="star-4"><span>?</span></span>
           </div>
           <div aria-label="Select 3 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3">
            <span aria-hidden="true" class="star-1"><span>?</span></span>
            <span aria-hidden="true" class="star-2"><span>?</span></span>
            <span aria-hidden="true" class="star-3"><span>?</span></span>
           </div>
           <div aria-label="Select 2 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2">
            <span aria-hidden="true" class="star-1"><span>?</span></span>
            <span aria-hidden="true" class="star-2"><span>?</span></span>
           </div>
           <div aria-label="Select 1 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1">
            <span aria-hidden="true" class="star-1"><span>?</span></span>
           </div> 
          </div> 
         </div> 
        </div> 
       </div> 
      </header>
      <!-- .entry-header --> 
      <div class="entry-meta row"> 
       <div class="post-info"> 
        <span class="posted-on"><time class="entry-date published" datetime="2008-05-14T12:49:00+00:00">May 14, 2008</time><time class="updated" datetime="2015-06-26T01:13:19+00:00">June 26, 2015</time></span> 
        <span class="byline">by <span class="author vcard profile-usercard-hover" data-profile-userid="87aaefad29f94e3cbba2dc5a79e16ee2"><a class="url fn n profile-usercard-a" href="https://social.technet.microsoft.com/profile/NedPyle+%5BMSFT%5D">NedPyle [MSFT]</a></span></span> 
        <span class="slashes comment-slashes">//</span> 
        <a class="num-comments" href="https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/#comments">4 Comments</a> 
       </div> 
       <div class="row"> 
        <div class="social-icons-wrap"> 
         <ul class="social-icons"> 
          <li>
           <div class="fb-share-button" data-href="https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/" data-layout="button_count" data-size="large" data-mobile-iframe="true">
            <a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/&amp;src=sdkpreparse">Share</a>
           </div></li> 
          <div id="fb-root" style="display:none"></div> 
          <li class="social-icon twitter"><a data-social="{&quot;type&quot;:&quot;twitter&quot;, &quot;url&quot;:&quot;https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/&quot;, &quot;text&quot;: &quot;Troubleshooting Kerberos Authentication problems – Name resolution issues&quot;}" href="#" id="post_tweet_count">0</a></li> 
          <li class="social-icon linkedin"><a data-social="{&quot;type&quot;:&quot;linkedin&quot;, &quot;url&quot;:&quot;https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/&quot;, &quot;text&quot;: &quot;Troubleshooting Kerberos Authentication problems – Name resolution issues&quot;}" href="#" id="get_post_linkedin_count">0</a></li> 
         </ul> 
        </div>
        <!-- .social-icons-wrap --> 
        <script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.technet.microsoft.com/askds/wp-content/themes/msdn-network-parent/js/social-counts.min.js?ver=12272016')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/');
				});
		});
	</script> 
       </div> 
      </div>
      <!-- .entry-meta --> 
      <div class="entry-content"> 
       <p>Hi <a href="http://blogs.technet.com/b/askds/archive/tags/Rob+Greene/">Rob </a>here. I thought I would show you how we in Microsoft Commercial Technical Support typically troubleshoot Kerberos authentication issues. This discussion should do much to get you more comfortable viewing network traces for Kerberos authentication problems. There are other ways to troubleshoot Kerberos; one could use the Kerberos event logging outlined in KB <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;262177">262177</a>. Although you could rely on this method, it will take longer to resolve the issue and involves making some educated guesses without the network trace.</p> 
       <p>I am going to layout my <a href="http://www.microsoft.com/technet/virtualserver/downloads/default.mspx">lab configuration</a> in case you want to reproduce the problem and look at the network traces on your own.</p> 
       <p><b><span style="text-decoration: underline;">Forest layout:</span></b></p> 
       <blockquote> 
        <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_2.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_2.png"><img height="239" width="221" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       </blockquote> 
       <p>The root domain litwareinc.com has one domain controller in the domain, and one member server. </p> 
       <table cellpadding="0" cellspacing="0" border="0" class="MsoTableGrid" style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none; BORDER-COLLAPSE: collapse; mso-yfti-tbllook: 1184; mso-padding-alt: 0in 5.4pt 0in 5.4pt; mso-border-insideh: none; mso-border-insidev: none"> 
        <tbody> 
         <tr style="mso-yfti-irow: 0; mso-yfti-firstrow: yes; mso-yfti-lastrow: yes"> 
          <td align="center" width="319" valign="top" style="padding-bottom: 0in; padding-left: 5.4pt; width: 239.4pt; padding-right: 5.4pt; padding-top: 0in;"> <p align="center" class="MsoNoSpacing" style="TEXT-ALIGN: center"><strong>Domain Controller network configuration: </strong></p> <p class="MsoNoSpacing">Host Name:<span style="mso-spacerun: yes">&nbsp; </span>LTWRE-RT-DC1 <br>IP Address: 10.10.100.20 <br>DNS:<span style="mso-spacerun: yes">&nbsp; </span>10.10.100.20 <br>WINS: 10.10.100.60 </p> </td> 
          <td align="center" width="319" valign="top" style="padding-bottom: 0in; padding-left: 5.4pt; width: 239.4pt; padding-right: 5.4pt; padding-top: 0in;"> <p align="center" class="MsoNoSpacing" style="TEXT-ALIGN: center"><strong>Member Server network configuration:</strong></p> <p>Host Name:&nbsp; LTWRE-RT-MEM1 <br>IP Address: 10.10.100.21 <br>DNS:&nbsp; 10.10.100.20 <br>WINS: 10.10.100.60 </p> </td> 
         </tr> 
        </tbody> 
       </table> 
       <p>The child domain litware-chld.litwareinc.com has one domain controller in the domain, and one member server. </p> 
       <table cellpadding="0" cellspacing="0" border="0" class="MsoTableGrid" style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none; BORDER-COLLAPSE: collapse; mso-yfti-tbllook: 1184; mso-padding-alt: 0in 5.4pt 0in 5.4pt; mso-border-insideh: none; mso-border-insidev: none"> 
        <tbody> 
         <tr style="mso-yfti-irow: 0; mso-yfti-firstrow: yes; mso-yfti-lastrow: yes"> 
          <td align="center" width="319" valign="top" style="padding-bottom: 0in; padding-left: 5.4pt; width: 239.4pt; padding-right: 5.4pt; padding-top: 0in;"> <p align="center" class="MsoNoSpacing" style="TEXT-ALIGN: center"><strong>Domain Controller network configuration: </strong></p> <p class="MsoNoSpacing">Host Name:<span style="mso-spacerun: yes">&nbsp; </span>LTWRE-CHD-DC1 <br>IP Address: 10.10.200.20 <br>DNS:<span style="mso-spacerun: yes">&nbsp; </span>10.10.200.20 <br>WINS: 10.10.100.60 </p> </td> 
          <td align="center" width="319" valign="top" style="padding-bottom: 0in; padding-left: 5.4pt; width: 239.4pt; padding-right: 5.4pt; padding-top: 0in;"> <p align="center" class="MsoNoSpacing" style="TEXT-ALIGN: center"><strong>Member Server network configuration: </strong></p> <p class="MsoNoSpacing">Host Name:<span style="mso-spacerun: yes">&nbsp; </span>LTWRE-CHD-MEM1 <br>IP Address: 10.10.200.21 <br>DNS:<span style="mso-spacerun: yes">&nbsp; </span>10.10.100.20 <br>WINS: 10.10.100.60 </p> </td> 
         </tr> 
        </tbody> 
       </table> 
       <p><span style="color: #ff0000;">NOTE: I’m stating the obvious here, I know, but this configuration is for testing only. Having only one DC per domain usually means you’ll be rebuilding the forest at some point.</span></p> 
       <p>Network based troubleshooting (network captures) is the fastest way to determine the problem, and by learning a few short filters you can effectively troubleshoot most Kerberos-related problems.</p> 
       <p>You can use any network capture utility that you feel comfortable with. I prefer <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=18b1d59d-f4d8-4213-8d17-2f6dde7d7aac&amp;DisplayLang=en">Netmon</a>, nmcap (part of Netmon 3.x) or <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=96a35011-fd83-419d-939b-9a772ea2df90&amp;DisplayLang=en">netcap</a> (XP and 2003 support tools) to collect the network trace, and I use <a href="http://wireshark.org/">Wireshark</a> to view the network capture. This is in no way an endorsement of Wireshark – feel free to use <a href="http://www.ethereal.com/">Ethereal</a>, <a href="http://sourceforge.net/projects/packetyzer/">Packetyzer</a>, <a href="http://search.live.com/results.aspx?q=network+analyzers&amp;src=IE-SearchBox">etc</a>.</p> 
       <p><b><span style="text-decoration: underline;">Problem scenario:</span></b></p> 
       <p>There is a service running on LTWRE-RT-MEM1 server that runs starts /runs as “LocalSystem” account. This service connects to a file share on LTWRE-CHD-MEM1 named “AppShare” to access some files. The Service is failing to retrieve the files and is giving you an error of “Access is denied”. When you attempt to access the share as a domain user account on LTWRE-RT-MEM1 you are able to access the share.</p> 
       <p>Auditing for Logon/Logoff was enabled on LTWRE-CHD-MEM1, so you start by examining the security event log. </p> 
       <p>When the LITWAREINC\Administrator attempts to access the share we get the following Audit Event:</p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_4.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_4.png"><img height="399" width="360" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_1.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_1.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       <p>Notice how the user that authenticated to the server is the “LITWAREINC\Administrator” account. It used NTLM authentication and the source machine name is LTWRE-RT-MEM1.</p> 
       <p>When the Service attempts to access the share we get the following Audit Event:</p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_28.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_28.png"><img height="397" width="359" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_13.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_13.png" alt="image" border="0" style="BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"></a> </p> 
       <p>Notice that when the service attempts to authenticate to the server it is doing it anonymously.</p> 
       <p>Hey, why is the computer authenticating to the other machine using NTLM authentication? <br>I thought we were in the 21<sup>st</sup> century with Kerberos authentication? </p> 
       <p>As it turns out, starting with Windows XP and Windows Server 2003 a computer cannot not use NTLM authentication when accessing a remote resource. If it does, it will use Anonymous Logon credentials and typically fail.</p> 
       <p>That means we have to figure out why Kerberos authentication is failing on LTWRE-RT-MEM1 when accessing a share on LTWRE-CHD-MEM1.</p> 
       <p>Typically when you troubleshoot using network captures, you want to install the network capture utility on both ends of the communications to make sure that there are no network devices (firewalls, routers, switches, VPN appliances, etc.) that are manipulating the packet in between the two systems. We call this taking a double-sided trace.</p> 
       <p>When working with a customer, we will typically request a double-sided network capture be taken. In this scenario I would start with installing the network capture utility on the source and destination server to see what is going on.</p> 
       <p>So the next question I guess becomes what are the steps to taking a good network capture?</p> 
       <p>Well, we want to see all name resolution, and we will also want to ensure that we see the Kerberos tickets (Authentication) in the capture. We also want to make sure that we can reproduce this problem at will to see this problem for ourselves. </p> 
       <p><b><span style="text-decoration: underline;">So, how can we reproduce the problem? </span></b></p> 
       <p>1. Get a command prompt as the “SYSTEM” and attempt to access the remote system. </p> 
       <table cellpadding="0" cellspacing="0" border="1" class="MsoTableGrid" style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none; BORDER-COLLAPSE: collapse; mso-yfti-tbllook: 1184; mso-padding-alt: 0in 5.4pt 0in 5.4pt; mso-border-alt: solid black .5pt; mso-border-themecolor: text1"> 
        <tbody> 
         <tr style="mso-yfti-irow: 0; mso-yfti-firstrow: yes; mso-yfti-lastrow: yes"> 
          <td width="638" valign="top" style="padding-bottom: 0in; padding-left: 5.4pt; width: 6.65in; padding-right: 5.4pt; background: #d9d9d9; padding-top: 0in; mso-border-alt: solid black .5pt; mso-border-themecolor: text1; mso-background-themecolor: background1; mso-background-themeshade: 217; border: black 1pt solid;"> <p class="MsoNoSpacing">On Windows 2000, Windows XP, and Windows Server 2003 we can use the AT command to get a command prompt as the “SYSTEM” account by type the following command: </p> <p>AT <i style="mso-bidi-font-style: normal">&lt;Military Time in Future&gt;</i> /Interactive “cmd.exe” </p> <p>i.e.<span style="mso-spacerun: yes">&nbsp; </span>if the time is currently 7:04 PM you would type in: <i style="mso-bidi-font-style: normal">AT 19:06 /Interactive “cmd.exe”</i> </p> <p>Then at 7:06 PM you should see a command prompt pop up </p> <p class="MsoNoSpacing" style="MARGIN-LEFT: 0.5in"><span style="mso-no-proof: yes">
             <shapetype coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f" id="_x0000_t75"></shapetype>
             <stroke joinstyle="miter"></stroke>
             <stroke></stroke><br> 
             <formulas></formulas>
             <f eqn="if lineDrawn pixelLineWidth 0"></f>
             <f></f>
             <f eqn="sum @0 1 0"></f>
             <f></f>
             <f eqn="sum 0 0 @1"></f>
             <f></f>
             <f eqn="prod @2 1 2"></f>
             <f></f>
             <f eqn="prod @3 21600 pixelWidth"></f>
             <f></f>
             <f eqn="prod @3 21600 pixelHeight"></f>
             <f></f>
             <f eqn="sum @0 0 1"></f>
             <f></f>
             <f eqn="prod @6 1 2"></f>
             <f></f>
             <f eqn="prod @7 21600 pixelWidth"></f>
             <f></f>
             <f eqn="sum @8 21600 0"></f>
             <f></f>
             <f eqn="prod @7 21600 pixelHeight"></f>
             <f></f>
             <f eqn="sum @10 21600 0"></f>
             <f></f><br> 
             <formulas></formulas> 
             <path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"></path> 
             <path></path>
             <lock v:ext="edit" aspectratio="t"></lock>
             <lock></lock>
             <shapetype></shapetype>
             <shape o:spid="_x0000_i1025" type="#_x0000_t75" id="Picture_x0020_40" style="width: 375.75pt; height: 42pt; visibility: visible; mso-wrap-style: square;"></shape>
             <imagedata src="file:///C:\Users\nedpyle\AppData\Local\Temp\msohtmlclip1\01\clip_image001.png" o:title="o:title"></imagedata>
             <imagedata></imagedata>
             <shape></shape></span></p> <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_6.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_6.png"><img height="62" width="501" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_2.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_2.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> <p class="MsoNoSpacing">NOTE:<span style="mso-spacerun: yes">&nbsp; </span>You have to do this while logged into the console session.<span style="mso-spacerun: yes">&nbsp; </span>If you are RDP’ed in you need to start the RDP session with the /console switch otherwise you will never see the command window start.</p> </td> 
         </tr> 
        </tbody> 
       </table> 
       <p>2. Start the network capture utility.</p> 
       <p>3. Clear all name resolution cache as well as all cached Kerberos tickets.</p> 
       <ul> 
        <li>To clear DNS name cache you type in: IPConfig /FlushDNS </li> 
        <li>To clear NetBIOS name cache you type in: NBTStat –R </li> 
        <li>To clear Kerberos tickets will need KList.exe: KList purge</li> 
       </ul> 
       <blockquote> 
        <p>The above commands need to be done in the command prompt that came up for “SYSTEM”</p> 
       </blockquote> 
       <p>4. Now you need to run a command that will require authentication to the target server. Either of the following will do: </p> 
       <ul> 
        <li>Net View <a href="file://\\LTWRE-CHD-MEM1">\\LTWRE-CHD-MEM1</a> </li> 
        <li>Dir <a href="file:///\\ltwre-chd-mem1\AppShare">\\ltwre-chd-mem1\AppShare</a></li> 
       </ul> 
       <p>5. Once you get the error message, stop and save the network captures.</p> 
       <p><b><span style="text-decoration: underline;">Reviewing the network capture:</span></b></p> 
       <p>If you are using Wireshark to view the trace, the Filter is simple: “dns || Kerberos || ip.addr==<i>&lt;IP Address of Target machine&gt;</i>”. Basically, this filter means “Show me all packets sent to or from the target machine, all DNS name queries and responses, and all Kerberos authentication.”</p> 
       <p>It should look similar to this:</p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_8.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_8.png"><img height="94" width="508" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_3.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_3.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       <p>Once you have the network capture, you should see all DNS, Kerberos Authentication (As well as Packets that have Kerberos tickets in them), and anything destined for the remote system.</p> 
       <p>Before we go over the capture too much, we should probably cover at a high level the steps taken to connect to a remote file share.</p> 
       <p>1. Resolve the host name for the target system to an IP address. </p> 
       <blockquote> 
        <p>a. Look in the HOSTS file. <br>b. Query DNS. <br>c. Look in the LMHOSTS file. <br>d. Query WINS / NBNS.</p> 
       </blockquote> 
       <p>2. Ping the remote system. <br>3. Negotiate an Authentication protocol. Kerberos is preferred for Windows hosts. <br>4. Request a Kerberos Ticket. <br>5. Perform an SMB “Session Setup and AndX request” request and send authentication data (Kerberos ticket or NTLM response).</p> 
       <p>Let’s look at those steps in more detail.</p> 
       <p><span style="text-decoration: underline;">Step 1 – resolve the name:</span></p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_10.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_10.png"><img height="45" width="524" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_4.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_4.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       <p>Remember, we did “IPConfig /FlushDNS” so that we can see name resolution on the wire. Frame 1 is the query out. Hmm, this looks kind of funny: querying for LTWRE-CHD-MEM1.litwareinc.com. Well, that part should be fine, I suppose, since the DNS server should not find the record. But wait Frame 6 shows that the DNS Server responded to the query with 10.10.200.21, and sure enough that is the correct IP Address for the target server.</p> 
       <p><span style="text-decoration: underline;">Step 2 – ping the remote system:</span></p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_12.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_12.png"><img height="65" width="525" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_5.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_5.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       <p>Yep, the remote system is ping able. See the Echo request and reply. So the system is up and available.</p> 
       <p><span style="text-decoration: underline;">Step 3 – Negotiate Authentication:</span></p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_14.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_14.png"><img height="59" width="530" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_6.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_6.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       <p>So now we negotiate the authentication protocol and the remote system responded; the response is the more important part of the packet. We see that it supports MS KRB5, KRB5, and NTLMSSP; it even gave us the principal name of the system.</p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_16.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_16.png"><img height="336" width="530" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_7.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_7.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       <p><span style="text-decoration: underline;">Step 4 – Request a Kerberos ticket:</span></p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_18.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_18.png"><img height="73" width="524" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_8.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_8.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       <p>Alright, now to the meat of Kerberos authentication and viewing it in a network trace. If you remember, we used <b>KList Purge</b> command to clear out all tickets on the system. That means that the server has to get a Ticket Granting Ticket (TGT) first, and this is why you are seeing the AS-REQ and AS-REP frames. If Kerberos ticketing is new to you, I would suggest reviewing the blog on how <a href="http://blogs.technet.com/askds/archive/2008/03/06/kerberos-for-the-busy-admin.aspx">Kerberos works</a>.</p> 
       <p>Next, we see the TGS-REQ in Frame 18; let’s take a closer look at this packet in the details pane.</p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_20.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_20.png"><img height="335" width="524" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_9.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_9.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       <p>You can see that the system is handing its TGT to the Kerberos Key Distribution Center (KDC) under “padata: PA-TGS-REQ” section, and requesting a ticket for server “cifs/LTWRE-CHD-MEM1.litwareinc.com” in the LITWAREINC.COM realm (Windows Domain) under “KDC_REQ_BODY” section.</p> 
       <p>OK, since we now know that we are requesting a Kerberos ticket for <b>“cifs/LTWRE-CHD-MEM1.litwareinc.com”</b> in the litwareinc.com domain. This will not work since the remote system actually lives in the <b>“litwareinc-chld.litwareinc.com”</b> domain. So you see why the KDC responded back with <b><i>KRB5KDC_ERR_S_PRINCIPAL_UNKNOWN</i></b>. Again, if you do not understand this please review the blog on how Kerberos works.</p> 
       <p><span style="text-decoration: underline;">Step 5 – Perform a SMB “Session Setup AndX request”:</span></p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_22.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_22.png"><img height="91" width="515" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_10.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_10.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       <p>So we see in the following Frames:</p> 
       <ul> 
        <li>Frame 20 shows that, since Kerberos failed due to an unknown service principal name, the NTLMSSP_NEGOTIATE authentication package is selected. Frame 21 shows that the remote system sending the NTLMSSP_CHALLENGE (this is typical) back. </li> 
        <li>Frame 22 shows that the system sent no NTLM credentials to the remote system. It is authenticating as NT AUTHORITY\Anonymous. </li> 
        <li>Frame 23 shows that the remote system allowed the session to be created. </li> 
        <li>Frame 24 &amp; 25 shows that we do a Tree connect to the IPC$ share and get a response. </li> 
        <li>Frame 26 &amp; 27 shows that we connect the SRVSVC named pipe and get STATUS_ACCESS_DENIED back.</li> 
       </ul> 
       <p>So where do you think things start to go wrong here in the trace?</p> 
       <blockquote> 
        <p>If you answered DNS name resolution you would be correct. If name resolution is not working properly in the environment it will cause the application requesting a Kerberos ticket to actually request a Service ticket for the wrong service principal name. So if you remember the remote file server I am attempting to connect to “<b>ltwre-chd-mem1.chd.litwareinc.com”</b>, however the DNS Server found a record for <b>“ltwre-chd-mem1.litware.com”</b>. Since we found the remote file server in the “litwareinc.com” domain the Kerberos client requests a service ticket for “cifs/ltwre-chd-mem1.litwareinc.com” as noted in the Kerberos ticket request, and the KDC responds with <b><i>KRB5KDC_ERR_S_PRINCIPAL_UNKNOWN.</i></b></p> 
       </blockquote> 
       <p>I did another <b>net view</b> specifying the FQDN of LTWRE-CHD-MEM1 and <i>WOW</i>, look at the output:</p> 
       <p><a href="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_24.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_24.png"><img height="264" width="490" src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/BlogFileStorage/blogs_technet/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_11.png" original-url="http://blogs.technet.com/blogfiles/askds/WindowsLiveWriter/TroubleshootingKerberosAuthenticationpro_B35D/image_thumb_11.png" alt="image" border="0" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"></a> </p> 
       <p>That actually worked! So, how can we fix this problem?</p> 
       <p>Actually, there are several different ways to “fix” the problem:</p> 
       <p>a. Find out why DNS is resolving the machine name incorrectly.</p> 
       <blockquote> 
        <p>i. Is there a HOST or CNAME record for this name? <br>ii. Did you configure the DNS Zone for WINS lookup?</p> 
       </blockquote> 
       <p>b. Configure your application to use the FQDN of the system instead of NetBIOS name.</p> 
       <p>c. We could add an Service Principal Name to LTWRE-CHD-MEM1 for “CIFS/LTWRE-CHD-MEM1.litwareinc.com”</p> 
       <p>The best way to “Fix” the problem is to actually fix DNS name resolution. By the way, the lab was configured with “WINS Lookup” enabled on the litwareinc.com DNS Zone. If you are failing to use Kerberos authentication using the LocalSystem account, you are more than likely failing to use Kerberos authentication when users are going to the remote system. However, they are not getting “Access is denied” because user accounts, unlike machine accounts, can fail over to NTLM and authenticate with credentials rather than as Anonymous.</p> 
       <p>If you find that fixing the DNS problem is not possible, then the next best solution would be to make the application use the FQDN of the server. Keep in mind that the application vendor would need to be involved to use this fix.</p> 
       <p>The least favorite method to resolve the issue would be to add the SPN to the destination server using the SetSPN.exe tool. This is the least favorite because you are adding another name to the machine account in another domain. What would happen if in the future you bring up a new computer in the root domain with the same name? Now you have a duplicate SPN and this will lead to other Kerberos authentication problems.</p> 
       <p>Well, I hope that you have learned a few new things like:</p> 
       <ul> 
        <li>How name resolution problems could cause Kerberos authentication to fail. </li> 
        <li>How to easily filter network traces to confidently determine where Kerberos authentication is failing. </li> 
        <li>How the SMB protocol and authentication look in a network trace.</li> 
       </ul> 
       <p>Please keep in mind that there are several other ways that name resolution could cause Kerberos authentication to fail. You could have static WINS entries in the database, or you could have wrong entries in HOSTS / LMHOSTS files. You could be failing because of a CNAME / “A” (HOST) record within your DNS zone, or simply because of the DNS Zone is configured for “WINS Lookup”.</p> 
       <p>Robert Greene</p> 
       <div class="back-to-top-wrap">
        <a href="#top-link" class="back-to-top">Back to<br>top</a>
       </div> 
      </div>
      <!-- .entry-content --> 
     </article>
     <!-- #post-## --> 
    </main>
    <!-- #main --> 
   </div>
   <!-- #primary --> 
   <div id="secondary" class="widget-area" role="complementary"> 
    <aside id="msdn_bing_social_search-5" class="widget msdn_bing_social_search"> 
     <div class="-widget-msdn-blogs-social-search msdn-blogs-social-search"> 
      <div class="field-item search"> 
       <form id="-widget-search-allblogs-container"> 
        <span class="field-item-input"> <input id="-widget-search-textbox-allblogs" name="search-textbox-allblogs" type="search" class="search-field" maxlength="64" size="45" autocomplete="off" title=""> <input id="-widget-search-button-allblogs" name="search-button-allblogs" type="submit" class="search-submit" title=""> </span> 
       </form> 
       <form id="-widget-search-thisblog-container"> 
        <span class="field-item-input"> <input id="-widget-search-textbox-thisblog" name="search-textbox-thisblog" type="search" class="search-field" maxlength="64" size="45" autocomplete="off" title="Search this blog with Bing"> <button id="-widget-search-button-thisblog" name="search-button-thisblog" type="submit" class="search-submit search-icon" title="Search this blog with Bing"></button> </span> 
       </form> 
      </div> 
      <div class="bing-social-search-option"> 
       <span class="bing-social-search-thisblog"> <input type="radio" name="SearchTypeRadio" value="thisblog" id="-widget-thisblog"><label for="-widget-thisblog" id="-widget-thisblog-text">Search this blog</label></span> 
       <span class="bing-social-search-allblogs"> <input type="radio" name="SearchTypeRadio" value="allblogs" id="-widget-allblogs" checked><label for="-widget-allblogs" id="-widget-allblogs-text">Search all blogs</label></span> 
      </div> 
      <script type="text/javascript">
			jQuery(document).ready(function( $ ) {
				var $elmSearchAll = $('#-widget-search-allblogs-container').hide();
				var $elmSearchThis = $('#-widget-search-thisblog-container');

				// try to get the blog id, if we fail, then we aren't on a blog and just use the regular search approach

					$('#-widget-thisblog').click(function () {
						var self = $(this);
						if (self.is(':checked')) {
							$elmSearchAll.hide();
							$elmSearchThis.show();
						}
					});

					$('#-widget-allblogs').click(function () {
						var self = $(this);
						if (self.is(':checked')) {
							$elmSearchThis.hide();
							$elmSearchAll.show();
						}
					});
			});
			</script> 
      <script type="text/javascript">window.$ = window.jQuery;</script> 
      <script src="https://i4.services.social.microsoft.com/Search/Widgets/SearchBox.jss?boxid=-widget-search-textbox-allblogs&amp;btnid=-widget-search-button-allblogs&amp;brand=msdn&amp;refinement=109&amp;resref&amp;addEnglish&amp;watermark&amp;focusOnInit=false&amp;beta=0&amp;iroot&amp;overrideWatermark=false&amp;rn&amp;rq" type="text/javascript" language="javascript"></script> 
      <script src="https://i4.services.social.microsoft.com/Search/Widgets/SearchBox.jss?boxid=-widget-search-textbox-thisblog&amp;btnid=-widget-search-button-thisblog&amp;brand=msdn&amp;refinement&amp;resref&amp;addEnglish&amp;watermark&amp;focusOnInit=false&amp;beta=0&amp;iroot&amp;overrideWatermark=false&amp;rn=Ask%2Bthe%2BDirectory%2BServices%2BTeam&amp;rq=site%3Ahttps%3A%2F%2Fblogs.technet.microsoft.com%2Faskds" type="text/javascript" language="javascript"></script> 
     </div> 
    </aside>
    <aside id="text-3" class="widget widget_text">
     <h2 class="widget-title color-highlight-bg">Top Server &amp; Tools Blogs</h2> 
     <div class="textwidget">
      <div class="widget-rss-link"> 
       <a href="http://sxp.microsoft.com/feeds/3.0/ServerTools/ServerToolsTopPosts" target="_blank"><img src="https://msdnshared.blob.core.windows.net/media/TNBlogsFS/prod.evol.blogs.technet.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/94/25/2110.metroRSS.png"></a>
      </div> 
      <ul class="widget-link-list"> 
       <li><a href="http://weblogs.asp.net/scottgu">ScottGu's Blog</a></li> 
       <li><a href="https://blogs.technet.microsoft.com/in_the_cloud/">Brad Anderson’s "In the Cloud" Blog</a></li> 
       <li><a href="http://blogs.msdn.microsoft.com/bharry/">Brian Harry's Blog</a></li> 
       <li><a href="https://blogs.msdn.microsoft.com/stevengu/">Steve "Guggs" Guggenheimer's Blog</a></li> 
      </ul>
     </div> 
    </aside> 
    <aside id="recent-posts-2" class="widget widget_recent_entries"> 
     <h2 class="widget-title color-highlight-bg">Recent Posts</h2> 
     <ul> 
      <li> <a href="https://blogs.technet.microsoft.com/askds/2017/07/26/active-directory-experts-apply-within/">Active Directory Experts: apply within</a> <span class="post-date">July 26, 2017</span> </li> 
      <li> <a href="https://blogs.technet.microsoft.com/askds/2017/04/05/using-debugging-tools-to-find-token-and-session-leaks/">Using Debugging Tools to Find Token and Session Leaks</a> <span class="post-date">April 5, 2017</span> </li> 
      <li> <a href="https://blogs.technet.microsoft.com/askds/2016/10/13/troubleshooting-failed-password-changes-after-installing-ms16-101/">Troubleshooting failed password changes after installing MS16-101</a> <span class="post-date">October 13, 2016</span> </li> 
      <li> <a href="https://blogs.technet.microsoft.com/askds/2016/09/21/access-based-enumeration-abe-troubleshooting-part-2-of-2/">Access-Based Enumeration (ABE) Troubleshooting (part 2 of 2)</a> <span class="post-date">September 21, 2016</span> </li> 
     </ul> 
    </aside> 
    <aside id="tag_cloud-3" class="widget widget_tag_cloud">
     <h2 class="widget-title color-highlight-bg">Tags</h2>
     <div class="tagcloud">
      <a href="https://blogs.technet.microsoft.com/askds/tag/adfs/" class="tag-link-4 tag-link-position-1" title="15 topics" style="font-size: 9pt;">ADFS</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/ad-lds/" class="tag-link-37 tag-link-position-2" title="16 topics" style="font-size: 9.2954545454545pt;">AD LDS</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/ad-replication/" class="tag-link-35 tag-link-position-3" title="28 topics" style="font-size: 11.560606060606pt;">AD Replication</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/audit/" class="tag-link-177 tag-link-position-4" title="21 topics" style="font-size: 10.378787878788pt;">audit</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/authentication/" class="tag-link-55 tag-link-position-5" title="34 topics" style="font-size: 12.348484848485pt;">Authentication</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/authorization/" class="tag-link-57 tag-link-position-6" title="30 topics" style="font-size: 11.856060606061pt;">Authorization</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/certificates/" class="tag-link-73 tag-link-position-7" title="49 topics" style="font-size: 13.924242424242pt;">Certificates</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/dfsn/" class="tag-link-33 tag-link-position-8" title="45 topics" style="font-size: 13.530303030303pt;">DFSN</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/dfsr/" class="tag-link-9 tag-link-position-9" title="128 topics" style="font-size: 17.962121212121pt;">DFSR</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/dfsr-debug-logging/" class="tag-link-84 tag-link-position-10" title="29 topics" style="font-size: 11.757575757576pt;">DFSR Debug Logging</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/dfsr-migration-or-upgrade/" class="tag-link-92 tag-link-position-11" title="16 topics" style="font-size: 9.2954545454545pt;">DFSR Migration or Upgrade</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/dfsr-performance/" class="tag-link-81 tag-link-position-12" title="27 topics" style="font-size: 11.462121212121pt;">DFSR Performance</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/disaster-recovery/" class="tag-link-26 tag-link-position-13" title="22 topics" style="font-size: 10.575757575758pt;">Disaster Recovery</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/dns/" class="tag-link-95 tag-link-position-14" title="17 topics" style="font-size: 9.5909090909091pt;">DNS</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/frs/" class="tag-link-108 tag-link-position-15" title="21 topics" style="font-size: 10.378787878788pt;">FRS</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/group-policy/" class="tag-link-30 tag-link-position-16" title="71 topics" style="font-size: 15.5pt;">group policy</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/group-policy-preferences/" class="tag-link-91 tag-link-position-17" title="20 topics" style="font-size: 10.181818181818pt;">Group Policy Preferences</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/infrastructure/" class="tag-link-69 tag-link-position-18" title="74 topics" style="font-size: 15.69696969697pt;">infrastructure</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/jonathan-stephens/" class="tag-link-42 tag-link-position-19" title="26 topics" style="font-size: 11.265151515152pt;">Jonathan Stephens</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/kb-articles/" class="tag-link-74 tag-link-position-20" title="104 topics" style="font-size: 17.075757575758pt;">KB Articles</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/kerberos/" class="tag-link-19 tag-link-position-21" title="39 topics" style="font-size: 12.939393939394pt;">Kerberos</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/ldap/" class="tag-link-20 tag-link-position-22" title="19 topics" style="font-size: 9.9848484848485pt;">LDAP</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/mail-sack/" class="tag-link-49 tag-link-position-23" title="60 topics" style="font-size: 14.810606060606pt;">Mail Sack</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/mike-stephens/" class="tag-link-43 tag-link-position-24" title="44 topics" style="font-size: 13.431818181818pt;">Mike Stephens</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/ned-pyle/" class="tag-link-10 tag-link-position-25" title="328 topics" style="font-size: 22pt;">Ned Pyle</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/network/" class="tag-link-104 tag-link-position-26" title="39 topics" style="font-size: 12.939393939394pt;">network</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/other-blogs/" class="tag-link-40 tag-link-position-27" title="93 topics" style="font-size: 16.583333333333pt;">Other Blogs</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/passwords/" class="tag-link-39 tag-link-position-28" title="18 topics" style="font-size: 9.7878787878788pt;">Passwords</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/pki/" class="tag-link-6 tag-link-position-29" title="49 topics" style="font-size: 13.924242424242pt;">PKI</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/powershell/" class="tag-link-47 tag-link-position-30" title="29 topics" style="font-size: 11.757575757576pt;">PowerShell</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/profiles/" class="tag-link-13 tag-link-position-31" title="17 topics" style="font-size: 9.5909090909091pt;">Profiles</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/rob-greene/" class="tag-link-75 tag-link-position-32" title="29 topics" style="font-size: 11.757575757576pt;">Rob Greene</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/security/" class="tag-link-7 tag-link-position-33" title="59 topics" style="font-size: 14.712121212121pt;">Security</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/silly-rabbit/" class="tag-link-32 tag-link-position-34" title="88 topics" style="font-size: 16.386363636364pt;">Silly Rabbit</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/sysvol/" class="tag-link-38 tag-link-position-35" title="15 topics" style="font-size: 9pt;">SYSVOL</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/usmt/" class="tag-link-48 tag-link-position-36" title="73 topics" style="font-size: 15.598484848485pt;">USMT</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/usmt-behaviors/" class="tag-link-53 tag-link-position-37" title="26 topics" style="font-size: 11.265151515152pt;">USMT Behaviors</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/usmt-component-manifest-reference/" class="tag-link-160 tag-link-position-38" title="20 topics" style="font-size: 10.181818181818pt;">USMT Component Manifest Reference</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/windows-7/" class="tag-link-14 tag-link-position-39" title="46 topics" style="font-size: 13.628787878788pt;">Windows 7</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/windows-8/" class="tag-link-15 tag-link-position-40" title="25 topics" style="font-size: 11.068181818182pt;">Windows 8</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/windows-server-2008/" class="tag-link-134 tag-link-position-41" title="45 topics" style="font-size: 13.530303030303pt;">Windows Server 2008</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/windows-server-2008-r2/" class="tag-link-21 tag-link-position-42" title="65 topics" style="font-size: 15.106060606061pt;">Windows Server 2008 R2</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/windows-server-2012/" class="tag-link-23 tag-link-position-43" title="19 topics" style="font-size: 9.9848484848485pt;">windows server 2012</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/windows-vista/" class="tag-link-159 tag-link-position-44" title="51 topics" style="font-size: 14.121212121212pt;">Windows Vista</a> 
      <a href="https://blogs.technet.microsoft.com/askds/tag/windows-xp/" class="tag-link-96 tag-link-position-45" title="25 topics" style="font-size: 11.068181818182pt;">Windows XP</a>
     </div> 
    </aside>
    <aside id="msdn-archive-widget-3" class="widget msdn-archive-widget">
     <h2 class="widget-title color-highlight-bg">Archives</h2> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2017/07/">July 2017</a>&nbsp;(1)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2017/04/">April 2017</a>&nbsp;(1)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2016/10/">October 2016</a>&nbsp;(1)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2016/09/">September 2016</a>&nbsp;(2)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2016/06/">June 2016</a>&nbsp;(2)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2016/05/">May 2016</a>&nbsp;(1)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2016/04/">April 2016</a>&nbsp;(1)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2016/03/">March 2016</a>&nbsp;(1)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2016/01/">January 2016</a>&nbsp;(1)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2017/">All of 2017</a>&nbsp;(2)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2016/">All of 2016</a>&nbsp;(9)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2015/">All of 2015</a>&nbsp;(10)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2014/">All of 2014</a>&nbsp;(9)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2013/">All of 2013</a>&nbsp;(18)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2012/">All of 2012</a>&nbsp;(62)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2011/">All of 2011</a>&nbsp;(132)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2010/">All of 2010</a>&nbsp;(150)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2009/">All of 2009</a>&nbsp;(215)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2008/">All of 2008</a>&nbsp;(122)</li> 
     <li><a href="https://blogs.technet.microsoft.com/askds/2007/">All of 2007</a>&nbsp;(19)</li> 
    </aside> 
   </div>
   <!-- #secondary --> 
   <div id="tag-wrap">
    <h2 class="color-highlight-bg">Tags</h2>
    <ul class="tag-list">
     <li><a href="https://blogs.technet.microsoft.com/askds/tag/authentication/">Authentication</a></li>
     <li><a href="https://blogs.technet.microsoft.com/askds/tag/kerberos/">Kerberos</a></li>
     <li><a href="https://blogs.technet.microsoft.com/askds/tag/rob-greene/">Rob Greene</a></li>
    </ul>
   </div> 
   <div id="comments" class="comments-area"> 
    <div class="comments-head"> 
    </div> 
    <ol class="comment-list"> 
     <li id="comment-460" class="comment byuser comment-author-anonymouscommenter even thread-even depth-1"> 
      <article id="div-comment-460" class="comment-body"> 
       <footer class="comment-meta"> 
        <div class="comment-right"> 
         <time class="comment-time" datetime="2008-05-23T07:02:42+00:00"> 9 years ago </time> 
         <div class="comment-actions"> 
         </div> 
        </div> 
        <div class="comment-author vcard"> 
         <img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=80&amp;d=mm&amp;r=g 2x" class="avatar avatar-40 photo" height="40" width="40"> 
         <div class="author-wrap"> 
          <span class="author-name">anonymouscommenter</span> 
         </div> 
        </div>
        <!-- .comment-author --> 
       </footer>
       <!-- .comment-meta --> 
       <div class="comment-content"> 
        <p>Simple bind events don’t record the calling Computer as the source, but record the ADDS-DC or the ADLDS instance name, so you cannot determine where the simple bind request came from. So if you are trying to track down where the calling machine is that</p> 
       </div>
       <!-- .comment-content --> 
       <div class="comment-metadata"> 
       </div>
       <!-- .comment-metadata --> 
      </article>
      <!-- .comment-body --> </li>
     <!-- #comment-## --> 
     <li id="comment-563" class="comment byuser comment-author-anonymouscommenter odd alt thread-odd thread-alt depth-1"> 
      <article id="div-comment-563" class="comment-body"> 
       <footer class="comment-meta"> 
        <div class="comment-right"> 
         <time class="comment-time" datetime="2008-05-29T21:50:23+00:00"> 9 years ago </time> 
         <div class="comment-actions"> 
         </div> 
        </div> 
        <div class="comment-author vcard"> 
         <img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=80&amp;d=mm&amp;r=g 2x" class="avatar avatar-40 photo" height="40" width="40"> 
         <div class="author-wrap"> 
          <span class="author-name">anonymouscommenter</span> 
         </div> 
        </div>
        <!-- .comment-author --> 
       </footer>
       <!-- .comment-meta --> 
       <div class="comment-content"> 
        <p>Hi Rob here again. I hope that you found the first blog on troubleshooting Kerberos Authentication problems</p> 
       </div>
       <!-- .comment-content --> 
       <div class="comment-metadata"> 
       </div>
       <!-- .comment-metadata --> 
      </article>
      <!-- .comment-body --> </li>
     <!-- #comment-## --> 
     <li id="comment-94" class="comment byuser comment-author-anonymouscommenter even thread-even depth-1"> 
      <article id="div-comment-94" class="comment-body"> 
       <footer class="comment-meta"> 
        <div class="comment-right"> 
         <time class="comment-time" datetime="2008-08-29T16:55:07+00:00"> 9 years ago </time> 
         <div class="comment-actions"> 
         </div> 
        </div> 
        <div class="comment-author vcard"> 
         <img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=80&amp;d=mm&amp;r=g 2x" class="avatar avatar-40 photo" height="40" width="40"> 
         <div class="author-wrap"> 
          <span class="author-name">anonymouscommenter</span> 
         </div> 
        </div>
        <!-- .comment-author --> 
       </footer>
       <!-- .comment-meta --> 
       <div class="comment-content"> 
        <p>&amp;#160; Ask the Directory Services Team : Troubleshooting Kerberos Authentication problems – Name resolution</p> 
       </div>
       <!-- .comment-content --> 
       <div class="comment-metadata"> 
       </div>
       <!-- .comment-metadata --> 
      </article>
      <!-- .comment-body --> </li>
     <!-- #comment-## --> 
     <li id="comment-496" class="comment byuser comment-author-anonymouscommenter odd alt thread-odd thread-alt depth-1"> 
      <article id="div-comment-496" class="comment-body"> 
       <footer class="comment-meta"> 
        <div class="comment-right"> 
         <time class="comment-time" datetime="2009-01-28T18:25:49+00:00"> 9 years ago </time> 
         <div class="comment-actions"> 
         </div> 
        </div> 
        <div class="comment-author vcard"> 
         <img alt="" src="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=80&amp;d=mm&amp;r=g 2x" class="avatar avatar-40 photo" height="40" width="40"> 
         <div class="author-wrap"> 
          <span class="author-name">anonymouscommenter</span> 
         </div> 
        </div>
        <!-- .comment-author --> 
       </footer>
       <!-- .comment-meta --> 
       <div class="comment-content"> 
        <p>Microsoft Support Documents 2008 "Lag site" or "hot site" (aka delayed replication) for Active Directory Disaster Recovery support</p> 
       </div>
       <!-- .comment-content --> 
       <div class="comment-metadata"> 
       </div>
       <!-- .comment-metadata --> 
      </article>
      <!-- .comment-body --> </li>
     <!-- #comment-## --> 
    </ol>
    <!-- .comment-list --> 
    <p class="no-comments">Comments are closed.</p> 
   </div>
   <!-- #comments --> 
  </div>
  <!-- #content --> 
  <div class="footer-wrap"> 
   <footer id="colophon" class="site-footer" role="contentinfo"> 
    <div class="site-info"> 
     <div class="footer-copyright"> 
      <p>© 2017 Microsoft Corporation.</p> 
     </div> 
     <div class="bottom-footer-menu"> 
      <div class="menu-footer-menu-container">
       <ul id="menu-footer-menu" class="footer-menu">
        <li id="menu-item-15303" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15303"><a href="http://technet.microsoft.com/en-US/cc300389.aspx">Terms of Use</a></li> 
        <li id="menu-item-15313" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15313"><a href="http://www.microsoft.com/library/toolbar/3.0/trademarks/en-us.mspx">Trademarks</a></li> 
        <li id="menu-item-15323" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15323"><a href="http://go.microsoft.com/fwlink/?LinkId=248681">Privacy &amp; Cookies</a></li> 
       </ul>
      </div> 
     </div> 
     <div class="footer-logo"> 
      <!--<div class="copyright-logo" role="img" aria-label="Microsoft logo"></div>--> 
     </div>
     <!-- .footer-logo --> 
    </div>
    <!-- .site-info --> 
   </footer>
   <!-- #colophon --> 
  </div>
  <!-- .footer-wrap --> 
  <!-- #page --> 
  <script type="text/javascript">
	jQuery(document).ready(function($){
		$login_link = $( 'a[href*="wp-login.php?"]' );
				$login_link.on( 'click', function( evt ) {
			// evt.preventDefault();
						// console.log( 'cookie-set', '/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/' );
			$.cookie( 'aadsso-redirect', '/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/', { expires: 1, path: '/' });
		});
	});
	</script> 
  <script>
		jQuery(window).load(function () {
			// Fix Bug #644092:MAS36: Page number
			jQuery('div.nav-links>a.page-numbers').each(function(){
				jQuery(this).attr('aria-label', 'Page ' + jQuery(this).html());
			});

			// Fix Bug #633981:MAS20B:  Talkback: Talkback announces link for Number of Comments as 'Number link'
			jQuery('span.comments-link>a').each(function () {
				var num = parseInt(jQuery(this).html());
				if (isNaN(num)) {
					return false;
				}
				var content = num + (num === 1 ? ' comment' : ' comments');
				jQuery(this).attr({
					'aria-label': content,
					'title': content
				});
			});


			jQuery('#search-option>div').each(function () {
				jQuery(this).attr('aria-label',jQuery('span.search-text',this).html());
			});

			// Fix Bug #671896:MAS40B :Inspect: Header: "Name" property is not descriptive for  "Microsoft | TechNet" link (logo).
			var currentHost = location.hostname;
			if (currentHost.indexOf('msdn') !== -1) {
				jQuery('#home-link').attr('aria-label','Microsoft Developer');
			} else if (currentHost.indexOf('technet') !== -1) {
				jQuery('#home-link').attr('aria-label','Microsoft Technet');
			}

			// Detect High Contrast Mode in non IE/Edge Browsers
			jQuery('html').css('background-image', 'url("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==")');
			if (jQuery('html').css('background-image') === 'none') {
				jQuery('html').attr('data-high-contrast', 'true');
			}

			// Fix Bug #670327:MAS40B: Inspect: Header: "Localized control type" property is incorrect for the header elements.
			// Fix Bug #683788:MAS40B: TalkBack: Header: For menu items in technet link menu bar, expand/collapse pattern available, is not announced by TalkBack 
			jQuery('#site-navigation>div>ul>li>a').attr('role', 'button').attr('aria-expanded', 'false').click(function () {
				if (jQuery(this).attr('aria-expanded') === 'true') {
					jQuery(this).attr('aria-expanded', 'false');
				} else {
					jQuery(this).attr('aria-expanded', 'true');
				}
			});

		});
	</script> 
  <!--ADD WEDCS SCRIPT--> 
  <div id="_WEDCSInsertedData" style="display: none;"></div> 
  <script type="text/javascript">
		jQuery( window ).load(
			function() {
				window.varSegmentation = 0;
				window.varClickTracking = 1;
				window.varCustomerTracking = 1;
				window.varAutoFirePV = 1;
				window.Route = ""; // was 23470 in the windows theme framework
				window.Ctrl = "";

								var blogPost = {};

								blogPost.permalink = 'https://blogs.technet.microsoft.com/askds/2008/05/14/troubleshooting-kerberos-authentication-problems-name-resolution-issues/';
				blogPost.title = 'Troubleshooting Kerberos Authentication problems &ndash; Name resolution issues';
				blogPost.author = 'NedPyle [MSFT]';
				blogPost.post_date = '2008-05-14 12:49:00';
				blogPost.category = 'Uncategorized';
				blogPost.tag = 'Authentication,Kerberos,Rob Greene';
				blogPost.comment_number = '4';
								window.blogPost = blogPost;

				var wedcs_script = document.createElement('script');
				wedcs_script.type = 'text/javascript';
				wedcs_script.async = true;
				wedcs_script.src = 'https://blogs.technet.microsoft.com/askds/wp-content/mu-plugins/wedcs-script/ms2_blogs.js';
				if (typeof mscc === 'undefined' || (!mscc || mscc.hasConsent())) {
					document.getElementsByTagName('body')[0].appendChild(wedcs_script);
				}
			});
	</script> 
  <!--
	<script src="//c.microsoft.com/ms.js" type="text/javascript"></script>
	<noscript><img alt="" width="1" height="1" src="http://c.microsoft.com/trans_pixel.aspx"/></noscript>
	--> 
  <script type="text/javascript">
			jQuery( window ).load(
				function () {
					var stylesheet = document.createElement('link');
					stylesheet.href = 'https://blogs.technet.microsoft.com/askds/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/css/style.css?ver=3.3.3';
					stylesheet.rel = 'stylesheet';
					stylesheet.type = 'text/css';
					document.getElementsByTagName('head')[0].appendChild(stylesheet);
				});
		</script> 
  <script type="text/javascript">
			jQuery( window ).load(
				function () {
					var stylesheet = document.createElement('link');
					stylesheet.href = 'https://blogs.technet.microsoft.com/askds/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/css/icons.css?ver=3.3.3';
					stylesheet.rel = 'stylesheet';
					stylesheet.type = 'text/css';
					document.getElementsByTagName('head')[0].appendChild(stylesheet);
				});
		</script> 
  <script type="text/javascript">
			jQuery( window ).load(
				function () {
					var script = document.createElement('script');
					script.src = 'https://blogs.technet.microsoft.com/askds/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/js/front-widget.js?ver=3.3.3';
					script.type = 'text/javascript';
					script.async = true;
					document.getElementsByTagName('body')[0].appendChild(script);
				});
		</script> 
  <span id="page-view-tracking-info" blog-id="2188" post-id="7010"></span> 
  <script type="text/javascript">
			// Check for compatibility before IE8
			if (!Date.now) {
 				 Date.now = function() { return new Date().getTime(); };
			}
			jQuery( window ).load( function() {
				jQuery.ajax({
					url: 'https://blogs.technet.microsoft.com/askds/wp-admin/admin-ajax.php',
					type: 'get',
					data: {
						action: 'track_page_view',
						track_page_view_post_id: jQuery('#page-view-tracking-info').attr('post-id'),
						track_page_view_blog_id: jQuery('#page-view-tracking-info').attr('blog-id'),
						track_page_view_post_url: window.location.href.split('?')[0],
						timestamp: Date.now()
						}
				});
			});
		</script> 
  <script type="text/javascript">
		var addthis_config =
		    {
				data_track_addressbar: false,
	        	ui_use_css: false,
	        	ui_508_compliant: true
	    	}
	</script> 
  <script>
dataLayer = [[]];
</script> 
  <!-- Google Tag Manager --> 
  <noscript>
   <iframe src="//www.googletagmanager.com/ns.html?id=GTM-PLR87W" height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript> 
  <script>jQuery(window).load(function(){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PLR87W')});</script> 
  <!-- End Google Tag Manager --> 
  <script type="text/javascript">
		jQuery( window ).load(
			function(i) {
				var n = window,
					t = document,
					e = n.console,
					f, u, r, o;
				typeof e == "undefined" && (f = function() {}, e = {
					log: f,
					warn: f,
					assert: f,
					clear: f,
					dir: f,
					error: f,
					info: f,
					profile: f,
					profileEnd: f
				}), u = {
					appendToHead: function(n) {
						if (t.getElementsByTagName("head").length > 0) t.getElementsByTagName("head")[0].appendChild(n);
						else throw "bootstrapper: no head element found.";
					},
					appendToBody: function(n) {
						if (t.getElementsByTagName("body").length > 0) t.getElementsByTagName("body")[0].appendChild(n);
						else throw "bootstrapper: no body element found.";
					},
					addStyleElement: function(n) {
						var i = t.createElement("link");
						i.setAttribute("href", n), i.setAttribute("rel", "stylesheet"), i.setAttribute("type", "text/css"), u.appendToHead(i)
					},
					loadFiles: function(n, t) {
						if (t !== i && u.recursiveScriptLoad(0, t), n !== i)
							for (var r = 0, r = 0; r < n.length; r++) u.addStyleElement(n[r])
					},
					recursiveScriptLoad: function(n, t) {
						t[n] && u.addScriptElement(t[n], function() {
							u.recursiveScriptLoad(n + 1, t)
						})
					},
					isCompatible: function(n, t) {
						var r, u, i;
						return (r = n.split("."), u = t.split("."), i = function(n) {
							return isNaN(n) ? 0 : n
						}, i(r[0]) > i(u[0]) || i(r[0]) === i(u[0]) && i(r[1]) > i(u[1]) || i(r[0]) === i(u[0]) && i(r[1]) === i(u[1]) && i(r[2]) >= i(u[2])) ? !0 : !1
					},
					addScriptElement: function(i, r) {
						var f, e;
						f = t.createElement("script"), f.setAttribute("type", "text/javascript"), f.async = true, f.setAttribute("src", i), f.attachEvent ? (e = function() {
							setTimeout(function() {
								typeof n.jQuery != "undefined" && r ? r() : e()
							}, 10)
						}, e()) : f.onload = r, u.appendToBody(f)
					},
					load: function(n, t) {
						setTimeout(function() {
							if (typeof n == "undefined") try {
								u.addScriptElement(t.defaultPath, function() {
									u.loadFiles(t.cssFiles, t.jsFiles)
								});
								return
							} catch (i) {
								e.warn("bootstrapper: failed to load default jQuery")
							} else if (!u.isCompatible(n.fn.jquery, t.minimumVersion)) {
								e.warn("bootstrapper: jQuery version is too old to load UserCard. Use v1.4.2 or later.");
								return
							}
							u.loadFiles(t.cssFiles, t.jsFiles)
						}, 0)
					}
				}, r = {
					host: n.location.host,
					search: "",
					protocol: "https"
				}, r.host = "widgets.services.microsoft.com", r.search = "?brand=msdn&lang=en&ver=4.9.0.0", r.protocol = "https:", o = {
					minimumVersion: "1.1.2",
					defaultPath: "https://code.jquery.com/jquery-1.4.2.min.js",
					cssFiles: [r.protocol + "//" + r.host + "/v1/UnifiedBaseballCard.css" + r.search, r.protocol + "//" + r.host + "/v1/usercard.css" + r.search],
					jsFiles: ["https://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js", r.protocol + "//" + r.host + "/v1/jquery.timeago.js" + r.search, r.protocol + "//" + r.host + "/v1/jquery.textfill.js" + r.search, r.protocol + "//" + r.host + "/v1/widgets.js" + r.search]
				}, typeof n.jQuery == "undefined" ? u.load(i, o) : u.load(n.jQuery, o)
			}
		);
	</script> 
  <script type="text/javascript">
/* <![CDATA[ */
var wds_ratings_config = {"ajaxurl":"https:\/\/blogs.technet.microsoft.com\/askds\/wp-admin\/admin-ajax.php","user_id":"0","nonce":"ebef50a9fb","debug":"","no_auth_alert":"You must be logged in to rate this article.","repeatedly_vote_alert":"You can not vote repeatedly in a short time","allow_anonymous_rating":"","blog_id":"2188","rating_limit_login_user":"1","rating_limit_anonymous":"1","hide_rating_post_ids":""};
var wds_ratings_config = {"ajaxurl":"https:\/\/blogs.technet.microsoft.com\/askds\/wp-admin\/admin-ajax.php","user_id":"0","nonce":"ebef50a9fb","debug":"","no_auth_alert":"You must be logged in to rate this article.","repeatedly_vote_alert":"You can not vote repeatedly in a short time","allow_anonymous_rating":"","blog_id":"2188","rating_limit_login_user":"1","rating_limit_anonymous":"1","hide_rating_post_ids":""};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://blogs.technet.microsoft.com/askds/wp-content/plugins/wds-ratings/wds-ratings.js?ver=20161014"></script> 
  <script type="text/javascript" src="https://blogs.technet.microsoft.com/askds/wp-content/themes/msdn-network-parent/js/onclick-menu-cloud.min.js?ver=12052016"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var msdnparent = {"is_search":"","is_singular":"1"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://blogs.technet.microsoft.com/askds/wp-content/themes/msdn-network-parent/js/project.min.js?ver=12272016"></script> 
  <script type="text/javascript" src="https://blogs.technet.microsoft.com/askds/wp-includes/js/wp-embed.min.js?ver=4.7.5"></script> 
  <script type="text/javascript" src="https://blogs.technet.microsoft.com/askds/wp-content/themes/msdn-network-parent/js/vendor/jquery.cookie.js?ver=12272016"></script>   
 </body>
</html>