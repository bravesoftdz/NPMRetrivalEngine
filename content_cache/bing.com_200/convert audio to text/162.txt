<!doctype html>
<html>
 <head> 
  <title>Convert an HTTP responseText into a DOM document object - comp.lang.javascript</title> 
  <meta name="viewport" content="width=device-width"> 
  <meta name="description" content="I send an XmlHttpRequest and GET a response back. Is it possible to convert that response into a DOM Level 3 HTML 'document' object and investigate it... 104378"> 
  <link rel="Stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css"> 
  <link href="/_config/main.css" rel="stylesheet"> 
  <link href="/scripts/colorbox/colorbox.css" rel="stylesheet"> 
  <link rel="canonical" href="http://compgroups.net/comp.lang.javascript/convert-an-http-responsetext-into-a-dom/104378"> 
  <script src="https://w.topage.net/box.js" async defer></script> 
 </head> 
 <body> 
  <div id="wrapper"> 
   <!-- Navigation --> 
   <nav class="navbar navbar-default navbar-static-top navbar-fixed-top" role="navigation" style="margin-bottom: 0"> 
    <div class="navbar-header"> 
     <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
     <a class="navbar-brand" href="/"><span><img src="/img/comp.png"> compgroups</span></a> 
    </div> 
    <div class="collapse navbar-collapse"> 
     <ul class="nav navbar-nav"> 
      <li class="hidden"> <a href="#page-top"></a> </li> 
      <li><a href="/groups/"><img src="/img/group16.png"> groups</a></li> 
      <li><a href="/top-users/"><img src="/img/users16.png"> users</a></li> 
      <li><a href="/article~stream"><img src="/img/clock16.png"> stream</a></li> 
      <li><a href="/site~search"><img src="/img/icon_search.gif"> search</a></li> 
      <li><a href="/article~browse/1"><img src="/img/earth16.png"> browse</a></li> 
      <li><a href="/article~post"><img src="/img/add16.png"> post</a></li> 
      <li><a href="/site~about"><img src="/img/info16.png"> contact</a></li> 
      <li id="user"></li> 
     </ul> 
    </div> 
   </nav> 
  </div> f 
  <br> 
  <br> 
  <br> 
  <br> 
  <div class="rtl-container-fixed-center body-content"> 
   <div class="row"> 
    <div class="col-md-0 col-lg-2"></div> 
    <div class="col-md-8 col-lg-6"> 
    </div> 
   </div> 
   <div class="row"> 
    <div class="col-md-0 col-lg-2"></div> 
    <div class="col-md-8 col-lg-6"> 
     <div class="panel panel-default panel-heading"> 
      <h4>Convert an HTTP responseText into a DOM document object</h4> 
     </div> 
    </div> 
    <div id="socials" class="col-md-4 col-lg-2 well well-sm"> 
     <span class="st_googleplus_large" displaytext="Google +"></span> 
     <span class="st_facebook_large" displaytext="Facebook"></span> 
     <span class="st_twitter_large" displaytext="Tweet"></span> 
     <span class="st_linkedin_large" displaytext="LinkedIn"></span> 
     <span class="st_reddit_large" displaytext="Reddit"></span> 
     <span class="st_email_large" displaytext="Email"></span> 
    </div> 
   </div> 
   <div class="row"> 
    <div class="col-md-0 col-lg-2"></div> 
    <div class="col-md-8 col-lg-6"> 
     <div class="panel panel-default"> 
      <div class="panel-body"> 
       <pre class="ForumPostContentText">I send an XmlHttpRequest and GET a response back. Is it possible to
convert that response into a DOM Level 3 HTML 'document' object and
investigate it?

</pre> 
      </div> 
      <div class="panel-heading"> 
       <div class="row"> 
        <div class="col-md-4"> 
         <table style="text-align: center;  width:90px" class="Voting" votesum="0"> 
          <tbody>
           <tr> 
            <td> <img src="/img/icn/plus32.png" height="20px" style="cursor: pointer" title="Vote Up!" onclick="OnVoteArticle($(this).closest('table'),'<1194021736.722199.325010@y42g2000hsy.googlegroups.com>', true);"> </td> 
            <td style="color: Green; font-weight: bold; font-size: 15px" title="0 Total Votes"> 0 </td> 
            <td> <img src="/img/icn/minus32.png" height="20px" style="cursor: pointer" title="Vote Down!" onclick="OnVoteArticle($(this).closest('table'),'<1194021736.722199.325010@y42g2000hsy.googlegroups.com>', false);"> </td> 
           </tr> 
          </tbody>
         </table> 
        </div> 
        <div class="col-md-4"> 
         <span class="user"><a href="/user/wtr_clr"><img src="http://www.gravatar.com/avatar/042549207680dff0891ee60a15bd801a.jpg?s=24&amp;d=identicon"><b>wtr_clr</b></a> <b title="Points" style="color:green">(75)</b> </span> 
        </div> 
        <div class="col-md-4"> 
         <span class="date pull-right">11/2/2007 4:42:16 PM</span> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="col-md-4 col-lg-2 well well-sm"> 
     <div class="item"> 
      <a href="/comp.lang.javascript/"><img src="/img/icn/group.png"><b>comp.lang.javascript</b></a> 
      <a href="/comp.lang.javascript/info"><img title="comp.lang.javascript group information" src="/img/icn/i.png"></a> 
      <img src="/img/icn/article.gif">38370 articles. 
      <img src="/img/icn/star2.gif">0 followers. 
      <span><span class="user"><a href="/user/javascript4"><img src="http://www.gravatar.com/avatar/52b9df96ba3991f86b71866e53be9e11.jpg?s=24&amp;d=identicon"><b>javascript4</b></a> <b title="Points" style="color:green">(1315)</b> </span> is leader.</span> 
      <a class="btn btn-success btn-xs" href="/article~post?g=comp.lang.javascript">Post</a> 
      <a class="btn btn-info btn-xs" onclick="OpenModal('/fr~subscribegroup?group=comp.lang.javascript', 400, 300)">Follow</a> 
     </div> 
     <br> 
     <img src="/img/icn/reply.png"> 
     <b>3 Replies </b> 
     <br> 
     <img src="/img/icn/eye.png"> 
     <b>2296 Views</b> 
     <br>
     <br> 
     <b><a href="#similar"><img src="/img/!.png">Similar Articles</a></b>
     <br>
     <br> 
     <span id="PageSpeed">[PageSpeed]</span> 3
     <div class="topage-box"></div> 
     <div id="ad4" class="visible-md visible-lg"></div> 
    </div> 
   </div> 
   <div class="row"> 
    <div class="col-md-0 col-lg-2"></div> 
    <div class="col-md-8 col-lg-6"> 
     <b> <a href="#similar" class="a2"> <img src="/img/!.png">See related articles to this posting</a> </b> 
     <br>
     <br> 
    </div> 
   </div> 
   <div class="row"> 
    <div class="col-md-0 col-lg-2"></div> 
    <div id="ad1" class="col-md-8 col-lg-6"></div> 
   </div> 
   <br> 
   <div class="row"> 
    <div class="col-md-0 col-lg-2"></div> 
    <div class="col-md-8 col-lg-6"> 
     <div class="panel panel-default"> 
      <div class="panel-body"> 
       <pre class="ForumPostContentText">Water Cooler v2 wrote:
&gt; I send an XmlHttpRequest and GET a response back. Is it possible to
&gt; convert that response into a DOM Level 3 HTML 'document' object and
&gt; investigate it?

The response is parsed into a DOM document if the server sends it as 
text/xml or application/xml. Then the responseXML property is populated 
as a DOM document. Whether that is DOM Level 3 document depends on the 
browser (Opera 9 has some DOM Level 3 support).
I don't think any browser currently allows you to take a string (e.g. 
responseText) and parse it into a HTML DOM document, unless you 
document.wrote it to a frame window.

-- 

	Martin Honnen
	http://JavaScript.FAQTs.com/
</pre> 
      </div> 
      <div class="panel-heading"> 
       <div class="row"> 
        <div class="col-md-4"> 
         <table style="text-align: center;  width:90px" class="Voting" votesum="0"> 
          <tbody>
           <tr> 
            <td> <img src="/img/icn/plus32.png" height="20px" style="cursor: pointer" title="Vote Up!" onclick="OnVoteArticleReply($(this).closest('table'),'<472b5652$0$27140$9b4e6d93@newsspool1.arcor-online.net>', true);"> </td> 
            <td style="color: Green; font-weight: bold; font-size: 15px" title="0 Total Votes"> 0 </td> 
            <td> <img src="/img/icn/minus32.png" height="20px" style="cursor: pointer" title="Vote Down!" onclick="OnVoteArticleReply($(this).closest('table'),'<472b5652$0$27140$9b4e6d93@newsspool1.arcor-online.net>', false);"> </td> 
           </tr> 
          </tbody>
         </table> 
        </div> 
        <div class="col-md-4"> 
         <span><img src="/img/icn/user.png"><b>Martin</b></span> 
        </div> 
        <div class="col-md-4"> 
         <span class="date pull-right">11/2/2007 4:54:31 PM</span> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="row"> 
    <div class="col-md-0 col-lg-2"></div> 
    <div class="col-md-8 col-lg-6"> 
     <div class="panel panel-default"> 
      <div class="panel-body"> 
       <pre class="ForumPostContentText">Martin Honnen wrote:
&gt; Water Cooler v2 wrote:
&gt;&gt; I send an XmlHttpRequest and GET a response back. Is it possible to
&gt;&gt; convert that response into a DOM Level 3 HTML 'document' object and
&gt;&gt; investigate it?
&gt; 
&gt; The response is parsed into a DOM document if the server sends it as 
&gt; text/xml or application/xml. Then the responseXML property is populated 
&gt; as a DOM document. Whether that is DOM Level 3 document depends on the 
&gt; browser (Opera 9 has some DOM Level 3 support).

As have Gecko-based UAs since a while.

http://developer.mozilla.org/en/docs/DOM_Levels#DOM_Level_3

&gt; I don't think any browser currently allows you to take a string (e.g. 
&gt; responseText) and parse it into a HTML DOM document, unless you 
&gt; document.wrote it to a frame window.

Your own FAQ entry says that it is possible to parse the response into an
X(HT)ML document with MSXML and with Gecko's DOMParser::parseFromString(),
which could suffice here:

http://www.faqts.com/knowledge_base/entry/versions/index.phtml?aid=15302


PointedEars
-- 
"Use any version of Microsoft Frontpage to create your site. (This won't
prevent people from viewing your source, but no one will want to steal it.)"
  -- from &lt;http://www.vortex-webdesign.com/help/hidesource.htm&gt;
</pre> 
      </div> 
      <div class="panel-heading"> 
       <div class="row"> 
        <div class="col-md-4"> 
         <table style="text-align: center;  width:90px" class="Voting" votesum="0"> 
          <tbody>
           <tr> 
            <td> <img src="/img/icn/plus32.png" height="20px" style="cursor: pointer" title="Vote Up!" onclick="OnVoteArticleReply($(this).closest('table'),'<4732F532.2040803@PointedEars.de>', true);"> </td> 
            <td style="color: Green; font-weight: bold; font-size: 15px" title="0 Total Votes"> 0 </td> 
            <td> <img src="/img/icn/minus32.png" height="20px" style="cursor: pointer" title="Vote Down!" onclick="OnVoteArticleReply($(this).closest('table'),'<4732F532.2040803@PointedEars.de>', false);"> </td> 
           </tr> 
          </tbody>
         </table> 
        </div> 
        <div class="col-md-4"> 
         <span><img src="/img/icn/user.png"><b>Thomas</b></span> 
        </div> 
        <div class="col-md-4"> 
         <span class="date pull-right">11/8/2007 11:38:26 AM</span> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="row"> 
    <div class="col-md-0 col-lg-2"></div> 
    <div class="col-md-8 col-lg-6"> 
     <div class="panel panel-default"> 
      <div class="panel-body"> 
       <pre class="ForumPostContentText">On Nov 2, 5:42 pm, Water Cooler v2 &lt;wtr_...@yahoo.com&gt; wrote:
&gt; I send an XmlHttpRequest and GET a response back. Is it possible to
&gt; convert that response into a DOM Level 3 HTML 'document' object and
&gt; investigate it?

Collecting different pieces of code for a while, removing good from
bad etc.,
now I use the following function which I hope (and think) you'll find
of use. Just
hand it the ajax object (after it had sent the request and the
readyState had been
4), and you'll be returned the document. If I copied it correctly,
then it will work like
it does on my site, and that is - supporting Opera, IE and Mozilla.

function getXMLDocument( ajax )
{
	if (typeof DOMParser == "undefined") {
		DOMParser = function()
		{};

		DOMParser.prototype.parseFromString = function(str, contentType)
		{
			if (typeof ActiveXObject != "undefined") {
				var doc = new ActiveXObject("MSXML.DomDocument");
				doc.loadXML(str);
				return doc;
			} else if ( typeof XMLHttpRequest != "undefined" ) {
				var req = new XMLHttpRequest();
				req.open("GET", "data:" + (contentType || "application/xml") +
";charset=utf-8," + encodeURIComponent(str), false);
				if ( req.overrideMimeType )
					req.overrideMimeType(contentType);
				req.send(null);
				return req.responseXML;
			} else
				throw new FatalException( "Can't find a valid xml parser",
"AJAX::getXMLDocument()" );
		}
	}
	var strDocument = ajax.responseText;
	var xmlDocument = ajax.responseXML;
	try {
		if( ! xmlDocument || xmlDocument.childNodes.length === 0 )
			xmlDocument = (new DOMParser()).parseFromString( strDocument,
"application/xml" );
		return xmlDocument;
	} catch( e ) {
		return null;
	}
}

Regards

</pre> 
      </div> 
      <div class="panel-heading"> 
       <div class="row"> 
        <div class="col-md-4"> 
         <table style="text-align: center;  width:90px" class="Voting" votesum="0"> 
          <tbody>
           <tr> 
            <td> <img src="/img/icn/plus32.png" height="20px" style="cursor: pointer" title="Vote Up!" onclick="OnVoteArticleReply($(this).closest('table'),'<1194567243.519425.73780@s15g2000prm.googlegroups.com>', true);"> </td> 
            <td style="color: Green; font-weight: bold; font-size: 15px" title="0 Total Votes"> 0 </td> 
            <td> <img src="/img/icn/minus32.png" height="20px" style="cursor: pointer" title="Vote Down!" onclick="OnVoteArticleReply($(this).closest('table'),'<1194567243.519425.73780@s15g2000prm.googlegroups.com>', false);"> </td> 
           </tr> 
          </tbody>
         </table> 
        </div> 
        <div class="col-md-4"> 
         <span><img src="/img/icn/user.png"><b>Darko</b></span> 
        </div> 
        <div class="col-md-4"> 
         <span class="date pull-right">11/9/2007 12:14:03 AM</span> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="row"> 
    <div class="col-md-0 col-lg-2"></div> 
    <div class="col-md-8 col-lg-6"> 
     <div class="well"> 
      <form id="replyForm"> 
       <table width="100%" cellpadding="10"> 
        <tbody>
         <tr> 
          <td> <b>Reply:</b><br> <textarea id="Body" name="Body" rows="7" style="width: 100%" placeholder="Enter Your Response"></textarea> </td> 
         </tr> 
         <tr> 
          <td> <input type="button" onclick="PostReply()" value="Post Reply" class="btn btn-success"> <input name="insertSignature" type="button" class="btn btn-info" value="Insert Signature" onclick="InsertSignature( $('#Body'),'') "> </td> 
         </tr> 
        </tbody>
       </table> 
       <input id="MessageId" name="MessageId" type="hidden" value="<1194021736.722199.325010@y42g2000hsy.googlegroups.com>"> 
       <input id="GroupName" name="GroupName" type="hidden" value="comp.lang.javascript"> 
       <input id="Subject" name="Subject" type="hidden" value="Re: Convert an HTTP responseText into a DOM document object"> 
      </form> 
     </div> 
     <script>
    function PostReply() {
        IsLoading("<img src='/img/spin.gif' /> Submitting...");

        PostArticle($('#replyForm').serialize())
        .done(function (res) { 
            $.isLoading('hide');

            if (res.msg) IsLoading(res.msg, 2000);
            if (res.result == "manual") {
                $('#replyForm')[0].reset();
                parent.OpenModal('/fr~share?subject=Convert an HTTP responseText into a DOM document object&url=http://compgroups.net/comp.lang.javascript/convert-an-http-responsetext-into-a-dom/104378', 350, 150);
            }
            else if (res.result == 'invalid') return;
            else if (res.result == 'ok') {
                parent.OpenModal('/fr~share?subject=Convert an HTTP responseText into a DOM document object&url=http://compgroups.net/comp.lang.javascript/convert-an-http-responsetext-into-a-dom/104378', 350, 150,
                    function () { parent.location = res.url + '?refresh=1'; });
            }
            else OpenModal('/fr~signin', 450, 350);
        })
        .fail(function (x) { $.isLoading('hide'); alert(x.responseText); })
       
    }
</script> 
    </div> 
   </div> 
   <div class="row"> 
    <div class="col-md-0 col-lg-2"></div> 
    <div class="col-md-8 col-lg-6"> 
     <div id="ad2"></div> 
    </div> 
   </div> 
   <br> 
   <div id="similar"></div> 
   <div id="divSimilarInternal"></div> 
   <div id="divSimilarExternal"></div> 
  </div> 
  <footer> 
   <div class="rlt-footer-default"> 
    <div class="rtl-container-fixed-center text-center"> 
     <a class="a2" href="javascript:OpenModal('/ifr/contact', 475, 300)">feedback</a> | 
     <a class="a2" href="/site~privacy">privacy policy</a> | 
     <span class="a2">All Times Are GMT(UTC)</span> 
    </div> 
   </div> 
  </footer> 
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
  <script src="/bundles/bootstrapjs?v=2Fz3B0iizV2NnnamQFrx-NbYJNTFeBJ2GM05SilbtQU1"></script> 
  <script src="/bundles/menujs?v=sYkte-rP937TJGqV8dUKxWWx-neRhlNRKGng-En9k0s1"></script> 
  <script type="text/javascript" src="/js/main.js"></script> 
  <script src="/js/article?v=PIbsuMZ-LzPoAVdMyKoFSjrFzFr4NXVx8FbijETRLVE1"></script> 
  <link rel="Stylesheet" href="/scripts/isloading/isloading.css"> 
  <script type="text/javascript" src="/scripts/isloading/jquery.isloading.min.js"></script> 
  <script type="text/javascript">var switchTo5x = true;</script> 
  <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script> 
  <script type="text/javascript">stLight.options({ publisher: "8539d792-b932-4ef1-91d2-9d14e7aded8d", doNotHash: false, doNotCopy: false, hashAddressBar: false });</script> 
  <script type="text/javascript">
	var clicky_site_ids = clicky_site_ids || [];
clicky_site_ids.push(191998);
(function() {
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = '//static.getclicky.com/js';
  ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
})();
</script> 
  <script>
              setupAds();
            </script> 
  <script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script> 
  <script type="text/javascript">
          var ados = ados || {};
          ados.run = ados.run || [];
          ados.run.push(function() { 
   
          ados_add_placement(2072, 17356, "azk25862", 5);
          ados_add_placement(2072, 17356, "azk26003", 5);
          ados_add_placement(2072, 17356, "azk50008", 5);
          ados_add_placement(2072, 17356, "azk15916", 5);
 	ados_add_placement(2072, 17356, "azk27218", 5);
          ados_add_placement(2072, 17356, "azk34159", 5);
          ados_add_placement(2072, 17356, "azk24097", 5);
          ados_load();
          });
        </script> 
  <script>$('#PageSpeed').html('0.003 - ')</script>   
 </body>
</html>