<!doctype html>
<html class="no-js hasSidebar hasPageActions hasBreadcrumb " lang="en-us" dir="ltr">
 <head> 
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <meta property="og:title" content="Computer Vision API Java tutorial"> 
  <meta property="og:image" content="https://docs.microsoft.com/_themes/docs.theme/master/en-us/_themes/images/microsoft-header.png"> 
  <meta name="twitter:card" content="summary"> 
  <meta name="twitter:site" content="@docsmsft"> 
  <meta name="twitter:title" content="Computer Vision API Java tutorial"> 
  <meta name="twitter:description" content="Explore a basic Java Swing app that uses the Computer Vision API in Microsoft Cognitive Services. Perform OCR, create thumbnails, and work with visual features in an image."> 
  <meta name="twitter:image" content="https://docs.microsoft.com/_themes/docs.theme/master/en-us/_themes/images/microsoft-header.png"> 
  <meta name="twitter:image:alt" content="Microsoft Logo"> 
  <meta name="breadcrumb_path" content="/azure/bread/toc.json"> 
  <meta name="ms.devlang" content="java"> 
  <meta name="author" content="v-royhar"> 
  <meta name="description" content="Explore a basic Java Swing app that uses the Computer Vision API in Microsoft Cognitive Services. Perform OCR, create thumbnails, and work with visual features in an image."> 
  <meta name="ms.author" content="v-royhar"> 
  <meta name="manager" content="julianik"> 
  <meta name="ms.topic" content="tutorial"> 
  <meta name="services" content="cognitive-services"> 
  <meta name="ms.service" content="cognitive-services"> 
  <meta name="ms.date" content="09/21/2017"> 
  <meta name="search.ms_sitename" content="Docs"> 
  <meta name="search.ms_docsetname" content="azure-documents"> 
  <meta name="version" content="0"> 
  <meta name="locale" content="en-us"> 
  <meta name="site_name" content="Docs"> 
  <meta name="search.ms_product" content="Azure"> 
  <meta name="depot_name" content="Azure.azure-documents"> 
  <meta name="updated_at" content="2017-09-25 10:07 PM"> 
  <meta name="gitcommit" content="https://github.com/MicrosoftDocs/azure-docs-pr/blob/59c1fd3c8ac048cafa2681962bd07bbf8912b076/articles/cognitive-services/Computer-vision/Tutorials/java-tutorial.md"> 
  <meta name="original_content_git_url" content="https://github.com/MicrosoftDocs/azure-docs-pr/blob/live/articles/cognitive-services/Computer-vision/Tutorials/java-tutorial.md"> 
  <meta name="document_id" content="7c2b38b8-e4c6-ae8d-898e-037ae7f8ec65"> 
  <meta name="pagetype" content="Conceptual"> 
  <meta name="toc_rel" content="../toc.json"> 
  <meta name="pdf_url_template" content="https://docs.microsoft.com/pdfstore/en-us/Azure.azure-documents/{branchName}{pdfName}"> 
  <meta name="word_count" content="4484"> 
  <meta name="scope" content="Azure"> 
  <link href="https://docs.microsoft.com/en-us/azure/cognitive-services/computer-vision/tutorials/java-tutorial" rel="canonical"> 
  <title>Computer Vision API Java tutorial | Microsoft Docs</title> 
  <link rel="stylesheet" href="/_themes/docs.theme/master/en-us/_themes/css/870b0825531b1b071dff.site.css "> 
  <link rel="stylesheet" href="/_themes/docs.theme/master/en-us/_themes/css/870b0825531b1b071dff.conceptual.css "> 
  <link rel="stylesheet" href="/_themes/docs.theme/master/en-us/_themes/global/css/azureHeader.css?v=4"> 
  <link rel="stylesheet" href="https://azure.microsoft.com/en-us/asset/menucss/"> 
  <script>
	var msDocs = {
		data:{
			contentLocale: 'en-us',
			contentDir: 'ltr',
			userLocale: 'en-us',
			userDir: 'ltr',
			pathToTheme: '/_themes/docs.theme/master/en-us/_themes/',
			pageTemplate: 'Conceptual',
			brand: 'azure',
			forceVersionPicker:false		},
		functions:{},
		settings:{
			extendBreadcrumb: false
		}
	};
	if (!('Promise' in window && 'resolve' in window.Promise && 'reject' in window.Promise && 'all' in window.Promise && 'race' in window.Promise)) {
		document.write('<script src="/_themes/docs.theme/master/en-us/_themes/global/js/bluebird.min.js"><\/script>');
	}
	</script> 
  <!--[if lt IE 9]>
		<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.12.4.min.js"></script>
		<script src="/_themes/docs.theme/master/en-us/_themes/global/js/polyfills/all.js"></script>
<script src="/_themes/docs.theme/master/en-us/_themes/global/js/azureHeader/respond_and_ie8Setup_combine.js"></script>	<![endif]--> 
  <!--[if gte IE 9]><!--> 
  <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.2.4.min.js"></script> 
  <!--<![endif]--> 
  <script>window.jQuery || document.write('<script src="/_themes/docs.theme/master/en-us/_themes/global/js/jquery/jquery-1.12.4.min.js"><\/script>')</script> 
  <script src="/_themes/docs.theme/master/en-us/_themes/global/js/global.min.js?v=263"></script> 
  <script src="/_themes/docs.theme/master/en-us/_themes/global/js/azureHeader/loader.js?v=4"></script> 
 </head> 
 <body> 
  <div id="lca-cookie-notification" class="cookieContainer"> 
  </div> 
  <div id="headerAreaHolder" class="az_h default" ms.pgarea="header" data-bi-name="header"> 
   <div class="azure-header_holder"> 
    <div class="azure-header"> 
     <header class="azure-header_temp"> 
      <div class="row column"> 
       <a href="https://azure.microsoft.com/en-us/" class="logo" title="Microsoft Azure"> 
        <svg x="0px" y="0px" width="165px" height="20px" viewbox="0 0 165 20"> 
         <path fill="#29A5DE" d="M18,19H16V7.1C16,6.2,16,5,16.1,3.7h0c-0.2,0.8-0.4,1.4-0.5,1.7L9.5,19h-1l-6-13.5c-0.2-0.4-0.3-1-0.5-1.8
							h0C2,4.4,2,5.5,2,7.1V19H0V1.3h2.7l5.4,12.3c0.4,0.9,0.7,1.7,0.8,2.1H9c0.4-1,0.6-1.7,0.9-2.2l5.5-12.3H18V19z" /> 
         <path fill="#29A5DE" d="M22.8,3.1c-0.4,0-0.7-0.1-0.9-0.4s-0.4-0.6-0.4-0.9s0.1-0.7,0.4-0.9c0.3-0.3,0.6-0.4,0.9-0.4
							c0.4,0,0.7,0.1,0.9,0.4c0.3,0.3,0.4,0.6,0.4,0.9c0,0.4-0.1,0.7-0.4,0.9C23.5,3,23.2,3.1,22.8,3.1z M23.8,19h-2V6.3h2V19z" /> 
         <path fill="#29A5DE" d="M35.8,18.4c-1,0.6-2.1,0.9-3.5,0.9c-1.8,0-3.3-0.6-4.4-1.8c-1.1-1.2-1.7-2.7-1.7-4.6c0-2.1,0.6-3.7,1.8-5
							C29.4,6.7,30.9,6,32.9,6C34,6,35,6.2,35.9,6.7v2.1c-0.9-0.7-1.9-1-3-1c-1.3,0-2.3,0.5-3.2,1.4c-0.8,0.9-1.2,2.1-1.2,3.6
							c0,1.5,0.4,2.6,1.2,3.5c0.8,0.9,1.8,1.3,3.1,1.3c1.1,0,2.1-0.4,3.1-1.1V18.4z" /> 
         <path fill="#29A5DE" d="M44.9,8.4C44.5,8.1,44,8,43.3,8c-0.9,0-1.6,0.4-2.2,1.2c-0.6,0.8-0.9,1.9-0.9,3.3V19h-2V6.3h2v2.6h0
							c0.3-0.9,0.7-1.6,1.3-2.1c0.6-0.5,1.3-0.7,2-0.7c0.5,0,0.9,0.1,1.2,0.2V8.4z" /> 
         <path fill="#29A5DE" d="M51.4,19.3c-1.9,0-3.4-0.6-4.5-1.8c-1.1-1.2-1.7-2.7-1.7-4.7c0-2.1,0.6-3.8,1.7-5S49.7,6,51.7,6
							c1.9,0,3.4,0.6,4.4,1.7c1.1,1.2,1.6,2.8,1.6,4.8c0,2-0.6,3.6-1.7,4.8C54.8,18.6,53.3,19.3,51.4,19.3z M51.5,7.7
							c-1.3,0-2.3,0.4-3.1,1.3c-0.8,0.9-1.1,2.1-1.1,3.7c0,1.5,0.4,2.7,1.1,3.5c0.8,0.9,1.8,1.3,3.1,1.3c1.3,0,2.3-0.4,3-1.3
							c0.7-0.8,1.1-2,1.1-3.6c0-1.6-0.4-2.8-1.1-3.6C53.8,8.2,52.8,7.7,51.5,7.7z" /> 
         <path fill="#29A5DE" d="M59.5,18.5v-2.2c1.1,0.8,2.3,1.2,3.6,1.2c1.8,0,2.7-0.6,2.7-1.8c0-0.3-0.1-0.6-0.2-0.9
							c-0.2-0.2-0.4-0.4-0.6-0.6c-0.3-0.2-0.6-0.3-0.9-0.5c-0.3-0.1-0.7-0.3-1.1-0.4c-0.6-0.2-1-0.4-1.5-0.7c-0.4-0.2-0.8-0.5-1.1-0.8
							c-0.3-0.3-0.5-0.6-0.6-1c-0.1-0.4-0.2-0.8-0.2-1.3c0-0.6,0.1-1.1,0.4-1.6C60.2,7.7,60.5,7.3,61,7c0.5-0.3,1-0.5,1.5-0.7
							C63.1,6.1,63.7,6,64.3,6c1.1,0,2.1,0.2,2.9,0.6v2c-0.9-0.6-2-0.9-3.2-0.9c-0.4,0-0.7,0-1,0.1c-0.3,0.1-0.6,0.2-0.8,0.4
							c-0.2,0.2-0.4,0.3-0.5,0.6c-0.1,0.2-0.2,0.5-0.2,0.7c0,0.3,0.1,0.6,0.2,0.8c0.1,0.2,0.3,0.4,0.5,0.6c0.2,0.2,0.5,0.3,0.8,0.5
							c0.3,0.1,0.7,0.3,1.1,0.5c0.6,0.2,1.1,0.4,1.5,0.7c0.4,0.2,0.8,0.5,1.1,0.8c0.3,0.3,0.6,0.6,0.7,1c0.2,0.4,0.3,0.8,0.3,1.3
							c0,0.6-0.1,1.2-0.4,1.6c-0.3,0.5-0.6,0.8-1.1,1.1c-0.5,0.3-1,0.5-1.6,0.7c-0.6,0.1-1.2,0.2-1.9,0.2C61.6,19.3,60.4,19,59.5,18.5z" /> 
         <path fill="#29A5DE" d="M75.6,19.3c-1.9,0-3.4-0.6-4.5-1.8c-1.1-1.2-1.7-2.7-1.7-4.7c0-2.1,0.6-3.8,1.7-5C72.4,6.6,73.9,6,75.9,6
							c1.9,0,3.4,0.6,4.4,1.7c1.1,1.2,1.6,2.8,1.6,4.8c0,2-0.6,3.6-1.7,4.8C79,18.6,77.5,19.3,75.6,19.3z M75.7,7.7
							c-1.3,0-2.3,0.4-3.1,1.3c-0.8,0.9-1.1,2.1-1.1,3.7c0,1.5,0.4,2.7,1.1,3.5c0.8,0.9,1.8,1.3,3.1,1.3c1.3,0,2.3-0.4,3-1.3
							c0.7-0.8,1.1-2,1.1-3.6c0-1.6-0.4-2.8-1.1-3.6C78.1,8.2,77,7.7,75.7,7.7z" /> 
         <path fill="#29A5DE" d="M97.6,8.1V6.3h-3.2V2.6l-2,0.7v3.1h-2.6h-1.5h-1.4V4.4c0-1.8,0.7-2.7,2.1-2.7c0.5,0,0.9,0.1,1.3,0.3V0.2
							C89.9,0.1,89.4,0,88.8,0c-1.1,0-2.1,0.4-2.9,1.2c-0.8,0.8-1.1,1.8-1.1,3.1v2h-2.2v1.7h2.2V19h2V8.1h1.4h1.5h2.6v7.5
							c0,2.5,1.1,3.7,3.3,3.7c0.8,0,1.4-0.1,1.9-0.4v-1.7c-0.4,0.3-0.8,0.4-1.3,0.4c-0.7,0-1.1-0.2-1.4-0.5c-0.3-0.4-0.4-1-0.4-1.8V8.1
							H97.6z" /> 
         <path fill="#29A5DE" d="M119.9,19h-2.3l-1.9-5h-7.5l-1.8,5h-2.3L111,1.3h2.1L119.9,19z M115.1,12.1l-2.8-7.5
							c-0.1-0.2-0.2-0.6-0.3-1.2h0c-0.1,0.5-0.2,0.9-0.3,1.2l-2.7,7.5H115.1z" /> 
         <path fill="#29A5DE" d="M130.4,6.9l-7.5,10.3h7.4V19H120v-0.6l7.5-10.3h-6.8V6.3h9.7V6.9z" /> 
         <path fill="#29A5DE" d="M142.6,19h-2v-2h0c-0.8,1.5-2.1,2.3-3.9,2.3c-3,0-4.5-1.8-4.5-5.4V6.3h2v7.2c0,2.7,1,4,3.1,4
							c1,0,1.8-0.4,2.4-1.1c0.6-0.7,1-1.7,1-2.9V6.3h2V19z" /> 
         <path fill="#29A5DE" d="M152.6,8.4c-0.4-0.3-0.9-0.4-1.5-0.4c-0.9,0-1.6,0.4-2.2,1.2c-0.6,0.8-0.9,1.9-0.9,3.3V19h-2V6.3h2v2.6h0
							c0.3-0.9,0.7-1.6,1.3-2.1c0.6-0.5,1.3-0.7,2-0.7c0.5,0,0.9,0.1,1.2,0.2V8.4z" /> 
         <path fill="#29A5DE" d="M164,13.1h-8.9c0,1.4,0.4,2.5,1.1,3.3c0.7,0.8,1.7,1.1,3,1.1c1.4,0,2.7-0.5,3.9-1.4V18
							c-1.1,0.8-2.6,1.2-4.4,1.2c-1.8,0-3.2-0.6-4.2-1.7c-1-1.1-1.5-2.8-1.5-4.8c0-2,0.6-3.6,1.7-4.8c1.1-1.2,2.5-1.9,4.1-1.9
							s2.9,0.5,3.8,1.6s1.4,2.6,1.4,4.4V13.1z M161.9,11.4c0-1.2-0.3-2.1-0.8-2.7c-0.6-0.6-1.3-1-2.3-1c-1,0-1.8,0.3-2.4,1
							c-0.7,0.7-1.1,1.6-1.2,2.7H161.9z" /> 
        </svg> </a> 
       <a href="#" class="small-search" onclick="return false"><span class="icon icon-search"></span></a> 
      </div> 
     </header> 
    </div> 
   </div> 
  </div> 
  <div class="container mainContainer" lang="en-us" dir="ltr" ms.pgarea="body" data-bi-name="body"> 
   <main role="main" ms.cmpgrp="content" data-bi-name="content"> 
    <div id="main"> 
     <h1 id="computer-vision-api-java-tutorial" sourcefile="articles/cognitive-services/Computer-vision/Tutorials/java-tutorial.md" sourcestartlinenumber="15" sourceendlinenumber="15">Computer Vision API Java tutorial</h1> 
     <div class="metadata loading" ms.cmpgrp="page info" data-bi-name="page info"> 
      <div> 
       <time class="date" datetime="9/21/2017 12:00:00 AM">2017-9-21</time> 
       <span class="reading-time">22 minutes to read</span> 
       <span class="contributors-text">Contributors</span> 
       <ul class="contributors" ms.cmpgrp="contributors" data-bi-name="contributors"> 
        <li><a href="https://github.com/v-royhar" title="Roy Harper" ms.cmpnm="contributorprofile" data-bi-name="contributorprofile"><img src="https://github.com/v-royhar.png?size=16" alt="Roy Harper"></a></li> 
       </ul> 
      </div> 
      <nav id="center-doc-outline" class="doc-outline" ms.cmpgrp="intopic toc" data-bi-name="intopic toc" role="navigation" aria-label="On page navigation"> 
       <h3>In this article</h3> 
      </nav> 
     </div> 
     <div>
      <div class="content"> 
       <p>This tutorial shows the features of the Microsoft Cognitive Services Computer Vision REST API.</p> 
       <p>Explore a Java Swing application that uses the Computer Vision REST API to perform optical character recognition (OCR), create smart-cropped thumbnails, plus detect, categorize, tag, and describe visual features, including faces, in an image. This example lets you submit an image URL for analysis or processing. You can use this open source example as a template for building your own app in Java to use the Computer Vision REST API.</p> 
       <p>This tutorial will cover how to use Computer Vision to:</p> 
       <div class="checklist">
        <ul> 
         <li>Analyze an image</li> 
         <li>Identify a natural or artificial landmark in an image</li> 
         <li>Identify a celebrity in an image</li> 
         <li>Create a quality thumbnail from an image</li> 
         <li>Read printed text in an image</li> 
         <li>Read handwritten text in an image</li> 
        </ul> 
       </div> 
       <p>The Java Swing form application has already been written, but has no functionality. In this tutorial, you add the code specific to the Computer Vision REST API to complete the application's functionality.</p> 
       <h2 id="prerequisites">Prerequisites</h2> 
       <h3 id="platform-requirements">Platform requirements</h3> 
       <p>This tutorial has been developed using the NetBeans IDE. Specifically, the <strong>Java SE</strong> version of NetBeans, which you can <a href="https://netbeans.org/downloads/index.html" data-linktype="external">download here</a>.</p> 
       <h3 id="subscribe-to-computer-vision-api-and-get-a-subscription-key">Subscribe to Computer Vision API and get a subscription key</h3> 
       <p>Before creating the example, you must subscribe to Computer Vision API which is part of the Microsoft Cognitive Services. For subscription and key management details, see <a href="https://azure.microsoft.com/try/cognitive-services/" data-linktype="external">Subscriptions</a>. Both the primary and secondary keys are valid to use in this tutorial. </p> 
       <h2 id="download-the-tutorial-project">Download the tutorial project</h2> 
       <ol> 
        <li>Go to the <a href="https://github.com/Azure-Samples/cognitive-services-java-computer-vision-tutorial" data-linktype="external">Cognitive Services Java Computer Vision Tutorial</a> repository.</li> 
        <li>Click the <strong>Clone or download</strong> button.</li> 
        <li>Click <strong>Download ZIP</strong> to download a .zip file of the tutorial project.</li> 
       </ol> 
       <p>There is no need to extract the contents of the .zip file because NetBeans imports the project from the .zip file.</p> 
       <h2 id="import-the-tutorial-project">Import the tutorial project</h2> 
       <p>Import the <strong>cognitive-services-java-computer-vision-tutorial-master.zip</strong> file into NetBeans.</p> 
       <ol> 
        <li>In NetBeans, click <strong>File</strong> &gt; <strong>Import Project</strong> &gt; <strong>From ZIP...</strong>. The <strong>Import Project(s) from ZIP</strong> dialog box appears.</li> 
        <li>In the <strong>ZIP File:</strong> field, click the <strong>Browse</strong> button to locate the <strong>cognitive-services-java-computer-vision-tutorial-master.zip</strong> file, then click <strong>Open</strong>.</li> 
        <li>Click <strong>Import</strong> from the <strong>Import Project(s) from ZIP</strong> dialog box.</li> 
        <li>In the <strong>Projects</strong> panel, expand <strong>ComputerVision</strong> &gt; <strong>Source Packages</strong> &gt; <strong>&lt;default package&gt;</strong>. Some versions of NetBeans use <strong>src</strong> instead of <strong>Source Packages</strong> &gt; <strong>&lt;default package&gt;</strong>. In that case, expand <strong>src</strong>.</li> 
        <li>Double-click <strong>MainFrame.java</strong> to load the file into the NetBeans editor. The <strong>Design</strong> tab of the <strong>MainFrame.java</strong> file appears.</li> 
        <li>Click the <strong>Source</strong> tab to view the Java source code.</li> 
       </ol> 
       <h2 id="build-and-run-the-tutorial-project">Build and run the tutorial project</h2> 
       <ol> 
        <li><p>Press <strong>F6</strong> to build and run the tutorial application.</p> <p> In the tutorial application, click a tab to bring up the pane for that feature. The buttons have empty methods, so they do nothing.</p> <p> At the bottom of the window are the fields <strong>Subscription Key</strong> and <strong>Subscription Region</strong>. These fields must be filled with a valid subscription key and the correct region for that subscription key. To obtain a subscription key, see <a href="https://azure.microsoft.com/try/cognitive-services/" data-linktype="external">Subscriptions</a>. If you obtained your subscription key from the free trial at that link, then the default <strong>westcentralus</strong> is the correct region for your subscription keys.</p> </li> 
        <li><p>Exit the tutorial application.</p> </li> 
       </ol> 
       <h2 id="add-the-tutorial-code">Add the tutorial code</h2> 
       <p>The Java Swing application is set up with six tabs. Each tab demonstrates a different function of Computer Vision (analyze, OCR, etc). The six tutorial sections do not have interdependencies, so you can add one section, all six sections, or only a section or two. And you can add the sections in any order.</p> 
       <p>Let's get started.</p> 
       <h2 id="analyze-an-image">Analyze an image</h2> 
       <p>The Analyze feature of Computer Vision analyzes an image for more than 2,000 recognizable objects, living beings, scenery, and actions. Once the analysis is complete, Analyze returns a JSON object that describes the image with descriptive tags, color analysis, captions, and more.</p> 
       <p>To complete the Analyze feature of the tutorial application, perform the following steps:</p> 
       <h3 id="analyze-step-1-add-the-event-handler-code-for-the-form-button">Analyze step 1: Add the event handler code for the form button</h3> 
       <p>The <strong>analyzeImageButtonActionPerformed</strong> event handler method clears the form, displays the image specified in the URL, then calls the <strong>AnalyzeImage</strong> method to analyze the image. When <strong>AnalyzeImage</strong> returns, the method displays the formatted JSON response in the <strong>Response</strong> text area, extracts the first caption from the <strong>JSONObject</strong>, and displays the caption and the confidence level that the caption is correct.</p> 
       <p>Copy and paste the following code into the <strong>analyzeImageButtonActionPerformed</strong> method.</p> 
       <div class="NOTE">
        <h5>Note</h5>
        <p>NetBeans won't let you paste to the method definition line (<code>private void</code>) or to the closing curly brace of that method. To copy the code, copy the lines between the method definition and the closing curly brace, and paste them over the contents of the method.</p> 
       </div> 
       <pre><code class="lang-java">    private void analyzeImageButtonActionPerformed(java.awt.event.ActionEvent evt) {
        URL analyzeImageUrl;

        // Clear out the previous image, response, and caption, if any.
        analyzeImage.setIcon(new ImageIcon());
        analyzeCaptionLabel.setText("");
        analyzeResponseTextArea.setText("");

        // Display the image specified in the text box.
        try {
            analyzeImageUrl = new URL(analyzeImageUriTextBox.getText());
            BufferedImage bImage = ImageIO.read(analyzeImageUrl);
            scaleAndShowImage(bImage, analyzeImage);
        } catch(IOException e) {
            analyzeResponseTextArea.setText("Error loading Analyze image: " + e.getMessage());
            return;
        }

        // Analyze the image.
        JSONObject jsonObj = AnalyzeImage(analyzeImageUrl.toString());

        // A return of null indicates failure.
        if (jsonObj == null) {
            return;
        }

        // Format and display the JSON response.
        analyzeResponseTextArea.setText(jsonObj.toString(2));

        // Extract the text and confidence from the first caption in the description object.
        if (jsonObj.has("description") &amp;&amp; jsonObj.getJSONObject("description").has("captions")) {

            JSONObject jsonCaption = jsonObj.getJSONObject("description").getJSONArray("captions").getJSONObject(0);

            if (jsonCaption.has("text") &amp;&amp; jsonCaption.has("confidence")) {

                analyzeCaptionLabel.setText("Caption: " + jsonCaption.getString("text") + 
                        " (confidence: " + jsonCaption.getDouble("confidence") + ").");
            }
        }
    }
</code></pre>
       <h3 id="analyze-step-2-add-the-wrapper-for-the-rest-api-call">Analyze step 2: Add the wrapper for the REST API call</h3> 
       <p>The <strong>AnalyzeImage</strong> method wraps the REST API call to analyze an image. The method returns a <strong>JSONObject</strong> describing the image, or <strong>null</strong> if there was an error.</p> 
       <p>Copy and paste the <strong>AnalyzeImage</strong> method to just underneath the <strong>analyzeImageButtonActionPerformed</strong> method.</p> 
       <pre><code class="lang-java">    /**
     * Encapsulates the Microsoft Cognitive Services REST API call to analyze an image.
     * @param imageUrl: The string URL of the image to analyze.
     * @return: A JSONObject describing the image, or null if a runtime error occurs.
     */
    private JSONObject AnalyzeImage(String imageUrl) {
        try (CloseableHttpClient httpclient = HttpClientBuilder.create().build())
        {
            // Create the URI to access the REST API call for Analyze Image.
            String uriString = uriBasePreRegion + 
                    String.valueOf(subscriptionRegionComboBox.getSelectedItem()) + 
                    uriBasePostRegion + uriBaseAnalyze;
            URIBuilder builder = new URIBuilder(uriString);

            // Request parameters. All of them are optional.
            builder.setParameter("visualFeatures", "Categories,Description,Color,Adult");
            builder.setParameter("language", "en");

            // Prepare the URI for the REST API call.
            URI uri = builder.build();
            HttpPost request = new HttpPost(uri);

            // Request headers.
            request.setHeader("Content-Type", "application/json");
            request.setHeader("Ocp-Apim-Subscription-Key", subscriptionKeyTextField.getText());

            // Request body.
            StringEntity reqEntity = new StringEntity("{\"url\":\"" + imageUrl + "\"}");
            request.setEntity(reqEntity);

            // Execute the REST API call and get the response entity.
            HttpResponse response = httpclient.execute(request);
            HttpEntity entity = response.getEntity();

            // If we got a response, parse it and display it.
            if (entity != null)
            {
                // Return the JSONObject.
                String jsonString = EntityUtils.toString(entity);
                return new JSONObject(jsonString);
            } else {
                // No response. Return null.
                return null;
            }
        }
        catch (Exception e)
        {
            // Display error message.
            System.out.println(e.getMessage());
            return null;
        }
    }
</code></pre>
       <h3 id="analyze-step-3-run-the-application">Analyze step 3: Run the application</h3> 
       <p>Press <strong>F6</strong> to run the application. Put your subscription key into the <strong>Subscription Key</strong> field and verify that you are using the correct region in <strong>Subscription Region</strong>. Enter a URL to an image to analyze, then click the <strong>Analyze Image</strong> button to analyze an image and see the result.</p> 
       <h2 id="recognize-a-landmark">Recognize a landmark</h2> 
       <p>The Landmark feature of Computer Vision analyzes an image for natural and artificial landmarks, such as mountains or famous buildings. Once the analysis is complete, Landmark returns a JSON object that identifies the landmarks found in the image.</p> 
       <p>To complete the Landmark feature of the tutorial application, perform the following steps:</p> 
       <h3 id="landmark-step-1-add-the-event-handler-code-for-the-form-button">Landmark step 1: Add the event handler code for the form button</h3> 
       <p>The <strong>landmarkImageButtonActionPerformed</strong> event handler method clears the form, displays the image specified in the URL, then calls the <strong>LandmarkImage</strong> method to analyze the image. When <strong>LandmarkImage</strong> returns, the method displays the formatted JSON response in the <strong>Response</strong> text area, then extracts the first landmark name from the <strong>JSONObject</strong> and displays it on the window along with the confidence level that the landmark was identified correctly.</p> 
       <p>Copy and paste the following code into the <strong>landmarkImageButtonActionPerformed</strong> method.</p> 
       <div class="NOTE">
        <h5>Note</h5>
        <p>NetBeans won't let you paste to the method definition line (<code>private void</code>) or to the closing curly brace of that method. To copy the code, copy the lines between the method definition and the closing curly brace, and paste them over the contents of the method.</p> 
       </div> 
       <pre><code class="lang-java">    private void landmarkImageButtonActionPerformed(java.awt.event.ActionEvent evt) {
        URL landmarkImageUrl;

        // Clear out the previous image, response, and caption, if any.
        landmarkImage.setIcon(new ImageIcon());
        landmarkCaptionLabel.setText("");
        landmarkResponseTextArea.setText("");

        // Display the image specified in the text box.
        try {
            landmarkImageUrl = new URL(landmarkImageUriTextBox.getText());
            BufferedImage bImage = ImageIO.read(landmarkImageUrl);
            scaleAndShowImage(bImage, landmarkImage);
        } catch(IOException e) {
            landmarkResponseTextArea.setText("Error loading Landmark image: " + e.getMessage());
            return;
        }

        // Identify the landmark in the image.
        JSONObject jsonObj = LandmarkImage(landmarkImageUrl.toString());

        // A return of null indicates failure.
        if (jsonObj == null) {
            return;
        }

        // Format and display the JSON response.
        landmarkResponseTextArea.setText(jsonObj.toString(2));

        // Extract the text and confidence from the first caption in the description object.
        if (jsonObj.has("result") &amp;&amp; jsonObj.getJSONObject("result").has("landmarks")) {

            JSONObject jsonCaption = jsonObj.getJSONObject("result").getJSONArray("landmarks").getJSONObject(0);

            if (jsonCaption.has("name") &amp;&amp; jsonCaption.has("confidence")) {

                landmarkCaptionLabel.setText("Caption: " + jsonCaption.getString("name") + 
                        " (confidence: " + jsonCaption.getDouble("confidence") + ").");
            }
        }
    }
</code></pre>
       <h3 id="landmark-step-2-add-the-wrapper-for-the-rest-api-call">Landmark step 2: Add the wrapper for the REST API call</h3> 
       <p>The <strong>LandmarkImage</strong> method wraps the REST API call to analyze an image. The method returns a <strong>JSONObject</strong> describing the landmarks found in the image, or <strong>null</strong> if there was an error.</p> 
       <p>Copy and paste the <strong>LandmarkImage</strong> method to just underneath the <strong>landmarkImageButtonActionPerformed</strong> method.</p> 
       <pre><code class="lang-java">     /**
     * Encapsulates the Microsoft Cognitive Services REST API call to identify a landmark in an image.
     * @param imageUrl: The string URL of the image to process.
     * @return: A JSONObject describing the image, or null if a runtime error occurs.
     */
    private JSONObject LandmarkImage(String imageUrl) {
        try (CloseableHttpClient httpclient = HttpClientBuilder.create().build())
        {
            // Create the URI to access the REST API call to identify a Landmark in an image.
            String uriString = uriBasePreRegion + 
                    String.valueOf(subscriptionRegionComboBox.getSelectedItem()) + 
                    uriBasePostRegion + uriBaseLandmark;
            URIBuilder builder = new URIBuilder(uriString);

            // Request parameters. All of them are optional.
            builder.setParameter("visualFeatures", "Categories,Description,Color");
            builder.setParameter("language", "en");

            // Prepare the URI for the REST API call.
            URI uri = builder.build();
            HttpPost request = new HttpPost(uri);

            // Request headers.
            request.setHeader("Content-Type", "application/json");
            request.setHeader("Ocp-Apim-Subscription-Key", subscriptionKeyTextField.getText());

            // Request body.
            StringEntity reqEntity = new StringEntity("{\"url\":\"" + imageUrl + "\"}");
            request.setEntity(reqEntity);

            // Execute the REST API call and get the response entity.
            HttpResponse response = httpclient.execute(request);
            HttpEntity entity = response.getEntity();

            // If we got a response, parse it and display it.
            if (entity != null)
            {
                // Return the JSONObject.
                String jsonString = EntityUtils.toString(entity);
                return new JSONObject(jsonString);
            } else {
                // No response. Return null.
                return null;
            }
        }
        catch (Exception e)
        {
            // Display error message.
            System.out.println(e.getMessage());
            return null;
        }
    }
</code></pre>
       <h3 id="landmark-step-3-run-the-application">Landmark step 3: Run the application</h3> 
       <p>Press <strong>F6</strong> to run the application. Put your subscription key into the <strong>Subscription Key</strong> field and verify that you are using the correct region in <strong>Subscription Region</strong>. Click the <strong>Landmark</strong> tab, enter a URL to an image of a landmark, then click the <strong>Analyze Image</strong> button to analyze an image and see the result.</p> 
       <h2 id="recognize-celebrities">Recognize celebrities</h2> 
       <p>The Celebrities feature of Computer Vision analyzes an image for famous people. Once the analysis is complete, Celebrities returns a JSON object that identifies the Celebrities found in the image.</p> 
       <p>To complete the Celebrities feature of the tutorial application, perform the following steps:</p> 
       <h3 id="celebrities-step-1-add-the-event-handler-code-for-the-form-button">Celebrities step 1: Add the event handler code for the form button</h3> 
       <p>The <strong>celebritiesImageButtonActionPerformed</strong> event handler method clears the form, displays the image specified in the URL, then calls the <strong>CelebritiesImage</strong> method to analyze the image. When <strong>CelebritiesImage</strong> returns, the method displays the formatted JSON response in the <strong>Response</strong> text area, then extracts the first celebrity name from the <strong>JSONObject</strong> and displays the name on the window along with the confidence level that the celebrity was identified correctly.</p> 
       <p>Copy and paste the following code into the <strong>celebritiesImageButtonActionPerformed</strong> method.</p> 
       <div class="NOTE">
        <h5>Note</h5>
        <p>NetBeans won't let you paste to the method definition line (<code>private void</code>) or to the closing curly brace of that method. To copy the code, copy the lines between the method definition and the closing curly brace, and paste them over the contents of the method.</p> 
       </div> 
       <pre><code class="lang-java">    private void celebritiesImageButtonActionPerformed(java.awt.event.ActionEvent evt) {
        URL celebritiesImageUrl;

        // Clear out the previous image, response, and caption, if any.
        celebritiesImage.setIcon(new ImageIcon());
        celebritiesCaptionLabel.setText("");
        celebritiesResponseTextArea.setText("");

        // Display the image specified in the text box.
        try {
            celebritiesImageUrl = new URL(celebritiesImageUriTextBox.getText());
            BufferedImage bImage = ImageIO.read(celebritiesImageUrl);
            scaleAndShowImage(bImage, celebritiesImage);
        } catch(IOException e) {
            celebritiesResponseTextArea.setText("Error loading Celebrity image: " + e.getMessage());
            return;
        }

        // Identify the celebrities in the image.
        JSONObject jsonObj = CelebritiesImage(celebritiesImageUrl.toString());

        // A return of null indicates failure.
        if (jsonObj == null) {
            return;
        }

        // Format and display the JSON response.
        celebritiesResponseTextArea.setText(jsonObj.toString(2));

        // Extract the text and confidence from the first caption in the description object.
        if (jsonObj.has("result") &amp;&amp; jsonObj.getJSONObject("result").has("celebrities")) {

            JSONObject jsonCaption = jsonObj.getJSONObject("result").getJSONArray("celebrities").getJSONObject(0);

            if (jsonCaption.has("name") &amp;&amp; jsonCaption.has("confidence")) {

                celebritiesCaptionLabel.setText("Caption: " + jsonCaption.getString("name") + 
                        " (confidence: " + jsonCaption.getDouble("confidence") + ").");
            }
        }
    }
</code></pre>
       <h3 id="celebrities-step-2-add-the-wrapper-for-the-rest-api-call">Celebrities step 2: Add the wrapper for the REST API call</h3> 
       <p>The <strong>CelebritiesImage</strong> method wraps the REST API call to analyze an image. The method returns a <strong>JSONObject</strong> describing the celebrities found in the image, or <strong>null</strong> if there was an error.</p> 
       <p>Copy and paste the <strong>CelebritiesImage</strong> method to just underneath the <strong>celebritiesImageButtonActionPerformed</strong> method.</p> 
       <pre><code class="lang-java">     /**
     * Encapsulates the Microsoft Cognitive Services REST API call to identify celebrities in an image.
     * @param imageUrl: The string URL of the image to process.
     * @return: A JSONObject describing the image, or null if a runtime error occurs.
     */
    private JSONObject CelebritiesImage(String imageUrl) {
        try (CloseableHttpClient httpclient = HttpClientBuilder.create().build())
        {
            // Create the URI to access the REST API call to identify celebrities in an image.
            String uriString = uriBasePreRegion + 
                    String.valueOf(subscriptionRegionComboBox.getSelectedItem()) + 
                    uriBasePostRegion + uriBaseCelebrities;
            URIBuilder builder = new URIBuilder(uriString);

            // Request parameters. All of them are optional.
            builder.setParameter("visualFeatures", "Categories,Description,Color");
            builder.setParameter("language", "en");

            // Prepare the URI for the REST API call.
            URI uri = builder.build();
            HttpPost request = new HttpPost(uri);

            // Request headers.
            request.setHeader("Content-Type", "application/json");
            request.setHeader("Ocp-Apim-Subscription-Key", subscriptionKeyTextField.getText());

            // Request body.
            StringEntity reqEntity = new StringEntity("{\"url\":\"" + imageUrl + "\"}");
            request.setEntity(reqEntity);

            // Execute the REST API call and get the response entity.
            HttpResponse response = httpclient.execute(request);
            HttpEntity entity = response.getEntity();

            // If we got a response, parse it and display it.
            if (entity != null)
            {
                // Return the JSONObject.
                String jsonString = EntityUtils.toString(entity);
                return new JSONObject(jsonString);
            } else {
                // No response. Return null.
                return null;
            }
        }
        catch (Exception e)
        {
            // Display error message.
            System.out.println(e.getMessage());
            return null;
        }
    }
</code></pre>
       <h3 id="celebrities-step-3-run-the-application">Celebrities step 3: Run the application</h3> 
       <p>Press <strong>F6</strong> to run the application. Put your subscription key into the <strong>Subscription Key</strong> field and verify that you are using the correct region in <strong>Subscription Region</strong>. Click the <strong>Celebrities</strong> tab, enter a URL to an image of a celebrity, then click the <strong>Analyze Image</strong> button to analyze an image and see the result.</p> 
       <h2 id="intelligently-generate-a-thumbnail">Intelligently generate a thumbnail</h2> 
       <p>The Thumbnail feature of Computer Vision generates a thumnail from an image. By using the <strong>Smart Crop</strong> feature, the Thumbnail feature will identify the area of interest in an image and center the thumnail on this area, to generate more aesthetically pleasing thumbnail images.</p> 
       <p>To complete the Thumbnail feature of the tutorial application, perform the following steps:</p> 
       <h3 id="thumbnail-step-1-add-the-event-handler-code-for-the-form-button">Thumbnail step 1: Add the event handler code for the form button</h3> 
       <p>The <strong>thumbnailImageButtonActionPerformed</strong> event handler method clears the form, displays the image specified in the URL, then calls the <strong>getThumbnailImage</strong> method to create the thumbnail. When <strong>getThumbnailImage</strong> returns, the method displays the generated thumbnail.</p> 
       <p>Copy and paste the following code into the <strong>thumbnailImageButtonActionPerformed</strong> method.</p> 
       <div class="NOTE">
        <h5>Note</h5>
        <p>NetBeans won't let you paste to the method definition line (<code>private void</code>) or to the closing curly brace of that method. To copy the code, copy the lines between the method definition and the closing curly brace, and paste them over the contents of the method.</p> 
       </div> 
       <pre><code class="lang-java">    private void thumbnailImageButtonActionPerformed(java.awt.event.ActionEvent evt) {
        URL thumbnailImageUrl;
        JSONObject jsonError[] = new JSONObject[1];

        // Clear out the previous image, response, and thumbnail, if any.
        thumbnailSourceImage.setIcon(new ImageIcon());
        thumbnailResponseTextArea.setText("");
        thumbnailImage.setIcon(new ImageIcon());

        // Display the image specified in the text box.
        try {
            thumbnailImageUrl = new URL(thumbnailImageUriTextBox.getText());
            BufferedImage bImage = ImageIO.read(thumbnailImageUrl);
            scaleAndShowImage(bImage, thumbnailSourceImage);
        } catch(IOException e) {
            thumbnailResponseTextArea.setText("Error loading image to thumbnail: " + e.getMessage());
            return;
        }

        // Get the thumbnail for the image.
        BufferedImage thumbnail = getThumbnailImage(thumbnailImageUrl.toString(), jsonError);

        // A non-null value indicates error.
        if (jsonError[0] != null) {
            // Format and display the JSON error.
            thumbnailResponseTextArea.setText(jsonError[0].toString(2));
            return;
        }

        // Display the thumbnail.
        if (thumbnail != null) {
            scaleAndShowImage(thumbnail, thumbnailImage);
        }
    }
</code></pre>
       <h3 id="thumbnail-step-2-add-the-wrapper-for-the-rest-api-call">Thumbnail step 2: Add the wrapper for the REST API call</h3> 
       <p>The <strong>getThumbnailImage</strong> method wraps the REST API call to analyze an image. The method returns a <strong>BufferedImage</strong> that contains the thumbnail, or <strong>null</strong> if there was an error. The error message will be returned in the first element of the <strong>jsonError</strong> string array.</p> 
       <p>Copy and paste the following <strong>getThumbnailImage</strong> method to just underneath the <strong>thumbnailImageButtonActionPerformed</strong> method.</p> 
       <pre><code class="lang-java">     /**
     * Encapsulates the Microsoft Cognitive Services REST API call to create a thumbnail for an image.
     * @param imageUrl: The string URL of the image to process.
     * @return: A BufferedImage containing the thumbnail, or null if a runtime error occurs. In the case
     * of an error, the error message will be returned in the first element of the jsonError string array.
     */
    private BufferedImage getThumbnailImage(String imageUrl, JSONObject[] jsonError) {
        try (CloseableHttpClient httpclient = HttpClientBuilder.create().build())
        {
            // Create the URI to access the REST API call to identify celebrities in an image.
            String uriString = uriBasePreRegion + 
                    String.valueOf(subscriptionRegionComboBox.getSelectedItem()) + 
                    uriBasePostRegion + uriBaseThumbnail;
            URIBuilder uriBuilder = new URIBuilder(uriString);

            // Request parameters.
            uriBuilder.setParameter("width", "100");
            uriBuilder.setParameter("height", "150");
            uriBuilder.setParameter("smartCropping", "true");

            // Prepare the URI for the REST API call.
            URI uri = uriBuilder.build();
            HttpPost request = new HttpPost(uri);

            // Request headers.
            request.setHeader("Content-Type", "application/json");
            request.setHeader("Ocp-Apim-Subscription-Key", subscriptionKeyTextField.getText());

            // Request body.
            StringEntity requestEntity = new StringEntity("{\"url\":\"" + imageUrl + "\"}");
            request.setEntity(requestEntity);

            // Execute the REST API call and get the response entity.
            HttpResponse response = httpclient.execute(request);
            HttpEntity entity = response.getEntity();

            // Check for success.
            if (response.getStatusLine().getStatusCode() == 200)
            {
                // Return the thumbnail.
                return ImageIO.read(entity.getContent());
            }
            else
            {
                // Format and display the JSON error message.
                String jsonString = EntityUtils.toString(entity);
                jsonError[0] = new JSONObject(jsonString);
                return null;
            }
        }
        catch (Exception e)
        {
            String errorMessage = e.getMessage();
            System.out.println(errorMessage);
            jsonError[0] = new JSONObject(errorMessage);
            return null;
        }
    }
</code></pre>
       <h3 id="thumbnail-step-3-run-the-application">Thumbnail step 3: Run the application</h3> 
       <p>Press <strong>F6</strong> to run the application. Put your subscription key into the <strong>Subscription Key</strong> field and verify that you are using the correct region in <strong>Subscription Region</strong>. Click the <strong>Thumbnail</strong> tab, enter a URL to an image, then click the <strong>Generate Thumbnail</strong> button to analyze an image and see the result.</p> 
       <h2 id="read-printed-text-ocr">Read printed text (OCR)</h2> 
       <p>The Optical Character Recognition (OCR) feature of Computer Vision analyzes an image of printed text. After the analysis is complete, OCR returns a JSON object that contains the text and the location of the text in the image.</p> 
       <p>To complete the OCR feature of the tutorial application, perform the following steps:</p> 
       <h3 id="ocr-step-1-add-the-event-handler-code-for-the-form-button">OCR step 1: Add the event handler code for the form button</h3> 
       <p>The <strong>ocrImageButtonActionPerformed</strong> event handler method clears the form, displays the image specified in the URL, then calls the <strong>OcrImage</strong> method to analyze the image. When <strong>OcrImage</strong> returns, the method displays the detected text as formatted JSON in the <strong>Response</strong> text area.</p> 
       <p>Copy and paste the following code into the <strong>ocrImageButtonActionPerformed</strong> method.</p> 
       <div class="NOTE">
        <h5>Note</h5>
        <p>NetBeans won't let you paste to the method definition line (<code>private void</code>) or to the closing curly brace of that method. To copy the code, copy the lines between the method definition and the closing curly brace, and paste them over the contents of the method.</p> 
       </div> 
       <pre><code class="lang-java">    private void ocrImageButtonActionPerformed(java.awt.event.ActionEvent evt) {
        URL ocrImageUrl;

        // Clear out the previous image, response, and caption, if any.
        ocrImage.setIcon(new ImageIcon());
        ocrResponseTextArea.setText("");

        // Display the image specified in the text box.
        try {
            ocrImageUrl = new URL(ocrImageUriTextBox.getText());
            BufferedImage bImage = ImageIO.read(ocrImageUrl);
            scaleAndShowImage(bImage, ocrImage);
        } catch(IOException e) {
            ocrResponseTextArea.setText("Error loading OCR image: " + e.getMessage());
            return;
        }

        // Read the text in the image.
        JSONObject jsonObj = OcrImage(ocrImageUrl.toString());

        // A return of null indicates failure.
        if (jsonObj == null) {
            return;
        }

        // Format and display the JSON response.
        ocrResponseTextArea.setText(jsonObj.toString(2));
    }
</code></pre>
       <h3 id="ocr-step-2-add-the-wrapper-for-the-rest-api-call">OCR step 2: Add the wrapper for the REST API call</h3> 
       <p>The <strong>OcrImage</strong> method wraps the REST API call to analyze an image. The method returns a <strong>JSONObject</strong> of the JSON data returned from the call, or <strong>null</strong> if there was an error.</p> 
       <p>Copy and paste the following <strong>OcrImage</strong> method to just underneath the <strong>ocrImageButtonActionPerformed</strong> method.</p> 
       <pre><code class="lang-java">     /**
     * Encapsulates the Microsoft Cognitive Services REST API call to read text in an image.
     * @param imageUrl: The string URL of the image to process.
     * @return: A JSONObject describing the image, or null if a runtime error occurs.
     */
    private JSONObject OcrImage(String imageUrl) {
        try (CloseableHttpClient httpclient = HttpClientBuilder.create().build())
        {
            // Create the URI to access the REST API call to read text in an image.
            String uriString = uriBasePreRegion + 
                    String.valueOf(subscriptionRegionComboBox.getSelectedItem()) + 
                    uriBasePostRegion + uriBaseOcr;
            URIBuilder uriBuilder = new URIBuilder(uriString);

            // Request parameters.
            uriBuilder.setParameter("language", "unk");
            uriBuilder.setParameter("detectOrientation ", "true");

            // Prepare the URI for the REST API call.
            URI uri = uriBuilder.build();
            HttpPost request = new HttpPost(uri);

            // Request headers.
            request.setHeader("Content-Type", "application/json");
            request.setHeader("Ocp-Apim-Subscription-Key", subscriptionKeyTextField.getText());

            // Request body.
            StringEntity reqEntity = new StringEntity("{\"url\":\"" + imageUrl + "\"}");
            request.setEntity(reqEntity);

            // Execute the REST API call and get the response entity.
            HttpResponse response = httpclient.execute(request);
            HttpEntity entity = response.getEntity();

            // If we got a response, parse it and display it.
            if (entity != null)
            {
                // Return the JSONObject.
                String jsonString = EntityUtils.toString(entity);
                return new JSONObject(jsonString);
            } else {
                // No response. Return null.
                return null;
            }
        }
        catch (Exception e)
        {
            // Display error message.
            System.out.println(e.getMessage());
            return null;
        }
    }
</code></pre>
       <h3 id="ocr-step-3-run-the-application">OCR step 3: Run the application</h3> 
       <p>Press <strong>F6</strong> to run the application. Put your subscription key into the <strong>Subscription Key</strong> field and verify that you are using the correct region in <strong>Subscription Region</strong>. Click the <strong>OCR</strong> tab, enter a URL to an image of printed text, then click the <strong>Read Image</strong> button to analyze an image and see the result.</p> 
       <h2 id="read-handwritten-text-handwriting-recognition">Read handwritten text (handwriting recognition)</h2> 
       <p>The Handwriting Recognition feature of Computer Vision analyzes an image of handwritten text. After the analysis is complete, Handwriting Recognition returns a JSON object that contains the text and the location of the text in the image.</p> 
       <p>To complete the Handwriting Recognition feature of the tutorial application, perform the following steps:</p> 
       <h3 id="handwriting-recognition-step-1-add-the-event-handler-code-for-the-form-button">Handwriting Recognition step 1: Add the event handler code for the form button</h3> 
       <p>The <strong>handwritingImageButtonActionPerformed</strong> event handler method clears the form, displays the image specified in the URL, then calls the <strong>HandwritingImage</strong> method to analyze the image. When <strong>HandwritingImage</strong> returns, the method displays the detected text as formatted JSON in the <strong>Response</strong> text area.</p> 
       <p>Copy and paste the following code into the <strong>handwritingImageButtonActionPerformed</strong> method.</p> 
       <div class="NOTE">
        <h5>Note</h5>
        <p>NetBeans won't let you paste to the method definition line (<code>private void</code>) or to the closing curly brace of that method. To copy the code, copy the lines between the method definition and the closing curly brace, and paste them over the contents of the method.</p> 
       </div> 
       <pre><code class="lang-java">    private void handwritingImageButtonActionPerformed(java.awt.event.ActionEvent evt) {
        URL handwritingImageUrl;

        // Clear out the previous image, response, and caption, if any.
        handwritingImage.setIcon(new ImageIcon());
        handwritingResponseTextArea.setText("");

        // Display the image specified in the text box.
        try {
            handwritingImageUrl = new URL(handwritingImageUriTextBox.getText());
            BufferedImage bImage = ImageIO.read(handwritingImageUrl);
            scaleAndShowImage(bImage, handwritingImage);
        } catch(IOException e) {
            handwritingResponseTextArea.setText("Error loading Handwriting image: " + e.getMessage());
            return;
        }

        // Read the text in the image.
        JSONObject jsonObj = HandwritingImage(handwritingImageUrl.toString());

        // A return of null indicates failure.
        if (jsonObj == null) {
            return;
        }

        // Format and display the JSON response.
        handwritingResponseTextArea.setText(jsonObj.toString(2));
    }
</code></pre>
       <h3 id="handwriting-recognition-step-2-add-the-wrapper-for-the-rest-api-call">Handwriting Recognition step 2: Add the wrapper for the REST API call</h3> 
       <p>The <strong>HandwritingImage</strong> method wraps the two REST API calls needed to analyze an image. Because handwriting recognition is a time consuming process, a two step process is used. The first call submits the image for processing; the second call retrieves the detected text when the processing is complete.</p> 
       <p>After the text is retrieved, the <strong>HandwritingImage</strong> method returns a <strong>JSONObject</strong> describing the text and the locations of the text, or <strong>null</strong> if there was an error.</p> 
       <p>Copy and paste the following <strong>HandwritingImage</strong> method to just underneath the <strong>handwritingImageButtonActionPerformed</strong> method.</p> 
       <pre><code class="lang-java">     /**
     * Encapsulates the Microsoft Cognitive Services REST API call to read handwritten text in an image.
     * @param imageUrl: The string URL of the image to process.
     * @return: A JSONObject describing the image, or null if a runtime error occurs.
     */
    private JSONObject HandwritingImage(String imageUrl) {
        try (CloseableHttpClient textClient = HttpClientBuilder.create().build();
             CloseableHttpClient resultClient = HttpClientBuilder.create().build())
        {
            // Create the URI to access the REST API call to read text in an image.
            String uriString = uriBasePreRegion + 
                    String.valueOf(subscriptionRegionComboBox.getSelectedItem()) + 
                    uriBasePostRegion + uriBaseHandwriting;
            URIBuilder uriBuilder = new URIBuilder(uriString);

            // Request parameters.
            uriBuilder.setParameter("handwriting", "true");

            // Prepare the URI for the REST API call.
            URI uri = uriBuilder.build();
            HttpPost request = new HttpPost(uri);

            // Request headers.
            request.setHeader("Content-Type", "application/json");
            request.setHeader("Ocp-Apim-Subscription-Key", subscriptionKeyTextField.getText());

            // Request body.
            StringEntity reqEntity = new StringEntity("{\"url\":\"" + imageUrl + "\"}");
            request.setEntity(reqEntity);

            // Execute the REST API call and get the response.
            HttpResponse textResponse = textClient.execute(request);

            // Check for success.
            if (textResponse.getStatusLine().getStatusCode() != 202) {
                // An error occured. Return the JSON error message.
                HttpEntity entity = textResponse.getEntity();
                String jsonString = EntityUtils.toString(entity);
                return new JSONObject(jsonString);
            }

            String operationLocation = null;

            // The 'Operation-Location' in the response contains the URI to retrieve the recognized text.
            Header[] responseHeaders = textResponse.getAllHeaders();
            for(Header header : responseHeaders) {
                if(header.getName().equals("Operation-Location"))
                {
                    // This string is the URI where you can get the text recognition operation result.
                    operationLocation = header.getValue();
                    break;
                }
            }

            // NOTE: The response may not be immediately available. Handwriting recognition is an
            // async operation that can take a variable amount of time depending on the length
            // of the text you want to recognize. You may need to wait or retry this operation.
            //
            // This example checks once per second for ten seconds.

            JSONObject responseObj = null;
            int i = 0;
            do {
                // Wait one second.
                Thread.sleep(1000);

                // Check to see if the operation completed.
                HttpGet resultRequest = new HttpGet(operationLocation);
                resultRequest.setHeader("Ocp-Apim-Subscription-Key", subscriptionKeyTextField.getText());
                HttpResponse resultResponse = resultClient.execute(resultRequest);
                HttpEntity responseEntity = resultResponse.getEntity();
                if (responseEntity != null)
                {
                    // Get the JSON response.
                    String jsonString = EntityUtils.toString(responseEntity);
                    responseObj = new JSONObject(jsonString);
                }
            }
            while (i &lt; 10 &amp;&amp; responseObj != null &amp;&amp;
                    !responseObj.getString("status").equalsIgnoreCase("Succeeded"));

            // If the operation completed, return the JSON object.
            if (responseObj != null) {
                return responseObj;
            } else {
                // Return null for timeout error.
                System.out.println("Timeout error.");
                return null;
            }
        }
        catch (Exception e)
        {
            // Display error message.
            System.out.println(e.getMessage());
            return null;
        }
    }
</code></pre>
       <h3 id="handwriting-recognition-step-3-run-the-application">Handwriting Recognition step 3: Run the application</h3> 
       <p>To run the application, press <strong>F6</strong>. Put your subscription key into the <strong>Subscription Key</strong> field and verify that you are using the correct region in <strong>Subscription Region</strong>. Click the <strong>Read Handwritten Text</strong> tab, enter a URL to an image of handwritten text, then click the <strong>Read Image</strong> button to analyze an image and see the result.</p> 
       <h2 id="next-steps">Next steps</h2> 
       <ul> 
        <li><a href="csharptutorial" data-linktype="relative-path">Computer Vision API C# Tutorial</a></li> 
        <li><a href="pythontutorial" data-linktype="relative-path">Computer Vision API Python Tutorial</a></li> 
       </ul> 
      </div>
     </div> 
     <div id="comments-container" ms.cmpgrp="comments" data-bi-name="comments" role="form"></div> 
    </div> 
   </main> 
   <div class="pageActions"> 
    <div id="page-actions" ms.cmpgrp="pageactions" data-bi-name="pageactions" role="complementary"> 
     <div id="page-actions-content"> 
      <ul class="action-list"> 
       <li> <a href="#comments-container" id="comments-link" ms.cmpnm="comments" data-bi-name="comments"> <i class="icon icon-comments"></i>Comments </a> </li> 
       <li id="contenteditbtn"> <a href="https://github.com/Microsoft/azure-docs/blob/master/articles/cognitive-services/Computer-vision/Tutorials/java-tutorial.md" title="Edit This Document" ms.cmpnm="edit" data-bi-name="edit"> <i class="icon icon-editor"></i>Edit </a> </li> 
       <li> <a href="#" class="sharebutton" title="Share This Document" ms.cmpnm="share" data-bi-name="share"><i class="icon icon-share"></i>Share</a> 
        <div class="share-container"> 
         <div>
          <a href="" class="share-twitter" ms.cmpnm="twitter" data-bi-name="twitter"><i class="icon icon-twitter"></i>Twitter</a>
         </div> 
         <div>
          <a href="" class="share-linkedin" ms.cmpnm="share-linkedin" data-bi-name="linkedin"><i class="icon icon-linkedin"></i>LinkedIn</a>
         </div> 
         <div>
          <a href="" class="share-facebook" ms.cmpnm="facebook" data-bi-name="facebook"><i class="icon icon-facebook"></i>Facebook</a>
         </div> 
         <div>
          <a href="" class="share-email" ms.cmpnm="email" data-bi-name="email"><i class="icon icon-email"></i>Email</a>
         </div> 
        </div> </li> 
       <li class="typeSep">|</li> 
       <li> <label for="theme-selector">Theme</label> <select id="theme-selector" data-bi-name="select-theme"> <option value="" class="removedOnload"></option> <option value="">Light</option> <option value="theme_night">Dark</option> </select> </li> 
      </ul> 
      <nav id="side-doc-outline" class="doc-outline" ms.cmpnm="intopic toc" data-bi-name="intopic toc" role="navigation" aria-label="On page navigation"> 
       <h3>In this article</h3> 
      </nav> 
     </div> 
    </div> 
   </div> 
   <ul class="breadcrumbs" ms.cmpgrp="breadcrumb" data-bi-name="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList" role="navigation" aria-label="Breadcrumb">
    <li></li>
   </ul> 
   <div class="sidebar" id="sidebar" ms.cmpgrp="left toc" data-bi-name="left toc" role="navigation" aria-label="Main Navigation" lang="en-us" dir="ltr"> 
    <div id="sidebarContent"> 
     <div class="filterHolder"> 
     </div> 
     <nav class="toc"></nav> 
     <div class="pdfDownloadHolder"></div> 
    </div> 
    <div class="tocSpace"></div> 
   </div> 
   <div id="menu-nav" class="dropdown-container" lang="en-us" dir="ltr"> 
    <div class="dropdown dropdown-full mobilenavi"> 
     <select> </select> 
    </div> 
   </div> 
  </div> 
  <div id="openFeedbackContainer" class="openfeedback-container footer-layout"></div> 
  <div class="container footerContainer"> 
   <footer id="footer" ms.pgarea="footer" data-bi-name="footer" class="footer-layout"> 
    <div class="container" role="contentinfo"> 
     <a data-mscc-ic="false" id="locale-selector-link" href="#" data-bi-name="select-locale" ms.cmpnm="select-locale"></a> 
     <ul class="links" ms.cmpgrp="footerlinks" data-bi-name="footerlinks"> 
      <li><a data-mscc-ic="false" href="https://docs.microsoft.com/teamblog" ms.cmpnm="bloglink" data-bi-name="bloglink">Blog</a></li> 
      <li><a data-mscc-ic="false" href="//privacy.microsoft.com/en-us/" ms.cmpnm="privacy" data-bi-name="privacy">Privacy &amp; Cookies</a></li> 
      <li><a data-mscc-ic="false" href="/en-us/legal/termsofuse" ms.cmpnm="termsofuse" data-bi-name="termsofuse">Terms of Use</a></li> 
      <li><a data-mscc-ic="false" href="//aka.ms/sitefeedback" ms.cmpnm="feedback" data-bi-name="feedback">Feedback</a></li> 
      <li id="impressum-section" hidden><a data-mscc-ic="false" id="impressum-link" href="#" ms.cmpnm="impressum" data-bi-name="impressum">Impressum</a></li> 
      <li><a data-mscc-ic="false" href="https://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/EN-US.aspx" ms.cmpnm="trademarks" data-bi-name="trademarks">Trademarks</a></li> 
     </ul> 
    </div> 
   </footer> 
  </div> 
  <script src="/_themes/docs.theme/master/en-us/_themes/javascript/870b0825531b1b071dff.conceptual.js"></script>  
 </body>
</html>