<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
 <head> 
  <title>Object Detection Using Image Features in JavaScript | PACKT Books</title> 
  <script>
			dataLayer = [];
		</script> 
  <script type="text/javascript">
			var GRANIFY_SITE_ID = 1318;(function(e,t,n){var r,i,s,o,u;u=false;try{o=new RegExp("(?:^|\\W)_gr_test_url=([^;]*)");s=document.cookie.match(o);if(s){if(s[1]==="1")u=true}else{r=Math.random();if(r>.95)u=true;i=new Date(+(new Date)+1e3*60*60*24*2);document.cookie="_gr_test_url="+ +u+";expires="+i.toGMTString()+";path=/"}}catch(a){}if(u)e.replace("javascript.js","javascript.next.js");try{o=new RegExp("(?:^|\\W)_gr_ep=([^;]*)");s=document.cookie.match(o);if(!s){document.cookie="_gr_ep_sent=;expires=Thu, 01-Jan-1970 00:00:01 GMT;path=/";document.cookie="_gr_er_sent=;expires=Thu, 01-Jan-1970 00:00:01 GMT;path=/";if(!window.location.origin){if(window.location.port)port=":"+window.location.port;else port="";window.location.origin=window.location.protocol+"//"+window.location.hostname+port}path=window.location.toString().replace(window.location.origin,"");referrer=document.referrer;i=new Date(+(new Date)+1e3*60*30);document.cookie="_gr_ep="+path+";expires="+i.toGMTString()+";path=/";document.cookie="_gr_er="+referrer+";expires="+i.toGMTString()+";path=/"}}catch(a){}a=new Date;a=""+a.getUTCFullYear()+(a.getUTCMonth()+1)+a.getUTCDate();e=e+"?id="+t+"&v="+a;window.Granify=n;n._stack=[];n.init=function(e,t,r){function i(e,t){e[t]=function(){Granify._stack.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var s=n;h=["on","identify","addTag","trackPageView","trackCart","trackOrder"];for(a=0;a<h.length;a++)i(s,h[a])};n.init();var f,l,c,p=document.createElement("iframe");p.src="javascript:false";p.title="";p.role="presentation";(p.frameElement||p).style.cssText="width: 0 !important; height: 0 !important; border: 0 !important; overflow: hidden !important; position: absolute !important; top: -1000px !important; left: -1000px !important;";c=document.getElementsByTagName("script");c=c[c.length-1];c.parentNode.insertBefore(p,c);try{l=p.contentWindow.document}catch(a){f=document.domain;p.src="javascript:var d=document.open();d.domain='"+f+"';void(0);";l=p.contentWindow.document}l.open()._l=function(){var t=this.createElement("script");if(f)this.domain=f;t.id="js-iframe-async";t.src=e;this.body.appendChild(t)};l.write('<body onload="document._l();">');l.close()})("//cdn.granify.com/assets/javascript.js",GRANIFY_SITE_ID,[])
		</script> 
  <link href="https://fonts.googleapis.com/css?family=Merriweather:400,700" rel="stylesheet" type="text/css"> 
  <script type="text/javascript">
            var granify_page_type = 'blog';
            var data_layer_page_type = 'blog';
			Granify.trackPageView({
                page_type: granify_page_type
			});
		</script> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
  <link rel="shortcut icon" href="//d1ldz4te4covpm.cloudfront.net/misc/favicon.ico" type="image/x-icon"> 
  <meta name="description" content="Object Detection Using Image Features in JavaScript written by Foat Akhmadeev: one of the many articles from Packt Publishing"> 
  <meta name="revisit-after" content="1 day"> 
  <link rel="canonical" href="https://www.packtpub.com/books/content/object-detection-using-image-features-javascript"> 
  <meta name="twitter:card" content="summary"> 
  <meta name="twitter:site" content="@packtpub"> 
  <meta name="twitter:title" content="Object Detection Using Image Features in JavaScript | PACKT Books"> 
  <meta name="twitter:description" content="Object Detection Using Image Features in JavaScript written by Foat Akhmadeev: one of the many articles from Packt Publishing"> 
  <script type="text/javascript">
            window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
            heap.load("4197017494");
        </script> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta id="viewport" name="viewport" content="width=320, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
  <!-- <link href="//fonts.googleapis.com/css?family=Ubuntu:300,400,500,700,300italic,400italic,500italic,700italic" rel="stylesheet" type="text/css">--> 
  <link href="/sites/all/themes/packt_v4/fonts/ubuntu.css" rel="stylesheet" type="text/css"> 
  <!--[if lt IE 10]>
        <link href="/sites/all/themes/packt_v4/css/core/packtpub_ie.css" rel="stylesheet" type="text/css">
        <![endif]--> 
  <link type="text/css" rel="stylesheet" media="all" href="//d1ldz4te4covpm.cloudfront.net/sites/default/files/css/15070345948550c0d5/88193022b61633465ae9b864eeae61e3.css"> 
  <link type="text/css" rel="stylesheet" media="print" href="//dz13w8afd47il.cloudfront.net/sites/default/files/css/15070345948550c0d5/6e295a6eb8f64cef4e07d9b1f02d46e8.css"> 
  <script type="text/javascript" src="//d1ldz4te4covpm.cloudfront.net/sites/default/files/js/15070345949f0892cf/952c3ff98a6acdc36497d839e31aa57c.js"></script> 
  <script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "\u002F", "dhtmlMenu": [ "doubleclick", "clone" ] });
//--><!]]>
</script> 
  <script type="text/javascript">
            var Packt = Packt || {}; Packt.user = {"cart":[],"newsletters":[],"customer_type":"","country_code":"AR","selected_currency":"USD","currency":"USD","currency_symbol":"$","uid":0};
        </script> 
  <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Packt Publishing News"> 
  <!--Maxymiser script start --> 
  <script type="text/javascript" src="//service.maxymiser.net/api/eu/packtpub.com/51f3ef/mmapi.js"></script> 
  <!--Maxymiser script end --> 
  <!-- Google Tag Manager --> 
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-NJWZFW');Packt.dataLayer.init();</script> 
  <!-- End Google Tag Manager --> 
 </head> 
 <body id="ppv4" class="with-logo"> 
  <!-- Google Tag Manager (noscript) --> 
  <noscript> 
   <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWZFW" height="0" width="0" style="display:none;visibility:hidden"> </iframe> 
  </noscript> 
  <!-- End Google Tag Manager (noscript) --> 
  <div id="page" class="" checkout=""> 
   <div id="page-header"> 
    <div id="account-bar" class="cf"> 
     <div class="section-inner"> 
      <div id="account-bar-status" class="cf"> 
       <div id="account-bar-currency-selector"> 
        <form accept-charset="UTF-8" method="post" id="packt-currency-select-form" class="float-left"> 
         <div class="form-item" id="edit-currency-wrapper"> 
          <select name="currency" class="form-select packt-currency-select-box selectBox" id="edit-currency" style="display:none"> <option value="GBP">GBP £</option> <option value="USD">US $</option> <option value="EUR">EUR €</option> <option value="AUD">AU $</option> </select> 
         </div> 
         <input type="submit" name="op" value="" style="display: none;" class="form-submit"> 
         <input type="hidden" name="form_id" id="edit-packt-currency-select" value="packt_currency_select_form"> 
        </form> 
       </div> 
       <div class="account-bar-divider float-left">
        |
       </div> 
       <div id="account-bar-status-security"></div> 
       <noscript> 
        <div id="account-bar-login-register-ns"> 
         <a href="/account">My Account</a> 
        </div> 
       </noscript> 
       <div id="account-bar-login-register"> 
        <a href="#" class="login-popup">
         <div class="float-left">
          Log in
         </div></a> 
        <div class="account-bar-divider float-left">
         |
        </div> 
        <a href="/register">
         <div class="float-left">
          Register
         </div></a> 
       </div> 
       <div id="account-bar-logged-in"> 
        <a href="/account"> 
         <div class="float-left">
          <strong>My Account</strong>
         </div> </a> 
        <div class="account-bar-divider float-left">
         |
        </div> 
        <a id="account-bar-sign-out" href="/logout">
         <div class="float-left">
          Sign Out
         </div></a> 
       </div> 
      </div> 
      <div id="account-bar-form"> 
       <div id="account-bar-form-login" class="cf"> 
        <div class="account-bar-form-left"> 
         <h4>Log in to your account</h4> 
         <form accept-charset="UTF-8" method="post" id="packt-user-login-form"> 
          <div>
           <div id="login-form" class="cf"> 
            <div id="login-form-email"> 
             <div class="form-item" id="email-wrapper"> 
              <input type="text" maxlength="128" name="email" id="email" size="24" value="" placeholder="E-mail address" class="form-text required"> 
             </div> 
            </div> 
            <div id="login-form-pass"> 
             <div class="form-item" id="password-wrapper"> 
              <input type="password" name="password" id="password" maxlength="128" size="24" placeholder="Password" class="form-text required"> 
             </div> 
            </div> 
            <div id="login-form-submit"> 
             <input type="submit" name="op" id="edit-submit-1" value="Login" class=" form-submit"> 
            </div> 
            <br> 
           </div> 
           <a href="https://www.packtpub.com/account/password">Forgotten your password?</a> 
           <input type="hidden" name="form_build_id" id="form-1092db2056007a5690135be2e5938d90" value="form-1092db2056007a5690135be2e5938d90"> 
           <input type="hidden" name="form_id" id="edit-packt-user-login-form" value="packt_user_login_form"> 
          </div>
         </form> 
        </div> 
        <div class="account-bar-form-right"> 
         <h4>Not yet a member?</h4> 
         <p>Register for an account and access leading-edge content on emerging technologies.</p> 
         <p><a class="account-bar-toggle register" href="/register">Register now</a></p> 
        </div> 
       </div> 
       <div id="account-bar-form-close">
        <a href="#">Close</a>
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="menu-bar"> 
     <div class="section-inner cf"> 
      <div id="menuIcon"></div> 
      <div id="menu-links" class=""> 
       <a href="/"> 
        <div class="menu-item-tab"> 
         <div class="menu-item-text dummy" id="menu-packt-logo"> 
          <span class="alt">Packt Logo</span> 
         </div> 
        </div> </a> 
       <a href="/all"> 
        <div class="menu-item-tab"> 
         <div class="menu-item-text" id="menu-books"> 
          <span class="menu-text">Books &amp; Videos</span> 
         </div> 
        </div> </a> 
       <a href="/bundles"> 
        <div class="menu-item-tab"> 
         <div class="menu-item-text" id="menu-tech"> 
          <span class="menu-text">Bundles</span> 
         </div> 
        </div> </a> 
       <a href="/books/info/packt/about"> 
        <div class="menu-item-tab"> 
         <div class="menu-item-text" id="menu-packt"> 
          <span class="menu-text">Packt</span> 
         </div> 
        </div> </a> 
       <a href="/books/content/support"> 
        <div class="menu-item-tab"> 
         <div class="menu-item-text" id="menu-support"> 
          <span class="menu-text">Support</span> 
         </div> 
        </div> </a> 
       <a id="menu-packtlib-href" href="/mapt" target="_blank"> 
        <div class="menu-item-tab"> 
         <div class="menu-item-text" id="menu-packtlib"> 
          <span class="menu-text pl"> <img id="pl-img" src="//d255esdrn735hr.cloudfront.net/sites/all/themes/packt_v4/images/mapt-pplogo.png"> </span> 
          <span class="menu-text mob-pl"> <img id="pl-img" src="//dz13w8afd47il.cloudfront.net/sites/all/themes/packt_v4/images/mapt-pplogo-white.png"> </span> 
         </div> 
        </div> </a> 
      </div> 
      <div id="menu-icons" class=""> 
       <a href="#"> 
        <div class="menu-item-tab"> 
         <div class="menu-item-icon" id="menu-search"> 
          <span class="alt">Search</span> 
         </div> 
        </div> </a> 
       <a href="/account/my-ebooks"> 
        <div class="menu-item-tab"> 
         <div class="menu-item-icon dummy" id="menu-collection"> 
          <span class="alt">My Collection</span> 
         </div> 
        </div> </a> 
       <a href="https://www.packtpub.com/cart/checkout"> 
        <div class="menu-item-tab last"> 
         <div class="menu-item-icon" id="menu-cart"> 
          <div id="cart-icon-count" class="cart-icon-count"></div> 
          <span class="alt">Cart</span> 
         </div> 
        </div> </a> 
      </div> 
     </div> 
    </div> 
    <div id="menu-bar-popup" class="cf"> 
     <div id="menu-bar-popup-inner" class="cf"></div> 
     <div class="section-inner cf"> 
      <div class="menu-bar-popup-menu threecol cf" id="menu-books-popup"> 
       <div class="menu-bar-popup-section-left threecol"> 
        <div class="menu-bar-popup-section-left-inner cf"> 
         <p class="menu-bar-popup-title">Book &amp; Video Categories</p> 
         <div id="books-menu"> 
          <div class="cf"> 
           <div class="books-menu-column categories">
            <div class="inner">
             <p><a href="/web-development">Web Development</a></p>
             <p><a href="/big-data-and-business-intelligence">Big Data &amp; Business Intelligence</a></p>
             <p><a href="/application-development">Application Development</a></p>
             <p><a href="/virtualization-and-cloud">Virtualization &amp; Cloud</a></p>
            </div>
           </div>
           <div class="books-menu-column categories">
            <div class="inner">
             <p><a href="/game-development">Game Development</a></p>
             <p><a href="/networking-and-servers">Networking &amp; Servers</a></p>
             <p><a href="/hardware-and-creative">Hardware &amp; Creative</a></p>
             <p><a href="/business">Business</a></p>
            </div>
           </div> 
           <div class="books-menu-column last categories"> 
            <div class="inner"> 
             <p><a href="/all">All Products</a></p>
             <p><a href="/all-books">All Books</a></p>
             <p><a href="/video">All Videos</a></p>
             <p><a href="/latest-releases">Latest Releases</a></p> 
            </div> 
           </div> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="menu-bar-popup-section-right threecol"> 
        <div class="menu-bar-popup-section-right-inner cf" data-product="true" data-product-id="9781785881114" data-product-title="Python Microservices Development" data-product-type="ebooks" data-product-brand="Packt Publishing" data-product-exclude-list="true" data-product-category="Web Development" data-product-price="35.990"> 
         <div id="deal-of-the-day-banner" class="cf"> 
          <div id="menu-bar-dotd-preview-thumb"> 
           <a href="/books/deal-of-the-day"> <img src="//d1ldz4te4covpm.cloudfront.net/sites/default/files/imagecache/featured_book_block/B05015.png" alt="Python Microservices Development" title="" width="150" height="185" class="lazyload-disabled imagecache imagecache-featured_book_block"> 
            <div class="menu-bar-dotd-percentage"> 
             <div class="menu-bar-dotd-percentage-text">
               50
              <sup class="dotd-sup">%</sup>
              <div class="dotd-sub">
               off
              </div> 
             </div> 
            </div> </a> 
          </div> 
          <div id="menu-bar-dotd-preview-text"> 
           <p class="menu-bar-popup-title"><a href="/books/deal-of-the-day">Deal of the Day</a></p> 
           <p>A practical approach to conquering the complexities of Microservices using the Python tooling ecosystem</p> 
          </div> 
          <div class="cf deal-of-the-day-in-header"> 
           <div class="dots-main-book-price float-left"> 
            <div class="book-top-pricing-main-price"> 
             <div class="book-top-pricing-main-ebook-price  ">
              $18.00
             </div> 
            </div> 
            <div class="dotd-rrp-price">
              RRP $35.99 
            </div> 
           </div> 
           <form action="/add_to_cart/28282" accept-charset="UTF-8" method="post" id="packt-libraries-add-to-cart-form" class="packt-libraries-add-to-cart-form"> 
            <div> 
             <div class="book-top-addtocart-inner"> 
              <div class="book-top-addtocart-logo"></div> 
              <div class="book-top-addtocart-separator"></div> 
              <input type="submit" name="submit-28282" id="submit-28282" value="Add to Cart" class=" form-submit"> 
              <input type="hidden" name="nids" id="nids" value="28282"> 
              <input type="hidden" name="qtys" id="qtys" value="1"> 
              <input type="hidden" name="upsell" id="edit-upsell" value="1"> 
              <input type="hidden" name="form_build_id" id="form-902f29c3c9d688b6a7a41e16c8ce937b" value="form-902f29c3c9d688b6a7a41e16c8ce937b"> 
              <input type="hidden" name="form_id" id="edit-packt-libraries-add-to-cart-form" value="packt_libraries_add_to_cart_form"> 
             </div> 
            </div>
           </form> 
          </div> 
         </div> 
         <div class="cf newsletter-signup-form" newsletter_id="280"> 
          <div class="dotd-signup-text">
           <strong>Sign up here to get these deals straight to your inbox</strong>
          </div> 
          <form accept-charset="UTF-8" method="post" id="packt-v3-subscribtion-dotd-form"> 
           <div>
            <div class="form-item"> 
            </div> 
            <div class="form-item" id="edit-mail-wrapper"> 
             <input type="text" maxlength="128" name="mail" id="edit-mail" size="60" value="" placeholder="Enter your email address" class="form-text"> 
            </div> 
            <input type="hidden" name="newsletter_id" id="edit-newsletter-id" value=""> 
            <input type="submit" name="op" id="edit-submit-3" value="Submit" class=" form-submit"> 
            <input type="hidden" name="form_build_id" id="form-34e18f1cee0222919734ed1012643fec" value="form-34e18f1cee0222919734ed1012643fec"> 
            <input type="hidden" name="form_id" id="edit-packt-v3-subscribtion-dotd-form" value="packt_v3_subscribtion_dotd_form"> 
           </div>
          </form> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="menu-bar-popup-menu fivecol cf" id="menu-tech-popup"> 
       <div class="menu-bar-popup-section-left fivecol"> 
        <div class="menu-bar-popup-section-left-inner cf"> 
         <p class="menu-bar-popup-title">Bundles</p> 
         <div class="packt-menu cf"> 
          <div class="cf"> 
           <div class="books-menu-column categories "> 
            <div class="inner"> 
             <p><a href="https://www.packtpub.com/bundles/dot-net-c-sharp">.NET &amp; C#</a></p> 
             <p><a href="https://www.packtpub.com/bundles/android">Android</a></p> 
             <p><a href="https://www.packtpub.com/bundles/angular">Angular</a></p> 
             <p><a href="https://www.packtpub.com/bundles/aws-amazon-web-services">AWS</a></p> 
             <p><a href="https://www.packtpub.com/bundles/big-data">Big Data</a></p> 
            </div> 
           </div> 
           <div class="books-menu-column categories "> 
            <div class="inner"> 
             <p><a href="https://www.packtpub.com/bundles/blockchain">Blockchain</a></p> 
             <p><a href="https://www.packtpub.com/bundles/c-plus-plus">C++</a></p> 
             <p><a href="https://www.packtpub.com/bundles/cyber-security">Cyber Security</a></p> 
             <p><a href="https://www.packtpub.com/bundles/deep-learning">Deep Learning</a></p> 
             <p><a href="https://www.packtpub.com/bundles/devops">DevOps</a></p> 
            </div> 
           </div> 
           <div class="books-menu-column categories "> 
            <div class="inner"> 
             <p><a href="https://www.packtpub.com/bundles/delphi">Delphi</a></p> 
             <p><a href="https://www.packtpub.com/bundles/docker">Docker</a></p> 
             <p><a href="https://www.packtpub.com/bundles/game-development">Game Dev</a></p> 
             <p><a href="https://www.packtpub.com/bundles/git-and-github">Git &amp; Github</a></p> 
             <p><a href="https://www.packtpub.com/bundles/go">Go</a></p> 
            </div> 
           </div> 
           <div class="books-menu-column categories "> 
            <div class="inner"> 
             <p><a href="https://www.packtpub.com/bundles/modern-java">Java</a></p> 
             <p><a href="https://www.packtpub.com/bundles/javascript">JavaScript</a></p> 
             <p><a href="https://www.packtpub.com/bundles/linux">Linux</a></p> 
             <p><a href="https://www.packtpub.com/bundles/python-for-beginners">Python Beginners</a></p> 
             <p><a href="https://www.packtpub.com/bundles/python-data">Python Data</a></p> 
            </div> 
           </div> 
           <div class="books-menu-column categories last"> 
            <div class="inner"> 
             <p><a href="https://www.packtpub.com/bundles/python-development">Python Dev</a></p> 
             <p><a href="https://www.packtpub.com/bundles/react">React</a></p> 
             <p><a href="https://www.packtpub.com/bundles/sysadmins">SysAdmins</a></p> 
             <p><a href="https://www.packtpub.com/bundles/unity">Unity</a></p> 
             <p><a href="https://www.packtpub.com/category-page/web-design">Web Design</a></p> 
            </div> 
           </div> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="menu-bar-popup-menu cf" id="menu-packt-popup"> 
       <div class="menu-bar-popup-section-left twocol"> 
        <div class="menu-bar-popup-section-left-inner cf"> 
         <p class="menu-bar-popup-title">Packt Publishing</p> 
         <div class="packt-menu cf"> 
          <div class="books-menu-column"> 
           <div class="inner"> 
            <p><a href="/books/info/packt/about">About Us</a></p> 
            <p><a href="/press">Press</a></p> 
            <p><a href="/books/info/packt/authors">Our Authors</a></p> 
            <!--<p><a href="/blog-network">Blog</a></p>
                                            <p><a href="/techprimer-network">Technology Primers</a></p>--> 
           </div> 
          </div> 
          <div class="books-menu-column"> 
           <div class="inner"> 
            <p><a href="/books/info/packt/contact-us">Contact Us</a></p> 
            <p><a href="/books/info/packt/careers-with-packt">Careers</a></p> 
            <p><a href="/books/info/packt/trade-partners">Trade &amp; Partners</a></p> 
            <!--<p><a href="/article-network">Articles</a></p>--> 
           </div> 
          </div> 
         </div> 
        </div> 
       </div> 
       <!--<div class="menu-bar-popup-section-right twocol">
                            <div class="menu-bar-popup-section-right-inner cf">
                                <div id="menu-bar-article-preview-thumb">
                                    <noscript><img src="//d1ldz4te4covpm.cloudfront.net/sites/default/files/imagecache/ppv4_header_article_thumb/564_Cover Image.png" alt="What is coding as a service?" title="" width="240" height="114" class=" imagecache imagecache-ppv4_header_article_thumb"/></noscript><img src="/sites/default/files/blank.gif" alt="What is coding as a service?" title="" width="240" height="114" data-original="//d1ldz4te4covpm.cloudfront.net/sites/default/files/imagecache/ppv4_header_article_thumb/564_Cover Image.png" class=" imagecache imagecache-ppv4_header_article_thumb"/>                                </div>
                                <div id="menu-bar-article-preview-text">
                                    <p class="menu-bar-popup-title"><a href="/books/content/what-coding-service">What is coding as a service?</a></p>
                                    <p id="menu-bar-article-one-liner"></p>
                                    <p><a href="/articles">Read all our articles</a></p>
                                </div>
                            </div>
                        </div>--> 
      </div> 
      <div class="menu-bar-popup-menu cf" id="menu-support-popup"> 
       <div class="menu-bar-popup-section-left twocol"> 
        <div class="menu-bar-popup-section-left-inner cf"> 
         <p class="menu-bar-popup-title">Support</p> 
         <div class="packt-menu cf"> 
          <div class="books-menu-column"> 
           <div class="inner"> 
            <p><a href="/books/info/packt/faq">FAQs</a></p> 
            <p><a href="/books/info/packt/ordering">Ordering Information</a></p> 
            <p><a href="/books/info/packt/terms-and-conditions">Terms &amp; Conditions</a></p> 
           </div> 
          </div> 
          <div class="books-menu-column"> 
           <div class="inner"> 
            <p><a href="/books/content/support">Code Downloads &amp; Errata</a></p> 
            <p><a href="/books/content/errata">Submit Errata</a></p> 
           </div> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="menu-bar-popup-menu cf" id="menu-packtlib-popup"> 
       <div class="menu-bar-popup-section-left twocol"> 
        <div class="menu-bar-popup-section-left-inner cf"> 
         <p class="menu-bar-popup-title">Mapt</p> 
         <div class="packt-menu cf"> 
          <div class="books-menu-column"> 
           <div class="inner"> 
            <p id="menu-mapt-link"><a href="/mapt" target="_blank">Go to Mapt</a></p> 
           </div> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="menu-bar-popup-menu cf" id="menu-search-popup"> 
       <div class="menu-bar-popup-search-inner"> 
        <form accept-charset="UTF-8" method="post" id="packt-libraries-main-search-form"> 
         <div> 
          <div id="menu-bar-search" class="cf"> 
           <div id="menu-bar-search-title"> 
            <div class="form-item">
             Search
            </div> 
           </div> 
           <div id="menu-bar-search-box"> 
            <div class="form-item" id="main-search-keys-wrapper"> 
             <input type="text" name="keys" id="main-search-keys" size="49" value="" placeholder="Enter your search terms..." class="form-text"> 
            </div> 
           </div> 
           <div id="menu-bar-search-button"> 
            <input type="submit" name="op" id="edit-submit-5" value="Search" class=" form-submit"> 
           </div> 
           <input type="hidden" name="sort" id="edit-sort" value="0"> 
           <input type="hidden" name="types" id="edit-types" value="0"> 
           <input type="hidden" name="forthcoming" id="edit-forthcoming" value="1"> 
           <input type="hidden" name="available" id="edit-available" value="1"> 
           <input type="hidden" name="count" id="edit-count" value="20"> 
           <input type="hidden" name="form_build_id" id="form-42fb73b64cab8769566d9f5c2e9b304a" value="form-42fb73b64cab8769566d9f5c2e9b304a"> 
           <input type="hidden" name="form_id" id="edit-packt-libraries-main-search-form" value="packt_libraries_main_search_form"> 
          </div> 
          <div class="facet-search-cross facet-search-cross-autocomplete"></div> 
         </div>
        </form> 
       </div> 
      </div> 
      <div class="menu-bar-popup-menu cf" id="menu-cart-popup"> 
       <div class="menu-bar-popup-section-left even"> 
        <div class="menu-bar-popup-section-left-inner cf"> 
         <div id="menu-bar-popup-cart-preview"> 
          <div id="menu-bar-popup-cart-item-preview"> 
           <div id="menu-bar-popup-cart-item-preview-image"> 
            <img src=""> 
           </div> 
           <p class="menu-bar-popup-title">Added to Cart</p> 
           <p id="menu-bar-popup-cart-item-preview-title"></p> 
           <p id="menu-bar-popup-cart-item-preview-oneliner"></p> 
           <p id="menu-bar-popup-cart-item-preview-additional">...and <span></span> more</p> 
           <p class="price"><span id="menu-bar-popup-cart-item-preview-currency"></span><span id="menu-bar-popup-cart-item-preview-price"></span></p> 
          </div> 
         </div> 
         <p id="menu-bar-popup-cart-empty-preview"> You don't have anything in your cart right now. </p> 
        </div> 
       </div> 
       <div class="menu-bar-popup-section-right even"> 
        <div class="menu-bar-popup-section-right-inner cf"> 
         <div id="menu-bar-popup-content"> 
          <div class="cf cart-price-preview"> 
           <p id="menu-bar-popup-subtotal-title" class="menu-bar-popup-title float-left">Subtotal</p> 
           <p id="menu-bar-popup-subtotal-value" class="menu-bar-popup-title float-right price"> 0.00</p> 
           <p id="menu-bar-popup-subtotal-currency" class="menu-bar-popup-title float-right price"></p> 
          </div> 
          <p><strong>Free shipping</strong> on print orders for US, UK, Europe and selected Asian countries</p> 
          <form> 
           <a href="https://www.packtpub.com/cart/checkout" class="button-link grey">View Cart</a> 
           <span></span> 
           <a href="https://www.packtpub.com/cart/checkout/?checkout_step=upsell" class="button-link">Check Out</a> 
          </form> 
         </div> 
         <div id="checkout-close" onclick="Packt.headerMenu.hideMenuPopup()"></div> 
        </div> 
       </div> 
      </div> 
      <div class="menu-bar-popup-menu cf" id="menu-cart-small"> 
       <div> 
        <div class="small-popup-outer float-right"> 
         <div class="small-popup-tick">
           &nbsp; 
         </div> 
         <div class="small-popup-text"> 
          <strong> Title added to cart </strong> 
         </div> 
         <div class="small-popup-seperator"> 
         </div> 
         <div class="small-popup-arrows">
           &nbsp; 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div id="menu-bar-popup-inner-bottom" class="cf"></div> 
    </div> 
   </div> 
   <div id="main-container" class="not-front not-logged-in page-node node-type-article no-sidebars page-books-content-object-detection-using-image-features-javascript section-books node-full-view "> 
    <div id="main" class=""> 
     <!-- #content --> 
     <div id="content"> 
      <div class="blue-breadcrumb"> 
       <div class="section-inner"> 
        <div class="breadcrumb">
         <a href="/">Home</a>&nbsp; &gt; &nbsp;
         <a href="/all-books">Books</a>&nbsp; &gt; &nbsp;
         <a href="/web-development/computer-vision-web">Computer Vision for the Web</a>&nbsp; &gt; &nbsp;
         <a href="/books/content/object-detection-using-image-features-javascript" class="active">Object Detection Using Image Features in JavaScript</a>
        </div> 
       </div> 
      </div> 
      <div class="section-inner cf"> 
       <div id="messages-container"> 
       </div> 
      </div> 
      <a name="main-content" id="main-content"></a> 
      <div id="main-article" class="article cf section-inner" itemscope itemtype="http://schema.org/Article"> 
       <div class="panel-display panel-packt-cat clear-block"> 
        <div class="panel-panel-top-wrapper"> 
         <div class="blog-header"> 
          <div class="blog-featured-book left"> 
           <a href="/web-development/computer-vision-web"> <img src="//d255esdrn735hr.cloudfront.net/sites/default/files/6171OS.jpg"> </a> 
          </div> 
          <div class="blog-title"> 
           <h1>Object Detection Using Image Features in JavaScript</h1> 
          </div> 
         </div> 
         <div class="blog-author-block"> 
          <div class="blog-author-block-left"> 
           <h2><a href="/books/info/authors/foat-akhmadeev">Foat Akhmadeev</a></h2> 
           <p><span class="date-display-single">October 2015</span></p> 
          </div> 
          <div class="share-buttons-line "> 
           <div class="share-icon-background"> 
            <a class="share-link" target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.packtpub.com/books/content/object-detection-using-image-features-javascript&amp;title=Object+Detection+Using+Image+Features+in+JavaScript&amp;source=Packt+Publishing&amp;summary=Object+Detection+Using+Image+Features+in+JavaScript"> 
             <div class="share-icon linkedin"></div> </a> 
           </div> 
           <div class="share-icon-background"> 
            <a class="share-link" target="_blank" href="https://www.twitter.com/share?url=https://www.packtpub.com/books/content/object-detection-using-image-features-javascript&amp;text=Object Detection Using Image Features in JavaScript"> 
             <div class="share-icon twitter"></div> </a> 
           </div> 
           <div class="share-icon-background"> 
            <a class="share-link" target="_blank" href="http://www.facebook.com/sharer.php?u=https://www.packtpub.com/books/content/object-detection-using-image-features-javascript"> 
             <div class="share-icon facebook"></div> </a> 
           </div> 
           <div class="share-icon-background last"> 
            <a class="share-link" target="_blank" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=https://www.packtpub.com/books/content/object-detection-using-image-features-javascript"> 
             <div class="share-icon google-plus"></div> </a> 
           </div> 
          </div> 
         </div> 
         <div class="blog-content-left left"> 
          <div class="inside"> 
           <div class="article-content" itemprop="articleBody"> 
            <p>In this article by <strong>Foat Akhmadeev</strong>, author of the book <a title="Computer Vision for the Web" href="https://www.packtpub.com/web-development/computer-vision-web?np/computer-abr1/1015?utm_source=np_computer_abr1_1015&amp;amp;utm_medium=content&amp;amp;utm_campaign=nitin" target="_blank">Computer Vision for the Web</a>, we will discuss how we can detect an object on an image using several JavaScript libraries. In particular, we will see techniques such as FAST features detection, and BRIEF and ORB descriptors matching. Eventually, the object detection example will be presented.</p> 
            <p>There are many ways to detect an object on an image. Color object detection, which is the detection of changes in intensity of an image is just a simple computer vision methods. There are some sort of fundamental things which every computer vision enthusiast should know. The libraries we use here are:</p> 
            <ul> 
             <li>JSFeat (<a href="http://inspirit.github.io/jsfeat/" title="http://inspirit.github.io/jsfeat/">http://inspirit.github.io/jsfeat/</a>)</li> 
             <li>tracking.js (<a href="http://trackingjs.com" title="http://trackingjs.com">http://trackingjs.com</a>)</li> 
            </ul> 
            <p style="margin-left: 40px; margin-right: 40px;" align="center"><em>(For more resources related to this topic, see <a href="#more">here</a>.)</em></p> 
            <h1>Detecting key points</h1> 
            <p>What information do we get when we see an object on an image? An object usually consists of some regular parts or unique points, which represent this particular object. Of course, we can compare each pixel of an image, but it is not a good thing in terms of computational speed. Probably, we can take unique points randomly, thus reducing the computation cost significantly, but we will still not get much information from random points. Using the whole information, we can get too much noise and lose important parts of an object representation. Eventually, we need to consider that both ideas, getting all pixels and selecting random pixels, are really bad. So, what can we do in that case?</p> 
            <p>We are working with a grayscale image and we need to get unique points of an image. Then, we need to focus on the intensity information. For example, getting object edges in the Canny edge detector or the Sobel filter. We are closer to the solution! But still not close enough. What if we have a long edge? Don't you think that it is a bit bad that we have too many unique pixels that lay on this edge? An edge of an object has end points or corners; if we reduce our edge to those corners, we will get enough unique pixels and remove unnecessary information.</p> 
            <p>There are various methods of getting keypoints from an image, many of which extract corners as those keypoints. To get them, we will use the <strong>FAST</strong> (<strong>Features from Accelerated Segment Test</strong>) algorithm. It is really simple and you can easily implement it by yourself if you want. But you do not need to. The algorithm implementation is provided by both tracking.js and JSFeat libraries.</p> 
            <p>The idea of the FAST algorithm can be captured from the following image:</p> 
            <p><img style="border: 2px solid black; display: block; margin-left: auto; margin-right: auto;" src="/sites/default/files/Article-Images/B05004_1.png" alt="" width="171" height="171"></p> 
            <p>Suppose we want to check whether the pixel <strong>P</strong> is a corner. We will check 16 pixels around it. If at least 9 pixels in an arc around P are much darker or brighter than the value of <strong>P</strong>, then we say that <strong>P</strong> is a corner. How much darker or brighter should the <strong>P</strong> pixels be? The decision is made by applying a threshold for the difference between the value of <strong>P</strong> and the value of pixels around <strong>P</strong>.</p> 
            <h1>A practical example</h1> 
            <p>First, we will start with an example of FAST corner detection for the tracking.js library. Before we do something, we can set the detector threshold. Threshold defines the minimum difference between a tested corner and the points around it:</p> 
            <pre class="line-numbers"><code class="language-javascript">tracking.Fast.THRESHOLD = 30;</code></pre>
            <p>It is usually a good practice to apply a Gaussian blur on an image before we start the method. It significantly reduces the noise of an image:</p> 
            <pre class="line-numbers"><code class="language-javascript">var imageData = context.getImageData(0, 0, cols, rows);
var gray = tracking.Image.grayscale(imageData.data, cols, rows, true);
var blurred4 = tracking.Image.blur(gray, cols, rows, 3);</code></pre>
            <p>Remember that the blur function returns a 4 channel array—RGBA. In that case, we need to convert it to 1-channel. Since we can easily skip other channels, it should not be a problem:</p> 
            <pre class="line-numbers"><code class="language-javascript">var blurred1 = new Array(blurred4.length / 4);
for (var i = 0, j = 0; i &lt; blurred4.length; i += 4, ++j) {
   blurred1[j] = blurred4[i];
}</code></pre>
            <p>Next, we run a corner detection function on our image array:</p> 
            <pre class="line-numbers"><code class="language-javascript">var corners = tracking.Fast.findCorners(blurred1, cols, rows);</code></pre>
            <p>The result returns an array with its length twice the length of the corner's number. The array is returned in the format <em>[x0,y0,x1,y1,...]</em>. Where <em>[xn, yn]</em> are coordinates of a detected corner. To print the result on a canvas, we will use the <em>fillRect</em> function:</p> 
            <pre class="line-numbers"><code class="language-javascript">for (i = 0; i &lt; corners.length; i += 2) {
   context.fillStyle = '#0f0';
   context.fillRect(corners[i], corners[i + 1], 3, 3);
}</code></pre>
            <p>Let's see an example with the JSFeat library,. for which the steps are very similar to that of tracking.js. First, we set the global threshold with a function:</p> 
            <pre class="line-numbers"><code class="language-javascript">jsfeat.fast_corners.set_threshold(30);</code></pre>
            <p>Then, we apply a Gaussian blur to an image matrix and run the corner detection:</p> 
            <pre class="line-numbers"><code class="language-javascript">jsfeat.imgproc.gaussian_blur(matGray, matBlurred, 3);</code></pre>
            <p>We need to preallocate keypoints for a corners result. The <em>keypoint_t</em> function is just a new type which is useful for keypoints of an image. The first two parameters represent coordinates of a point and the other parameters set: point score (which checks whether the point is good enough to be a key point), point level (which you can use it in an image pyramid, for example), and point angle (which is usually used for the gradient orientation):</p> 
            <pre class="line-numbers"><code class="language-javascript">var corners = [];
var i = cols * rows;
while (--i &gt;= 0) {
   corners[i] = new jsfeat.keypoint_t(0, 0, 0, 0, -1);
}</code></pre>
            <p>After all this, we execute the FAST corner detection method. As a last parameter of detection function, we define a border size. The border is used to constrain circles around each possible corner. For example, you cannot precisely say whether the point is a corner for the <em>[0,0]</em> pixel. There is no <em>[0, -3]</em> pixel in our matrix:</p> 
            <pre class="line-numbers"><code class="language-javascript">var count = jsfeat.fast_corners.detect(matBlurred, corners, 3);</code></pre>
            <p>Since we preallocated the corners, the function returns the number of calculated corners for us. The result returns an array of structures with the <em>x</em> and <em>y</em> fields, so we can print it using those fields:</p> 
            <pre class="line-numbers"><code class="language-javascript">for (var i = 0; i &lt; count; i++) {
   context.fillStyle = '#0f0';
   context.fillRect(corners[i].x, corners[i].y, 3, 3);
}</code></pre>
            <p>The result is nearly the same for both algorithms. The difference is in some parts of realization. Let's look at the following example:</p> 
            <p style="text-align: center;"><img style="border: 2px solid black; display: block; margin-left: auto; margin-right: auto;" src="/sites/default/files/Article-Images/B05004_2.png" alt="" width="500" height="185">From left to right: tracking.js without blur, JSFeat without blur, tracking.js and JSFeat with blur.</p> 
            <p>If you look closely, you can see the difference between tracking.js and JSFeat results, but it is not easy to spot it. Look at how much noise was reduced by applying just a small 3 x 3 Gaussian filter! A lot of noisy points were removed from the background. And now the algorithm can focus on points that represent flowers and the pattern of the vase.</p> 
            <p>We have extracted key points from our image, and we successfully reached the goal of reducing the number of keypoints and focusing on the unique points of an image. Now, we need to compare or match those points somehow. How we can do that?</p> 
            <h1>Descriptors and object matching</h1> 
            <p>Image features by themselves are a bit useless. Yes, we have found unique points on an image. But what did we get? Only values of pixels and that's it. If we try to compare these values, it will not give us much information. Moreover, if we change the overall image brightness, we will not find the same keypoints on the same image! Taking into account all of this, we need the information that surrounds our key points. Moreover, we need a method to efficiently compare this information. First, we need to describe the image features, which comes from image descriptors. In this part, we will see how these descriptors can be extracted and matched. The tracking.js and JSFeat libraries provide different methods for image descriptors. We will discuss both.</p> 
            <h2>BRIEF and ORB descriptors</h2> 
            <p>The descriptors theory is focused on changes in image pixels' intensities. The tracking.js library provides the <strong>BRIEF</strong> (<strong>Binary Robust Independent Elementary Features</strong>) descriptors and its JSFeat extension—<strong>ORB</strong> (<strong>Oriented FAST and Rotated BRIEF</strong>). As we can see from the ORB naming, it is rotation invariant. This means that even if you rotate an object, the algorithm can still detect it. Moreover, the authors of the JSFeat library provide an example using the image pyramid, which is scale invariant too.</p> 
            <p>Let's start by explaining BRIEF, since it is the source for ORB descriptors. As a first step, the algorithm takes computed image features, and it takes the unique pairs of elements around each feature. Based on these pairs' intensities it forms a binary string. For example, if we have a pair of positions <em>i</em> and <em>j</em>, and if <em>I(i) &lt; I(j)</em> (where <em>I(pos)</em> means image value at the position <em>pos</em>), then the result is 1, else 0. We add this result to the binary string. We do that for <em>N</em> pairs, where <em>N</em> is taken as a power of <em>2</em> <em>(128, 256, 512)</em>. Since descriptors are just binary strings, we can compare them in an efficient manner. To match these strings, the Hamming distance is usually used. It shows the minimum number of substitutions required to change one string to another. For example, we have two binary strings: <em>10011</em> and <em>11001</em>. The Hamming distance between them is 2, since we need to change 2 bits of information to change the first string to the second.</p> 
            <p>The JSFeat library provides the functionality to apply ORB descriptors. The core idea is very similar to BRIEF. However, there are two major differences:</p> 
            <ul> 
             <li>The implementation is scale invariant, since the descriptors are computed for an image pyramid.</li> 
             <li>The descriptors are rotation invariant; the direction is computed using intensity of the patch around a feature. Using this orientation, ORB manages to compute the BRIEF descriptor in a rotation-invariant manner.</li> 
            </ul> 
            <h2>Implementation of descriptors implementation and their matching</h2> 
            <p>Our goal is to find an object from a template on a scene image. We can do that by finding features and descriptors on both images and matching descriptors from a template to an image.</p> 
            <p>We start from the tracking.js library and BRIEF descriptors. The first thing that we can do is set the number of location pairs:</p> 
            <pre class="line-numbers"><code class="language-javascript">tracking.Brief.N = 512</code></pre>
            <p>By default, it is <em>256</em>, but you can choose a higher value. The larger the value, the more information you will get and the more the memory and computational cost it requires.</p> 
            <p>Before starting the computation, do not forget to apply the Gaussian blur to reduce the image noise. Next, we find the FAST corners and compute descriptors on both images. Here and in the next example, we use the suffix <em>Object</em> for a template image and <em>Scene</em> for a scene image:</p> 
            <pre class="line-numbers"><code class="language-javascript">var cornersObject = tracking.Fast.findCorners(grayObject, colsObject, rowsObject);
var cornersScene = tracking.Fast.findCorners(grayScene, colsScene, rowsScene);
var descriptorsObject = tracking.Brief.getDescriptors(grayObject, colsObject, cornersObject);
var descriptorsScene = tracking.Brief.getDescriptors(grayScene, colsScene, cornersScene);</code></pre>
            <p>Then we do the matching:</p> 
            <pre class="line-numbers"><code class="language-javascript">var matches = tracking.Brief.reciprocalMatch(cornersObject, descriptorsObject, cornersScene, descriptorsScene);</code></pre>
            <p>We need to pass information of both corners and descriptors to the function, since it returns coordinate information as a result.</p> 
            <p>Next, we print both images on one canvas. To draw the matches using this trick, we need to shift our scene keypoints for the width of a template image as a <em>keypoint1</em> matching returns a point on a template and <em>keypoint2</em> returns a point on a scene image. The <em>keypoint1</em> and <em>keypoint2</em> are arrays with <em>x</em> and <em>y </em>coordinates at <em>0</em> and <em>1</em> indexes, respectively:</p> 
            <pre class="line-numbers"><code class="language-javascript">for (var i = 0; i &lt; matches.length; i++) {
   var color = '#' + Math.floor(Math.random() * 16777215).toString(16);
   context.fillStyle = color;
   context.strokeStyle = color;
   context.fillRect(matches[i].keypoint1[0], matches[i].keypoint1[1], 5, 5);
   context.fillRect(matches[i].keypoint2[0] + colsObject, matches[i].keypoint2[1], 5, 5);
   context.beginPath();
   context.moveTo(matches[i].keypoint1[0], matches[i].keypoint1[1]);
   context.lineTo(matches[i].keypoint2[0] + colsObject, matches[i].keypoint2[1]);
   context.stroke();
}</code></pre>
            <p>The JSFeat library provides most of the code for pyramids and scale invariant features not in the library, but in the examples, which are available on <a href="https://github.com/inspirit/jsfeat/blob/gh-pages/sample_orb.html" title="https://github.com/inspirit/jsfeat/blob/gh-pages/sample_orb.html">https://github.com/inspirit/jsfeat/blob/gh-pages/sample_orb.html</a>. We will not provide the full code here, because it requires too much space. But do not worry, we will highlight main topics here.</p> 
            <p>Let's start from functions that are included in the library. First, we need to preallocate the descriptors matrix, where <em>32</em> is the length of a descriptor and <em>500</em> is the maximum number of descriptors. Again, <em>32</em> is a power of two:</p> 
            <pre class="line-numbers"><code class="language-javascript">var descriptors = new jsfeat.matrix_t(32, 500, jsfeat.U8C1_t);</code></pre>
            <p>Then, we compute the ORB descriptors for each corner, we need to do that for both template and scene images:</p> 
            <pre class="line-numbers"><code class="language-javascript">jsfeat.orb.describe(matBlurred, corners, num_corners, descriptors);</code></pre>
            <p>The function uses global variables, which mainly define input descriptors and output matching:</p> 
            <pre class="line-numbers"><code class="language-javascript">function match_pattern()</code></pre>
            <p>The result <em>match_t</em> contains the following fields:</p> 
            <ul> 
             <li><em>screen_idx</em>: This is the index of a scene descriptor</li> 
             <li><em>pattern_lev</em>: This is the index of a pyramid level</li> 
             <li><em>pattern_idx</em>: This is the index of a template descriptor</li> 
            </ul> 
            <p>Since ORB works with the image pyramid, it returns corners and matches for each level:</p> 
            <pre class="line-numbers"><code class="language-javascript">var s_kp = screen_corners[m.screen_idx];
var p_kp = pattern_corners[m.pattern_lev][m.pattern_idx];</code></pre>
            <p>We can print each matching as shown here. Again, we use <em>Shift</em>, since we computed descriptors on separate images, but print the result on one canvas:</p> 
            <pre class="line-numbers"><code class="language-javascript">context.fillRect(p_kp.x, p_kp.y, 4, 4);
context.fillRect(s_kp.x + shift, s_kp.y, 4, 4);</code></pre>
            <h2>Working with a perspective</h2> 
            <p>Let's take a step away. Sometimes, an object you want to detect is affected by a perspective distortion. In that case, you may want to rectify an object plane. For example, a building wall:</p> 
            <p><img style="border: 2px solid black; display: block; margin-left: auto; margin-right: auto;" src="/sites/default/files/Article-Images/B05004_3.png" alt="" width="500" height="149"></p> 
            <p>Looks good, doesn't it? How do we do that? Let's look at the code:</p> 
            <pre class="line-numbers"><code class="language-javascript">var imgRectified = new jsfeat.matrix_t(mat.cols, mat.rows, jsfeat.U8_t | jsfeat.C1_t);
var transform = new jsfeat.matrix_t(3, 3, jsfeat.F32_t | jsfeat.C1_t);

jsfeat.math.perspective_4point_transform(transform,
       0, 0, 0, 0, // first pair x1_src, y1_src, x1_dst, y1_dst
       640, 0, 640, 0, // x2_src, y2_src, x2_dst, y2_dst and so on.
       640, 480, 640, 480,
       0, 480, 180, 480);
jsfeat.matmath.invert_3x3(transform, transform);
jsfeat.imgproc.warp_perspective(mat, imgRectified, transform, 255);</code></pre>
            <p>Primarily, as we did earlier, we define a result matrix object. Next, we assign a matrix for image perspective transformation. We calculate it based on four pairs of corresponding points. For example, the last, that is, the fourth point of the original image, which is <em>[0, 480]</em>, should be projected to the point <em>[180, 480]</em> on the rectified image. Here, the first coordinate refers to <em>x</em> and the second to <em>y</em>. Then, we invert the transform matrix to be able to apply it to the original image—the <em>mat</em> variable. We pick the background color as white (255 for an unsigned byte). As a result, we get a nice image without any perspective distortion.</p> 
            <h2>Finding an object location</h2> 
            <p>Returning to our primary goal, we found a match. That is great. But what we did not do is finding an object location. There is no function for that in the tracking.js library, but JSFeat provides such functionality in the examples section.</p> 
            <p>First, we need to compute a perspective transform matrix. This is why we discussed the example of such transformation previously. We have points from two images but we do not have a transformation for the whole image.</p> 
            <p>First, we define a transform matrix:</p> 
            <pre class="line-numbers"><code class="language-javascript">var homo3x3 = new jsfeat.matrix_t(3, 3, jsfeat.F32C1_t);</code></pre>
            <p>To compute the homography, we need only four points. But after the matching, we get too many. In addition, there are can be noisy points, which we will need to skip somehow. For that, we use a <strong>RANSAC</strong> (<strong>Random sample consensus</strong>) algorithm. It is an iterative method for estimating a mathematical model from a dataset that contains outliers (noise). It estimates outliers and generates a model that is computed without the noisy data.</p> 
            <p>Before we start, we need to define the algorithm parameters. The first parameter is a match mask, where all mathces will be marked as good (1) or bad (0):</p> 
            <pre class="line-numbers"><code class="language-javascript">var match_mask = new jsfeat.matrix_t(500, 1, jsfeat.U8C1_t);</code></pre>
            <p>Our mathematical model to find:</p> 
            <pre class="line-numbers"><code class="language-javascript">var mm_kernel = new jsfeat.motion_model.homography2d();</code></pre>
            <p>Minimum number of points to estimate a model (4 points to get a homography):</p> 
            <pre class="line-numbers"><code class="language-javascript">var num_model_points = 4;</code></pre>
            <p>Maximum threshold to classify a data point as an inlier or a good match:</p> 
            <pre class="line-numbers"><code class="language-javascript">var reproj_threshold = 3;</code></pre>
            <p>Finally, the variable that holds main parameters and the last two arguments define the maximum ratio of outliers and probability of success when the algorithm stops at the point where the number of inliers is 99 percent:</p> 
            <pre class="line-numbers"><code class="language-javascript">var ransac_param = new jsfeat.ransac_params_t(num_model_points,
       reproj_threshold, 0.5, 0.99);</code></pre>
            <p>Then, we run the RANSAC algorithm. The last parameter represents the number of maximum iterations for the algorithm:</p> 
            <pre class="line-numbers"><code class="language-javascript">jsfeat.motion_estimator.ransac(ransac_param, mm_kernel,
       object_xy, screen_xy, count, homo3x3, match_mask, 1000);</code></pre>
            <p>The shape finding can be applied for both tracking.js and JSFeat libraries, you just need to set matches as <em>object_xy</em> and <em>screen_xy</em>, where those arguments must hold an array of objects with the <em>x</em> and <em>y</em> fields. After we find the transformation matrix, we compute the projected shape of an object to a new image:</p> 
            <pre class="line-numbers"><code class="language-javascript">var shape_pts = tCorners(homo3x3.data, colsObject, rowsObject);</code></pre>
            <p>After the computation is done, we draw computed shapes on our images:</p> 
            <p><img style="border: 2px solid black; display: block; margin-left: auto; margin-right: auto;" src="/sites/default/files/Article-Images/B05004_4.png" alt="" width="396" height="270"></p> 
            <p>As we see, our program successfully found an object in both cases. Actually, both methods can show different performance, it is mainly based on the thresholds you set.</p> 
            <h1>Summary</h1> 
            <p>Image features and descriptors matching are powerful tools for object detection. Both JSFeat and tracking.js libraries provide different functionalities to match objects using these features. In addition to this, the JSFeat project contains algorithms for object finding. These methods can be useful for tasks such as uniques object detection, face tracking, and creating a human interface by tracking various objects very efficiently.</p> 
            <h1>Resources for Article:</h1> 
            <hr size="1" noshade> 
            <p><strong><strong><a name="more"></a><span style="color: #000000;">Further resources on this subject:</span></strong></strong></p> 
            <ul> 
             <li><a href="https://www.packtpub.com/books/content/welcome-javascript-full-stack" target="_blank">Welcome to JavaScript in the full stack</a>[article]</li> 
             <li><a href="https://www.packtpub.com/books/content/introducing-jax-rs-api" target="_blank">Introducing JAX-RS API</a>[article]</li> 
             <li><a href="https://www.packtpub.com/books/content/using-google-maps-apis-knockoutjs" target="_blank">Using Google Maps APIs with Knockout.js</a> [article]</li> 
            </ul> 
            <hr size="1" noshade> 
           </div> 
           <div class="article-featured-block" data-product="true" data-product-id="9781785886171" data-product-price="29.99" data-product-title="Computer Vision for the Web" data-product-type="ebooks" data-product-brand="Packt Publishing" data-product-category="Web Development"> 
            <div class="blog-featured-book left"> 
             <a href="/web-development/computer-vision-web"> <img src="//d255esdrn735hr.cloudfront.net/sites/default/files/6171OS.jpg"> </a> 
            </div> 
            <div class="article-book-title"> 
             <p>You've been reading an excerpt of:</p> 
             <h2>Computer Vision for the Web</h2> 
             <a href="/web-development/computer-vision-web"> 
              <div class="fake-button">
                Explore Title 
              </div> </a> 
            </div> 
           </div> 
          </div> 
          <div id="fb-root"></div> 
          <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.9&appId=1891977071076455";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
          <div class="fb-comments" data-href="http://www.packtpub.com/books/content/object-detection-using-image-features-javascript" data-width="100%" data-numposts="5"></div> 
         </div> 
         <div class="blog-content-right left"> 
          <div class="sidebar-mapt-upsell tech-sidebar-panel"> 
           <a href="https://mapt.io/free-trial-plan/"> <img src="//d1ldz4te4covpm.cloudfront.net/sites/all/themes/packt_v4/images/mapt-trial.png"> </a> 
          </div>
          <div class="tech-sidebar-panel sidebar-related left"> 
           <div class="related-blocks"> 
            <div class="related-block left"> 
             <a href="/tech/Java"> <img src="http://d3gnp09177mxuh.cloudfront.net/tech-page-images/java.png"> <p class="author">Java</p> </a> 
            </div> 
            <div class="related-block left"> 
             <a href="/tech/Python"> <img src="http://d3gnp09177mxuh.cloudfront.net/tech-page-images/python.png"> <p class="author">Python</p> </a> 
            </div> 
            <div class="related-block left"> 
             <a href="/tech/C%23"> <img src="http://d3gnp09177mxuh.cloudfront.net/tech-page-images/generic.png"> <p class="author">C#</p> </a> 
            </div> 
            <div class="related-block left"> 
             <a href="/tech/C%2B%2B"> <img src="http://d3gnp09177mxuh.cloudfront.net/tech-page-images/generic.png"> <p class="author">C++</p> </a> 
            </div> 
            <div class="related-block left"> 
             <a href="/tech/Android"> <img src="http://d3gnp09177mxuh.cloudfront.net/tech-page-images/android.png"> <p class="author">Android</p> </a> 
            </div> 
           </div> 
          </div> 
          <div class="sidebar-newsletter"> 
           <div class="sidebar-newsletter__header">
            Newsletter
           </div> 
           <form action="/books/content/object-detection-using-image-features-javascript" accept-charset="UTF-8" method="post" id=""> 
            <div> 
             <div class="sidebar-newsletter__item"> 
              <label class="option"> 
               <div class="form-item" id="edit-newsletters-317-wrapper"> 
                <label class="option"><input type="checkbox" name="newsletters[317]" id="edit-newsletters-317" value="317" class="form-checkbox"> Free Stuff</label> 
               </div> </label> 
              <p class="sidebar-newsletter__more-info">Access to free eBooks and other free content like blogs/articles. Sent maximum once weekly.</p> 
             </div> 
             <div class="sidebar-newsletter__item"> 
              <label class="option"> 
               <div class="form-item" id="edit-newsletters-60-wrapper"> 
                <label class="option"><input type="checkbox" name="newsletters[60]" id="edit-newsletters-60" value="60" class="form-checkbox"> Offers &amp; Alerts</label> 
               </div> </label> 
              <p class="sidebar-newsletter__more-info">New releases, bespoke offers, exclusive discounts, and great free content.</p> 
             </div> 
             <div class="sidebar-newsletter__footer"> 
              <div class="form-item" id="email-wrapper"> 
               <label for="email">Email Address <span class="form-required" title="This field is required.">*</span></label> 
               <input type="text" maxlength="128" name="email" id="email" size="24" value="" x-autocompletetype="email" placeholder="email" class="form-text required"> 
              </div> 
              <input type="submit" name="op" id="edit-submit" value="Subscribe" class=" form-submit"> 
             </div> 
             <input type="hidden" name="form_id" id="edit-packt-tech-pages-sidebar-newsletters-form" value="packt_tech_pages_sidebar_newsletters_form"> 
             <input type="hidden" name="form_build_id" id="form-4935c9bb154955be43f3214acfaf1b0e" value="form-4935c9bb154955be43f3214acfaf1b0e"> 
            </div>
           </form> 
          </div>
          <div class="sidebar-free-learning tech-sidebar-panel"> 
           <a href="/packt/offers/free-learning"> <img src="//d1ldz4te4covpm.cloudfront.net/sites/all/themes/packt_v4/images/free-learning.png"> </a> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <!-- /#content --> 
    </div> 
   </div> 
   <!-- #footer --> 
   <div id="footer" class="region region-footer"> 
    <div class="section-inner cf"> 
     <div class="footer-main-block"> 
      <div class="footer-section-inner"> 
       <h2>Contact Us</h2> 
       <p>Get in touch&nbsp;<a href="/books/info/packt/contact-us">here</a>&nbsp;<span style="font-family: Calibri, sans-serif; font-size: 11pt; line-height: 115%;">if you have any queries or issues.</span></p> 
      </div> 
     </div> 
     <div class="footer-main-block middle-footer-block"> 
      <div class="footer-section-inner"> 
       <h2>Help &amp; Support</h2> 
       <p class="MsoNormal">Click&nbsp;<a href="/books/info/packt/faq">here</a>&nbsp;for FAQs, order information, T&amp;Cs, errata and code downloads.</p> 
      </div> 
     </div> 
     <div class="footer-main-block"> 
      <div class="footer-section-inner"> 
       <h2>Alerts &amp; Offers</h2> 
       <p class="MsoNormal">Sign up to our emails for regular updates, bespoke offers, exclusive discounts and great free content.</p> 
       <form accept-charset="UTF-8" method="post" id="packt-v3-subscribtion-dotd-form-1"> 
        <div>
         <div class="form-item"> 
         </div> 
         <div class="form-item" id="edit-mail-1-wrapper"> 
          <input type="text" maxlength="128" name="mail" id="edit-mail-1" size="60" value="" placeholder="Enter your email address" class="form-text"> 
         </div> 
         <input type="hidden" name="newsletter_id" id="edit-newsletter-id-1" value="60"> 
         <input type="submit" name="op" id="edit-submit-5" value="Submit" class=" form-submit"> 
         <input type="hidden" name="form_build_id" id="form-d2e54c5c5a9fa211e7119d63bbe559f4" value="form-d2e54c5c5a9fa211e7119d63bbe559f4"> 
         <input type="hidden" name="form_id" id="edit-packt-v3-subscribtion-dotd-form-1" value="packt_v3_subscribtion_dotd_form"> 
        </div>
       </form> 
      </div> 
     </div> 
    </div> 
   </div> 
   <!-- /#footer --> 
   <!-- #footer-bottom --> 
   <div id="footer-bottom" class="region region-footer-bottom"> 
    <div class="section-inner cf"> 
     <div class="footer-bottom-block"> 
      <div class="footer-bottom-block-left">
        © Packt Publishing Limited. 
       <br> All Rights Reserved 
      </div> 
     </div> 
     <div class="footer-bottom-block footer-contact-us"> 
      <a href="/books/info/packt/contact-us">Contact Us</a> 
     </div> 
     <div class="footer-bottom-block">
       View our 
      <a href="/books/info/packt/cookies">Cookie Policy</a> 
     </div> 
     <div class="footer-bottom-block">
       Our 
      <a href="/books/info/packt/privacy">Privacy Policy</a> 
     </div> 
     <div class="footer-bottom-block"> 
      <a target="_blank" href="http://www.linkedin.com/company/packt-publishing" class="footer-social linkedin"></a> 
      <a target="_blank" href="http://twitter.com/packtpub" class="footer-social twitter"></a> 
      <a target="_blank" href="http://www.facebook.com/packtpub" class="footer-social facebook"></a> 
      <a target="_blank" href="https://plus.google.com/112328881995125817822" class="footer-social gplus"></a> 
      <a target="_blank" href="https://www.youtube.com/user/packt1000" class="footer-social youtube"></a> 
     </div> 
    </div> 
   </div> 
   <!-- /#footer-bottom --> 
   <script>
			(function (w,i,d,g,e,t,s)
			{w[d] = w[d]||[];t= i.createElement(g); t.async=1;t.src=e;s=i.getElementsByTagName(g)[0];s.parentNode.insertBefore(t, s); }
			)(window, document, '_gscq','script','//widgets.getsitecontrol.com/18511/script.js');
			</script> 
  </div> 
  <!-- /#page --> 
  <div id="content-overlay"></div> 
  <div id="book-level-overlay" style="display: none;"> 
  </div> 
  <div id="book-level-lightbox" class="cf" style="display: none;"> 
   <div class="book-level-lightbox-inner"> 
    <div class="book-level-heading section-inner"> 
     <h2>Series &amp; Level 
      <div class="book-level-cross"></div></h2> 
    </div> 
    <div class="section-inner cf"> 
     <div class="book-level-underheading">
       We understand your time is important. Uniquely amongst the major publishers, we seek to develop and publish the broadest range of learning and information products on each technology. Every Packt product delivers a specific learning pathway, broadly defined by the Series type. This structured approach enables you to select the pathway which best suits your knowledge level, learning style and task objectives. 
     </div> 
    </div> 
    <div class="book-level-series"> 
     <div class="section-inner book-level-series-inner cf"> 
      <div class="three-book-series-row cf"> 
       <div class="book-level-series-block"> 
        <div class="cf"> 
         <h3 class="float-left">Learning</h3> 
        </div> 
        <div class="book-level-series-text">
          As a new user, these step-by-step tutorial guides will give you all the practical skills necessary to become competent and efficient. 
        </div> 
       </div> 
       <div class="book-level-series-block"> 
        <div class="cf"> 
         <h3 class="float-left">Beginner's Guide</h3> 
        </div> 
        <div class="book-level-series-text">
          Friendly, informal tutorials that provide a practical introduction using examples, activities, and challenges. 
        </div> 
       </div> 
       <div class="book-level-series-block"> 
        <div class="cf"> 
         <h3 class="float-left">Essentials</h3> 
        </div> 
        <div class="book-level-series-text">
          Fast paced, concentrated introductions showing the quickest way to put the tool to work in the real world. 
        </div> 
       </div> 
      </div> 
      <div class="three-book-series-row cf"> 
       <div class="book-level-series-block"> 
        <div class="cf"> 
         <h3 class="float-left">Cookbook</h3> 
        </div> 
        <div class="book-level-series-text">
          A collection of practical self-contained recipes that all users of the technology will find useful for building more powerful and reliable systems. 
        </div> 
       </div> 
       <div class="book-level-series-block"> 
        <div class="cf"> 
         <h3 class="float-left">Blueprints</h3> 
        </div> 
        <div class="book-level-series-text">
          Guides you through the most common types of project you'll encounter, giving you end-to-end guidance on how to build your specific solution quickly and reliably. 
        </div> 
       </div> 
       <div class="book-level-series-block"> 
        <div class="cf"> 
         <h3 class="float-left">Mastering</h3> 
        </div> 
        <div class="book-level-series-text">
          Take your skills to the next level with advanced tutorials that will give you confidence to master the tool's most powerful features. 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="book-level-level"> 
     <div class="section-inner cf"> 
      <div class="book-level-expo float-left"> 
       <h3>Starting</h3> 
       <div class="book-level-text">
         Accessible to readers adopting the topic, these titles get you into the tool or technology so that you can become an effective user. 
       </div> 
      </div> 
      <div class="book-level-gauges float-left"> 
       <div class="book-level-gauge-left"></div> 
       <div class="book-level-line"></div> 
       <!--div class="book-level-gauge-middle"></div>
					<div class="book-level-line"></div--> 
       <div class="book-level-gauge-right"></div> 
      </div> 
      <div class="book-level-expo float-left"> 
       <h3>Progressing</h3> 
       <div class="book-level-text">
         Building on core skills you already have, these titles share solutions and expertise so you become a highly productive power user. 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div>   
 </body>
</html>