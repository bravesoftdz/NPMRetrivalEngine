<!doctype html>
<html lang="en">
 <head> 
  <meta charset="UTF-8"> 
  <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <meta name="generator" content="Asciidoctor 1.5.3"> 
  <meta name="author" content="Ian F. Darwin"> 
  <title>Distributed Java: RMI Tutorial</title> 
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"> 
  <style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style> 
 </head> 
 <body class="book"> 
  <div id="header"> 
   <h1>Distributed Java: RMI Tutorial</h1> 
   <div class="details"> 
    <span id="author" class="author">Ian F. Darwin</span>
    <br> 
   </div> 
   <div id="toc" class="toc"> 
    <div id="toctitle">
     Table of Contents
    </div> 
    <ul class="sectlevel1"> 
     <li><a href="#javacook-rmi">Notice</a></li> 
     <li><a href="#javacook-rmi-intro">Introduction</a></li> 
     <li><a href="#javacook-rmi-SECT-1">Defining the RMI Contract</a> 
      <ul class="sectlevel2"> 
       <li><a href="#javacook-rmi-SECT-1.1">Problem</a></li> 
       <li><a href="#javacook-rmi-SECT-1.2">Solution</a></li> 
       <li><a href="#javacook-rmi-SECT-1.3">Discussion</a></li> 
      </ul> </li> 
     <li><a href="#javacook-rmi-SECT-2">Creating an RMI Client</a> 
      <ul class="sectlevel2"> 
       <li><a href="#javacook-rmi-SECT-2.1">Problem</a></li> 
       <li><a href="#javacook-rmi-SECT-2.2">Solution</a></li> 
       <li><a href="#javacook-rmi-SECT-2.3">Discussion</a></li> 
      </ul> </li> 
     <li><a href="#javacook-rmi-SECT-3">Creating an RMI Server</a> 
      <ul class="sectlevel2"> 
       <li><a href="#javacook-rmi-SECT-3.1">Problem</a></li> 
       <li><a href="#javacook-rmi-SECT-3.2">Solution</a></li> 
       <li><a href="#javacook-rmi-SECT-3.3">Discussion</a></li> 
       <li><a href="#javacook-rmi-SECT-3.4">See Also</a></li> 
      </ul> </li> 
     <li><a href="#javacook-rmi-SECT-4">Deploying RMI Across a Network</a> 
      <ul class="sectlevel2"> 
       <li><a href="#javacook-rmi-SECT-4.1">Problem</a></li> 
       <li><a href="#javacook-rmi-SECT-4.2">Solution</a></li> 
       <li><a href="#javacook-rmi-SECT-4.3">Discussion</a></li> 
      </ul> </li> 
     <li><a href="#javacook-rmi-SECT-5">Program: RMI Callbacks</a></li> 
     <li><a href="#javacook-rmi-SECT-6">Program: NetWatch</a> 
      <ul class="sectlevel2"> 
       <li><a href="#javacook-rmi-SECT-6.1">See Also</a></li> 
      </ul> </li> 
    </ul> 
   </div> 
  </div> 
  <div id="content"> 
   <div class="sect1"> 
    <h2 id="javacook-rmi">Notice</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>This material was originally the RMI Chapter in my O’Reilly <a href="http://shop.oreilly.com/product/0636920026518.do">Java Cookbook</a>. It was removed from the Third Edition of that book, and is reprinted here by permission of O’Reilly Media. There are several links that do not work as a result.</p> 
     </div> 
     <div class="paragraph"> 
      <p>The source code examples can be downloaded from <a href="http://github.com/IanDarwin/javasrc" class="bare">http://github.com/IanDarwin/javasrc</a> and <a href="http://github.com/IanDarwin/javasrcee" class="bare">http://github.com/IanDarwin/javasrcee</a>.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="javacook-rmi-intro">Introduction</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>A <em>distributed system</em> is a program or set of programs that runs on more than one computing resource. Distributed computing covers a wide spectrum, from intraprocess distributed applications (which Java calls threaded applications, discussed in <a href="#javacook-threads">[javacook-threads]</a>), through intrasystem applications (such as a network client and server on the same machine), to applications where a client program and a server program run on machines far apart (such as a web application).</p> 
     </div> 
     <div class="paragraph"> 
      <p>Distributed computing was around long before Java. Some traditional distributed mechanisms include RPC (remote procedure call) and CORBA. Java adds RMI (Remote Method Invocation), its own CORBA support, and EJB (Enterprise JavaBeans) to the mix. This chapter covers only RMI in detail, but these other technologies are discussed briefly.</p> 
     </div> 
     <div class="paragraph"> 
      <p>At its simplest level, <em>remote procedure call</em> is the ability to run code on another machine and have it behave as much as possible like a local method call. Most versions of Unix use remote procedure calls extensively: Sun/Oracle NFS, YP/NIS, and NIS+ are all built on top of their RPC mechanism. Another RCP implementation for UNIX is called DCE; Microsoft Windows implements large parts of the Unix DCE Remote Procedure Call specification and can interoperate with it. Each of these defines its own slightly ad hoc method of specifying the interface to the remote call. Sun/Oracle RPC uses a program called <em>rpcgen</em>, which reads a protocol specification and writes both the client and server network code. These are both Unix-specific; they have their place but aren’t as portable as Java.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Java <em>Remote Method Invocation</em> (RMI) is a type of remote procedure call that is network-independent, lightweight, and totally portable, as it’s written in pure Java. I discuss RMI in this chapter in enough detail to get you started.</p> 
     </div> 
     <div class="paragraph"> 
      <p>CORBA is the Object Management Group’s (OMG) Common Object Request Broker Architecture, a sort of remote procedure call for programs written in C, C++, Java, Ada, Smalltalk, and others to call methods in objects written in any of those languages. It provides a transport service called the Internet Inter-Orb Protocol (IIOP) that allows object implementations from different vendors to interoperate. One version of RMI runs over IIOP, making it possible to claim that RMI is CORBA-compliant.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Both RMI and CORBA should really be called "remote method calls," as they both emphasize remote <em>objects</em>.</p> 
     </div> 
     <div class="paragraph"> 
      <p>Enterprise JavaBeans (EJB) is a distributed object mechanism used primarily for building reusable distributed objects that provide business logic and often database storage. There are several types of EJBs, but the ones we’re concerned with can be accessed both locally (e.g, inside the same JVM from a Web Tier component or another EJB) and remotely. As you might expect, the remote access is over RMI!</p> 
     </div> 
     <div class="paragraph"> 
      <p>CORBA and EJB are of interest primarily to enterprise developers; they are covered in O’Reilly’s <em>Java EE 7 Essentials: Enterprise Developer Handbook</em> (see <a href="http://shop.oreilly.com/product/0636920030614.do" class="bare">http://shop.oreilly.com/product/0636920030614.do</a>). You can read more about EJB in the book <em>Enterprise JavaBeans</em> <a href="http://shop.oreilly.com/product/9780596158033.do" class="bare">http://shop.oreilly.com/product/9780596158033.do</a>.</p> 
     </div> 
     <div id="javacook-rmi-SIDEBAR-1" class="sidebarblock"> 
      <div class="content"> 
       <div class="title">
        Ian’s Basic Steps: RMI
       </div> 
       <div class="paragraph"> 
        <p>To use RMI:</p> 
       </div> 
       <div class="olist arabic"> 
        <ol class="arabic"> 
         <li> <p>Define (or locate) the remote interface in agreement with the server.</p> </li> 
         <li> <p>Write your server.</p> </li> 
         <li> <p>Run <em>rmic</em> (Java RMI stub compiler) to generate the network glue.</p> </li> 
         <li> <p>Write the client.</p> </li> 
         <li> <p>Ensure that the RMI registry is running.</p> </li> 
         <li> <p>Start the server.</p> </li> 
         <li> <p>Run one or more clients.</p> </li> 
        </ol> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="javacook-rmi-SECT-1">Defining the RMI Contract</h2> 
    <div class="sectionbody"> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-1.1">Problem</h3> 
      <div class="paragraph"> 
       <p>You want to define the communications exchange between client and server.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-1.2">Solution</h3> 
      <div class="paragraph"> 
       <p>Define a Java interface.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-1.3">Discussion</h3> 
      <div class="paragraph"> 
       <p>RMI procedures are defined using an existing Java mechanism: interfaces. An interface is similar to an abstract class, but a class can implement more than one interface. RMI remote interfaces must be subinterfaces of java.rmi.Remote. All parameters and return values must be either primitives (int, double, etc.), or implement Serializable (as do most of the standard types like String). Or, as we’ll see in <a href="#javacook-rmi-SECT-5">Program: RMI Callbacks</a>, they can also be Remote.</p> 
      </div> 
      <div class="paragraph"> 
       <p><a href="#javacook-rmi-FIG-1">RMI overview</a> shows the relationships between the important classes involved in an RMI implementation. The developer need only write the interface and two classes, the client application and the server object implementation. The RMI stub or proxy and the RMI skeleton or adapter are generated for you by the <em>rmic</em> program (see <a href="#javacook-rmi-SECT-3">Creating an RMI Server</a>), while the RMI Registry and other RMI classes at the bottom of the figure are provided as part of RMI itself.</p> 
      </div> 
      <div class="paragraph"> 
       <p><a href="#javacook-rmi-EX-1">RemoteDate.java</a> is a simple RemoteDate getter interface, which lets us find out the date and time on a remote machine.</p> 
      </div> 
      <div id="javacook-rmi-EX-1" class="listingblock"> 
       <div class="title">
        RemoteDate.java
       </div> 
       <div class="content"> 
        <pre class="highlight"><code class="language-java" data-lang="java">package rmi;

import java.util.Date;

// BEGIN main
/** A statement of what the client &amp; server must agree upon. */
public interface RemoteDate extends java.rmi.Remote {

	/** The method used to get the current date on the remote */
	public Date getRemoteDate() throws java.rmi.RemoteException;

	/** The name used in the RMI registry service. */
	public final static String LOOKUPNAME = "RemoteDate";
}
// END main</code></pre> 
       </div> 
      </div> 
      <div id="javacook-rmi-FIG-1" class="imageblock"> 
       <div class="content"> 
        <img src="data:image/png;base64,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" alt="jcb2 2201"> 
       </div> 
       <div class="title">
        Figure 1. RMI overview
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>This file must list all the methods that will be callable from the server by the client. The lookup name is an arbitrary name that is registered by the server and looked up by the client to establish communications between the two processes (when looked up by the client it will normally be part of an <em>rmi</em>: URL). While most authors just hardcode this string in both programs, I find this error-prone, so I usually include the lookup name in the interface.</p> 
      </div> 
      <div class="paragraph"> 
       <p>"So interfaces can contain variables?" you ask. No variables indeed, but interfaces may contain nonvariable (final) fields such as the field LOOKUPNAME in <a href="#javacook-rmi-EX-1">RemoteDate.java</a>. Putting the lookup name here ensures that both server and client really agree, and that is what this interface is all about, after all. I’ve seen other developers waste a considerable amount of time tracking down spelling mistakes in the lookup names of various remote services, so I prefer doing it this way.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="javacook-rmi-SECT-2">Creating an RMI Client</h2> 
    <div class="sectionbody"> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-2.1">Problem</h3> 
      <div class="paragraph"> 
       <p>You want to write a client to use an RMI service.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-2.2">Solution</h3> 
      <div class="paragraph"> 
       <p>Locate the object via JNDI and call its methods.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-2.3">Discussion</h3> 
      <div class="paragraph"> 
       <p>Assume for now that the server object is running remotely. To locate it, you have to use the Java Naming and Directory Interface (JNDI, package javax.naming). JNDI ise a general-purpose binding and lookup mechanism that is supported both by Java SE and by Java EE. Here we only use the client parts of it to look up the server, which we’ll actually create in <a href="#javacook-rmi-SECT-3">Creating an RMI Server</a>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Use the JNDI static method Naming.lookup( ), passing in the lookup name. This gives you a reference to a <em>proxy object</em>, an object that, like the real server object, implements the remote interface but runs in the same Java Virtual Machine as your client application. Here we see the beauty of interfaces: the proxy object implements the interface so that your code can use it just as it would use a local object providing the given service. And the remote object also implements the interface so that the proxy object’s remote counterpart can use it exactly as the proxy is used. <a href="#javacook-rmi-EX-2">DateClient.java</a> shows the client for the RemoteDate service.</p> 
      </div> 
      <div id="javacook-rmi-EX-2" class="listingblock"> 
       <div class="title">
        DateClient.java
       </div> 
       <div class="content"> 
        <pre class="highlight"><code class="language-java" data-lang="java">package rmi;

import java.rmi.Naming;
import java.util.Date;

// BEGIN main
/* A very simple client for the RemoteDate service. */
public class DateClient {

	/** The local proxy for the service. */
	protected static RemoteDate netConn = null;

	public static void main(String[] args) {
		try {
			netConn = (RemoteDate)Naming.lookup(RemoteDate.LOOKUPNAME);
			Date today = netConn.getRemoteDate();
			System.out.println(today.toString()); // Could use a DateFormat...
		} catch (Exception e) {
			System.err.println("RemoteDate exception: " + e.getMessage());
			e.printStackTrace();
		}
	}
}
// END main</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>Also in the online source <em>rmi</em> directory are <em>DateApplet.htm</em> and <em>DateApplet.java</em>, which together provide an example of using the server. In DateApplet, the connection is set up in the applet’s init( ) method. The actual RMI call to get the date is done in the action handler for the push button so that you can refresh it on demand.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="javacook-rmi-SECT-3">Creating an RMI Server</h2> 
    <div class="sectionbody"> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-3.1">Problem</h3> 
      <div class="paragraph"> 
       <p>The client looks good on paper, but it will be lonely without a server to talk to.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-3.2">Solution</h3> 
      <div class="paragraph"> 
       <p>You need to write two parts for the server, an implementation class and a main method. These can be in the same class or separated for clarity.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-3.3">Discussion</h3> 
      <div class="paragraph"> 
       <p>The server-side code has to do a bit more work; see the sidebar.</p> 
      </div> 
      <div id="javacook-rmi-SIDEBAR-2" class="sidebarblock"> 
       <div class="content"> 
        <div class="title">
         Ian’s Basic Steps: RMI Server
        </div> 
        <div class="paragraph"> 
         <p>To implement an RMI server:</p> 
        </div> 
        <div class="olist arabic"> 
         <ol class="arabic"> 
          <li> <p>Define (or locate) the remote interface in agreement with the client.</p> </li> 
          <li> <p>Define the constructor for the remote object.</p> </li> 
          <li> <p>Provide implementations for the methods that can be invoked remotely.</p> </li> 
          <li> <p>Create and install a security manager.</p> </li> 
          <li> <p>Create one or more instances of a remote object.</p> </li> 
          <li> <p>Register at least one of the remote objects with the RMI remote object registry.</p> </li> 
         </ol> 
        </div> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>This implementation divides the server into the traditional two parts—a main program and an implementation class. It is just as feasible to combine these in a single class. The main program shown in <a href="#javacook-rmi-EX-3">DateServer.java</a> simply constructs an instance of the implementation and registers it with the lookup service.</p> 
      </div> 
      <div id="javacook-rmi-EX-3" class="listingblock"> 
       <div class="title">
        DateServer.java
       </div> 
       <div class="content"> 
        <pre class="highlight"><code class="language-java" data-lang="java">package rmi;

import java.rmi.Naming;

// BEGIN main
public class DateServer {
	public static void main(String[] args) {

		// You may want a SecurityManager for downloading of classes:
		// System.setSecurityManager(new RMISecurityManager());

		try {
			// Create an instance of the server object
			RemoteDateImpl im = new RemoteDateImpl();

			System.out.println("DateServer starting...");

			// Publish it in the RMI registry.
			// Of course you have to have rmiregistry or equivalent running!
			Naming.rebind(RemoteDate.LOOKUPNAME, im);

			System.out.println("DateServer ready.");
		} catch (Exception e) {
			System.err.println(e);
			System.exit(1);
		}
	}
}
// END main</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>The Naming.bind( ) method creates an association between the lookup name and the instance of the server object. This method fails if the server already has an instance of the given name, requiring you to call rebind( ) to overwrite it. But since that’s exactly where you’ll find yourself if the server crashes (or you kill it while debugging) and you restart it, many people just use rebind( ) all the time.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The implementation class must implement the given remote interface. See <a href="#javacook-rmi-EX-4">RemoteDateImpl.java</a>.</p> 
      </div> 
      <div id="javacook-rmi-EX-4" class="listingblock"> 
       <div class="title">
        RemoteDateImpl.java
       </div> 
       <div class="content"> 
        <pre class="highlight"><code class="language-java" data-lang="java">package rmi;

import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.util.Date;

// BEGIN main
public class RemoteDateImpl extends UnicastRemoteObject implements RemoteDate {

	/** Construct the object that implements the remote server.
	 * Called from main, after it has the SecurityManager in place.
	 */
	public RemoteDateImpl() throws RemoteException {
		super();	// sets up networking
	}

	/** The remote method that "does all the work". This won't get
	 * called until the client starts up.
	 */
	public Date getRemoteDate() throws RemoteException {
		return new Date();
	}
}
// END main</code></pre> 
       </div> 
      </div> 
      <div class="sect3"> 
       <h4 id="javacook-rmi-SECT-3.3.1">Using the server</h4> 
       <div class="paragraph"> 
        <p>Once you’ve compiled the implementation class, you can run <em>rmic</em> (the RMI compiler) to build some glue files and install the class files (for the interface, the stub, and any data classes) into the client’s CLASSPATH:</p> 
       </div> 
       <div class="listingblock"> 
        <div class="content"> 
         <pre>$ javac -d . RemoteDateImpl.java
$ ls darwinsys/distdate
DateApplet$1.class         DateClient.class           RemoteDate.class
DateApplet.class           DateServer.class           RemoteDateImpl.class
$ rmic -d . darwinsys.distdate.RemoteDateImpl
$ ls darwinsys/distdate
DateApplet$1.class         DateServer.class        RemoteDateImpl_Skel.class
DateApplet.class           RemoteDate.class        RemoteDateImpl_Stub.class
DateClient.class           RemoteDateImpl.class
$</pre> 
        </div> 
       </div> 
       <div class="paragraph"> 
        <p>You can then start the RMI registry program. If you’re doing this by hand, just type the command <strong><code>rmiregistry</code></strong> in a separate window or start it in the background on systems that support this.</p> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-3.4">See Also</h3> 
      <div class="paragraph"> 
       <p>See the JDK documentation in <em>docs/guide/rmi/getstart.doc.html</em>.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="javacook-rmi-SECT-4">Deploying RMI Across a Network</h2> 
    <div class="sectionbody"> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-4.1">Problem</h3> 
      <div class="paragraph"> 
       <p>As shown so far, the server and the client must be on the same machine—some distributed system!</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-4.2">Solution</h3> 
      <div class="paragraph"> 
       <p>Get the RMI registry to dish out the client stubs on demand.</p> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-4.3">Discussion</h3> 
      <div class="paragraph"> 
       <p>RMI does not provide true <em>location transparency</em>, which means that you must at some point know the network name of the machine the server is running on. The server machine must be running the RMI registry program as well, though there’s no need for the RMI registry to be running on the client side.</p> 
      </div> 
      <div class="paragraph"> 
       <p>The RMI registry needs to send the client stubs to the client. The best way to do this is to provide an HTTP URL and ensure that the stub files can be loaded from your web server. This can be done by passing the HTTP URL into the RMI server’s startup by defining it in the system properties:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre>java -Djava.rmi.server.codebase=http://serverhost/stubsdir/ ServerMain</pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>In this example, serverhost is the TCP/IP network name of the host where the RMI server and registry are running, and stubsdir is some directory relative to the web server from which the stub files can be downloaded.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Be careful to start the RMI registry in its own directory, away from where you are storing (or building!) the RMI stubs. If RMI can find the stubs in its own CLASSPATH, it assumes they are universally available and won’t download them!</p> 
      </div> 
      <div class="paragraph"> 
       <p>The only other thing to do is to change the client’s view of the RMI lookup name to something like <em>rmi://serverhost/foo_bar_name</em>. And for security reasons, the installation of the RMI Security Manager, which was optional before, is now a requirement.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="javacook-rmi-SECT-5">Program: RMI Callbacks</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>One major benefit of RMI is that almost any kind of object can be passed as a parameter or return value of a remote method. The recipient of the object will not know ahead of time the class of the actual object it will receive. If the object is of a class that implements Remote (java.rmi.Remote), the returned object will in fact be a proxy object that implements at least the declared interface. If the object is not remote, it must be serializable, and a copy of it is transmitted across the Net. The prime example of this is a String. It makes no sense to write an RMI proxy object for String. Why? Remember from <a href="#javacook-strings">[javacook-strings]</a> that String objects are immutable! Once you have a String, you can copy it locally but never change it. So Strings, like most other core classes, can be copied across the RMI connection just as easily as they are copied locally. But Remote objects cause an RMI proxy to be delivered. So what stops the caller from passing an RMI object that is also itself a proxy? Nothing at all, and this is the basis of the powerful RMI callback mechanism.</p> 
     </div> 
     <div class="paragraph"> 
      <p>An RMI callback occurs when the client of one service passes an object that is the proxy for another service. The recipient can then call methods in the object it received and be calling back (hence the name) to where it came from. Think about a stock ticker service. You write a server that runs on your desktop and notifies you when your stock moves up or down. This server is also a remote object. You then pass this server object to the stock ticker service, which remembers it and calls its methods when the stock price changes. See <a href="#javacook-rmi-FIG-2">RMI callback service</a> for the big picture.</p> 
     </div> 
     <div id="javacook-rmi-FIG-2" class="imageblock"> 
      <div class="content"> 
       <img src="data:image/png;base64,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" alt="jcb2 2202"> 
      </div> 
      <div class="title">
       Figure 2. RMI callback service
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>The code for the callback service comes in several parts. Because there are two servers, there are also two interfaces. The first is the interface for the TickerServer service. There is only one method, connect( ), which takes one argument, a Client:</p> 
     </div> 
     <div class="listingblock"> 
      <div class="content"> 
       <pre class="highlight"><code class="language-java" data-lang="java">package rmi.callback;

import java.rmi.Remote;
import java.rmi.RemoteException;

// BEGIN main
public interface TickerServer extends Remote {
	public static final String LOOKUP_NAME = "Ticker_Service";
	public void connect(Client d) throws RemoteException;
}
// END main</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>Client is the interface that displays a stock price change message on your desktop. It also has only one method, alert( ), which takes a String argument:</p> 
     </div> 
     <div class="listingblock"> 
      <div class="title">
       Client.java
      </div> 
      <div class="content"> 
       <pre class="highlight"><code class="language-java" data-lang="java">// BEGIN main
package rmi.callback;

import java.rmi.*;

/** Client -- the interface for the client callback */
public interface Client extends Remote {
	public void alert(String mesg) throws RemoteException;
}
// END main</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>Now that you’ve seen both interfaces, let’s look at the TickerServer implementation (<a href="#javacook-rmi-EX-5">TickerServerImpl.java</a>). Its constructor starts a background thread to "track" stock prices; in fact, this implementation just calls a random number generator. A real implementation might use a third RMI service to track actual stock data. The connect( ) method is trivial; it just adds the given client (which is really an RMI proxy for the client server running on your desktop). The run method runs forever; on each iteration, after sleeping for a while, it picks a random stock movement and reports it to any and all registered clients. If there’s an error on a given client, the client is removed from the list.</p> 
     </div> 
     <div id="javacook-rmi-EX-5" class="listingblock"> 
      <div class="title">
       TickerServerImpl.java
      </div> 
      <div class="content"> 
       <pre class="highlight"><code class="language-java" data-lang="java">package rmi.callback;

import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Random;

// BEGIN main
/** This is the main class of the server */
public class TickerServerImpl
	extends UnicastRemoteObject
	implements TickerServer, Runnable
{
	private static final long serialVersionUID = -464196277362659008L;
	List&lt;Client&gt; list = new ArrayList&lt;Client&gt;();

	/** Construct the object that implements the remote server.
	 * Called from main, after it has the SecurityManager in place.
	 */
	public TickerServerImpl() throws RemoteException {
		super();	// sets up networking
	}

	/** Start background thread to track stocks :-) and alert users. */
	public void start() {
		new Thread(this).start();
	}

	/** The remote method that "does all the work". This won't get
	 * called until the client starts up.
	 */
	public void connect(Client da) throws RemoteException {
		System.out.println("Adding client " + da);
		list.add(da);
	}

	boolean done = false;
	Random rand = new Random();

	public void run() {
		while (!done) {
			try {
				Thread.sleep(10 * 1000);
				System.out.println("Tick");
			} catch (InterruptedException unexpected) {
				System.out.println("WAHHH!");
				done = true;
			}
			Iterator it = list.iterator();
			while (it.hasNext()){
				String mesg = ("Your stock price went " +
					(rand.nextFloat() &gt; 0.5 ? "up" : "down") + "!");
				// Send the alert to the given user.
				// If this fails, remove them from the list
				try {
					((Client)it.next()).alert(mesg);
				} catch (RemoteException re) {
                    System.out.println(
						"Exception alerting client, removing it.");
					System.out.println(re);
					it.remove();
				}
			}
		}
	}
}
// END main</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>As written, this code is not threadsafe; things might go bad if one client connects while we are running through the list of clients. I’ll show how to fix this in <a href="#javacook-threads-SECT-5">[javacook-threads-SECT-5]</a>.</p> 
     </div> 
     <div class="paragraph"> 
      <p>This program’s "server main" is trivial, so I don’t include it here; it just creates an instance of the class we just saw and registers it. More interesting is the client application shown in <a href="#javacook-rmi-EX-6">Callback ClientProgram.java</a>, which is both the RMI client to the connect( ) method and the RMI server to the alert( ) method in the server in <a href="#javacook-rmi-EX-5">TickerServerImpl.java</a>.</p> 
     </div> 
     <div id="javacook-rmi-EX-6" class="listingblock"> 
      <div class="title">
       Callback ClientProgram.java
      </div> 
      <div class="content"> 
       <pre class="highlight"><code class="language-java" data-lang="java">package rmi.callback;

import java.io.*;
import java.rmi.*;
import java.rmi.server.*;

/** This class tries to be all things to all people:
 *	- main program for client to run.
 *	- "server" program for remote to use Client of
 */
// BEGIN main
public class ClientProgram extends UnicastRemoteObject implements Client
{
	protected final static String host = "localhost";

	/** No-argument constructor required as we are a Remote Object */
	public ClientProgram() throws RemoteException {
	}

	/** This is the main program, just to get things started. */
	public static void main(String[] argv) throws IOException, NotBoundException {
		new ClientProgram().do_the_work();
	}

	/** This is the server program part */
	private void do_the_work() throws IOException, NotBoundException {

		System.out.println("Client starting");

		// First, register us with the RMI registry
		// Naming.rebind("Client", this);

		// Now, find the server, and register with it
		System.out.println("Finding server");
		TickerServer server =
			(TickerServer)Naming.lookup("rmi://" + host + "/" +
			TickerServer.LOOKUP_NAME);

		// This should cause the server to call us back.
		System.out.println("Connecting to server");
		server.connect(this);

		System.out.println("Client program ready.");
	}

	/** This is the client callback */
	public void alert(String message) throws RemoteException {
		System.out.println(message);
	}
}
// END main</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>In this version, the client server alert() method simply prints the message in its console window. A more realistic version would receive an object containing the stock symbol, a timestamp, and the current price and relative price change; it could then consult a GUI control to decide whether the given price movement is considered noticeable and pop up a JOptionPane (see <a href="#javacook-gui-SECT-7">[javacook-gui-SECT-7]</a>) if so.</p> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="javacook-rmi-SECT-6">Program: NetWatch</h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p>Here’s a program I put together while teaching Java courses for Learning Tree (<a href="http://www.learningtree.com" class="bare">http://www.learningtree.com</a>). In one exercise, each student starts the RMI registry on his or her machine and uses Naming.rebind( ) (as in <a href="#javacook-rmi-SECT-3">Creating an RMI Server</a>) to register with it. Some students come up with interesting variations on the theme of registering. This program contacts the RMI registry on each of a batch of machines and shows the instructor graphically which machines have RMI running and what is registered. A red flag shows machines that don’t even have the registry program running; a black flag shows machines that are dead to the (networked) world.</p> 
     </div> 
     <div class="paragraph"> 
      <p>This program also uses many ideas from elsewhere in the book. A Swing GUI (<a href="#javacook-gui">[javacook-gui]</a>) is used. The layout is a GridLayout (discussed briefly in <a href="#javacook-gui-SECT-2">[javacook-gui-SECT-2]</a>). A default list of machines to watch is loaded from a Properties object (<a href="#javacook-structure-SECT-7">[javacook-structure-SECT-7]</a>). For each host, an RMIPanel is constructed. This class is both a JComponent (<a href="#javacook-gui-SECT-13">[javacook-gui-SECT-13]</a>) and a thread (<a href="#javacook-threads">[javacook-threads]</a>). As a JComponent, it can be run in a panel; as a thread, it can run independently and then sleep for 30 seconds (by default; settable in the properties file) so that it isn’t continually hammering away at the RMI registry on all the machines (the network traffic could be awesome). This program combines all these elements and comes out looking like the display in <a href="#javacook-rmi-FIG-3">NetWatch watching the class</a> (alas, we didn’t have color pages in earlier editions of this book, so somebody converted the illustrations to grayscale).</p> 
     </div> 
     <div id="javacook-rmi-FIG-3" class="imageblock"> 
      <div class="content"> 
       <img src="data:image/png;base64,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" alt="jcb2 2203"> 
      </div> 
      <div class="title">
       Figure 3. NetWatch watching the class
      </div> 
     </div> 
     <div class="paragraph"> 
      <p><a href="#javacook-rmi-EX-7">NetWatch.java</a> is the main class, NetWatch, which creates the JFrame and all the RMIPanels and puts them together.</p> 
     </div> 
     <div id="javacook-rmi-EX-7" class="listingblock"> 
      <div class="title">
       NetWatch.java
      </div> 
      <div class="content"> 
       <pre class="highlight"><code class="language-java" data-lang="java">package netwatch;

import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.Properties;

import javax.swing.JOptionPane;

/** Main program for the NetWatch program: watch the network status
 * on a bunch of machines (i.e., in a classroom or lab). Currently only
 * for RMI, but can be extended for TCP socket, CORBA ORB, etc.
 * @author	Ian F. Darwin, http://www.darwinsys.com/
 * Copyright (c) 2000, Ian F. Darwin. See LEGAL.NOTICE for licensing.
 */
// BEGIN main
public class NetWatch {
	public static void main(String[] argv) {

		Properties p = null;

		NetFrame f = new NetFrame("Network Watcher", p);

		try {
			FileInputStream is = new FileInputStream("NetWatch.properties");
			p = new Properties();
			p.load(is);
			is.close();
		} catch (IOException e) {
			JOptionPane.showMessageDialog(f,
				e.toString(), "Properties error",
				JOptionPane.ERROR_MESSAGE);
		}

		// NOW CONSTRUCT PANELS, ONE FOR EACH HOST.

		// If arguments, use them as hostnames.
		if (argv.length!=0) {
			for (int i=0; i&lt;argv.length; i++) {
				f.addHost(argv[i], p);
			}
		// No arguments. Can we use properties?
		} else if (p != null &amp;&amp; p.size() &gt; 0) {
			String net = p.getProperty("netwatch.net");
			int start = Integer.parseInt(p.getProperty("netwatch.start"));
			int end = Integer.parseInt(p.getProperty("netwatch.end"));
			for (int i=start; i&lt;=end; i++) {
				f.addHost(net + "." + i, p);
			}
			for (int i=0; ; i++) {
				String nextHost = p.getProperty("nethost" + i);
				if (nextHost == null)
					break;
				f.addHost(nextHost, p);
			}
		}
		// None of the above. Fall back to localhost
		else {
			f.addHost("localhost", p);
		}

		// All done. Pack the Frame and show it.
		f.pack();
		// UtilGUI.centre(f);
		f.setVisible(true);
		f.addWindowListener(new WindowAdapter() {
			public void windowClosing(WindowEvent e) {
				System.exit(0);
			}
		});
	}
}
// END main</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>The per-machine class, RMIPanel, is shown in <a href="#javacook-rmi-EX-8">RMIPanel.java</a>. This class is instantiated once for each machine being monitored. Its run method loops, getting the list of registered objects from the given machine’s RMI registry, and checks the contents to see if the expected string is present, setting the state to one of several integer values defined in the parent class NetPanel (EMPTY, DUBIOUS, FINE, etc.) based on what it finds. This state value is used to decide what color to paint this particular RMIPanel in the setState( ) method of the parent class NetPanel, which we have no reason to override.</p> 
     </div> 
     <div id="javacook-rmi-EX-8" class="listingblock"> 
      <div class="title">
       RMIPanel.java
      </div> 
      <div class="content"> 
       <pre class="highlight"><code class="language-java" data-lang="java">package netwatch;

import java.net.MalformedURLException;
import java.rmi.Naming;
import java.rmi.RemoteException;
import java.util.Properties;

/** Displays one machines status, for RMI..
 * @author	Ian F. Darwin, http://www.darwinsys.com/
 * Copyright (c) 2000, Ian F. Darwin. See LEGAL.NOTICE for licensing.
 */
// BEGIN main
public class RMIPanel extends NetPanel implements Runnable {

	private static final long serialVersionUID = 1L;

	public RMIPanel(String host, Properties p) {
		super(host, p);
	}

	/** Keep the screen updated forever, unless stop()ped. */
	public void run() {
		String thePort = props.getProperty("rmiwatch.port", "");
		String theURL = "rmi://" + hostName + ":" + thePort;
		while (!done) {
			try {
				String[] names = Naming.list(theURL);
				ta.setText("");
				for (int i=0; i&lt;names.length; i++) {
					ta.append(i + ": " + names[i] + "\n");
				}
				// If we didnt get an exception, host is up.
				String expect = props.getProperty("rmiwatch.expect");
				String fullText = ta.getText();
				if (fullText.length() == 0) {
					ta.setText("(nothing registered!)");
					setState(EMPTY);
				} else if (expect != null &amp;&amp; fullText.indexOf(expect)==-1) {
					setState(DUBIOUS);
				} else setState(FINE);
			} catch (java.rmi.ConnectIOException e) {
				setState(DOWN);
				ta.setText("Net error: " + e.detail.getClass());
			} catch (java.rmi.ConnectException e) {
				setState(NOREG);
				ta.setText("RMI error: " + e.getClass().getName() + "\n" +
					"  " + e.detail.getClass());
				// System.err.println(hostName + ":" + e);
			} catch (RemoteException e) {
				setState(NOREG);
				ta.setText("RMI error: " + e.getClass().getName() + "\n" +
					"  " + e.detail.getClass());
			} catch (MalformedURLException e) {
				setState(DOWN);
				ta.setText("Invalid host: " + e.toString());
			} finally {
				// sleep() in "finally" so common "down" states dont bypass.
				// Randomize time so we dont make net load bursty.
				try {
					Thread.sleep((int)(sleepTime * MSEC * 2 * Math.random()));
				} catch (InterruptedException e) {
					/*CANTHAPPEN*/
				}
			}
		}
	}
}
// END main</code></pre> 
      </div> 
     </div> 
     <div class="paragraph"> 
      <p>The last part is NetPanel, shown in <a href="#javacook-rmi-EX-9">NetPanel.java</a>. Notice the state variable definitions, and the setState() method that calls setBackground() to set the correct color given the state.</p> 
     </div> 
     <div id="javacook-rmi-EX-9" class="listingblock"> 
      <div class="title">
       NetPanel.java
      </div> 
      <div class="content"> 
       <pre class="highlight"><code class="language-java" data-lang="java">package netwatch;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.util.Properties;

import javax.swing.BorderFactory;
import javax.swing.JPanel;
import javax.swing.JTextArea;

/**
 * Displays one machine's status.
 * Part of the NetWatch program: watch the network
 * on a bunch of machines (i.e., in a classroom or lab).
 * &lt;P&gt;Each non-abstract subclass just needs to implement run(),
 * which must, in a while (!done) loop:
 * &lt;UL&gt;&lt;LI&gt;Try to contact the host
 * &lt;LI&gt;call setState(); (argument below)
 * &lt;LI&gt;call ta.setText();
 * &lt;LI&gt;Thread.sleep(sleepTime * MSEC);
 * &lt;/UL&gt;
 * &lt;P&gt;The argument to setState() must be one of:
 * &lt;UL&gt;
 * &lt;LI&gt;FINE == Server has "expect"ed name registered.
 * &lt;LI&gt;DUBIOUS == Server does not have expected name registered.
 * &lt;LI&gt;EMPTY == Server has nothing registered.
 * &lt;LI&gt;NOREG == host is up but not running RMI
 * &lt;LI&gt;DOWN == host unreachable, not responding, ECONN, etc.
 * &lt;/UL&gt;
 * @author	Ian F. Darwin, http://www.darwinsys.com/
 * Copyright (c) 2000, Ian F. Darwin. See LEGAL.NOTICE for licensing.
 */
// BEGIN main
public abstract class NetPanel extends JPanel implements Runnable {

	private static final long serialVersionUID = 1L;
	/** The name of this host */
	protected String hostName;
	/** The text area to display a list of stuff */
	protected JTextArea ta;
	/** Properties, passed in to constructor */
	protected Properties props;
	/** Default sleep time, in seconds. */
	protected static int DEFAULT_SLEEP = 30;
	/** Sleep time, in seconds. */
	protected int sleepTime = DEFAULT_SLEEP;
	/** Conversion */
	protected int MSEC = 1000;
	/** The constant-width font, shared by all instances. */
	protected static Font cwFont;
	/** The states */
	/** The state for: has "expect"ed name registered. */
	protected final static int FINE = 1;
	/** The state for: does not have expected name registered. */
	protected final static int DUBIOUS = 2;
	/** The state for: Server has nothing registered. */
	protected final static int EMPTY = 3;
	/** The state for: host is up but not running RMI */
	protected final static int NOREG = 4;
	/** The state for: host unreachable, not responding, ECONN, etc. */
	protected final static int DOWN = 5;
	/** The color for when a machine is FINE */
	protected static final Color COLOR_FINE = Color.green;
	/** The color for when a machine is DUBIOUS */
	protected static final Color COLOR_DUBIOUS = Color.yellow;
	/** The color for when a machine is EMPTY */
	protected static final Color COLOR_EMPTY = Color.white;
	/** The color for when a machine has NOREG */
	protected static final Color COLOR_NOREG = Color.red;
	/** The color for when a machine is NOREG */
	protected static final Color COLOR_DOWN = Color.black;

	/** State of the monitored hosts RMI registry, up or down.
	 * Initially set 0, which isnt one of the named states, to
	 * force the background color to be set on the first transition.
	 */
	protected int state = 0;

	public NetPanel(String host, Properties p) {
		hostName = host;
		props = p;
		String s = props.getProperty("rmiwatch.sleep");
		if (s != null)
			sleepTime = Integer.parseInt(s);
		// System.out.println("Sleep time now " + sleepTime);

		// Maybe get font name and size from props?
		if (cwFont == null)
			cwFont = new Font("lucidasansTypewriter", Font.PLAIN, 10);

		// Gooey gooey stuff.
		ta = new JTextArea(2, 26);
		ta.setEditable(false);
		ta.setFont(cwFont);
		add(BorderLayout.CENTER, ta);
		setBorder(BorderFactory.createTitledBorder(hostName));

		// Sparks. Ignition!
		new Thread(this).start();
	}

	boolean done = false;
	/** Stop this Thread */
	public void stop() {
		done = true;
	}

	/** Record the new state of the current machine.
	 * If this machine has changed state, set its color
	 * @param newState - one of the five valid states in the introduction.
	 */
	protected void setState(int newState) {
		if (state /*already*/ == newState)
			return;		// nothing to do.
		switch(newState) {
			case FINE:		// Server has "expect"ed name registered.
				ta.setBackground(COLOR_FINE);
				ta.setForeground(Color.black);
				break;
			case DUBIOUS:	// Server does not have expected name registered.
				ta.setBackground(COLOR_DUBIOUS);
				ta.setForeground(Color.black);
				break;
			case EMPTY:		// Server has nothing registered.
				ta.setBackground(COLOR_EMPTY);
				ta.setForeground(Color.black);
				break;
			case NOREG:		// host is up but not running RMI
				ta.setBackground(COLOR_NOREG);
				ta.setForeground(Color.white);
				break;
			case DOWN:		// host unreachable, not responding, ECONN, etc.
				ta.setBackground(COLOR_DOWN);
				ta.setForeground(Color.white);
				break;
			default:
				throw new IllegalStateException("setState("+state+") invalid");
			}
		state = newState;
	}
}
// END main</code></pre> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="javacook-rmi-SECT-6.1">See Also</h3> 
      <div class="paragraph"> 
       <p>The term <em>distributed computing</em> covers a lot of terrain. Here I’ve shown only the basics of RMI. For more on RMI, see <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/index.html">the Oracle Tutorial</a>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>See especially the Oracle <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/security/permissions.html"> information on security and permissions</a>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>It is possible to use RMI to access CORBA objects, or vice versa, using a mechanism called RMI-IIOP. See <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/rmi-iiop/" class="bare">http://docs.oracle.com/javase/7/docs/technotes/guides/rmi-iiop/</a>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Potentially the most important distributed mechanism for large-scale computing projects is Enterprise JavaBeans, part of the Java Enterprise Edition. See the O’Reilly book <a href="http://shop.oreilly.com/product/0636920030614.do"><em>Java EE 7 Essentials</em></a>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>Since almost every web interaction involves at least two computers, you can also think of servlets and JSPs/JSF as a kind of distributed computing, used primarily as the gateway into these other distributed object mechanisms.</p> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div id="footer"> 
   <div id="footer-text">
     Last updated 2017-09-20 15:29:03 EDT 
   </div> 
  </div>  
 </body>
</html>