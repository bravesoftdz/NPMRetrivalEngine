<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
 <head> 
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"> 
  <link rel="stylesheet" href="../../style.css" type="text/css"> 
  <title>How to run a Java Program as a daemon (service) on Linux
(SUSE/openSUSE) using a shell script</title> 
 </head> 
 <body> 
  <h1>How to run a Java Program as a daemon (service) on Linux (openSUSE) using a shell script</h1> 
  <p>The following alternatives may be used to run a Java program as a daemon on Linux:</p> 
  <ul class="extended"> 
   <li>Use the <a href="http://wrapper.tanukisoftware.org">Java Service Wrapper</a>.</li> 
   <li>Use the <a href="http://jakarta.apache.org/commons/daemon/">Apache Jakarta Commons Daemon</a> package (Jsvc).</li> 
   <li>Use a shell script.</li> 
  </ul> 
  <p>This article describes how to use a shell script. The disadvantage of the Java Wrapper and the Commons Daemon package is that they both make use of C programs. These C programs have to be compiled (or a matching binary distribution has to be found) and have to be compatible with the operating system and the installed Java runtime environment. A shell script, on the other hand, is easier to adapt to changing OS and Java environments.</p> 
  <h2>Features<br> </h2> 
  <p>The shell script (javaDaemonTest.sh) provides the following functionality:</p> 
  <ul class="extended"> 
   <li>Start/stop the Java daemon process, according to the Linux system init script convention.</li> 
   <li>Run the Java daemon as a different (non-root) Linux user.</li> 
   <li>Log error messages and redirect StdOut/StdErr output into a log file.</li> 
   <li>Install/uninstall the daemon as a Linux service.<br> (The "install" procedure installs the script in /etc/init.d, enables the service in the configured default runlevels, creates the "rc" command (symlink) and creates the Linux user (as a system account) and group if necessary).<br> </li> 
  </ul> 
  <h2>Installation Instructions</h2> 
  <p>Example of how to install the JavaDaemonTest service (SUSE Linux, execute as root):<br> (Tested with SUSE/openSUSE 9.1, 10.0 and 11.1)<br> </p> 
  <pre style="margin-left: 20px;">mkdir -p /var/local/javaDaemonTest<br>cd /var/local/javaDaemonTest<br>wget http://www.source-code.biz/snippets/java/javaDaemonTest.tar.gz<br>tar -xzf javaDaemonTest.tar.gz<br>javac JavaDaemonTest.java<br>./javaDaemonTest.sh install<br>rcjavaDaemonTest start<br>rcjavaDaemonTest status<br>... wait a bit to let the test program write some output lines into the log file ...<br>rcjavaDaemonTest stop<br>rcjavaDaemonTest status<br>less /var/log/javaDaemonTest.log</pre> 
  <p>To uninstall:</p> 
  <pre style="margin-left: 20px;">rcjavaDaemonTest stop<br>rcjavaDaemonTest uninstall<br>rm -R /var/local/javaDaemonTest<br>rm /var/log/javaDaemonTest.log<br></pre> 
  <h2>Download</h2> 
  <table border="0" cellpadding="0" cellspacing="0"> 
   <tbody> 
    <tr> 
     <td><a href="javaDaemonTest.sh.txt">javaDaemonTest.sh</a></td> 
     <td>&nbsp;&nbsp;</td> 
     <td>start/stop shell script (for SUSE Linux)</td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;"><a href="JavaDaemonTest.java.txt">JavaDaemonTest.java</a></td> 
     <td style="vertical-align: top;">&nbsp;</td> 
     <td style="vertical-align: top;">a dummy Java daemon program, used for testing the script</td> 
    </tr> 
    <tr> 
     <td><a href="javaDaemonTest.tar.gz">javaDaemonTest.tar.gz</a></td> 
     <td>&nbsp;</td> 
     <td>the whole package as a tar/gzip file</td> 
    </tr> 
   </tbody> 
  </table> 
  <p style="margin-top: 2em;"> Author: <a href="mailto:chdh@source-code.biz">Christian d'Heureuse</a> (<a href="http://www.source-code.biz">www.source-code.biz</a>, <a href="http://www.inventec.ch/chdh">www.inventec.ch/chdh</a>)<br> <a href="./">Index</a></p>  
 </body>
</html>