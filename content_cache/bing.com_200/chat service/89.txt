<!doctype html>
<html lang="en">
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <meta name="description" content="In this tutorial we will implement an HTML5 websocket resorting to the Java EE websocket implementation (ServerEndpoint)."> 
  <meta name="keywords" content="java,jee,javaee,Java EE,HTML5,WebSocket,example"> 
  <meta property="og:image" content="http://www.byteslounge.com/imgs/fbbllogo.png"> 
  <meta property="og:site_name" content="Bytes Lounge"> 
  <meta property="og:type" content="website"> 
  <meta property="og:title" content="Java EE HTML5 WebSocket example"> 
  <meta property="og:description" content="In this tutorial we will implement an HTML5 websocket resorting to the Java EE websocket implementation (ServerEndpoint)."> 
  <meta property="fb:admins" content="712391467"> 
  <meta property="og:url" content="http://www.byteslounge.com/tutorials/java-ee-html5-websocket-example"> 
  <title>Java EE HTML5 WebSocket example</title> 
  <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> 
  <style>@font-face{font-family:'Ubuntu';font-style:normal;font-weight:400;src:local('Ubuntu'),url(/woff/ubuntu.woff) format('woff')}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}body{margin:0;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857;color:#333;background-color:#fff}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}#header{background-color:#2266a6;background-image:linear-gradient(to bottom,#0a4e8c 0,#2266a6 100%);background-repeat:repeat-x;padding-top:15px;padding-bottom:0;line-height:1}@media(min-width :735px){#header{padding-bottom:15px}}.container{position:relative;padding-left:0!important;padding-right:0!important;margin-right:auto;margin-left:auto}p{margin:0 0 10px}#header #tit{font-size:40px;font-weight:bold}#header #tit a{color:#fff;text-decoration:none}#header #pl{font-size:18px;color:#6dade8}#header #ban{width:100%}.navbar-default{background-color:#f8f8f8;border-color:#e7e7e7}.navbar{position:relative;min-height:50px;margin-bottom:20px;border:1px solid transparent}.container-fluid{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}.container>.navbar-header,.container-fluid>.navbar-header,.container>.navbar-collapse,.container-fluid>.navbar-collapse{margin-right:-15px;margin-left:-15px}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-toggle{position:relative;float:right;margin-right:15px;padding:9px 10px;margin-top:8px;margin-bottom:8px;background-color:transparent;background-image:none;border:1px solid transparent;border-radius:4px}input,button,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button,select{text-transform:none}button{overflow:visible}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}.navbar-default .navbar-brand{color:#777}.visible-xs,.visible-sm,.visible-md,.visible-lg{display:none!important}.navbar-brand{float:left;padding:15px 15px;font-size:18px;line-height:20px;height:50px}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0}.navbar-default .navbar-toggle .icon-bar{background-color:#888}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:#e7e7e7}.container>.navbar-header,.container-fluid>.navbar-header,.container>.navbar-collapse,.container-fluid>.navbar-collapse{margin-right:-15px;margin-left:-15px}.navbar-collapse{max-height:340px;overflow-x:visible;padding-right:15px;padding-left:15px;border-top:1px solid transparent;box-shadow:inset 0 1px 0 rgba(255,255,255,0.1);-webkit-overflow-scrolling:touch}.collapse{display:none}.navbar-nav{margin:7.5px -15px}.nav{margin-bottom:0;padding-left:0;list-style:none}ul,ol{margin-top:0;margin-bottom:10px}.nav>li{position:relative;display:block}.dropdown{position:relative}.navbar-default .navbar-nav>li>a{color:#777}.navbar-nav li a{font-weight:bold}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:20px}.nav>li>a{position:relative;display:block;padding:10px 15px}.caret{display:inline-block;width:0;height:0;margin-left:2px;vertical-align:middle;border-top:4px solid;border-right:4px solid transparent;border-left:4px solid transparent}b,strong{font-weight:bold}.navbar-nav>li>.dropdown-menu{margin-top:0;border-top-right-radius:0;border-top-left-radius:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;list-style:none;font-size:14px;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.15);border-radius:4px;-webkit-box-shadow:0 6px 12px rgba(0,0,0,0.175);box-shadow:0 6px 12px rgba(0,0,0,0.175);background-clip:padding-box}ul ul,ol ul,ul ol,ol ol{margin-bottom:0}ul,ol{margin-top:0;margin-bottom:10px}.dropdown-menu li a{color:#777}.navbar-nav li a{font-weight:bold}.dropdown-menu>li>a{display:block;padding:3px 20px;clear:both;font-weight:normal;line-height:1.42857143;color:#333;white-space:nowrap}a{color:#428bca;text-decoration:none;background:transparent}.navbar-nav{margin:7.5px -15px}.nav{margin-bottom:0;padding-left:0;list-style:none}ul,ol{margin-top:0;margin-bottom:10px}.cont{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.contr{width:300px;float:none;-webkit-transform:scaleY(-1);transform:scaleY(-1);margin-right:auto;margin-left:auto}.contl{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.contl h1{font-family:'Ubuntu',sans-serif}h1,.h1{font-size:36px}h1,.h1,h2,.h2,h3,.h3{margin-top:20px;margin-bottom:10px}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-family:inherit;font-weight:500;line-height:1.1;color:inherit}h1{font-size:2em;margin:.67em 0}@media(min-width :768px){.listcol{float:left;width:50%;padding-left:20px;padding-right:20px;border-right-width:1px;border-right-style:solid;border-right-color:#eee;margin-top:15px}.listcol .listt{background-color:#eaf4f6;padding-left:5px}.listcol .date{margin-top:3px;margin-bottom:3px}.list{border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#eee;padding-bottom:20px;margin-top:20px!important}.coll{padding-left:0}.prev{margin-top:10px;margin-bottom:10px;display:inline-block}}@media(max-width :767px){.prev{display:none}}.list{font-family:'Ubuntu',sans-serif;margin-top:30px}.listt{font-size:22px}.listt a{color:#333;text-decoration:none}.date{color:#888;font-size:14px}#tags{margin-top:2px;word-wrap:break-word}img{vertical-align:middle}img{border:0}#tags a{color:#464646;margin-left:10px;background-color:#cee7fd;font-size:13px;padding-left:3px;padding-right:3px;padding-bottom:1px}.clear{clear:both}article{font-family:'Ubuntu',sans-serif;color:#464646}.artdesc{margin-top:15px}article h2{margin-top:20px;margin-bottom:15px}pre.prettyprint{padding:2px;border:1px solid #888}.prettyprint{margin-bottom:20px;border-radius:0 0 4px 4px}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857143;word-break:break-all;word-wrap:break-word;color:#333;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Courier New",monospace}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}pre{overflow:auto}.subfam{font-family:'Ubuntu',sans-serif}.subfam h2{margin-bottom:20px;margin-left:20px;margin-top:50px}h2,.h2{font-size:30px}.subft{margin-left:20px;font-size:21px}.subfd{margin-left:20px;margin-bottom:20px;color:#646464}.subft a{color:#333;text-decoration:none}@media(min-width :768px){.container{width:750px}}@media(min-width :992px){.container{width:970px}}@media(min-width :1200px){.container{width:1140px!important}}@media(min-width :1210px){.container{width:1140px!important}}@media(min-width :768px){#header #tit{font-size:60px}}@media(min-width :735px){#header #ban{display:inline-block;width:728px;height:90px}}@media(min-width :1210px){#header #ban{position:absolute;right:0;top:5px}}@media(min-width :768px){.navbar{border-radius:4px}}@media(min-width :768px){nav .container-fluid{padding-left:0}}@media(min-width :768px){.container>.navbar-header,.container-fluid>.navbar-header,.container>.navbar-collapse,.container-fluid>.navbar-collapse{margin-right:0;margin-left:0}}@media(min-width :768px){.navbar-header{float:left}}@media(min-width :768px){.navbar-toggle{display:none}}@media(min-width :768px){.navbar>.container .navbar-brand,.navbar>.container-fluid .navbar-brand{margin-left:-15px}}@media(min-width :768px){.container>.navbar-header,.container-fluid>.navbar-header,.container>.navbar-collapse,.container-fluid>.navbar-collapse{margin-right:0;margin-left:0}}@media(min-width :768px){.navbar-collapse.collapse{display:block!important;height:auto!important;padding-bottom:0;overflow:visible!important}}@media(min-width :768px){nav .collapse{padding-left:0}}@media(min-width :768px){.navbar-collapse{width:auto;border-top:0;box-shadow:none}}@media(min-width :768px){.navbar-nav{float:left;margin:0}}@media(min-width :768px){nav ul{padding-left:0}}@media(min-width :768px){.navbar-nav>li{float:left}}@media(min-width :768px){.navbar-nav>li>a{padding-top:15px;padding-bottom:15px}}@media(min-width :1200px){.hidden-lg{display:none!important}}@media(min-width :768px){nav ul{padding-left:0}}@media(min-width :768px){.navbar-nav.navbar-right:last-child{margin-right:-15px}}@media(min-width :768px){.navbar-right{float:right!important}}@media(min-width :768px){.navbar-nav{float:left;margin:0}}@media(min-width :768px){nav ul{padding-left:0}}@media(min-width :768px){.cont{-webkit-transform:scaleY(1);transform:scaleY(1)}}@media(min-width :768px){.contr{float:right;-webkit-transform:scaleY(1);transform:scaleY(1);margin-bottom:0}}@media(min-width :768px){.contl{-webkit-transform:scaleY(1);transform:scaleY(1);margin-right:330px}}@media(min-width :1210px){.ct{min-height:631px}}.pagetit{font-size:34px!important;font-weight:bold!important;color:#b5b5b5!important;font-family:"Helvetica Neue",helvetica,arial,sans-serif!important}@media(min-width :768px){.pagetit{font-size:44px!important}}</style> 
 </head> 
 <body> 
  <div id="fb-root"></div> 
  <header> 
   <div id="header"> 
    <div class="container" id="hc"> 
     <p id="tit"><a href="http://www.byteslounge.com">bytes lounge</a></p> 
     <p id="pl">Java articles, how-to's, examples and tutorials</p> 
     <div id="ban"> 
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7422616013928707" data-ad-slot="9929591580" data-ad-format="auto"></ins> 
      <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> 
     </div> 
    </div> 
   </div> 
  </header> 
  <div class="container"> 
   <nav class="navbar navbar-default" role="navigation"> 
    <div class="container-fluid"> 
     <div class="navbar-header"> 
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
      <a class="navbar-brand visible-xs" href="#">MENU</a> 
     </div> 
     <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"> 
      <ul class="nav navbar-nav"> 
       <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">JAVA <b class="caret hidden-lg hidden-md hidden-sm"></b></a> 
        <ul class="dropdown-menu"> 
         <li><a href="/subcategory/java-collections">Java Collections</a></li> 
         <li><a href="/subcategory/java-io">Java IO</a></li> 
         <li><a href="/subcategory/design-patterns">Design Patterns</a></li> 
         <li><a href="/subcategory/java-concurrency">Java Concurrency</a></li> 
         <li><a href="/subcategory/java-reflection">Java Reflection</a></li> 
         <li><a href="/subcategory/java-8">Java 8</a></li> 
        </ul> </li> 
       <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">JAVA EE <b class="caret hidden-lg hidden-md hidden-sm"></b></a> 
        <ul class="dropdown-menu"> 
         <li><a href="/subcategory/cdi">CDI</a></li> 
         <li><a href="/subcategory/ejb">EJB</a></li> 
         <li><a href="/subcategory/jpa">JPA</a></li> 
         <li><a href="/subcategory/web">Web</a></li> 
         <li><a href="/subcategory/jsf">JSF</a></li> 
        </ul> </li> 
       <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">JAVA SECURITY <b class="caret hidden-lg hidden-md hidden-sm"></b></a> 
        <ul class="dropdown-menu"> 
         <li><a href="/subcategory/jaas">JAAS</a></li> 
        </ul> </li> 
       <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">SPRING <b class="caret hidden-lg hidden-md hidden-sm"></b></a> 
        <ul class="dropdown-menu"> 
         <li><a href="/subcategory/spring-core">Spring Core</a></li> 
         <li><a href="/subcategory/spring-mvc">Spring MVC</a></li> 
        </ul> </li> 
       <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">OTHER <b class="caret hidden-lg hidden-md hidden-sm"></b></a> 
        <ul class="dropdown-menu"> 
         <li><a href="/subcategory/android">Android</a></li> 
         <li><a href="/subcategory/maven">Maven</a></li> 
         <li><a href="/subcategory/postfix">Postfix</a></li> 
         <li><a href="/subcategory/new-relic">New Relic</a></li> 
        </ul> </li> 
      </ul> 
      <ul class="nav navbar-nav navbar-right"> 
       <li><a href="/contact">CONTACT</a></li> 
       <li><a id="socf" class="soc" target="_blank" title="Facebook" href="http://www.facebook.com/byteslounge"></a></li> 
       <li><a id="soct" class="soc" target="_blank" title="Twitter" href="http://twitter.com/byteslounge"></a></li> 
       <li><a id="socg" class="soc" target="_blank" title="Google+" href="https://plus.google.com/107771575694787223844"></a></li> 
       <li><a id="socr" class="soc" target="_blank" title="RSS" href="/rss"></a></li> 
      </ul> 
     </div> 
    </div> 
   </nav> 
  </div> 
  <div class="container cont"> 
   <div class="contr"> 
    <div class="blpnl" id="rgtsoc"> 
    </div> 
    <div class="blpnl" id="about"> 
    </div> 
    <div class="adr1" id="rgtban"> 
     <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-7422616013928707" data-ad-slot="8080199582"></ins> 
     <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> 
    </div> 
    <div class="adr1" id="rgtfbk"> 
    </div> 
    <div class="blpnl sub" id="rgtsub"> 
    </div> 
    <div class="blpnl" id="rgttag"> 
    </div> 
    <div class="blpnl" id="rgttre"> 
    </div> 
   </div> 
   <div class="contl"> 
    <div class="ct"> 
     <article itemscope itemtype="http://schema.org/CreativeWork"> 
      <h1 itemprop="name">Java EE HTML5 WebSocket example</h1> 
      <div class="date">
       12 August 2013
      </div> 
      <div>
        By 
       <a id="auth" target="_blank" href="https://plus.google.com/107771575694787223844?rel=author">Gonçalo Marques</a> 
      </div> 
      <div id="tags"> 
       <div>
        &nbsp;
       </div> 
       <a href="/tag/html5">html5</a> 
       <a href="/tag/io">io</a> 
       <a href="/tag/java">java</a> 
       <a href="/tag/java-ee">java-ee</a> 
       <a href="/tag/web">web</a> 
       <a href="/tag/websockets">websockets</a> 
      </div> 
      <div itemprop="description" class="artdesc">
       In this tutorial we will implement an HTML5 websocket resorting to the Java EE websocket implementation (ServerEndpoint).
      </div> 
      <h2>Introduction</h2> 
      <div> 
       <p>The HTML5 specification brought the capability for web browsers to establish full-duplex TCP connections with websocket compliant servers.</p>
       <p>In other words, browsers are now able to establish a connection with a server and keep sending or receiving data through that same established communication channel without the need of the overhead introduced by the HTTP protocol itself.</p>
       <p>In this tutorial we will implement a simple websocket server endpoint in a Java EE environment and also the respective client-side infrastructure for sending and receiving data.</p> 
       <p>This tutorial considers the following environment:</p> 
       <p> </p>
       <ol> 
        <li>Ubuntu 12.04</li> 
        <li>JDK 1.7.0.21</li> 
        <li>Glassfish 4.0</li> 
       </ol> 
       <p></p> 
       <div class="canvasnote"> 
        <strong>Note</strong>: WebSockets support was introduced in Java EE 7 
       </div> 
      </div> 
      <h2>WebSocket server endpoint</h2> 
      <div> 
       <p>Let's define a Java EE websocket server endpoint:</p> 
       <div class="codetit">
         WebSocketTest.java 
       </div> 
       <pre class="prettyprint">
package com.byteslounge.websockets;

import java.io.IOException;

import javax.websocket.OnClose;
import javax.websocket.OnMessage;
import javax.websocket.OnOpen;
import javax.websocket.Session;
import javax.websocket.server.ServerEndpoint;

@ServerEndpoint("/websocket")
public class WebSocketTest {

  @OnMessage
  public void onMessage(String message, Session session) 
    throws IOException, InterruptedException {
  
    // Print the client message for testing purposes
    System.out.println("Received: " + message);
  
    // Send the first message to the client
    session.getBasicRemote().sendText("This is the first server message");
  
    // Send 3 messages to the client every 5 seconds
    int sentMessages = 0;
    while(sentMessages &lt; 3){
      Thread.sleep(5000);
      session.getBasicRemote().
        sendText("This is an intermediate server message. Count: " 
          + sentMessages);
      sentMessages++;
    }
  
    // Send a final message to the client
    session.getBasicRemote().sendText("This is the last server message");
  }
  
  @OnOpen
  public void onOpen() {
    System.out.println("Client connected");
  }

  @OnClose
  public void onClose() {
    System.out.println("Connection closed");
  }
}

</pre> 
       <p>As you may have already noticed we are importing several classes from <strong>javax.websocket</strong> package.</p> 
       <p><strong>@ServerEndpoint</strong> annotation is used at type level and defines the current class as a websocket server endpoint. The value used in this annotation represents the URL where the endpoint will be listening for client connections.</p> 
       <p><strong>onOpen</strong> and <strong>onClose</strong> methods are annotated with <strong>@OnOpen</strong> and <strong>@OnClose</strong> respectively. These annotations are almost self-explanatory: They define which methods will be called upon a new client connection and disconnection.</p> 
       <p>Method <strong>onMessage</strong> is annotated with <strong>@OnMessage</strong>. This annotation defines which method will be called when a new message is received from the client. Note that this method may be defined with an optional parameter of type <strong>javax.websocket.Session</strong> (in our case the <strong>session</strong> parameter). If this parameter is defined the container will inject the session that is associated with the current client that sent the message being handled.</p> 
       <p>In our case we are just writing the client message content to the standard output. Then we proceed to send a message to the client followed by 3 test messages with a 5 second interval. Finally we send a final message to the client.</p> 
      </div> 
      <h2>Client side</h2> 
      <div> 
       <p>Now we need to write the client-side of our websocket test application:</p> 
       <div class="codetit">
         page.html 
       </div> 
       <pre class="prettyprint">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Testing websockets&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div&gt;
    &lt;input type="submit" value="Start" onclick="start()" /&gt;
  &lt;/div&gt;
  &lt;div id="messages"&gt;&lt;/div&gt;
  &lt;script type="text/javascript"&gt;
    var webSocket = 
      new WebSocket('ws://localhost:8080/byteslounge/websocket');

    webSocket.onerror = function(event) {
      onError(event)
    };

    webSocket.onopen = function(event) {
      onOpen(event)
    };

    webSocket.onmessage = function(event) {
      onMessage(event)
    };

    function onMessage(event) {
      document.getElementById('messages').innerHTML 
        += '&lt;br /&gt;' + event.data;
    }

    function onOpen(event) {
      document.getElementById('messages').innerHTML 
        = 'Connection established';
    }

    function onError(event) {
      alert(event.data);
    }

    function start() {
      webSocket.send('hello');
      return false;
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

</pre> 
       <p>This is a simple test page that contains the JavaScript that will create a websocket connection to out websocket server endpoint.</p>
       <p><strong>onOpen</strong> method will be called when we establish a connection with the server endpoint.</p>
       <p><strong>onError</strong> method is called when an error occurs during client-server communication.</p>
       <p><strong>onMessage</strong> method will be called when a message is received from the server. In our case we are just appending the messages received from the server to the DOM.</p> 
       <p>We connect to the websocket server endpoint by using the construct <strong>new WebSocket()</strong> and passing the endpoint URL:</p>
       <p><strong>ws://localhost:8080/byteslounge/websocket</strong></p> 
      </div> 
      <h2>Testing</h2> 
      <div> 
       <p>We may now test our application by accessing the testing page:</p> 
       <p><strong>http://localhost:8080/byteslounge/page.html</strong></p> 
       <p>We will see the <strong>Connection established</strong> message as expected:</p> 
       <div class="codetit">
         http://localhost:8080/byteslounge/page.html 
       </div> 
       <div class="codeimg"> 
        <img src="/imgs/java-ee-html5-websocket-example/img1.png" alt="Websocket - Connection established"> 
       </div> 
       <p>Now as soon as we press the button we will send the initial message to the server through the websocket and receive the subsequent test messages sent by the server:</p> 
       <div class="codetit">
         Messages sent by the server and received by the client 
       </div> 
       <div class="codeimg"> 
        <img src="/imgs/java-ee-html5-websocket-example/img2.png" alt="Websocket - Messages exchanged"> 
       </div> 
      </div> 
      <h2>WebSockets Handshake</h2> 
      <div> 
       <p>The TCP connection between the client and the server is established after the occurrence of a handshake over the HTTP protocol. It's easy to observe the handshake by using some HTTP traffic debugger. As soon as we create the <strong>WebSocket</strong> instance in the client the following request and respective server response will occur:</p> 
       <p><strong>Note</strong>: we will only include HTTP headers that are relevant to the websockets handshake</p> 
       <p><strong>Request:</strong></p> 
       <div class="canvasnote">
         GET /byteslounge/websocket HTTP/1.1
        <br> Connection: Upgrade
        <br> Upgrade: websocket
        <br> Sec-WebSocket-Key: wVlUJ/tu9g6EBZEh51iDvQ== 
       </div> 
       <p><strong>Response:</strong></p> 
       <div class="canvasnote">
         HTTP/1.1 101 Web Socket Protocol Handshake
        <br> Upgrade: websocket
        <br> Sec-WebSocket-Accept: 2TNh+0h5gTX019lci6mnvS66PSY= 
       </div> 
       <p>Note that the client is requesting the protocol to be upgraded to the WebSocket protocol by using <strong>Connection: Upgrade</strong> and <strong>Upgrade: websocket</strong> HTTP headers. The server response states that the client request was accepted and it will change protocol to WebSocket (using HTTP status code 101):</p> 
       <p><strong>HTTP/1.1 101 Web Socket Protocol Handshake</strong></p> 
      </div> 
      <h2>Downloadable sample</h2> 
      <div> 
       <p>The example source code is available for download at the end of this page. The test was executed in Glassfish 4 (you will need a Java EE 7 compliant application server).</p> 
      </div> 
      <h2>Download source code from this article</h2> 
      <div class="downl"> 
       <strong>Download link: </strong>
       <a href="/repository/java-ee-html5-websocket-example.zip"><strong>java-ee-html5-websocket-example.zip</strong></a> 
      </div> 
      <div class="addown" id="addown"> 
       <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-7422616013928707" data-ad-slot="7454843581"></ins> 
       <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> 
      </div> 
      <h2>Related Articles</h2> 
      <div> 
       <ul class="related"> 
        <li><a href="/tutorials/java-ee-html5-websockets-encoder-and-decoder-example">Java EE HTML5 WebSockets Encoder and Decoder example</a></li> 
        <li><a href="/tutorials/java-ee-html5-websockets-with-multiple-clients-example">Java EE HTML5 WebSockets with multiple clients example</a></li> 
        <li><a href="/tutorials/asynchronous-servlets-in-java">Asynchronous Servlets in Java</a></li> 
        <li><a href="/tutorials/how-to-compress-response-html-in-java-web-application">How to compress response HTML in Java web application</a></li> 
       </ul> 
      </div> 
      <h2>Comments</h2> 
      <input type="submit" class="btn" value="Post Comment" onclick="BL.comments.clickNewComment();return false"> 
      <div id="comm"> 
      </div> 
     </article> 
    </div> 
    <div class="auth"> 
     <div class="autht">
      About the author
     </div> 
     <div> 
      <div class="authi"></div> 
      <div class="authdt"> 
       <div class="authd">
        Gonçalo Marques is a Software Engineer with several years of experience in software development and architecture definition. During this period his main focus was delivering software solutions in banking, telecommunications and governmental areas. He created the Bytes Lounge website with one ultimate goal: share his knowledge with the software development community. His main area of expertise is Java and open source.
        <br>
        <br>GitHub profile: 
        <a href="http://github.com/gonmarques" target="_blank">http://github.com/gonmarques</a>
        <br>
        <br>He is also the author of the 
        <strong>WiFi File Browser</strong> Android application:
       </div> 
       <div class="authgp">
        <a href="http://play.google.com/store/apps/details?id=pt.webprods.android.file.manager" target="_blank" title="WiFi File Browser at Google Play"></a>
       </div> 
      </div> 
      <div class="clear"></div> 
     </div> 
    </div> 
   </div> 
   <div class="clear"></div> 
  </div> 
  <div class="dnone" id="shr"> 
   <script type="text/javascript">reddit_newwindow="1";reddit_title="Java EE HTML5 WebSocket example";</script> 
   <script type="text/javascript" src="http://www.reddit.com/static/button/button2.js"></script> 
  </div> 
  <div id="euck" class="container euck"></div> 
  <footer> 
   <div id="footer"> 
    <div class="container"> 
     <div class="fitem"> 
      <ul> 
       <li><a href="/subcategory/java-collections">Java Collections</a></li> 
       <li><a href="/subcategory/java-io">Java IO</a></li> 
       <li><a href="/subcategory/design-patterns">Design Patterns</a></li> 
       <li><a href="/subcategory/java-concurrency">Java Concurrency</a></li> 
       <li><a href="/subcategory/java-reflection">Java Reflection</a></li> 
       <li><a href="/subcategory/java-8">Java 8</a></li> 
      </ul> 
     </div> 
     <div class="fitem"> 
      <ul> 
       <li><a href="/subcategory/cdi">CDI</a></li> 
       <li><a href="/subcategory/ejb">EJB</a></li> 
       <li><a href="/subcategory/jpa">JPA</a></li> 
       <li><a href="/subcategory/web">Web</a></li> 
       <li><a href="/subcategory/jsf">JSF</a></li> 
      </ul> 
     </div> 
     <div class="fitem"> 
      <ul> 
       <li><a href="/subcategory/jaas">JAAS</a></li> 
      </ul> 
     </div> 
     <div class="fitem"> 
      <ul> 
       <li><a href="/subcategory/spring-core">Spring Core</a></li> 
       <li><a href="/subcategory/spring-mvc">Spring MVC</a></li> 
      </ul> 
     </div> 
     <div class="fitem"> 
      <ul> 
       <li><a href="/subcategory/android">Android</a></li> 
       <li><a href="/subcategory/maven">Maven</a></li> 
       <li><a href="/subcategory/postfix">Postfix</a></li> 
       <li><a href="/subcategory/new-relic">New Relic</a></li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="cr"> 
    <div class="container"> 
     <hr> 
     <div>
      Copyright © 2012 - 2017 byteslounge.com
     </div> 
     <div>
      <a href="/privacy">Privacy Policy</a>
     </div> 
    </div> 
   </div> 
  </footer> 
  <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-36580729-1"]);_gaq.push(["_trackPageview"]);var jsToLoad=new Array();loadScript("/js/8fc25e27d42774aeae6edbc0a18b72aa-jquery.min.js",null,loadResources,true);function loadResources(){for(var a=0;a<8;a++){jsToLoad.push(1)}var a=0;loadScript("/js/e6a5e5910625d9a71edfa8499fa1c3a8-jstree.min.js",a++,null,true);loadScript("/js/b81512ec01cb4a294c39329e0b4a2d3a-bl.min.js",a++,null,true);loadScript("/js/d435ff18c832044c3ddf7a0cf826eb72-prettify.min.js",a++,null,true);loadScript("/js/7ed4423b21ec6298e52a0db4486f882d-bootstrap.min.js",a++,null,true);loadCss("/css/a335616b498af14b3440b2ecd439e88e-bootstrap.min.css",a++);loadCss("/css/895a465543e849217748b6eb634e5bb9-bl.min.css",a++);loadCss("/css/ecd4a5d6c0cbee10b168f6aa000c64ea-prettify.min.css",a++);loadCss("/css/21822f380fcddf2de5e1409c4205951f-style.min.css",a++)}function jqReady(){loadScript("http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",null,null,false);loadScript(("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",null,null,false);BL.load.ready("article","java-ee-html5-websocket-example",46,"Java EE HTML5 WebSocket example")}function loadScript(b,a,f,e){var d,g,c;d=document.createElement("script");d.type="text/javascript";d.src=b;d.async=true;if(e){if(typeof document.attachEvent==="object"){d.onreadystatechange=function(){if(!this.readyState||this.readyState=="complete"){if(f){f()}else{jsToLoad[a]=null;checkReady()}}}}else{d.onload=function(){if(f){f()}else{jsToLoad[a]=null;checkReady()}}}}c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(d,c)}function loadCss(b,a){$.get(b,function(d){var c=document.createElement("style");c.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(c);if(c.styleSheet){c.styleSheet.cssText=d}else{c.appendChild(document.createTextNode(d))}jsToLoad[a]=null;checkReady()})}function checkReady(){for(var a=0;a<jsToLoad.length;a++){if(jsToLoad[a]){return}}jqReady()};</script>  
 </body>
</html>