<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <meta http-equiv="content-type" content="text/html; charset=utf-8"> 
  <link rel="stylesheet" type="text/css" media="all" href="../default.css"> 
  <title>Developing Games in Java</title> 
  <style type="text/css">
.yes {color: #33aa33; }
.no {color: #ee3333; }
</style> 
 </head> 
 <body> 
  <div id="page"> 
   <div id="nav"> 
    <a href="../"><img src="../images/logo.png" alt="David Brackeen"></a> 
   </div> 
   <div id="content"> 
    <h1>Developing Games in Java</h1> 
    <ul> 
     <li><a href="#get">Get the book</a></li> 
     <li><a href="#play">Play the example game</a></li> 
     <li><a href="#download">Download the source</a></li> 
     <li><a href="#errata">View the notes &amp; errata</a></li> 
     <li><a href="#new">What's happened since the book was released?</a></li> 
     <li><a href="#license">View source code license</a></li> 
    </ul> 
    <a name="get"></a>
    <h2>Get the book</h2> 
    <!-- Start: amazon ad --> 
    <iframe src="http://rcm-na.amazon-adsystem.com/e/cm?t=brackeencom-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=1592730051&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000ff&amp;bc1=000000&amp;bg1=ffffff&amp;f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe> 
    <!-- End: amazon ad --> 
    <p>Amazon: <a href="http://www.amazon.com/gp/product/1592730051/ref=as_li_tf_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1592730051&amp;linkCode=as2&amp;tag=brackeencom-20">Developing Games in Java</a><img src="http://www.assoc-amazon.com/e/ir?t=brackeencom-20&amp;l=as2&amp;o=1&amp;a=1592730051" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"> </p> 
    <a name="play"></a>
    <h2>Play example game</h2> 
    <p>Requires <a href="http://www.java.com/">Java 1.4.2</a> or newer. Warning: rumors are, the demo may not work correctly on Java 7!</p> 
    <p><a href="tilegame.jnlp"><img src="javagamebook-screenshot.jpg" alt="" style="border: 1px solid black"></a></p> 
    <p><a href="tilegame.jnlp">Play Now!</a></p> 
    <p> This game demonstrates: </p> 
    <ul> 
     <li>Thread pools (in the sound manager) - Chapter 1.</li> 
     <li>Full screen mode, hardware-accelerated graphics, animation, and sprites - Chapter 2.</li> 
     <li>Keyboard input and mapping multiple keys to the same action - Chapter 3.</li> 
     <li>Sound, music, and sound filters - Chapter 4.</li> 
     <li>Paralax scrolling, tile-based maps, gravity, jumping, and bounding-box collisions - Chapter 5.</li> 
     <li>Simulated timer accuracy - Chapter 16.</li> 
     <li>Art and sound creation techniques - Chapter 17.</li> 
     <li>Game states (loading, intro sequence, main game) - Chapter 18.</li> 
     <li>Deployment using Java Web Start (JNLP files) and loading media from jar files - Chapter 18.</li> 
    </ul> 
    <a name="download"></a>
    <h2>Download source code</h2> 
    <p>These packages include source code and any resources (graphics, sounds, scripts, etc) needed to run the examples.</p> 
    <p>Requires <a href="http://ant.apache.org/">Apache Ant 1.5</a> to compile. Ant is either directly integrated or available as a plugin for several free/open source editors and IDEs, including <a href="http://www.jedit.org/">jEdit</a>, <a href="http://www.netbeans.org/">NetBeans</a>, and <a href="http://www.eclipse.org/">Eclipse</a>.</p> 
    <p>If you use Apache Ant, everything compiles error-free! See the errata below for any issues.</p> 
    <table> 
     <tbody>
      <tr>
       <th>Description</th>
       <th>Download</th>
      </tr> 
      <tr>
       <td style="background: #E0E0E0">All source code</td>
       <td align="right" style="background: #E0E0E0"><a href="allsrc.zip">allsrc.zip</a> (4.3MB)</td>
      </tr> 
      <tr>
       <td>Chapter 1, "Java Threads"</td>
       <td><a href="ch01src.zip">ch01src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 2, "2D Graphics and Animation"</td>
       <td><a href="ch02src.zip">ch02src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 3, "Interactivity and User Interfaces"</td>
       <td><a href="ch03src.zip">ch03src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 4, "Sound Effects and Music"</td>
       <td><a href="ch04src.zip">ch04src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 5, "Creating a 2D Platform Game"</td>
       <td><a href="ch05src.zip">ch05src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 6, "Multi-Player Games" (By Bret Barker)</td>
       <td><a href="ch06src.zip">ch06src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 7, "3D Graphics"</td>
       <td><a href="ch07src.zip">ch07src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 8, "Texture Mapping and Lighting"</td>
       <td><a href="ch08src.zip">ch08src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 9, "3D Objects"</td>
       <td><a href="ch09src.zip">ch09src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 10, "3D Scene Management Using BSP Trees"</td>
       <td><a href="ch10src.zip">ch10src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 11, "Collision Detection"</td>
       <td><a href="ch11src.zip">ch11src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 12, "Path Finding"</td>
       <td><a href="ch12src.zip">ch12src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 13, "Artificial Intelligence"</td>
       <td><a href="ch13src.zip">ch13src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 14, "Game Scripting"</td>
       <td><a href="ch14src.zip">ch14src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 15, "Persistence - Saving the Game" (By Laurence Vanhelsuwé)</td>
       <td><a href="ch15src.zip">ch15src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 16, "Optimization Techniques"</td>
       <td><a href="ch16src.zip">ch16src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 17, "Creating Game Art and Sounds"</td>
       <td><a href="ch17src.zip">ch17src.zip</a></td>
      </tr> 
      <tr>
       <td>Chapter 18, "Game Design and the Last 10%"</td>
       <td><a href="ch18src.zip">ch18src.zip</a></td>
      </tr> 
     </tbody>
    </table> 
    <a name="errata"></a>
    <h2>Errata</h2> 
    <p>Here are a few source code notes based on reader comments.</p> 
    <h3>Loading Images (relative path issues)</h3> 
    <p>Some chapters contain both code and images, but don't use jar files. Thus, images are loaded via relative paths like "../images/background.jpg" with the idea that you'll run the code from the chapter's "build" directory. You'll need to change the paths if you run the code from a different directory. </p> 
    <h3>Sound Issues in Java 5 and Java 6.</h3> 
    <div>
      Sun updated the sound engine in Java 5 which led to a few problems. Here are the fixes: 
     <ol> 
      <li>MIDI music doesn't loop. Add this line (in <b>bold</b>) in MidiPlayer.java:<pre>
public void meta(MetaMessage event) {
    if (event.getType() == END_OF_TRACK_MESSAGE) {
       if (sequencer != null &amp;&amp; sequencer.isOpen() &amp;&amp; loop) {
           <b>sequencer.setTickPosition(0);</b>
           sequencer.start();
       }
    }
}
</pre> Thanks to Brian Bishop for the fix.<br><br> </li> 
      <li>Sounds don't play. Change these lines (in <b>bold</b>) in SoundManager.java:<pre>
public static int getMaxSimultaneousSounds(AudioFormat playbackFormat) {
    DataLine.Info lineInfo = new DataLine.Info(
        SourceDataLine.class, playbackFormat);
    Mixer mixer = AudioSystem.getMixer(null);
    <b>int maxLines = mixer.getMaxLines(lineInfo);
    if (maxLines == AudioSystem.NOT_SPECIFIED) {
        maxLines = 32;
    }
    return maxLines;</b>
}
</pre></li>
     </ol> 
     <i>Note: these changes are not yet added to the source downloads or the example game.</i>
    </div> 
    <h3>Swing integration</h3> 
    <p>Eric Berry writes of a solution of integrating Swing components on Mac OS X:</p> 
    <blockquote> 
     <p>The fix consisted of basically 2 things. First, I had to set ignore repaint to true on everything. This includes the frame itself, the content pane and the layered pane of the frame. Secondly I had to put the call to paintComponents in a SwingUtilities.invokeAndWait() call. </p>
     <pre>
SwingUtilities.invokeAndWait(new Runnable() {
        public void run() {
            paintComponents(graphics);
        }
});
</pre> 
     <p>This means making the graphics object final in the draw method sig. but that's about it.</p> 
     <p>Now using the text field doesn't freeze the entire application. </p> 
     <p>There doesn't seem to be very much drawback and I did find that the invokeAndWait was all that was absolutely necessary to make it work. However, making sure everything had ignore repaint set to true improved performance slightly (a few milliseconds). There is a performance hit with adding the invoke and wait, but it doesn't seem that bad. Without it I was getting refresh rate of about 16-20 ms, after it went from 22-26 (depending on if I was using the text field or not).</p> 
     <p></p> 
    </blockquote> 
    <h3>Mouselook (chapter 3)</h3> 
    <p>Olli Aalto (using Gentoo Linux, J2SE 1.4.2) suggests this fix for mouselook (commenting out a couple lines):</p> 
    <pre>
// from the MouseMotionListener interface
public synchronized void mouseMoved(MouseEvent e) {
    // this event is from re-centering the mouse - ignore it
    if (isRecentering) //&amp;&amp;
        //centerLocation.x == e.getX() &amp;&amp;
        //centerLocation.y == e.getY())
    {
        isRecentering = false;
    }
</pre> 
    <p>The original code works correctly on Windows, so this appears to be a Linux-only fix.</p> 
    <a name="new"></a>
    <h2>What's happened since...?</h2> 
    <p>In chapter 19, "The Future", several things were mentioned that could make things better for Java game programmers. Java 5, Java 6, and Java 7 have been released since the book came out, but how do they stack up?</p> 
    <table> 
     <tbody>
      <tr> 
       <th>Feature</th>
       <th>Included in Java 5.0</th>
       <th>Included in Java 6.0</th>
       <th>Notes</th> 
      </tr> 
      <tr> 
       <td>New Java language features (Generics, Enumerations, Static import, Enhanced for loop, etc.)</td> 
       <td class="yes">Yes</td> 
       <td class="yes">Yes</td> 
       <td>See <a href="http://java.sun.com/developer/technicalArticles/releases/j2se15/">J2SE 1.5 in a Nutshell</a>.</td> 
      </tr> 
      <tr> 
       <td>Compiler API (JSR 199)</td> 
       <td class="no">No</td> 
       <td class="yes">Yes</td> 
       <td>Not crucial for most game programmers.</td> 
      </tr> 
      <tr> 
       <td>Network Transfer Format (JSR 200)</td> 
       <td class="yes">Yes</td> 
       <td class="yes">Yes</td> 
       <td>See the <a href="http://java.sun.com/javase/6/docs/api/java/util/jar/Pack200.html">Pack200</a> class.</td> 
      </tr> 
      <tr> 
       <td>Shared VM (JSR 121)</td> 
       <td class="yes">Yes and No</td> 
       <td class="yes">Yes and No</td> 
       <td>The VM isn't shared, but <a href="http://java.sun.com/j2se/1.5.0/docs/guide/vm/class-data-sharing.html">class data sharing</a> was implemented in Java 5.0.</td> 
      </tr> 
      <tr> 
       <td>Input polling (Bug ID <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4083501">4083501</a>)</td> 
       <td class="no">Mostly No</td> 
       <td class="no">No</td> 
       <td><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/awt/MouseInfo.html">Mouse position polling</a> is implemented, but you can't poll the mouse buttons, the mouse wheel, the relative position, the keyboard, or the joystick. The bug evaluation currently states "Given a low priority by Tiger planning," probably because of the presence of the <a href="https://jinput.dev.java.net/">jinput</a> project. </td> 
      </tr> 
      <tr> 
       <td>Disabling the mouse cursor (Bug ID <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4526950">4526950</a>)</td> 
       <td class="no">No</td> 
       <td class="no">No</td> 
       <td>The bug evaluation currently states this bug will be considered for Dolphin (Java 7). As mentioned in the book, creating an invisible cursor isn't perfect on all platforms, and we need a way to disable the cursor.</td> 
      </tr> 
      <tr> 
       <td>Higher resolution timer</td> 
       <td class="yes">Yes</td> 
       <td class="yes">Yes</td> 
       <td>See <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#nanoTime()">System.nanoTime()</a>.</td> 
      </tr> 
      <tr> 
       <td>Hardware-accelerated translucent images (Bug ID <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5002129">5002129</a>)</td> 
       <td class="no">No</td> 
       <td class="yes">Yes</td> 
       <td>New methods have been added to support translucent VolatileImages, so we will probably see this in a subsequent 1.5 release.</td> 
      </tr> 
      <tr> 
       <td>Hardware-accelerated graphics on Linux</td> 
       <td class="yes">Yes</td> 
       <td class="yes">Yes</td> 
       <td>&nbsp;</td> 
      </tr> 
      <tr> 
       <td>Hardware-accelerated 3D included in the runtime</td> 
       <td class="no">No</td> 
       <td class="no">No</td> 
       <td>&nbsp;</td> 
      </tr> 
      <tr> 
       <td>Option to turn off vertical sync</td> 
       <td class="no">No</td> 
       <td class="no">No</td> 
       <td>&nbsp;</td> 
      </tr> 
      <tr> 
       <td>HotSpot SIMD operations</td> 
       <td>?</td> 
       <td>?</td> 
       <td>&nbsp;</td> 
      </tr> 
      <tr> 
       <td>OGG support (Bug ID <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4671067">4671067</a>)</td> 
       <td class="no">No</td> 
       <td class="no">No</td> 
       <td>&nbsp;</td> 
      </tr> 
      <tr> 
       <td>Sub-pixel anti-aliased text support - AKA ClearType (Bug IDs <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4726365">4726365</a> and <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4502804">4502804</a>)</td> 
       <td class="no">No</td> 
       <td class="yes">Yes</td>
       <td>&nbsp;</td> 
      </tr> 
     </tbody>
    </table> 
    <p>The new higher-resolution timer is a very welcome addition, and implementing hardware-accelerated graphics on Linux is fantastic. However we still need a for more things: For game programming, hardware-accelerated translucent images is the single most important feature that needs to be implemented. Next, we need an option to disable the mouse cursor. Finally, we need input polling.</p> 
    <p>There are lots of other features added to J2SE 1.5.0, including some full-screen fixes, sound fixes, JNLP (web start) updates, Swing updates, concurrency utilities, and bit-manipulation operations. Check out Sun's list of <a href="http://java.sun.com/j2se/1.5.0/docs/relnotes/features.html">new features</a>.</p> 
    <a name="license"></a>
    <h2>License</h2> 
    <p>The source code for the book has a BSD-style license. The new license makes it easier to include the code in commercial games.</p> 
    <pre style="white-space: normal">
Copyright (c) 2003, David Brackeen<br>
All rights reserved.<br>
<br>
Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

     <ul>

      <li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>

      <li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>

      <li>Neither the name of David Brackeen nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</li>

     </ul>
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</pre> 
   </div> 
   <div id="footer"> 
    <hr> 
    <div>
     &nbsp;
    </div> 
   </div> 
  </div> 
  <script src="/js/gatag.js" type="text/javascript"></script> 
  <script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script> 
  <script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-2564393-3");
pageTracker._trackPageview();
} catch(err) {}</script>   
 </body>
</html>