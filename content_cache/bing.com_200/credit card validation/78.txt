<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head profile="http://gmpg.org/xfn/11"> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta name="keywords" content="C#, validation, "> 
  <meta name="description" content="Credit Card Validation in C#"> 
  <title>Credit Card Validation in C# | JLCoady.net</title> 
  <link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all posts" href="http://jlcoady.net/feed"> 
  <link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all comments" href="http://jlcoady.net/comments/feed"> 
  <link rel="pingback" href="http://jlcoady.net/xmlrpc.php"> 
  <!-- style START --> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/style.css" type="text/css" media="screen"> 
  <!--[if IE 6]>
		<link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/ie6.css" type="text/css" media="screen" />
	<![endif]--> 
  <!-- default style --> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/white/default.css" type="text/css" media="screen" title="white"> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/white/global.css" type="text/css" media="screen"> 
  <!-- others styles --> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/purple/default.css" type="text/css" media="screen" title="purple"> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/purple/global.css" type="text/css" media="screen"> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/green/default.css" type="text/css" media="screen" title="green"> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/green/global.css" type="text/css" media="screen"> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/brown/default.css" type="text/css" media="screen" title="brown"> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/brown/global.css" type="text/css" media="screen"> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/blue/default.css" type="text/css" media="screen" title="blue"> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/blue/global.css" type="text/css" media="screen"> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/black/default.css" type="text/css" media="screen" title="black"> 
  <link rel="stylesheet" href="http://jlcoady.net/wp-content/themes/elegant-box/styles/black/global.css" type="text/css" media="screen"> 
  <!-- style END --> 
  <!-- javascript START --> 
  <script type="text/javascript" src="http://jlcoady.net/wp-content/themes/elegant-box/js/styleswitcher.js"></script> 
  <script type="text/javascript" src="http://jlcoady.net/wp-content/themes/elegant-box/js/util.js"></script> 
  <script type="text/javascript" src="http://jlcoady.net/wp-content/themes/elegant-box/js/menu.js"></script> 
  <!-- javascript END --> 
  <script type="text/javascript">//<![CDATA[
	// Google Analytics for WordPress by Yoast v4.06 | http://yoast.com/wordpress/google-analytics/
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount','UA-1466909-1']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	// End of Google Analytics for WordPress by Yoast v4.0
	//]]></script> 
  <link rel="alternate" type="application/rss+xml" title="JLCoady.net » Credit Card Validation in C# Comments Feed" href="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp/feed"> 
  <script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/jlcoady.net\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.11"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script> 
  <style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style> 
  <script type="text/javascript" src="http://jlcoady.net/wp-includes/js/jquery/jquery.js?ver=1.11.3"></script> 
  <script type="text/javascript" src="http://jlcoady.net/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1"></script> 
  <script type="text/javascript" src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php/en_US?ver=0.4"></script> 
  <link rel="https://api.w.org/" href="http://jlcoady.net/wp-json/"> 
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://jlcoady.net/xmlrpc.php?rsd"> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://jlcoady.net/wp-includes/wlwmanifest.xml"> 
  <link rel="prev" title="Reprint of Cinderella’s Historical Character" href="http://jlcoady.net/writing/reprint-of-cinderellas-historical-character"> 
  <link rel="next" title="Photo Blog Converted to WordPress" href="http://jlcoady.net/wordpress/photo-blog-converted-to-wordpress"> 
  <meta name="generator" content="WordPress 4.4.11"> 
  <link rel="shortlink" href="http://wp.me/pqGmO-2l"> 
  <link rel="alternate" type="application/json+oembed" href="http://jlcoady.net/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fjlcoady.net%2Fc-sharp%2Fcredit-card-validation-in-c-sharp"> 
  <link rel="alternate" type="text/xml+oembed" href="http://jlcoady.net/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fjlcoady.net%2Fc-sharp%2Fcredit-card-validation-in-c-sharp&amp;format=xml"> 
  <!-- All in One SEO Pack 1.6.12.1 by Michael Torbert of Semper Fi Web Design[412,467] --> 
  <meta name="description" content="This code validates credit card numbers based on prefix, length, and the Luhn Algorithm. using System; public enum CardType { MasterCard,"> 
  <meta name="keywords" content="c#,validation"> 
  <link rel="canonical" href="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp"> 
  <!-- /all in one seo pack --> 
  <meta property="fb:app_id" content="213573605769"> 
  <meta property="og:site_name" content="JLCoady.net"> 
  <meta property="og:url" content="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp"> 
  <link type="text/css" rel="stylesheet" href="http://jlcoady.net/wp-content/plugins/syntaxhighlighter-plus/syntaxhighlighter/styles/shCore.css"> 
  <link type="text/css" rel="stylesheet" href="http://jlcoady.net/wp-content/plugins/syntaxhighlighter-plus/syntaxhighlighter/styles/shThemeJosh.css"> 
 </head> 
 <body> 
  <!-- header START --> 
  <div id="header"> 
   <div class="inner"> 
    <div class="content"> 
     <div id="title">
      <a href="http://jlcoady.net/" title="">JLCoady.net</a>
     </div> 
     <!-- search box --> 
     <form action="/search" id="search_box" method="get"> 
      <div id="searchbox" class="floatright"> 
       <input type="text" class="textfield" id="search_textfield" name="q" size="24"> 
       <input type="hidden" name="cx" value="partner-pub-6986928873749654:dc6lg3-gsdv"> 
       <input type="hidden" name="ie" value="UTF-8"> 
       <input type="hidden" name="cof" value="FORID:10"> 
      </div> 
     </form> 
     <script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search_box&amp;lang=en"></script> 
     <!-- navigator --> 
     <div id="nav"> 
      <ul id="navlist"> 
       <li class="page_item"><a href="http://jlcoady.net/">Home</a></li> 
       <li class="page_item page-item-129 page_item_has_children"><a href="http://jlcoady.net/papers">Papers</a> 
        <ul class="children"> 
         <li class="page_item page-item-117"><a href="http://jlcoady.net/papers/cinderellas-historical-character">Cinderella’s Historical Character</a></li> 
        </ul> </li> 
       <li class="page_item page-item-196 page_item_has_children"><a href="http://jlcoady.net/tutorials">Tutorials</a> 
        <ul class="children"> 
         <li class="page_item page-item-337 page_item_has_children"><a href="http://jlcoady.net/tutorials/wordpress">WordPress</a></li> 
        </ul> </li> 
       <li id="subscribe"> <a title="Subscribe to this blog..." id="feed" href="http://jlcoady.net/feed"><img src="http://jlcoady.net/wp-content/themes/elegant-box/images/transparent.gif" alt="RSS feed"></a> 
        <ul> 
         <li class="first"><a title="Subscribe with Youdao" href="http://reader.youdao.com/#url=http://jlcoady.net/feed"> Youdao</a></li> 
         <li><a title="Subscribe with Xian Guo" href="http://www.xianguo.com/subscribe.php?url=http://jlcoady.net/feed"> Xian Guo</a></li> 
         <li><a title="Subscribe with Zhua Xia" href="http://www.zhuaxia.com/add_channel.php?url=http://jlcoady.net/feed"> Zhua Xia</a></li> 
         <li><a title="Subscribe with Google" href="http://fusion.google.com/add?feedurl=http://jlcoady.net/feed"> Google</a></li> 
         <li><a title="Subscribe with My Yahoo!" href="http://add.my.yahoo.com/rss?url=http://jlcoady.net/feed"> My Yahoo!</a></li> 
         <li><a title="Subscribe with newsgator" href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://jlcoady.net/feed"> newsgator</a></li> 
         <li><a title="Subscribe with Bloglines" href="http://www.bloglines.com/sub/http://jlcoady.net/feed"> Bloglines</a></li> 
         <li><a title="Subscribe with iNezha" href="http://inezha.com/add?url=http://jlcoady.net/feed"> iNezha</a></li> 
        </ul> </li> 
      </ul> 
     </div> 
     <div class="fixed"></div> 
    </div> 
    <div class="fixed"></div> 
   </div> 
  </div> 
  <!-- header END --> 
  <div id="container_body"> 
   <div id="main"> 
    <div class="dialog"> 
     <div class="post"> 
      <div class="title"> 
       <h1>Credit Card Validation in C#</h1> 
       <div class="fixed"></div> 
      </div> 
      <div class="info"> 
       <span>March 7th, 2009</span> 
       <span> | Tags: <a href="http://jlcoady.net/tag/c-sharp" rel="tag">C#</a>, <a href="http://jlcoady.net/tag/validation" rel="tag">validation</a></span> 
       <div class="fixed"></div> 
      </div> 
      <div class="content"> 
       <p>This code validates credit card numbers based on prefix, length, and the Luhn Algorithm.</p> 
       <p><span id="more-145"></span></p> 
       <pre class="brush: c#">
using System;

public enum CardType 
{ 
   MasterCard, BankCard, Visa, AmericanExpress, Discover, DinersClub, JCB
};

public sealed class CardValidator
{
   private CardValidator() {} // static only

   public static bool Validate(CardType cardType, string cardNumber)
   {
      byte[] number = new byte[16]; // number to validate

      // Remove non-digits
      int len = 0;
      for(int i = 0; i &lt; cardNumber.Length; i++)
      {
         if(char.IsDigit(cardNumber, i))
         {
            if(len == 16) return false; // number has too many digits
            number[len++] = byte.Parse(cardNumber[i]);
         }
      }

      // Validate based on card type, first if tests length, second tests prefix
      switch(cardType)
      {
         case CardType.MasterCard:
            if(len != 16) 
               return false;
            if(number[0] != 5 || number[1] == 0 || number[1] &gt; 5) 
               return false;
            break;
            
         case CardType.BankCard:
            if(len != 16)
               return false;
            if(number[0] != 5 || number[1] != 6 || number[2] &gt; 1) 
               return false;
            break;
            
         case CardType.Visa:
            if(len != 16 &amp;amp;&amp;amp; len != 13) 
               return false;
            if(number[0] != 4) 
               return false;
            break;
            
         case CardType.AmericanExpress:
            if(len != 15) 
               return false;
            if(number[0] != 3 || (number[1] != 4 &amp;amp;&amp;amp; number[1] != 7)) 
               return false;
            break;
            
         case CardType.Discover:
            if(len != 16) 
               return false;
            if(number[0] != 6 || number[1] != 0 || number[2] != 1 || number[3] != 1) 
               return false;
            break;
            
         case CardType.DinersClub:
            if(len != 14) 
               return false;
            if(number[0] != 3 || (number[1] != 0 &amp;amp;&amp;amp; number[1] != 6 &amp;amp;&amp;amp; number[1] != 8)
               || number[1] == 0 &amp;amp;&amp;amp; number[2] &gt; 5) 
               return false;
            break;
            
         case CardType.JCB:
            if(len != 16 &amp;amp;&amp;amp; len != 15) 
               return false;
            if(number[0] != 3 || number[1] != 5) 
               return false;
            break;
      }

      // Use Luhn Algorithm to validate
      int sum = 0;
      for(int i = len - 1; i &gt;= 0; i--)
      {
         if(i % 2 == len % 2)
         {
            int n = number[i] * 2;
            sum += (n / 10) + (n % 10);
         }
         else
            sum += number[i];
      }
      return (sum % 10 == 0);
   }
}
</pre> 
       <div class="fixed"></div> 
      </div> 
      <div class="comments comments_single"> 
       <a href="#respond">Leave a comment</a> | 
       <a href="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp/trackback" rel="trackback">Trackback</a> 
      </div> 
     </div> 
    </div> 
    <div class="ad-body">
     <script type="text/javascript"><!--
google_ad_client = "pub-6986928873749654";
google_ad_slot = "3235588065";
google_ad_width = 468;
google_ad_height = 60;
//--></script> 
     <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script> 
    </div> 
    <script type="text/javascript" src="http://jlcoady.net/wp-content/themes/elegant-box/js/comment.js"></script> 
    <div id="commentlist"> 
     <ol id="comments"> 
      <li class="comment oddcomment" id="comment-265"> 
       <div class="userinfo"> 
        <div class="userpic">
         <img alt="" src="http://2.gravatar.com/avatar/e8d59ca3b83fa29ff952a94cfda52868?s=24&amp;d=monsterid&amp;r=g" srcset="http://2.gravatar.com/avatar/e8d59ca3b83fa29ff952a94cfda52868?s=48&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-24 photo" height="24" width="24">
        </div> 
        <div class="usertext"> 
         <div class="username"> 
          <a id="commentauthor-265" href="http://nitin646.wordpress.com" rel="external nofollow"> Nitin Sawant </a> 
         </div> 
         <div class="date">
          May 2nd, 2009 at 07:04
         </div> 
        </div> 
        <div class="count"> 
         <a rel="nofollow" class="comment-reply-link" href="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp?replytocom=265#respond" onclick="return addComment.moveForm( &quot;comment-265&quot;, &quot;265&quot;, &quot;respond&quot;, &quot;145&quot; )" aria-label="Reply to Nitin Sawant">Reply</a> | 
         <a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-265', 'comment-265', 'commentbody-265', 'comment');">Quote</a> | 
         <a href="#comment-265">#1</a> 
        </div> 
        <div class="fixed"></div> 
       </div> 
       <div class="comment_text"> 
        <div id="commentbody-265">
         <p>can you provide C# code to generate valide credit cards??</p> 
         <p>regards,<br> Nitin Sawant</p> 
        </div> 
       </div> </li> 
      <ul class="children"> 
       <li class="comment " id="comment-506"> 
        <div class="userinfo"> 
         <div class="userpic">
          <img alt="" src="http://1.gravatar.com/avatar/ded5d8fe42b8ac10d196d7276673cd26?s=24&amp;d=monsterid&amp;r=g" srcset="http://1.gravatar.com/avatar/ded5d8fe42b8ac10d196d7276673cd26?s=48&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-24 photo" height="24" width="24">
         </div> 
         <div class="usertext"> 
          <div class="username"> 
           <span id="commentauthor-506"> Navnit </span> 
          </div> 
          <div class="date">
           January 22nd, 2010 at 01:11
          </div> 
         </div> 
         <div class="count"> 
          <a rel="nofollow" class="comment-reply-link" href="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp?replytocom=506#respond" onclick="return addComment.moveForm( &quot;comment-506&quot;, &quot;506&quot;, &quot;respond&quot;, &quot;145&quot; )" aria-label="Reply to Navnit">Reply</a> | 
          <a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-506', 'comment-506', 'commentbody-506', 'comment');">Quote</a> | 
          <a href="#comment-506">#2</a> 
         </div> 
         <div class="fixed"></div> 
        </div> 
        <div class="comment_text"> 
         <div id="commentbody-506">
          <p>public sealed class Card_Validation<br> {<br> string MasterCard, BankCard, Visa, AmericanExpress, Discover, DinersClub, JCB;<br> private Card_Validation()<br> {<br> } // static only</p> 
          <p> //public static bool Validate(CardType cardType, string cardNumber)<br> public static bool Validate(string cardType, string cardNumber)<br> {<br> byte[] number = new byte[16]; // number to validate</p> 
          <p> // Remove non-digits<br> int len = 0;<br> for(int i = 0; i 5)<br> return false;<br> break;</p> 
          <p> case “BankCard”:<br> if(len != 16)<br> return false;<br> if(number[0] != 5 || number[1] != 6 || number[2] &gt; 1)<br> return false;<br> break;</p> 
          <p> case “Visa”:<br> if(len != 16 &amp;&amp; len != 13)<br> return false;<br> if(number[0] != 4)<br> return false;<br> break;</p> 
          <p> case “AmericanExpress”:<br> if(len != 15)<br> return false;<br> if(number[0] != 3 || (number[1] != 4 &amp;&amp; number[1] != 7))<br> return false;<br> break;</p> 
          <p> case “Discover”:<br> if(len != 16)<br> return false;<br> if(number[0] != 6 || number[1] != 0 || number[2] != 1 || number[3] != 1)<br> return false;<br> break;</p> 
          <p> case “DinersClub”:<br> if(len != 14)<br> return false;<br> if(number[0] != 3 || (number[1] != 0 &amp;&amp; number[1] != 6 &amp;&amp; number[1] != 8)<br> || number[1] == 0 &amp;&amp; number[2] &gt; 5)<br> return false;<br> break;</p> 
          <p> case “JCB”:<br> if(len != 16 &amp;&amp; len != 15)<br> return false;<br> if(number[0] != 3 || number[1] != 5)<br> return false;<br> break;<br> }</p> 
          <p> // Use Luhn Algorithm to validate<br> int sum = 0;<br> for(int i = len – 1; i &gt;= 0; i–)<br> {<br> if(i % 2 == len % 2)<br> {<br> int n = number[i] * 2;<br> sum += (n / 10) + (n % 10);<br> }<br> else<br> sum += number[i];<br> }<br> return (sum % 10 == 0);<br> }<br> }</p> 
         </div> 
        </div> </li> 
       <!-- #comment-## --> 
      </ul>
      <!-- .children --> 
      <!-- #comment-## --> 
      <li class="comment oddcomment" id="comment-305"> 
       <div class="userinfo"> 
        <div class="userpic">
         <img alt="" src="http://1.gravatar.com/avatar/1a682ea328ea3778f1ab544ad4e308d5?s=24&amp;d=monsterid&amp;r=g" srcset="http://1.gravatar.com/avatar/1a682ea328ea3778f1ab544ad4e308d5?s=48&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-24 photo" height="24" width="24">
        </div> 
        <div class="usertext"> 
         <div class="username"> 
          <span id="commentauthor-305"> mexicotom </span> 
         </div> 
         <div class="date">
          August 4th, 2009 at 18:01
         </div> 
        </div> 
        <div class="count"> 
         <a rel="nofollow" class="comment-reply-link" href="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp?replytocom=305#respond" onclick="return addComment.moveForm( &quot;comment-305&quot;, &quot;305&quot;, &quot;respond&quot;, &quot;145&quot; )" aria-label="Reply to mexicotom">Reply</a> | 
         <a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-305', 'comment-305', 'commentbody-305', 'comment');">Quote</a> | 
         <a href="#comment-305">#3</a> 
        </div> 
        <div class="fixed"></div> 
       </div> 
       <div class="comment_text"> 
        <div id="commentbody-305">
         <p>Your Luhn algorithm is interesting, but according to my tests is 10x slower than this one:</p> 
         <p><a href="http://orb-of-knowledge.blogspot.com/2009/08/extremely-fast-luhn-function-for-c.html" onclick="javascript:_gaq.push(['_trackEvent','outbound-comment','orb-of-knowledge.blogspot.com']);" rel="nofollow">http://orb-of-knowledge.blogspot.com/2009/08/extremely-fast-luhn-function-for-c.html</a></p> 
         <p>Also, line #23 is not compiling for me, as it complains that Byte.Parse cannot take a char, but must take a string. I then had to call .ToString() on the char value to make it work (which may account for some of the slowness mentioned above).</p> 
        </div> 
       </div> </li> 
      <ul class="children"> 
       <li class="comment " id="comment-505"> 
        <div class="userinfo"> 
         <div class="userpic">
          <img alt="" src="http://1.gravatar.com/avatar/ded5d8fe42b8ac10d196d7276673cd26?s=24&amp;d=monsterid&amp;r=g" srcset="http://1.gravatar.com/avatar/ded5d8fe42b8ac10d196d7276673cd26?s=48&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-24 photo" height="24" width="24">
         </div> 
         <div class="usertext"> 
          <div class="username"> 
           <span id="commentauthor-505"> Navnit </span> 
          </div> 
          <div class="date">
           January 22nd, 2010 at 01:09
          </div> 
         </div> 
         <div class="count"> 
          <a rel="nofollow" class="comment-reply-link" href="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp?replytocom=505#respond" onclick="return addComment.moveForm( &quot;comment-505&quot;, &quot;505&quot;, &quot;respond&quot;, &quot;145&quot; )" aria-label="Reply to Navnit">Reply</a> | 
          <a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-505', 'comment-505', 'commentbody-505', 'comment');">Quote</a> | 
          <a href="#comment-505">#4</a> 
         </div> 
         <div class="fixed"></div> 
        </div> 
        <div class="comment_text"> 
         <div id="commentbody-505">
          <p>if(len == 16) return false; // number has too many digits<br> number[len++] =Convert.ToByte(cardNumber[i]);</p> 
         </div> 
        </div> </li> 
       <!-- #comment-## --> 
      </ul>
      <!-- .children --> 
      <!-- #comment-## --> 
      <li class="comment oddcomment" id="comment-363"> 
       <div class="userinfo"> 
        <div class="userpic">
         <img alt="" src="http://1.gravatar.com/avatar/1977c7803e39c0c66a3fa3f1b7211dd0?s=24&amp;d=monsterid&amp;r=g" srcset="http://1.gravatar.com/avatar/1977c7803e39c0c66a3fa3f1b7211dd0?s=48&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-24 photo" height="24" width="24">
        </div> 
        <div class="usertext"> 
         <div class="username"> 
          <a id="commentauthor-363" href="http://www.eztrucker.net" rel="external nofollow"> Howzilla </a> 
         </div> 
         <div class="date">
          September 28th, 2009 at 18:21
         </div> 
        </div> 
        <div class="count"> 
         <a rel="nofollow" class="comment-reply-link" href="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp?replytocom=363#respond" onclick="return addComment.moveForm( &quot;comment-363&quot;, &quot;363&quot;, &quot;respond&quot;, &quot;145&quot; )" aria-label="Reply to Howzilla">Reply</a> | 
         <a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-363', 'comment-363', 'commentbody-363', 'comment');">Quote</a> | 
         <a href="#comment-363">#5</a> 
        </div> 
        <div class="fixed"></div> 
       </div> 
       <div class="comment_text"> 
        <div id="commentbody-363">
         <p>Thanks for the code. You really saved me some time with this.</p> 
        </div> 
       </div> </li> 
      <!-- #comment-## --> 
      <li class="comment " id="comment-2583"> 
       <div class="userinfo"> 
        <div class="userpic">
         <img alt="" src="http://2.gravatar.com/avatar/261bf204f694e359dbe78572bf56577f?s=24&amp;d=monsterid&amp;r=g" srcset="http://2.gravatar.com/avatar/261bf204f694e359dbe78572bf56577f?s=48&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-24 photo" height="24" width="24">
        </div> 
        <div class="usertext"> 
         <div class="username"> 
          <span id="commentauthor-2583"> Marinus </span> 
         </div> 
         <div class="date">
          October 13th, 2010 at 00:27
         </div> 
        </div> 
        <div class="count"> 
         <a rel="nofollow" class="comment-reply-link" href="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp?replytocom=2583#respond" onclick="return addComment.moveForm( &quot;comment-2583&quot;, &quot;2583&quot;, &quot;respond&quot;, &quot;145&quot; )" aria-label="Reply to Marinus">Reply</a> | 
         <a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-2583', 'comment-2583', 'commentbody-2583', 'comment');">Quote</a> | 
         <a href="#comment-2583">#6</a> 
        </div> 
        <div class="fixed"></div> 
       </div> 
       <div class="comment_text"> 
        <div id="commentbody-2583">
         <p>Can you please tell me if i have a Text box how will it be possible to send the text box text information through this class</p> 
         <p>public static bool Validate(CardType cardType, string cardNumber)</p> 
        </div> 
       </div> </li> 
      <!-- #comment-## --> 
      <li class="comment oddcomment" id="comment-6267"> 
       <div class="userinfo"> 
        <div class="userpic">
         <img alt="" src="http://1.gravatar.com/avatar/d4b0dbf7167e4086a8338ae3cb01c399?s=24&amp;d=monsterid&amp;r=g" srcset="http://1.gravatar.com/avatar/d4b0dbf7167e4086a8338ae3cb01c399?s=48&amp;d=monsterid&amp;r=g 2x" class="avatar avatar-24 photo" height="24" width="24">
        </div> 
        <div class="usertext"> 
         <div class="username"> 
          <span id="commentauthor-6267"> Jarrett </span> 
         </div> 
         <div class="date">
          November 1st, 2011 at 14:03
         </div> 
        </div> 
        <div class="count"> 
         <a rel="nofollow" class="comment-reply-link" href="http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp?replytocom=6267#respond" onclick="return addComment.moveForm( &quot;comment-6267&quot;, &quot;6267&quot;, &quot;respond&quot;, &quot;145&quot; )" aria-label="Reply to Jarrett">Reply</a> | 
         <a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-6267', 'comment-6267', 'commentbody-6267', 'comment');">Quote</a> | 
         <a href="#comment-6267">#7</a> 
        </div> 
        <div class="fixed"></div> 
       </div> 
       <div class="comment_text"> 
        <div id="commentbody-6267">
         <p>Can you build the different classes used to validate each card. I was thinking that a separate class for each card would be needed for validation.</p> 
        </div> 
       </div> </li> 
      <!-- #comment-## --> 
     </ol> 
    </div> 
    <div id="respond"> 
     <form action="http://jlcoady.net/wp-comments-post.php" method="post" id="commentform"> 
      <!-- comment info --> 
      <div id="comment_header"> 
       <div id="comment_info"> 
        <div id="author_info"> 
         <div class="row"> 
          <input type="text" name="author" id="author" class="textfield" value="" size="24" tabindex="1"> 
          <label for="author" class="small">Name (required)</label> 
         </div> 
         <div class="row"> 
          <input type="text" name="email" id="email" class="textfield" value="" size="24" tabindex="2"> 
          <label for="email" class="small">E-Mail (will not be published) (required)</label> 
         </div> 
         <div class="row"> 
          <input type="text" name="url" id="url" class="textfield" value="" size="24" tabindex="3"> 
          <label for="url" class="small">Website</label> 
         </div> 
        </div> 
       </div> 
      </div> 
      <!-- comment input --> 
      <textarea name="comment" id="comment" tabindex="4" rows="8" cols="50"></textarea> 
      <!-- comment submit and rss --> 
      <div id="submitbox"> 
       <div id="comments_rss"> 
        <a href="http://jlcoady.net/comments/feed"> <span class="feed">Subscribe to comments feed</span> </a> 
       </div> 
       <div class="act"> 
        <a rel="nofollow" id="cancel-comment-reply-link" href="/c-sharp/credit-card-validation-in-c-sharp#respond" style="display:none;">Cancel</a> 
        <input name="submit" type="submit" id="submit" class="button" tabindex="5" value="Submit Comment"> 
       </div> 
       <input type="hidden" name="comment_post_ID" value="145"> 
       <input type="hidden" name="comment_post_ID" value="145" id="comment_post_ID"> 
       <input type="hidden" name="comment_parent" id="comment_parent" value="0"> 
       <div class="fixed"></div> 
      </div> 
      <p id="sfc_comm_send"></p> 
     </form> 
    </div> 
   </div> 
   <!-- sidebar START --> 
   <div id="sidebar"> 
    <div id="sidebar-body"> 
     <!-- Style Switcher START --> 
     <div class="widget"> 
      <div id="styleswitcher"> 
       <span id="style-text">Theme Styles : </span> 
       <span id="style-purple" class="color"><a onclick="MGJS_STS.setActiveStyleSheet('purple');" href="javascript:void(0);" title="Switch to purple"><img src="http://jlcoady.net/wp-content/themes/elegant-box/images/transparent.gif" alt=""></a></span> 
       <span id="style-green" class="color"><a onclick="MGJS_STS.setActiveStyleSheet('green');" href="javascript:void(0);" title="Switch to green"><img src="http://jlcoady.net/wp-content/themes/elegant-box/images/transparent.gif" alt=""></a></span> 
       <span id="style-white" class="color"><a onclick="MGJS_STS.setActiveStyleSheet('white');" href="javascript:void(0);" title="Switch to white"><img src="http://jlcoady.net/wp-content/themes/elegant-box/images/transparent.gif" alt=""></a></span> 
       <span id="style-brown" class="color"><a onclick="MGJS_STS.setActiveStyleSheet('brown');" href="javascript:void(0);" title="Switch to brown"><img src="http://jlcoady.net/wp-content/themes/elegant-box/images/transparent.gif" alt=""></a></span> 
       <span id="style-blue" class="color"><a onclick="MGJS_STS.setActiveStyleSheet('blue');" href="javascript:void(0);" title="Switch to blue"><img src="http://jlcoady.net/wp-content/themes/elegant-box/images/transparent.gif" alt=""></a></span> 
       <span id="style-black" class="color"><a onclick="MGJS_STS.setActiveStyleSheet('black');" href="javascript:void(0);" title="Switch to black"><img src="http://jlcoady.net/wp-content/themes/elegant-box/images/transparent.gif" alt=""></a></span> 
       <div class="fixed"></div> 
      </div> 
     </div> 
     <!-- Style Switcher END --> 
     <!-- showcase --> 
     <ul id="widgets"> 
      <li class="widget widget_tag_cloud"><h3>Tags</h3>
       <div class="tagcloud">
        <a href="http://jlcoady.net/tag/adsense" class="tag-link-12" title="1 topic" style="font-size: 8pt;">AdSense</a> 
        <a href="http://jlcoady.net/tag/adwords" class="tag-link-13" title="1 topic" style="font-size: 8pt;">AdWords</a> 
        <a href="http://jlcoady.net/tag/ajax" class="tag-link-14" title="3 topics" style="font-size: 15pt;">AJAX</a> 
        <a href="http://jlcoady.net/tag/apache" class="tag-link-15" title="4 topics" style="font-size: 17.3333333333pt;">Apache</a> 
        <a href="http://jlcoady.net/tag/apc" class="tag-link-53" title="1 topic" style="font-size: 8pt;">APC</a> 
        <a href="http://jlcoady.net/tag/aspnet" class="tag-link-59" title="3 topics" style="font-size: 15pt;">ASP.net</a> 
        <a href="http://jlcoady.net/tag/c-sharp" class="tag-link-68" title="1 topic" style="font-size: 8pt;">C#</a> 
        <a href="http://jlcoady.net/tag/continuous-integration" class="tag-link-33" title="1 topic" style="font-size: 8pt;">Continuous Integration</a> 
        <a href="http://jlcoady.net/tag/css" class="tag-link-16" title="2 topics" style="font-size: 12.2pt;">css</a> 
        <a href="http://jlcoady.net/tag/doctrine" class="tag-link-50" title="1 topic" style="font-size: 8pt;">Doctrine</a> 
        <a href="http://jlcoady.net/tag/dql" class="tag-link-52" title="1 topic" style="font-size: 8pt;">DQL</a> 
        <a href="http://jlcoady.net/tag/eclipse" class="tag-link-17" title="1 topic" style="font-size: 8pt;">Eclipse</a> 
        <a href="http://jlcoady.net/tag/elgg" class="tag-link-18" title="2 topics" style="font-size: 12.2pt;">Elgg</a> 
        <a href="http://jlcoady.net/tag/exception" class="tag-link-54" title="1 topic" style="font-size: 8pt;">exception</a> 
        <a href="http://jlcoady.net/tag/fckeditor" class="tag-link-20" title="1 topic" style="font-size: 8pt;">FCKEditor</a> 
        <a href="http://jlcoady.net/tag/firefox" class="tag-link-21" title="1 topic" style="font-size: 8pt;">FireFox</a> 
        <a href="http://jlcoady.net/tag/google" class="tag-link-22" title="1 topic" style="font-size: 8pt;">Google</a> 
        <a href="http://jlcoady.net/tag/grain" class="tag-link-40" title="1 topic" style="font-size: 8pt;">Grain</a> 
        <a href="http://jlcoady.net/tag/hudson" class="tag-link-34" title="1 topic" style="font-size: 8pt;">Hudson</a> 
        <a href="http://jlcoady.net/tag/iis" class="tag-link-32" title="2 topics" style="font-size: 12.2pt;">IIS</a> 
        <a href="http://jlcoady.net/tag/isapi_rewrite" class="tag-link-24" title="2 topics" style="font-size: 12.2pt;">ISAPI_Rewrite</a> 
        <a href="http://jlcoady.net/tag/javascript" class="tag-link-43" title="1 topic" style="font-size: 8pt;">javascript</a> 
        <a href="http://jlcoady.net/tag/jquery" class="tag-link-44" title="1 topic" style="font-size: 8pt;">jQuery</a> 
        <a href="http://jlcoady.net/tag/meta" class="tag-link-25" title="1 topic" style="font-size: 8pt;">meta</a> 
        <a href="http://jlcoady.net/tag/microsoft" class="tag-link-26" title="1 topic" style="font-size: 8pt;">Microsoft</a> 
        <a href="http://jlcoady.net/tag/mod_rewrite" class="tag-link-27" title="4 topics" style="font-size: 17.3333333333pt;">mod_rewrite</a> 
        <a href="http://jlcoady.net/tag/nmock" class="tag-link-28" title="1 topic" style="font-size: 8pt;">NMock</a> 
        <a href="http://jlcoady.net/tag/photography" class="tag-link-38" title="1 topic" style="font-size: 8pt;">photography</a> 
        <a href="http://jlcoady.net/tag/php" class="tag-link-60" title="3 topics" style="font-size: 15pt;">PHP</a> 
        <a href="http://jlcoady.net/tag/query-caching" class="tag-link-51" title="1 topic" style="font-size: 8pt;">query caching</a> 
        <a href="http://jlcoady.net/tag/radrails" class="tag-link-29" title="1 topic" style="font-size: 8pt;">RadRails</a> 
        <a href="http://jlcoady.net/tag/ruby-on-rails" class="tag-link-61" title="1 topic" style="font-size: 8pt;">Ruby on Rails</a> 
        <a href="http://jlcoady.net/tag/seo" class="tag-link-30" title="3 topics" style="font-size: 15pt;">SEO</a> 
        <a href="http://jlcoady.net/tag/sql" class="tag-link-55" title="1 topic" style="font-size: 8pt;">SQL</a> 
        <a href="http://jlcoady.net/tag/symfony" class="tag-link-62" title="7 topics" style="font-size: 22pt;">Symfony</a> 
        <a href="http://jlcoady.net/tag/testing" class="tag-link-63" title="2 topics" style="font-size: 12.2pt;">Testing</a> 
        <a href="http://jlcoady.net/tag/theme" class="tag-link-37" title="2 topics" style="font-size: 12.2pt;">theme</a> 
        <a href="http://jlcoady.net/tag/tutorial" class="tag-link-46" title="1 topic" style="font-size: 8pt;">tutorial</a> 
        <a href="http://jlcoady.net/tag/ubuntu" class="tag-link-48" title="1 topic" style="font-size: 8pt;">Ubuntu</a> 
        <a href="http://jlcoady.net/tag/umbraco" class="tag-link-64" title="3 topics" style="font-size: 15pt;">Umbraco</a> 
        <a href="http://jlcoady.net/tag/validation" class="tag-link-42" title="1 topic" style="font-size: 8pt;">validation</a> 
        <a href="http://jlcoady.net/tag/windows" class="tag-link-65" title="2 topics" style="font-size: 12.2pt;">Windows</a> 
        <a href="http://jlcoady.net/tag/wordpress" class="tag-link-67" title="3 topics" style="font-size: 15pt;">WordPress</a> 
        <a href="http://jlcoady.net/tag/xsl" class="tag-link-31" title="1 topic" style="font-size: 8pt;">XSL</a> 
        <a href="http://jlcoady.net/tag/yapb" class="tag-link-39" title="1 topic" style="font-size: 8pt;">YAPB</a>
       </div> </li>
      <li class="widget adsensem_widget"><script type="text/javascript"><!--
google_ad_client = "pub-6986928873749654";
google_ad_slot = "0555921574";
google_ad_width = 200;
google_ad_height = 90;
//--></script> <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script> </li>
      <li class="widget widget_categories"><h3>Categories</h3> 
       <ul> 
        <li class="cat-item cat-item-3"><a href="http://jlcoady.net/./aspnet">ASP.net</a> (3) </li> 
        <li class="cat-item cat-item-41"><a href="http://jlcoady.net/./c-sharp">C#</a> (1) </li> 
        <li class="cat-item cat-item-5"><a href="http://jlcoady.net/./ruby-on-rails">Ruby on Rails</a> (1) </li> 
        <li class="cat-item cat-item-66"><a href="http://jlcoady.net/./seo">SEO</a> (2) </li> 
        <li class="cat-item cat-item-6"><a href="http://jlcoady.net/./symfony">Symfony</a> (6) </li> 
        <li class="cat-item cat-item-7"><a href="http://jlcoady.net/./testing">Testing</a> (2) </li> 
        <li class="cat-item cat-item-8"><a href="http://jlcoady.net/./tips">Tips</a> (5) </li> 
        <li class="cat-item cat-item-9"><a href="http://jlcoady.net/./umbraco">Umbraco</a> (3) </li> 
        <li class="cat-item cat-item-45"><a href="http://jlcoady.net/./ventures">Ventures</a> (1) </li> 
        <li class="cat-item cat-item-11"><a href="http://jlcoady.net/./windows">Windows</a> (2) </li> 
        <li class="cat-item cat-item-36"><a href="http://jlcoady.net/./wordpress">WordPress</a> (2) </li> 
        <li class="cat-item cat-item-35"><a href="http://jlcoady.net/./writing">Writing</a> (1) </li> 
       </ul> </li>
      <li class="widget widget_get_recent_comments"><h3>Recent Comments</h3>
       <div id="get_recent_comments_wrap">
        <ul> 
         <li><a href="http://jlcoady.net/windows/how-to-resolve-mount-error12-cannot-allocate-memory-windows-share#comment-11611">Storch</a>: Worked like a charm! You the man!</li> 
         <li><a href="http://jlcoady.net/windows/how-to-resolve-mount-error12-cannot-allocate-memory-windows-share#comment-11573">and</a>: Thanks!</li> 
         <li><a href="http://jlcoady.net/windows/how-to-resolve-mount-error12-cannot-allocate-memory-windows-share#comment-11400">Figaro</a>: Many thanks. I was going nuts trying to get SMB4K working against W7. Saved my day(s).</li> 
         <li><a href="http://jlcoady.net/windows/how-to-resolve-mount-error12-cannot-allocate-memory-windows-share#comment-11245">Leftie</a>: Clear and concise info, got things working and even got an explanation as to why the problem occurred. Thanks...</li> 
         <li><a href="http://jlcoady.net/windows/how-to-resolve-mount-error12-cannot-allocate-memory-windows-share#comment-11046">peffe</a>: Awesome. I am able to mount my windows share again :) thanks a lot.</li> 
        </ul>
       </div></li>
      <li class="widget widget_text"><h3>Hosted by Parcom</h3> 
       <div class="textwidget">
        <ul> 
         <li>This site has been hosted with <a rel="nofollow" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','affiliate.parcom.net']);" href="http://affiliate.parcom.net/idevaffiliate.php?id=779_0_3_6">Parcom</a> since 2004 and I've never looked back. Parcom has been offering high quality web site hosting since 1997 and I'm confident they can meet your needs.</li> 
         <li>ASP.net 3.5 &amp; SQL Server 2005</li> 
         <li>PHP 5 &amp; MySQL 5</li> 
         <li>Advanced control panel</li> 
         <li>650+ <a href="http://en.wikipedia.org/wiki/Peering" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','en.wikipedia.org']);">network peering</a> agreements</li> 
         <li>Triple redundant <a href="http://en.wikipedia.org/wiki/Power_grid" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','en.wikipedia.org']);">power grids</a></li> 
         <li>Triple redundant UPS</li> 
         <li>Triple redundant diesel generators</li> 
         <li>Only at <a rel="nofollow" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','affiliate.parcom.net']);" href="http://affiliate.parcom.net/idevaffiliate.php?id=779_0_3_6">parcom.net</a></li> 
        </ul>
       </div> </li> 
     </ul> 
     <!-- showcase 2 --> 
    </div> 
   </div> 
   <!-- sidebar END --> 
   <div class="fixed"></div> 
   <div id="container_bottom"> 
    <div class="postnav"> 
     <span class="alignleft">« <a href="http://jlcoady.net/writing/reprint-of-cinderellas-historical-character" rel="prev">Reprint of Cinderella’s Historical Character</a></span> 
     <span class="alignright"><a href="http://jlcoady.net/wordpress/photo-blog-converted-to-wordpress" rel="next">Photo Blog Converted to WordPress</a> »</span> 
     <div class="fixed"></div> 
    </div> 
    <div class="anchor"> 
     <span><a href="#" onclick="MGJS.goTop();return false;">TOP</a></span> 
    </div> 
    <div class="fixed"></div> 
   </div> 
   <div class="fixed"></div> 
  </div> 
  <!-- footer START --> 
  <div id="footer"> 
   <div class="inner"> 
    <div class="content"> 
     <p id="about"> Copyright © 1999-2010 <a href="http://josh.coady.us">Joshua L. Coady</a> | Powered by <a rel="nofollow" href="http://wordpress.org/">WordPress</a> | Theme by <a rel="nofollow" href="http://www.neoease.com/">mg12</a> </p> 
     <ul id="admin"> 
      <li><a href="http://jlcoady.net/wp-login.php">Log in</a></li> 
     </ul> 
     <div class="fixed"></div> 
    </div> 
   </div> 
  </div> 
  <!-- footer END --> 
  <!-- AdSense Manager v3.3.3 (0.307 seconds.) -->
  <script type="text/javascript" src="http://jlcoady.net/wp-includes/js/comment-reply.min.js?ver=4.4.11"></script> 
  <script type="text/javascript" src="http://jlcoady.net/wp-includes/js/wp-embed.min.js?ver=4.4.11"></script> 
  <script type="text/javascript">
FB_RequireFeatures(["XFBML"], function() {
  	FB.init("f9c417023f4c2ef6fe6695f0eb3ac463", "http://jlcoady.net/?xd_receiver=1", {"permsToRequestOnConnect":"email"});
});
</script> 
  <style type="text/css">
#fb-user { border: 1px dotted #C0C0C0; padding: 5px; display: block; height: 96px; }
#fb-user .fb_profile_pic_rendered { margin-right: 5px; }
#fb-user a.FB_Link img { float: left; }
</style> 
  <script type="text/javascript">
var fb_connect_user = false;

function sfc_update_user_details() {
	fb_connect_user = true;

	// Show their FB details TODO this should be configurable, or at least prettier...
	if (!jQuery('#fb-user').length) {
		jQuery('#comment-user-details').hide().after("<span id='fb-user'>" +
		"<fb:profile-pic uid='loggedinuser' facebook-logo='true' size='normal' height='96'></fb:profile-pic>" +
		"<span id='fb-msg'><strong><fb:intl>Hi</fb:intl> <fb:name uid='loggedinuser' useyou='false'></fb:name>!</strong><br /><fb:intl>You are connected with your Facebook account.</fb:intl>" +
		"<a href='#' onclick='FB.Connect.logoutAndRedirect(\"http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp\"); return false;'>Logout</a>" +
		"</span></span>");
		jQuery('#sfc_comm_send').html('<input style="width: auto;" type="checkbox" id="sfc_comm_share" /><label for="sfc_comm_send"><fb:intl>Share Comment on Facebook</fb:intl></label>');
	}

	// Refresh the DOM
	FB.XFBML.Host.parseDomTree();
}

jQuery("#commentform").bind('submit',sfc_handle_submit_share);
function sfc_handle_submit_share() {
	if (jQuery('#sfc_comm_share:checked').val() == 'on') {
		sfc_setCookie('sfc_share', 'yes');
	}
	return true;
}

// first, check if we already have email permission
var sfc_comm_email_perm = false;
FB.ensureInit ( function () { 
	FB.Facebook.apiClient.users_hasAppPermission('email',function(res,ex){
		if (res == 0) {
			// no permission, ask for it on submit
			jQuery("#commentform").bind('submit',sfc_get_email_perms);
		} else {
			// we have permission, no special handler needed
			sfc_comm_email_perm = true;
		}
	});
});

// ask for email permission
function sfc_get_email_perms() {
	if (sfc_comm_email_perm) return true;
	if (fb_connect_user) {
		FB.Facebook.apiClient.users_hasAppPermission('email',function(res,ex){
			if (res == 0) {
				FB.Connect.showPermissionDialog("email", function(perms) {
					if (perms.match("email")) {
						sfc_commentform_submit();
					} else {
						var dialog = FB.UI.FBMLPopupDialog('Email required', '');
						var fbml='\
<div id="fb_dialog_content" class="fb_dialog_content">\
	<div class="fb_confirmation_stripes"></div>\
	<div class="fb_confirmation_content"><p>This site requires permission to get your email address for you to leave a comment. You can not leave a comment without granting that permission.</p></div>\
</div>';
						dialog.setFBMLContent(fbml);
						dialog.setContentWidth(540); 
						dialog.setContentHeight(65);
						dialog.set_placement(FB.UI.PopupPlacement.topCenter);
						dialog.show();
						setTimeout ( function() { dialog.close(); }, 5000 );					
					}
				});
			} else {
				sfc_commentform_submit();
			}
		});
		return false;
	} else {
		return true;
	}	
}

// submit the form
function sfc_commentform_submit() {
	jQuery("#commentform").unbind('submit',sfc_get_email_perms);
	jQuery("#commentform :submit").click();
}

function sfc_setCookie(c_name,value,expiredays) {
	var exdate=new Date();
	exdate.setDate(exdate.getDate()+expiredays);
	document.cookie=c_name+ "=" +escape(value)+((expiredays==null) ? "" : ";expires="+exdate.toGMTString());
}

function sfc_getCookie(c_name) {
	if (document.cookie.length>0) {
		c_start=document.cookie.indexOf(c_name + "=");
		if (c_start!=-1) {
			c_start=c_start + c_name.length+1;
			c_end=document.cookie.indexOf(";",c_start);
			if (c_end==-1) c_end=document.cookie.length;
			return unescape(document.cookie.substring(c_start,c_end));
		}
	}
	return "";
}

FB.ensureInit ( function () { 
	FB.Connect.ifUserConnected(sfc_update_user_details);
	if (sfc_getCookie('sfc_share') == 'yes') {
		sfc_setCookie('sfc_share', null);
				
		FB.Connect.streamPublish(null, 
			{"name":"Credit Card Validation in C#","href":"http:\/\/jlcoady.net\/c-sharp\/credit-card-validation-in-c-sharp","description":"This code validates credit card numbers based on prefix, length, and the Luhn Algorithm.   using System;  public enum CardType  {     MasterCard, BankCard, Visa, AmericanExpress, Discover, DinersClub, JCB };  public sealed class CardValidator {    private CardValidator() {} \/\/ static only     [...]","caption":"{*actor*} left a comment on Credit Card Validation in C#","comments_xid":"http%3A%2F%2Fjlcoady.net%2Fc-sharp%2Fcredit-card-validation-in-c-sharp"},
			[{"text":"Read Post","href":"http:\/\/jlcoady.net\/c-sharp\/credit-card-validation-in-c-sharp"}]			);
	}
}); 
</script> 
  <!--stats_footer_test-->
  <script src="http://stats.wordpress.com/e-201740.js" type="text/javascript"></script> 
  <script type="text/javascript">
st_go({blog:'6359390',v:'ext',post:'145'});
var load_cmc = function(){linktracker_init(6359390,145,2);};
if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
else load_cmc();
</script> 
  <!-- SyntaxHighlighter Stuff --> 
  <script type="text/javascript" src="http://jlcoady.net/wp-content/plugins/syntaxhighlighter-plus/syntaxhighlighter/src/shCore.js"></script> 
  <script type="text/javascript" src="http://jlcoady.net/wp-content/plugins/syntaxhighlighter-plus/syntaxhighlighter/scripts/shBrushCSharp.js"></script> 
  <!-- Reassign aliases --> 
  <script type="text/javascript">
				SyntaxHighlighter.brushes.CSharp.aliases = ["c#", "c-sharp", "csharp"];
	</script> 
  <script type="text/javascript">
	SyntaxHighlighter.all();
</script>   
 </body>
</html>