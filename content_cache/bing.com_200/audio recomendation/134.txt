<!doctype html>
<html lang="en" class="chekov">
 <head>
  <script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>
  <meta charset="utf-8">
  <meta name="xsrf_token" content="coTkJhhP-8fUEkxilAot9R2QfxvY0GYaEPLaGO3kdj06MTUwNzAzOTQyMjg3NTIxMA">
  <link rel="canonical" href="https://developers.google.com/speed/articles/optimizing-javascript">
  <link rel="alternate" href="https://developers.google.com/speed/articles/optimizing-javascript" hreflang="en">
  <link rel="alternate" href="https://developers.google.cn/speed/articles/optimizing-javascript" hreflang="en-cn">
  <link rel="alternate" href="https://developers.google.com/speed/articles/optimizing-javascript" hreflang="x-default">
  <link rel="shortcut icon" href="https://developers.google.com/_static/772880e9e9/images/favicon.png">
  <link rel="apple-touch-icon" href="https://developers.google.com/_static/772880e9e9/images/touch-icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons">
  <link rel="stylesheet" href="https://developers.google.com/_static/772880e9e9/css/devsite-google-blue.css">
  <link rel="search" type="application/opensearchdescription+xml" title="Google Developers" href="https://developers.google.com/s/opensearch.xml">
  <script src="https://developers.google.com/_static/772880e9e9/js/jquery-bundle.js"></script>
  <meta property="og:site_name" content="Google Developers">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://developers.google.com/speed/articles/optimizing-javascript">
  <meta property="og:locale" content="en">
  <script>
    var ___gcfg = ___gcfg || {};
    ___gcfg.lang = 'en';
  </script>
  <title>Optimizing JavaScript code &nbsp;|&nbsp; PageSpeed Insights
      &nbsp;|&nbsp; Google Developers</title>
  <meta property="og:title" content="Optimizing JavaScript code &nbsp;|&nbsp; PageSpeed Insights
      &nbsp;|&nbsp; Google Developers">
  <link rel="stylesheet" href="https://developers.google.com/speed/styles/local.css">
 </head>
 <body class="
               devsite-doc-page
               
               
               
               devsite-header-no-upper-tabs
               " id="top_of_page">
  <div class="devsite-wrapper">
   <div class="devsite-top-section-wrapper
            ">
    <header class="devsite-top-section nocontent">
     <div class="devsite-top-logo-row-wrapper-wrapper">
      <div class="devsite-top-logo-row-wrapper">
       <div class="devsite-top-logo-row devsite-full-site-width">
        <button type="button" class="devsite-expand-section-nav devsite-header-icon-button
                                       button-flat material-icons gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Hamburger menu"></button>
        <div class="devsite-product-name-wrapper">
         <span class="devsite-product-name">
          <ul class="devsite-breadcrumb-list">
           <li class="devsite-breadcrumb-item"><a href="https://developers.google.com/speed/pagespeed/" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Upper Header" data-value="1"> PageSpeed Tools </a></li>
           <li class="devsite-breadcrumb-item">
            <div class="devsite-breadcrumb-guillemet material-icons"></div><a href="https://developers.google.com/speed/docs/insights/about" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Upper Header" data-value="2"> Insights </a></li>
          </ul></span>
        </div>
        <div class="devsite-header-upper-tabs"></div>
        <form class="devsite-search-form" action="https://developers.google.com/s/results/" method="GET" id="top-search" search-placeholder="Search">
         <div id="searchbox" class="devsite-searchbox">
          <input placeholder="Search" type="text" class="devsite-search-field devsite-search-query" name="q" value="" autocomplete="off">
          <div class="devsite-search-image material-icons"></div>
         </div>
         <input type="hidden" name="p" id="search_project" value="/speed/docs/insights/" data-project-name="PageSpeed Insights" data-project-path="/speed/docs/insights/" data-query-match="">
         <input type="hidden" class="suggest-project" value="PageSpeed Insights">
         <div class="suggest-project-metadata" data-home_url="/speed/pagespeed/" data-path="/speed/pagespeed/" data-name="PageSpeed Tools"></div>
        </form>
        <a class="devsite-header-link devsite-top-button button gc-analytics-event" href="https://developers.google.com/products/" data-category="Site-Wide Custom Events" data-label="Site header link">
         <div class="devsite-header-link-label">
          All Products
         </div></a>
        <button type="button" class="devsite-search-button devsite-header-icon-button button-flat
                                       material-icons"></button>
        <a href="https://www.google.com/accounts/ServiceLogin?passive=true&amp;continue=https%3A%2F%2Fdevelopers.google.com%2Fspeed%2Farticles%2Foptimizing-javascript%3Frefresh%3D1&amp;service=ahsid" class="devsite-user-signin devsite-top-button button gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Sign in button"> Sign in </a>
       </div>
      </div>
     </div>
     <div class="devsite-collapsible-section">
      <div class="devsite-header-background devsite-full-site-width">
       <div class="devsite-doc-set-nav-row devsite-full-site-width">
        <nav class="devsite-doc-set-nav devsite-nav devsite-overflow-tabs-scroll-wrapper">
         <ul class="devsite-doc-set-nav-tab-list devsite-overflow-tabs-scroll">
          <li class="devsite-doc-set-nav-tab-container"><a href="https://developers.google.com/speed/docs/insights/about" class="devsite-doc-set-nav-active
                devsite-doc-set-nav-tab gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: Guides"> Guides </a></li>
          <li class="devsite-doc-set-nav-tab-container"><a href="https://developers.google.com/speed/docs/insights/v2/reference/" class="
                devsite-doc-set-nav-tab gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: Reference"> Reference </a></li>
          <li class="devsite-doc-set-nav-tab-container"><a href="https://developers.google.com/speed/docs/insights/libraries" class="
                devsite-doc-set-nav-tab gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: Samples"> Samples </a></li>
          <li class="devsite-doc-set-nav-tab-container"><a href="https://developers.google.com/speed/docs/insights/faq" class="
                devsite-doc-set-nav-tab gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: Support"> Support </a></li>
         </ul>
        </nav>
       </div>
      </div>
     </div>
    </header>
    <script>
    if (window.jQuery) {
      $(document).ready(function() {
        if (window.devsite && window.devsite.search) {
          
          window.devsite.search.init('en')
        }
      });
    }
  </script>
   </div>
   <div id="gc-wrapper" itemscope itemtype="http://schema.org/Article">
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;PageSpeed Insights&quot;, &quot;dimension5&quot;: &quot;en&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-24532603-1&quot;}">
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "AR", "language": {"requested": "en", "served": "en"}, "projectName": "PageSpeed Insights", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script> 
    <div class="devsite-site-mask"></div> 
    <nav class="devsite-nav-responsive devsite-nav nocontent" tabindex="0"> 
     <div class="devsite-nav-responsive-tabs-panel"> 
      <nav class="devsite-nav-responsive-tabs devsite-nav"> 
       <ul class="devsite-nav-list"> 
        <li class="devsite-nav-item devsite-nav-item-heading"> <span class="devsite-nav-responsive-forward devsite-nav-responsive-tab devsite-nav-title
                   devsite-nav-active gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Responsive Tab: Guides" tabindex="0"> Guides </span> </li> 
        <li class="devsite-nav-item devsite-nav-item-heading"> <a href="https://developers.google.com/speed/docs/insights/v2/reference/?nav=true" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                " data-category="Site-Wide Custom Events" data-label="Responsive Tab: Reference"> Reference </a> </li> 
        <li class="devsite-nav-item devsite-nav-item-heading"> <a href="https://developers.google.com/speed/docs/insights/libraries" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                " data-category="Site-Wide Custom Events" data-label="Responsive Tab: Samples"> Samples </a> </li> 
        <li class="devsite-nav-item devsite-nav-item-heading"> <a href="https://developers.google.com/speed/docs/insights/faq" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                " data-category="Site-Wide Custom Events" data-label="Responsive Tab: Support"> Support </a> </li> 
        <li class="devsite-nav-item devsite-nav-item-heading"> <a href="https://developers.google.com/products/" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Responsive Tab: all_products"> All Products </a> </li> 
       </ul> 
      </nav> 
     </div> 
     <div class="devsite-nav-responsive-sidebar-panel"> 
      <div class="devsite-nav-responsive-back" tabindex="0"></div> 
      <nav class="devsite-nav-responsive-sidebar"> 
       <ul class="devsite-nav-list">
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/docs/insights/about" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Overview</a></li>
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/docs/insights/v2/getting-started" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Get Started</a></li>
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/docs/insights/v2/first-app" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Write Your First App</a></li>
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/docs/insights/mobile" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Mobile Analysis</a></li>
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/docs/insights/languages" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Languages</a></li>
        <li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Best Practices</span></li>
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/compressing-javascript" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Compressing your JavaScript with Closure Compiler</a></li>
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/optimizing-css" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">CSS: Using every declaration just once</a></li>
        <li class="devsite-nav-item devsite-nav-active"><a href="https://developers.google.com/speed/articles/optimizing-javascript" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Optimizing JavaScript code</a></li>
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/prefetching" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Prefetching resources</a></li>
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/reflow" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Minimizing browser reflow</a></li>
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/spdy-for-mobile" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">SPDY performance on mobile networks</a></li>
        <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/usability-latency" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">UI messaging and perceived latency</a></li>
       </ul> 
      </nav> 
     </div> 
    </nav> 
    <div class="devsite-main-content clearfix"> 
     <nav class="devsite-section-nav devsite-nav nocontent"> 
      <ul class="devsite-nav-list">
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/docs/insights/about" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Overview</a></li>
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/docs/insights/v2/getting-started" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Get Started</a></li>
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/docs/insights/v2/first-app" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Write Your First App</a></li>
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/docs/insights/mobile" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Mobile Analysis</a></li>
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/docs/insights/languages" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Languages</a></li>
       <li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Best Practices</span></li>
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/compressing-javascript" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Compressing your JavaScript with Closure Compiler</a></li>
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/optimizing-css" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">CSS: Using every declaration just once</a></li>
       <li class="devsite-nav-item devsite-nav-active"><a href="https://developers.google.com/speed/articles/optimizing-javascript" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Optimizing JavaScript code</a></li>
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/prefetching" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Prefetching resources</a></li>
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/reflow" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Minimizing browser reflow</a></li>
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/spdy-for-mobile" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">SPDY performance on mobile networks</a></li>
       <li class="devsite-nav-item"><a href="https://developers.google.com/speed/articles/usability-latency" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="1" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">UI messaging and perceived latency</a></li>
      </ul> 
     </nav> 
     <nav class="devsite-page-nav devsite-nav"></nav> 
     <article class="devsite-article"> 
      <article class="devsite-article-inner"> 
       <nav class="devsite-breadcrumb-nav devsite-nav"> 
        <ul class="devsite-breadcrumb-list"> 
         <li class="devsite-breadcrumb-item"> <a href="https://developers.google.com/products/" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="1"> Products </a> </li> 
         <li class="devsite-breadcrumb-item"> 
          <div class="devsite-breadcrumb-guillemet material-icons"></div> <a href="https://developers.google.com/speed/" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="2"> Make the Web Faster </a> </li> 
         <li class="devsite-breadcrumb-item"> 
          <div class="devsite-breadcrumb-guillemet material-icons"></div> <a href="https://developers.google.com/speed/pagespeed/" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="3"> PageSpeed </a> </li> 
         <li class="devsite-breadcrumb-item"> 
          <div class="devsite-breadcrumb-guillemet material-icons"></div> <a href="https://developers.google.com/speed/docs/insights/about" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="4"> Insights </a> </li> 
         <li class="devsite-breadcrumb-item"> 
          <div class="devsite-breadcrumb-guillemet material-icons"></div> <a href="https://developers.google.com/speed/docs/insights/about" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="5"> Guides </a> </li> 
        </ul> 
       </nav> 
       <h1 itemprop="name" class="devsite-page-title"> Optimizing JavaScript code </h1> 
       <nav class="devsite-page-nav-embedded devsite-nav"></nav> 
       <div class="devsite-article-body clearfix
            " itemprop="articleBody"> 
        <p>Authors: Gregory Baker, Software Engineer on GMail &amp; Erik Arvidsson, Software Engineer on Google Chrome</p> 
        <p>Recommended experience: Working knowledge of JavaScript</p> 
        <p>Client-side scripting can make your application dynamic and active, but the browser's interpretation of this code can itself introduce inefficiencies, and the performance of different constructs varies from client to client. Here we discuss a few tips and best practices to optimize your JavaScript code.</p> 
        <h3>Defining class methods</h3> 
        <p>The following is inefficient, as each time a instance of <code>baz.Bar</code> is constructed, a new function and closure is created for foo:</p> 
        <code>baz.Bar = function() {<br> &nbsp;&nbsp;// constructor body<br> &nbsp;&nbsp;this.foo = function() {<br> &nbsp;&nbsp;&nbsp;&nbsp;// method body<br> &nbsp;&nbsp;};<br> }</code> 
        <p>The preferred approach is:</p> 
        <code>baz.Bar = function() {<br> &nbsp;&nbsp;// constructor body<br> };<br> <br> baz.Bar.prototype.foo = function() {<br> &nbsp;&nbsp;// method body<br> };</code> 
        <p>With this approach, no matter how many instances of <code>baz.Bar</code> are constructed, only a single function is ever created for <code>foo</code>, and no closures are created.</p> 
        <h3>Initializing instance variables</h3> 
        <p>Place instance variable declaration/initialization on the prototype for instance variables with value type (rather than reference type) initialization values (i.e. values of type number, Boolean, null, undefined, or string). This avoids unnecessarily running the initialization code each time the constructor is called. (This can't be done for instance variables whose initial value is dependent on arguments to the constructor, or some other state at time of construction.)</p> 
        <p>For example, instead of:</p> 
        <code>foo.Bar = function() {<br> &nbsp;&nbsp;this.prop1_ = 4;<br> &nbsp;&nbsp;this.prop2_ = true;<br> &nbsp;&nbsp;this.prop3_ = [];<br> &nbsp;&nbsp;this.prop4_ = 'blah';<br> };</code> 
        <p>Use:</p> 
        <code>foo.Bar = function() {<br> &nbsp;&nbsp;this.prop3_ = [];<br> };<br> <br> foo.Bar.prototype.prop1_ = 4;<br> <br> foo.Bar.prototype.prop2_ = true;<br> <br> foo.Bar.prototype.prop4_ = 'blah';</code> 
        <h3>Avoiding pitfalls with closures</h3> 
        <p> Closures are a powerful and useful feature of JavaScript; however, they have several drawbacks, including: </p> 
        <ul> 
         <li>They are the most common source of memory leaks.</li> 
         <li><p>Creating a closure is significantly slower than creating an inner function without a closure, and much slower than reusing a static function. For example:</p> <code>function setupAlertTimeout() {<br> &nbsp;&nbsp;var msg = 'Message to alert';<br> &nbsp;&nbsp;window.setTimeout(function() { alert(msg); }, 100);<br> }</code> <p>is slower than:</p> <code>function setupAlertTimeout() {<br> &nbsp;&nbsp;window.setTimeout(function() {<br> &nbsp;&nbsp;&nbsp;&nbsp;var msg = 'Message to alert';<br> &nbsp;&nbsp;&nbsp;&nbsp;alert(msg);<br> &nbsp;&nbsp;}, 100);<br> }</code> <p>which is slower than:</p> <code>function alertMsg() {<br> &nbsp;&nbsp;var msg = 'Message to alert';<br> &nbsp;&nbsp;alert(msg);<br> }<br> <br> function setupAlertTimeout() {<br> &nbsp;&nbsp;window.setTimeout(alertMsg, 100);<br> }</code> </li> 
         <li><p>They add a level to the scope chain. When the browser resolves properties, each level of the scope chain must be checked. In the following example:</p> <code>var a = 'a';<br> <br> function createFunctionWithClosure() {<br> &nbsp;&nbsp;var b = 'b';<br> &nbsp;&nbsp;return function () {<br> &nbsp;&nbsp;&nbsp;&nbsp;var c = 'c';<br> &nbsp;&nbsp;&nbsp;&nbsp;a;<br> &nbsp;&nbsp;&nbsp;&nbsp;b;<br> &nbsp;&nbsp;&nbsp;&nbsp;c;<br> &nbsp;&nbsp;};<br> }<br> <br> var f = createFunctionWithClosure();<br> f();</code> <p>when <code>f</code> is invoked, referencing <code>a</code> is slower than referencing <code>b</code>, which is slower than referencing <code>c</code>.</p> </li> 
        </ul> 
        <p>See <a href="http://blogs.msdn.com/ie/archive/2007/01/04/ie-jscript-performance-recommendations-part-3-javascript-code-inefficiencies.aspx">IE+JScript Performance Recommendations Part 3: JavaScript Code inefficiencies</a> for information on when to use closures with IE.</p> 
        <h3>Avoiding <code>with</code></h3> 
        <p>Avoid using <code>with</code> in your code. It has a negative impact on performance, as it modifies the scope chain, making it more expensive to look up variables in other scopes.</p> 
        <h3>Avoiding browser memory leaks</h3> 
        <p> Memory leaks are an all too common problem with web applications, and can result in huge performance hits. As the memory usage of the browser grows, your web application, along with the rest of the user's system, slows down. The most common memory leaks for web applications involve circular references between the JavaScript script engine and the browsers' C++ objects' implementing the DOM (e.g. between the JavaScript script engine and Internet Explorer's COM infrastructure, or between the JavaScript engine and Firefox XPCOM infrastructure). </p> 
        <p>Here are some rules of thumb for avoiding memory leaks:</p> 
        <h4>Use an event system for attaching event handlers</h4> 
        <p>The most common circular reference pattern [ DOM element --&gt; event handler --&gt; closure scope --&gt; DOM ] element is discussed in this <a href="http://blogs.msdn.com/ericlippert/archive/2003/09/17/53028.aspx">MSDN blog post</a>. To avoid this problem, use one of the well-tested event systems for attaching event handlers, such as those in <a href="http://code.google.com/p/doctype/source/browse/trunk/goog/events/events.js#348">Google doctype</a>, <a href="http://api.dojotoolkit.org/jsdoc/1.3/dojo.connec">Dojo</a>, or <a href="http://docs.jquery.com/Events/bind#typedatafn">JQuery</a>.</p> 
        <p>In addition, using inline event handlers can lead to another kind of leak in IE. This is not the common circular reference type leak, but rather a leak of an internal temporary anonymous script object. For details, see the section on "DOM Insertion Order Leak Model" in <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/ietechcol/dnwebgen/ie_leak_patterns.asp">Understanding and Solving Internet Explorer Leak Patterns</a> and and an example in this <a href="http://www.javascriptkit.com/javatutors/closuresleak/index.shtml">JavaScript Kit tutorial</a>.</p> 
        <h4>Avoid expando properties</h4> 
        <p>Expando properties are arbitrary JavaScript properties on DOM elements and are a common source of circular references. You can use expando properties without introducing memory leaks, but it is pretty easy to introduce one by accident. The leak pattern here is [ DOM element --&gt; via expando--&gt; intermediary object --&gt; DOM element ]. The best thing to do is to just avoid using them. If you do use them, only use values with primitive types. If you do use non-primitive values, nullify the expando property when it is no longer needed. See the section on "Circular References" in <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/ietechcol/dnwebgen/ie_leak_patterns.asp">Understanding and Solving Internet Explorer Leak Patterns</a>.</p> 
       </div> 
       <div class="devsite-content-footer nocontent"> 
        <p>Except as otherwise noted, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see our <a href="https://developers.google.com/terms/site-policies">Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p> 
        <p class="devsite-content-footer-date" itemprop="datePublished" content="2016-02-03T20:16:12.979900"> Last updated February 3, 2016. </p> 
       </div> 
      </article> 
     </article> 
    </div> 
    <footer class="devsite-footer-linkboxes nocontent
               
               devsite-footer-linkboxes-with-sites">
     <nav class="devsite-full-site-width">
      <ul class="devsite-footer-linkboxes-list">
       <li class="devsite-footer-linkbox "><h3 class="devsite-footer-linkbox-heading">Product Info</h3>
        <ul class="devsite-footer-linkbox-list">
         <li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/speed/docs/insights/terms" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Content Page Footer Linkbox"> Terms of Service </a></li>
         <li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/speed/docs/insights/release_notes" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Content Page Footer Linkbox"> Release Notes </a></li>
         <li class="devsite-footer-linkbox-item"><a href="http://console.developers.google.com" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Content Page Footer Linkbox"> Developers Console </a></li>
        </ul></li>
       <li class="devsite-footer-linkbox "><h3 class="devsite-footer-linkbox-heading">Client Libraries</h3>
        <ul class="devsite-footer-linkbox-list">
         <li class="devsite-footer-linkbox-item"><a href="https://developers.google.com/speed/docs/insights/libraries" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Content Page Footer Linkbox"> Libraries and Samples </a></li>
        </ul></li>
       <li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">Developer Consoles</h3>
        <ul class="devsite-footer-linkbox-list">
         <li class="devsite-footer-linkbox-item"><a href="//console.developers.google.com" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Console"> Google API Console </a></li>
         <li class="devsite-footer-linkbox-item"><a href="//console.cloud.google.com" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Google Cloud Platform Console"> Google Cloud Platform Console </a></li>
         <li class="devsite-footer-linkbox-item"><a href="//play.google.com/apps/publish/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Google Play Console"> Google Play Console </a></li>
         <li class="devsite-footer-linkbox-item"><a href="//console.firebase.google.com" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Firebase Console"> Firebase Console </a></li>
         <li class="devsite-footer-linkbox-item"><a href="//cast.google.com/publish/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Cast SDK Developer Console"> Cast SDK Developer Console </a></li>
         <li class="devsite-footer-linkbox-item"><a href="//chrome.google.com/webstore/developer/dashboard" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Chrome Web Store Developer Dashboard"> Chrome Web Store Dashboard </a></li>
        </ul></li>
       <li class="devsite-footer-linkbox devsite-footer-linkbox-sites"><a href="https://developers.google.com/" class="gc-analytics-event devsite-footer-linkbox-logo-link" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link"><img class="devsite-footer-linkbox-logo" src="https://developers.google.com/_static/772880e9e9/images/redesign-14/lockup-color-knockout.png"></a>
        <ul class="devsite-footer-linkbox-list">
         <li class="devsite-footer-linkbox-item"><a href="//developer.android.com/index.html" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Android Link"> Android </a></li>
         <li class="devsite-footer-linkbox-item"><a href="//developer.chrome.com/home" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Chrome Link"> Chrome </a></li>
         <li class="devsite-footer-linkbox-item"><a href="//firebase.google.com" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Firebase Link"> Firebase </a></li>
         <li class="devsite-footer-linkbox-item"><a href="//cloud.google.com" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Cloud Link"> Google Cloud Platform </a></li>
         <li class="devsite-footer-linkbox-item"><a href="//developers.google.com/products/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Products Link"> All Products </a></li>
        </ul></li>
      </ul>
     </nav>
    </footer>
    <footer class="devsite-utility-footer">
     <nav class="devsite-utility-footer-nav devsite-nav devsite-full-site-width">
      <div class="devsite-utility-footer-nav-left">
       <form class="devsite-utility-footer-language" action="/i18n/setlang/" method="post">
        <input type="hidden" name="xsrf_token" value="coTkJhhP-8fUEkxilAot9R2QfxvY0GYaEPLaGO3kdj06MTUwNzAzOTQyMjg3NTIxMA">
        <input type="hidden" name="next" value="/speed/articles/optimizing-javascript">
        <select class="devsite-utility-footer-language-select kd-select" name="language" track-type="languageSelector" track-name="click"><option value="id" track-type="languageSelector" track-name="changed" track-metadata-original-language="en" track-metadata-selected-language="id"> Bahasa Indonesia </option><option value="de" track-type="languageSelector" track-name="changed" track-metadata-original-language="en" track-metadata-selected-language="de"> Deutsch </option><option value="en" selected track-type="languageSelector" track-name="changed" track-metadata-original-language="en" track-metadata-selected-language="en"> English </option><option value="es" track-type="languageSelector" track-name="changed" track-metadata-original-language="en" track-metadata-selected-language="es"> español </option><option value="fr" track-type="languageSelector" track-name="changed" track-metadata-original-language="en" track-metadata-selected-language="fr"> français </option><option value="pt-br" track-type="languageSelector" track-name="changed" track-metadata-original-language="en" track-metadata-selected-language="pt-br"> Português Brasileiro </option><option value="ru" track-type="languageSelector" track-name="changed" track-metadata-original-language="en" track-metadata-selected-language="ru"> ??????? </option><option value="ja" track-type="languageSelector" track-name="changed" track-metadata-original-language="en" track-metadata-selected-language="ja"> ??? </option><option value="zh-cn" track-type="languageSelector" track-name="changed" track-metadata-original-language="en" track-metadata-selected-language="zh-cn"> ???? </option><option value="ko" track-type="languageSelector" track-name="changed" track-metadata-original-language="en" track-metadata-selected-language="ko"> ??? </option></select>
       </form>
       <span class="devsite-utility-footer-links"><a class="devsite-utility-footer-link gc-analytics-event" href="https://developers.google.com/terms/site-terms" data-category="Site-Wide Custom Events" data-label="Footer terms link" data-footer-link-id="terms">Terms </a><a class="devsite-utility-footer-link gc-analytics-event" href="https://www.google.com/policies/privacy/" data-category="Site-Wide Custom Events" data-label="Footer privacy link" data-footer-link-id="privacy">Privacy </a></span>
      </div>
      <div class="devsite-utility-footer-nav-right">
       <div class="devsite-utility-footer-newsletter-signup-text">
         Sign up for the Google Developers newsletter 
       </div>
       <a class="button button-primary devsite-utility-footer-newsletter-signup-button" href="https://services.google.com/fb/forms/googledevelopersnewsletter/?utm_medium=referral&amp;utm_source=google-products&amp;utm_team=googledevs&amp;utm_campaign=201611-newsletter-launch"> Subscribe </a>
      </div>
     </nav>
    </footer>
   </div>
   <script async defer src="//www.gstatic.com/feedback/api.js"></script>
   <script src="https://developers.google.com/_static/772880e9e9/js/jquery_ui-bundle.js"></script>
   <script src="https://developers.google.com/_static2/772880e9e9/jsi18n/"></script>
   <script src="https://developers.google.com/_static/772880e9e9/js/script_foot_closure.js"></script>
   <script src="https://developers.google.com/_static/772880e9e9/js/script_foot.js"></script>
   <script>
        (function($) {
          
          devsite.devsite.Init($, {'FULL_SITE_SEARCH_ENABLED': 1, 'ENABLE_BLOCKED_VIDEO_PLACEHOLDER': 0, 'VERSION_HASH': '772880e9e9', 'SITE_NAME': 'devsite', 'HISTORY_ENABLED': 1, 'SUBPATH': '', 'ENABLE_BLOCKED_LINK_TOOLTIP': 0, 'ALLOWED_HOSTS': ['.android.com', '.api.ai', '.apigee.com', '.appspot.com', '.gonglchuangl.net', '.google.cn', '.google.com', '.googleplex.com', '.nest.com', '.openthread.io', '.orbitera.com', '.tensorflow.org'], 'BLOCK_RSS_FEEDS': 0, 'SCRIPTSAFE_DOMAIN': 'google-developers.appspot.com'},
                               '[]','en',
                               true, '',
                               {"f62218c009ec029abef196bba5aa34cf": false, "039e5d84b87fd75807ffb37b7f1bbf2c": true, "098dafe57affddc137df300142652cfd": false, "cb025a64a50094835616312f4774a53d": true, "c95bf81627eb648c2345aec06a66200a": true, "51470233c56fc1fde50f00b73c52b216": false, "d169d485cf24243a263783dbe42029b1": false, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true}, '/speed/docs/insights/',
                               'https://developers.google.com/');
        })(jQuery);

        
        devsite.localInit = function() {
          
        };

      </script>
   <script>
      $('.devsite-utility-footer-language-select').each(function() {
        $(this).change(function(){$('.devsite-utility-footer-language').submit();});
      });
      </script>
  </div>
  <span id="devsite-request-elapsed" data-request-elapsed="197.579860687"></span> 
 </body>
</html>